{"ast":null,"code":"import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\n\nvar VirtualScroll =\n/** @class */\nfunction () {\n  function VirtualScroll(parent) {\n    this.translateY = 0;\n    this.itemSize = 60;\n    this.bufferCount = 3;\n    this.renderedLength = 0;\n    this.averageRowHeight = 0;\n    this.startIndex = 0;\n    this.isScrollHeightNull = true;\n    this.previousTop = 0;\n    this.parent = parent;\n    this.addEventListener();\n  }\n\n  VirtualScroll.prototype.addEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n  };\n\n  VirtualScroll.prototype.removeEventListener = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.parent.off(events.virtualScroll, this.virtualScrolling);\n  };\n\n  VirtualScroll.prototype.getRenderedCount = function () {\n    this.setItemSize();\n    return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n  };\n\n  VirtualScroll.prototype.triggerScrolling = function () {\n    this.parent.showSpinner(); // tslint:disable-next-line:no-any\n\n    var scheduleObj = this.parent;\n    var adaptor = 'interopAdaptor';\n    var invokeMethodAsync = 'invokeMethodAsync';\n    scheduleObj[adaptor][invokeMethodAsync]('OnContentUpdate', this.startIndex);\n  };\n\n  VirtualScroll.prototype.setTranslateValue = function () {\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    this.renderVirtualTrackHeight(conWrap, resWrap);\n    this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n  };\n\n  VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n    this.parent.resourceBase.setExpandedResources();\n\n    if (this.isScrollHeightNull) {\n      var wrap = createElement('div', {\n        className: cls.VIRTUAL_TRACK_CLASS\n      });\n      var resWrap = [].slice.call(resourceWrap.querySelectorAll('table td'));\n      var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n      var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n      this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n        return resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1;\n      });\n      this.setItemSize();\n      wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n      this.isScrollHeightNull = false;\n      var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n\n      if (!isNullOrUndefined(virtual)) {\n        remove(virtual);\n      }\n\n      contentWrap.appendChild(wrap);\n    }\n  };\n\n  VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n    var wrap = createElement('div', {\n      className: cls.VIRTUAL_TRACK_CLASS\n    });\n    wrap.style.height = this.parent.resourceBase.expandedResources.length * this.itemSize + 'px';\n    contentWrap.appendChild(wrap);\n  };\n\n  VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n    var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n    var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n\n    if (lastRenderIndex !== lastResourceIndex) {\n      var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n      this.renderedLength = conTable.querySelector('tbody').children.length;\n      virtual.style.height = conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - this.renderedLength) * conTable.offsetHeight / this.renderedLength + 'px';\n    } else {\n      virtual.style.height = '';\n    }\n\n    this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n  };\n\n  VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n    var resourceCount = this.parent.resourceBase.renderedResources.length;\n\n    if (resourceCount !== this.getRenderedCount()) {\n      wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n      var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n      var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n      var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n      this.translateY = 0;\n      this.setTranslate(resWrap, conWrap, eventWrap);\n    } else {\n      var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n      var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n      var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n      renderedResConut = renderedResConut > this.parent.resourceBase.expandedResources.length ? this.parent.resourceBase.expandedResources.length : renderedResConut;\n      wrap.style.height = renderedResConut * this.itemSize + 'px';\n    }\n  };\n\n  VirtualScroll.prototype.setItemSize = function () {\n    this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n  };\n\n  VirtualScroll.prototype.beforeInvoke = function (resWrap, conWrap, eventWrap, timeIndicator) {//code\n  };\n\n  VirtualScroll.prototype.virtualScrolling = function () {\n    var _this = this;\n\n    this.parent.quickPopup.quickPopupHide();\n    this.parent.quickPopup.morePopup.hide();\n    var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n    var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n    var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n    this.renderedLength = resWrap.querySelector('tbody').children.length;\n    var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n    var scrollHeight = this.parent.rowAutoHeight ? conTable.offsetHeight - conWrap.offsetHeight : this.bufferCount * this.itemSize;\n    addClass([conWrap], 'e-transition');\n    var resCollection = [];\n\n    if (conWrap.scrollTop - this.translateY < 0) {\n      resCollection = this.upScroll(conWrap, firstTDIndex);\n      this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n    } else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n      resCollection = this.downScroll(conWrap, firstTDIndex);\n\n      if (!(this.previousTop === conWrap.scrollTop)) {\n        this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n      }\n    }\n\n    if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n      this.parent.showSpinner();\n      this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n      this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n\n      if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n        this.parent.dragAndDropModule.navigationWrapper();\n      }\n\n      window.clearTimeout(this.timeValue);\n      this.timeValue = window.setTimeout(function () {\n        _this.parent.hideSpinner();\n\n        _this.parent.notify(events.dataReady, {});\n      }, 250);\n    }\n  };\n\n  VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n    var index = 0;\n    index = ~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize) - this.renderedLength;\n\n    if (this.parent.rowAutoHeight) {\n      index = index > firstTDIndex ? firstTDIndex - this.bufferCount : index;\n    }\n\n    index = index > 0 ? index : 0;\n    var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n    this.parent.resourceBase.renderedResources = prevSetCollection;\n\n    if (firstTDIndex === 0) {\n      this.translateY = conWrap.scrollTop;\n    } else {\n      var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n      this.translateY = conWrap.scrollTop - this.bufferCount * height > 0 ? conWrap.scrollTop - this.bufferCount * height : 0;\n    }\n\n    return prevSetCollection;\n  };\n\n  VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n    var lastResource = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n    var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n\n    if (lastResource === lastResourceIndex) {\n      return null;\n    }\n\n    var nextSetResIndex = 0;\n    var height = this.parent.rowAutoHeight ? this.averageRowHeight : this.itemSize;\n    nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n\n    if (this.parent.rowAutoHeight) {\n      nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n      nextSetResIndex = nextSetResIndex > firstTDIndex + this.bufferCount ? nextSetResIndex : firstTDIndex + this.bufferCount;\n    }\n\n    var lastIndex = nextSetResIndex + this.renderedLength;\n    lastIndex = lastIndex > this.parent.resourceBase.expandedResources.length ? nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n    var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n    this.translateY = conWrap.scrollTop;\n    return nextSetCollection;\n  };\n\n  VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n    var renderedLenth = resWrap.querySelector('tbody').children.length;\n\n    for (var i = 0; i < renderedLenth; i++) {\n      remove(resWrap.querySelector('tbody tr'));\n      remove(conWrap.querySelector('tbody tr'));\n      remove(eventWrap.querySelector('div'));\n    }\n\n    this.parent.resourceBase.renderedResources = resCollection;\n    var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n    var contentRows = this.parent.activeView.getContentRows();\n    var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n    append(resourceRows, resWrap.querySelector('tbody'));\n    append(contentRows, conWrap.querySelector('tbody'));\n    append(eventRows, eventWrap);\n  };\n\n  VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n    return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n  };\n\n  VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n    setStyleAttribute(resWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(conWrap.querySelector('table'), {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n    setStyleAttribute(eventWrap, {\n      transform: \"translateY(\" + this.translateY + \"px)\"\n    });\n\n    if (!isNullOrUndefined(timeIndicator)) {\n      setStyleAttribute(timeIndicator, {\n        transform: \"translateY(\" + this.translateY + \"px)\"\n      });\n    }\n  };\n\n  VirtualScroll.prototype.destroy = function () {\n    this.removeEventListener();\n  };\n\n  return VirtualScroll;\n}();\n\nexport { VirtualScroll };","map":{"version":3,"sources":["C:/Users/ilani/project/volunteers/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/virtual-scroll.js"],"names":["append","addClass","remove","isNullOrUndefined","setStyleAttribute","createElement","events","cls","util","VirtualScroll","parent","translateY","itemSize","bufferCount","renderedLength","averageRowHeight","startIndex","isScrollHeightNull","previousTop","addEventListener","prototype","isDestroyed","on","virtualScroll","virtualScrolling","removeEventListener","off","getRenderedCount","setItemSize","Math","ceil","element","clientHeight","triggerScrolling","showSpinner","scheduleObj","adaptor","invokeMethodAsync","setTranslateValue","resWrap","querySelector","RESOURCE_COLUMN_WRAP_CLASS","conWrap","CONTENT_WRAP_CLASS","eventWrap","EVENT_TABLE_CLASS","timeIndicator","CURRENT_TIMELINE_CLASS","renderVirtualTrackHeight","setTranslate","contentWrap","resourceWrap","resourceBase","setExpandedResources","wrap","className","VIRTUAL_TRACK_CLASS","slice","call","querySelectorAll","startIndex_1","parseInt","getAttribute","endIndex_1","length","renderedResources","expandedResources","filter","resource","groupIndex","style","height","virtual","appendChild","renderVirtualTrack","updateVirtualScrollHeight","lastResourceIndex","lastRenderIndex","conTable","CONTENT_TABLE_CLASS","children","offsetHeight","updateVirtualTrackHeight","resourceCount","lastCollIndex","renderedResConut","getElementHeightFromClass","activeView","WORK_CELLS_CLASS","beforeInvoke","_this","quickPopup","quickPopupHide","morePopup","hide","firstTDIndex","scrollHeight","rowAutoHeight","resCollection","scrollTop","upScroll","downScroll","updateContent","dragAndDropModule","actionObj","action","navigationWrapper","window","clearTimeout","timeValue","setTimeout","hideSpinner","notify","dataReady","index","prevSetCollection","getBufferCollection","lastResource","nextSetResIndex","lastIndex","nextSetCollection","renderedLenth","i","resourceRows","getContentRows","contentRows","eventRows","getEventRows","endIndex","transform","destroy"],"mappings":"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","sourcesContent":["import { append, addClass, remove, isNullOrUndefined, setStyleAttribute, createElement } from '@syncfusion/ej2-base';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Virtual Scroll\n */\nvar VirtualScroll = /** @class */ (function () {\n    function VirtualScroll(parent) {\n        this.translateY = 0;\n        this.itemSize = 60;\n        this.bufferCount = 3;\n        this.renderedLength = 0;\n        this.averageRowHeight = 0;\n        this.startIndex = 0;\n        this.isScrollHeightNull = true;\n        this.previousTop = 0;\n        this.parent = parent;\n        this.addEventListener();\n    }\n    VirtualScroll.prototype.addEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.on(events.virtualScroll, this.virtualScrolling, this);\n    };\n    VirtualScroll.prototype.removeEventListener = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.parent.off(events.virtualScroll, this.virtualScrolling);\n    };\n    VirtualScroll.prototype.getRenderedCount = function () {\n        this.setItemSize();\n        return Math.ceil(this.parent.element.clientHeight / this.itemSize) + this.bufferCount;\n    };\n    VirtualScroll.prototype.triggerScrolling = function () {\n        this.parent.showSpinner();\n        // tslint:disable-next-line:no-any\n        var scheduleObj = this.parent;\n        var adaptor = 'interopAdaptor';\n        var invokeMethodAsync = 'invokeMethodAsync';\n        scheduleObj[adaptor][invokeMethodAsync]('OnContentUpdate', this.startIndex);\n    };\n    VirtualScroll.prototype.setTranslateValue = function () {\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        this.renderVirtualTrackHeight(conWrap, resWrap);\n        this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n    };\n    VirtualScroll.prototype.renderVirtualTrackHeight = function (contentWrap, resourceWrap) {\n        this.parent.resourceBase.setExpandedResources();\n        if (this.isScrollHeightNull) {\n            var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n            var resWrap = [].slice.call((resourceWrap).querySelectorAll('table td'));\n            var startIndex_1 = parseInt(resWrap[0].getAttribute('data-group-index'), 10);\n            var endIndex_1 = parseInt(resWrap[resWrap.length - 1].getAttribute('data-group-index'), 10);\n            this.parent.resourceBase.renderedResources = this.parent.resourceBase.expandedResources.filter(function (resource) {\n                return (resource.groupIndex >= startIndex_1 && resource.groupIndex <= endIndex_1);\n            });\n            this.setItemSize();\n            wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n            this.isScrollHeightNull = false;\n            var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n            if (!isNullOrUndefined(virtual)) {\n                remove(virtual);\n            }\n            contentWrap.appendChild(wrap);\n        }\n    };\n    VirtualScroll.prototype.renderVirtualTrack = function (contentWrap) {\n        var wrap = createElement('div', { className: cls.VIRTUAL_TRACK_CLASS });\n        wrap.style.height = (this.parent.resourceBase.expandedResources.length * this.itemSize) + 'px';\n        contentWrap.appendChild(wrap);\n    };\n    VirtualScroll.prototype.updateVirtualScrollHeight = function () {\n        var virtual = this.parent.element.querySelector('.' + cls.VIRTUAL_TRACK_CLASS);\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        var lastRenderIndex = this.parent.resourceBase.renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        if (lastRenderIndex !== lastResourceIndex) {\n            var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n            this.renderedLength = conTable.querySelector('tbody').children.length;\n            virtual.style.height = (conTable.offsetHeight + (this.parent.resourceBase.expandedResources.length - (this.renderedLength)) *\n                conTable.offsetHeight / this.renderedLength) + 'px';\n        }\n        else {\n            virtual.style.height = '';\n        }\n        this.averageRowHeight = virtual.offsetHeight / this.parent.resourceBase.expandedResources.length;\n    };\n    VirtualScroll.prototype.updateVirtualTrackHeight = function (wrap) {\n        var resourceCount = this.parent.resourceBase.renderedResources.length;\n        if (resourceCount !== this.getRenderedCount()) {\n            wrap.style.height = this.parent.element.querySelector('.e-content-wrap').clientHeight + 'px';\n            var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n            var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n            this.translateY = 0;\n            this.setTranslate(resWrap, conWrap, eventWrap);\n        }\n        else {\n            var lastRenderIndex = this.parent.resourceBase.renderedResources[resourceCount - 1].groupIndex;\n            var lastCollIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n            var renderedResConut = resourceCount + (lastCollIndex - lastRenderIndex);\n            renderedResConut = (renderedResConut > this.parent.resourceBase.expandedResources.length) ?\n                this.parent.resourceBase.expandedResources.length : renderedResConut;\n            wrap.style.height = (renderedResConut * this.itemSize) + 'px';\n        }\n    };\n    VirtualScroll.prototype.setItemSize = function () {\n        this.itemSize = util.getElementHeightFromClass(this.parent.activeView.element, cls.WORK_CELLS_CLASS) || this.itemSize;\n    };\n    VirtualScroll.prototype.beforeInvoke = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        //code\n    };\n    VirtualScroll.prototype.virtualScrolling = function () {\n        var _this = this;\n        this.parent.quickPopup.quickPopupHide();\n        this.parent.quickPopup.morePopup.hide();\n        var resWrap = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n        var conWrap = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var eventWrap = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CURRENT_TIMELINE_CLASS);\n        var conTable = this.parent.element.querySelector('.' + cls.CONTENT_TABLE_CLASS);\n        this.renderedLength = resWrap.querySelector('tbody').children.length;\n        var firstTDIndex = parseInt(resWrap.querySelector('tbody td').getAttribute('data-group-index'), 10);\n        var scrollHeight = this.parent.rowAutoHeight ?\n            (conTable.offsetHeight - conWrap.offsetHeight) : this.bufferCount * this.itemSize;\n        addClass([conWrap], 'e-transition');\n        var resCollection = [];\n        if ((conWrap.scrollTop) - this.translateY < 0) {\n            resCollection = this.upScroll(conWrap, firstTDIndex);\n            this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n        }\n        else if (conWrap.scrollTop - this.translateY > scrollHeight) {\n            resCollection = this.downScroll(conWrap, firstTDIndex);\n            if (!(this.previousTop === conWrap.scrollTop)) {\n                this.beforeInvoke(resWrap, conWrap, eventWrap, timeIndicator);\n            }\n        }\n        if (!isNullOrUndefined(resCollection) && resCollection.length > 0) {\n            this.parent.showSpinner();\n            this.updateContent(resWrap, conWrap, eventWrap, resCollection);\n            this.setTranslate(resWrap, conWrap, eventWrap, timeIndicator);\n            if (this.parent.dragAndDropModule && this.parent.dragAndDropModule.actionObj.action === 'drag') {\n                this.parent.dragAndDropModule.navigationWrapper();\n            }\n            window.clearTimeout(this.timeValue);\n            this.timeValue = window.setTimeout(function () { _this.parent.hideSpinner(); _this.parent.notify(events.dataReady, {}); }, 250);\n        }\n    };\n    VirtualScroll.prototype.upScroll = function (conWrap, firstTDIndex) {\n        var index = 0;\n        index = (~~(conWrap.scrollTop / this.itemSize) + Math.ceil(conWrap.clientHeight / this.itemSize)) - this.renderedLength;\n        if (this.parent.rowAutoHeight) {\n            index = (index > firstTDIndex) ? firstTDIndex - this.bufferCount : index;\n        }\n        index = (index > 0) ? index : 0;\n        var prevSetCollection = this.getBufferCollection(index, index + this.renderedLength);\n        this.parent.resourceBase.renderedResources = prevSetCollection;\n        if (firstTDIndex === 0) {\n            this.translateY = conWrap.scrollTop;\n        }\n        else {\n            var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n            this.translateY = (conWrap.scrollTop - (this.bufferCount * height) > 0) ?\n                conWrap.scrollTop - (this.bufferCount * height) : 0;\n        }\n        return prevSetCollection;\n    };\n    VirtualScroll.prototype.downScroll = function (conWrap, firstTDIndex) {\n        var lastResource = this.parent.resourceBase.\n            renderedResources[this.parent.resourceBase.renderedResources.length - 1].groupIndex;\n        var lastResourceIndex = this.parent.resourceBase.expandedResources[this.parent.resourceBase.expandedResources.length - 1].groupIndex;\n        if (lastResource === lastResourceIndex) {\n            return null;\n        }\n        var nextSetResIndex = 0;\n        var height = (this.parent.rowAutoHeight) ? this.averageRowHeight : this.itemSize;\n        nextSetResIndex = ~~(conWrap.scrollTop / this.itemSize);\n        if (this.parent.rowAutoHeight) {\n            nextSetResIndex = ~~((conWrap.scrollTop - this.translateY) / this.averageRowHeight) + firstTDIndex;\n            nextSetResIndex = (nextSetResIndex > firstTDIndex + this.bufferCount) ? nextSetResIndex : firstTDIndex + this.bufferCount;\n        }\n        var lastIndex = nextSetResIndex + this.renderedLength;\n        lastIndex = (lastIndex > this.parent.resourceBase.expandedResources.length) ?\n            nextSetResIndex + (this.parent.resourceBase.expandedResources.length - nextSetResIndex) : lastIndex;\n        var nextSetCollection = this.getBufferCollection(lastIndex - this.renderedLength, lastIndex);\n        this.translateY = conWrap.scrollTop;\n        return nextSetCollection;\n    };\n    VirtualScroll.prototype.updateContent = function (resWrap, conWrap, eventWrap, resCollection) {\n        var renderedLenth = resWrap.querySelector('tbody').children.length;\n        for (var i = 0; i < renderedLenth; i++) {\n            remove(resWrap.querySelector('tbody tr'));\n            remove(conWrap.querySelector('tbody tr'));\n            remove(eventWrap.querySelector('div'));\n        }\n        this.parent.resourceBase.renderedResources = resCollection;\n        var resourceRows = this.parent.resourceBase.getContentRows(resCollection);\n        var contentRows = this.parent.activeView.getContentRows();\n        var eventRows = this.parent.activeView.getEventRows(resCollection.length);\n        append(resourceRows, resWrap.querySelector('tbody'));\n        append(contentRows, conWrap.querySelector('tbody'));\n        append(eventRows, eventWrap);\n    };\n    VirtualScroll.prototype.getBufferCollection = function (startIndex, endIndex) {\n        return this.parent.resourceBase.expandedResources.slice(startIndex, endIndex);\n    };\n    VirtualScroll.prototype.setTranslate = function (resWrap, conWrap, eventWrap, timeIndicator) {\n        setStyleAttribute(resWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(conWrap.querySelector('table'), {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        setStyleAttribute(eventWrap, {\n            transform: \"translateY(\" + this.translateY + \"px)\"\n        });\n        if (!isNullOrUndefined(timeIndicator)) {\n            setStyleAttribute(timeIndicator, {\n                transform: \"translateY(\" + this.translateY + \"px)\"\n            });\n        }\n    };\n    VirtualScroll.prototype.destroy = function () {\n        this.removeEventListener();\n    };\n    return VirtualScroll;\n}());\nexport { VirtualScroll };\n"]},"metadata":{},"sourceType":"module"}