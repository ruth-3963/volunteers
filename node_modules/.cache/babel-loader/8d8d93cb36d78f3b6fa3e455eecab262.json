{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Property, ChildProperty, Event, append, compile, isBlazor } from '@syncfusion/ej2-base';\nimport { EventHandler, Touch, Browser, Animation as PopupAnimation } from '@syncfusion/ej2-base';\nimport { isNullOrUndefined, getUniqueID, formatUnit } from '@syncfusion/ej2-base';\nimport { attributes, closest, removeClass, addClass, remove, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, Complex, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { Popup } from '../popup/popup';\nimport { calculatePosition } from '../common/position';\nimport { isCollide, fit } from '../common/collision';\nvar TOUCHEND_HIDE_DELAY = 1500;\nvar TAPHOLD_THRESHOLD = 500;\nvar SHOW_POINTER_TIP_GAP = 0;\nvar HIDE_POINTER_TIP_GAP = 8;\nvar MOUSE_TRAIL_GAP = 2;\nvar POINTER_ADJUST = 2;\nvar ROOT = 'e-tooltip';\nvar RTL = 'e-rtl';\nvar DEVICE = 'e-bigger';\nvar ICON = 'e-icons';\nvar CLOSE = 'e-tooltip-close';\nvar TOOLTIP_WRAP = 'e-tooltip-wrap';\nvar CONTENT = 'e-tip-content';\nvar ARROW_TIP = 'e-arrow-tip';\nvar ARROW_TIP_OUTER = 'e-arrow-tip-outer';\nvar ARROW_TIP_INNER = 'e-arrow-tip-inner';\nvar TIP_BOTTOM = 'e-tip-bottom';\nvar TIP_TOP = 'e-tip-top';\nvar TIP_LEFT = 'e-tip-left';\nvar TIP_RIGHT = 'e-tip-right';\nvar POPUP_ROOT = 'e-popup';\nvar POPUP_OPEN = 'e-popup-open';\nvar POPUP_CLOSE = 'e-popup-close';\nvar POPUP_LIB = 'e-lib';\nvar HIDE_POPUP = 'e-hidden';\n\nvar Animation =\n/** @class */\nfunction (_super) {\n  __extends(Animation, _super);\n\n  function Animation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property({\n    effect: 'FadeIn',\n    duration: 150,\n    delay: 0\n  })], Animation.prototype, \"open\", void 0);\n\n  __decorate([Property({\n    effect: 'FadeOut',\n    duration: 150,\n    delay: 0\n  })], Animation.prototype, \"close\", void 0);\n\n  return Animation;\n}(ChildProperty);\n\nexport { Animation };\n/**\r\n * Represents the Tooltip component that displays a piece of information about the target element on mouse hover.\r\n * ```html\r\n * <div id=\"tooltip\">Show Tooltip</div>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var tooltipObj = new Tooltip({ content: 'Tooltip text' });\r\n *   tooltipObj.appendTo(\"#tooltip\");\r\n * </script>\r\n * ```\r\n */\n\nvar Tooltip =\n/** @class */\nfunction (_super) {\n  __extends(Tooltip, _super);\n  /**\r\n   * Constructor for creating the Tooltip Component\r\n   */\n\n\n  function Tooltip(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.isBlazorTooltip = false;\n    _this.contentTargetValue = null;\n    _this.contentEvent = null;\n    _this.contentAnimation = null;\n    return _this;\n  }\n\n  Tooltip.prototype.initialize = function () {\n    this.formatPosition();\n\n    if (!this.isServerRender()) {\n      addClass([this.element], ROOT);\n    }\n  };\n\n  Tooltip.prototype.isServerRender = function () {\n    return isBlazor() && this.isServerRendered;\n  };\n\n  Tooltip.prototype.formatPosition = function () {\n    var _a, _b;\n\n    if (this.position.indexOf('Top') === 0 || this.position.indexOf('Bottom') === 0) {\n      _a = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];\n    } else {\n      _b = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];\n    }\n  };\n\n  Tooltip.prototype.renderArrow = function () {\n    this.setTipClass(this.position);\n\n    if (!this.isServerRender()) {\n      var tip = this.createElement('div', {\n        className: ARROW_TIP + ' ' + this.tipClass\n      });\n      tip.appendChild(this.createElement('div', {\n        className: ARROW_TIP_OUTER + ' ' + this.tipClass\n      }));\n      tip.appendChild(this.createElement('div', {\n        className: ARROW_TIP_INNER + ' ' + this.tipClass\n      }));\n      this.tooltipEle.appendChild(tip);\n    } else {\n      var tip = this.tooltipEle.querySelector('.' + ARROW_TIP);\n      addClass([tip.querySelector('.' + ARROW_TIP_OUTER)], this.tipClass);\n      addClass([tip.querySelector('.' + ARROW_TIP_INNER)], this.tipClass);\n      this.tooltipEle.appendChild(tip);\n    }\n  };\n\n  Tooltip.prototype.setTipClass = function (position) {\n    if (position.indexOf('Right') === 0) {\n      this.tipClass = TIP_LEFT;\n    } else if (position.indexOf('Bottom') === 0) {\n      this.tipClass = TIP_TOP;\n    } else if (position.indexOf('Left') === 0) {\n      this.tipClass = TIP_RIGHT;\n    } else {\n      this.tipClass = TIP_BOTTOM;\n    }\n  };\n\n  Tooltip.prototype.renderPopup = function (target) {\n    var elePos = this.mouseTrail ? {\n      top: 0,\n      left: 0\n    } : this.getTooltipPosition(target);\n    this.tooltipEle.classList.remove(POPUP_LIB);\n    this.popupObj = new Popup(this.tooltipEle, {\n      height: this.height,\n      width: this.width,\n      position: {\n        X: elePos.left,\n        Y: elePos.top\n      },\n      enableRtl: this.enableRtl,\n      open: this.openPopupHandler.bind(this),\n      close: this.closePopupHandler.bind(this)\n    });\n  };\n\n  Tooltip.prototype.getTooltipPosition = function (target) {\n    this.tooltipEle.style.display = 'block';\n    var pos = calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY);\n    var offsetPos = this.calculateTooltipOffset(this.position);\n    var elePos = this.collisionFlipFit(target, pos.left + offsetPos.left, pos.top + offsetPos.top);\n    this.tooltipEle.style.display = '';\n    return elePos;\n  };\n\n  Tooltip.prototype.reposition = function (target) {\n    var elePos = this.getTooltipPosition(target);\n    this.popupObj.position = {\n      X: elePos.left,\n      Y: elePos.top\n    };\n    this.popupObj.dataBind();\n  };\n\n  Tooltip.prototype.openPopupHandler = function () {\n    if (!this.mouseTrail && this.needTemplateReposition()) {\n      this.reposition(this.findTarget());\n    }\n\n    this.trigger('afterOpen', this.tooltipEventArgs);\n  };\n\n  Tooltip.prototype.closePopupHandler = function () {\n    resetBlazorTemplate(this.element.id + 'content', 'Content');\n    this.clearTemplate(['content']);\n    this.clear();\n    this.trigger('afterClose', this.tooltipEventArgs);\n  };\n\n  Tooltip.prototype.calculateTooltipOffset = function (position) {\n    var pos = {\n      top: 0,\n      left: 0\n    };\n    var tooltipEleWidth = this.tooltipEle.offsetWidth;\n    var tooltipEleHeight = this.tooltipEle.offsetHeight;\n    var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n    var tipWidth = arrowEle ? arrowEle.offsetWidth : 0;\n    var tipHeight = arrowEle ? arrowEle.offsetHeight : 0;\n    var tipAdjust = this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP;\n    var tipHeightAdjust = tipHeight / 2 + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);\n    var tipWidthAdjust = tipWidth / 2 + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);\n\n    if (this.mouseTrail) {\n      tipAdjust += MOUSE_TRAIL_GAP;\n    }\n\n    switch (position) {\n      case 'RightTop':\n        pos.left += tipWidth + tipAdjust;\n        pos.top -= tooltipEleHeight - tipHeightAdjust;\n        break;\n\n      case 'RightCenter':\n        pos.left += tipWidth + tipAdjust;\n        pos.top -= tooltipEleHeight / 2;\n        break;\n\n      case 'RightBottom':\n        pos.left += tipWidth + tipAdjust;\n        pos.top -= tipHeightAdjust;\n        break;\n\n      case 'BottomRight':\n        pos.top += tipHeight + tipAdjust;\n        pos.left -= tipWidthAdjust;\n        break;\n\n      case 'BottomCenter':\n        pos.top += tipHeight + tipAdjust;\n        pos.left -= tooltipEleWidth / 2;\n        break;\n\n      case 'BottomLeft':\n        pos.top += tipHeight + tipAdjust;\n        pos.left -= tooltipEleWidth - tipWidthAdjust;\n        break;\n\n      case 'LeftBottom':\n        pos.left -= tipWidth + tooltipEleWidth + tipAdjust;\n        pos.top -= tipHeightAdjust;\n        break;\n\n      case 'LeftCenter':\n        pos.left -= tipWidth + tooltipEleWidth + tipAdjust;\n        pos.top -= tooltipEleHeight / 2;\n        break;\n\n      case 'LeftTop':\n        pos.left -= tipWidth + tooltipEleWidth + tipAdjust;\n        pos.top -= tooltipEleHeight - tipHeightAdjust;\n        break;\n\n      case 'TopLeft':\n        pos.top -= tooltipEleHeight + tipHeight + tipAdjust;\n        pos.left -= tooltipEleWidth - tipWidthAdjust;\n        break;\n\n      case 'TopRight':\n        pos.top -= tooltipEleHeight + tipHeight + tipAdjust;\n        pos.left -= tipWidthAdjust;\n        break;\n\n      default:\n        pos.top -= tooltipEleHeight + tipHeight + tipAdjust;\n        pos.left -= tooltipEleWidth / 2;\n        break;\n    }\n\n    pos.left += this.offsetX;\n    pos.top += this.offsetY;\n    return pos;\n  };\n\n  Tooltip.prototype.updateTipPosition = function (position) {\n    var selEle = this.tooltipEle.querySelectorAll('.' + ARROW_TIP + ',.' + ARROW_TIP_OUTER + ',.' + ARROW_TIP_INNER);\n    var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];\n    removeClass(selEle, removeList);\n    this.setTipClass(position);\n    addClass(selEle, this.tipClass);\n  };\n\n  Tooltip.prototype.adjustArrow = function (target, position, tooltipPositionX, tooltipPositionY) {\n    if (this.showTipPointer === false) {\n      return;\n    }\n\n    this.updateTipPosition(position);\n    var leftValue;\n    var topValue;\n    this.tooltipEle.style.display = 'block';\n    var tooltipWidth = this.tooltipEle.clientWidth;\n    var tooltipHeight = this.tooltipEle.clientHeight;\n    var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n    var arrowInnerELe = this.tooltipEle.querySelector('.' + ARROW_TIP_INNER);\n    var tipWidth = arrowEle.offsetWidth;\n    var tipHeight = arrowEle.offsetHeight;\n    this.tooltipEle.style.display = '';\n\n    if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {\n      if (this.tipClass === TIP_BOTTOM) {\n        topValue = '99.9%'; // Arrow icon aligned -2px height from ArrowOuterTip div\n\n        arrowInnerELe.style.top = '-' + (tipHeight - 2) + 'px';\n      } else {\n        topValue = -(tipHeight - 1) + 'px'; // Arrow icon aligned -6px height from ArrowOuterTip div\n\n        arrowInnerELe.style.top = '-' + (tipHeight - 6) + 'px';\n      }\n\n      if (target) {\n        var tipPosExclude = tooltipPositionX !== 'Center' || tooltipWidth > target.offsetWidth || this.mouseTrail;\n\n        if (tipPosExclude && tooltipPositionX === 'Left' || !tipPosExclude && this.tipPointerPosition === 'End') {\n          leftValue = tooltipWidth - tipWidth - POINTER_ADJUST + 'px';\n        } else if (tipPosExclude && tooltipPositionX === 'Right' || !tipPosExclude && this.tipPointerPosition === 'Start') {\n          leftValue = POINTER_ADJUST + 'px';\n        } else {\n          leftValue = tooltipWidth / 2 - tipWidth / 2 + 'px';\n        }\n      }\n    } else {\n      if (this.tipClass === TIP_RIGHT) {\n        leftValue = '99.9%'; // Arrow icon aligned -2px left from ArrowOuterTip div\n\n        arrowInnerELe.style.left = '-' + (tipWidth - 2) + 'px';\n      } else {\n        leftValue = -(tipWidth - 1) + 'px'; // Arrow icon aligned -2px from ArrowOuterTip width\n\n        arrowInnerELe.style.left = -tipWidth + (tipWidth - 2) + 'px';\n      }\n\n      var tipPosExclude = tooltipPositionY !== 'Center' || tooltipHeight > target.offsetHeight || this.mouseTrail;\n\n      if (tipPosExclude && tooltipPositionY === 'Top' || !tipPosExclude && this.tipPointerPosition === 'End') {\n        topValue = tooltipHeight - tipHeight - POINTER_ADJUST + 'px';\n      } else if (tipPosExclude && tooltipPositionY === 'Bottom' || !tipPosExclude && this.tipPointerPosition === 'Start') {\n        topValue = POINTER_ADJUST + 'px';\n      } else {\n        topValue = tooltipHeight / 2 - tipHeight / 2 + 'px';\n      }\n    }\n\n    arrowEle.style.top = topValue;\n    arrowEle.style.left = leftValue;\n  };\n\n  Tooltip.prototype.renderContent = function (target) {\n    var tooltipContent = this.tooltipEle.querySelector('.' + CONTENT);\n\n    if (this.cssClass) {\n      addClass([this.tooltipEle], this.cssClass.split(' '));\n    }\n\n    if (target && !isNullOrUndefined(target.getAttribute('title'))) {\n      target.setAttribute('data-content', target.getAttribute('title'));\n      target.removeAttribute('title');\n    }\n\n    if (!isNullOrUndefined(this.content)) {\n      if (this.isBlazorTooltip || !this.isServerRender()) {\n        tooltipContent.innerHTML = '';\n\n        if (this.content instanceof HTMLElement) {\n          tooltipContent.appendChild(this.content);\n        } else if (typeof this.content === 'string' && this.content.indexOf('<div>Blazor') < 0) {\n          if (this.enableHtmlSanitizer) {\n            this.setProperties({\n              content: SanitizeHtmlHelper.sanitize(this.content)\n            }, true);\n          }\n\n          tooltipContent[this.enableHtmlParse ? 'innerHTML' : 'textContent'] = this.content;\n        } else {\n          var templateFunction = compile(this.content);\n          var tempArr = templateFunction({}, this, 'content', this.element.id + 'content', undefined, undefined, tooltipContent);\n\n          if (tempArr) {\n            append(tempArr, tooltipContent);\n          }\n\n          this.renderReactTemplates();\n\n          if (typeof this.content === 'string' && this.content.indexOf('<div>Blazor') >= 0) {\n            this.isBlazorTemplate = true;\n            updateBlazorTemplate(this.element.id + 'content', 'Content', this);\n          }\n        }\n      }\n    } else {\n      if (target && !isNullOrUndefined(target.getAttribute('data-content'))) {\n        tooltipContent.innerHTML = target.getAttribute('data-content');\n      }\n    }\n  };\n\n  Tooltip.prototype.renderCloseIcon = function () {\n    if (!this.isSticky) {\n      return;\n    }\n\n    var tipClose = this.createElement('div', {\n      className: ICON + ' ' + CLOSE\n    });\n    this.tooltipEle.appendChild(tipClose);\n    EventHandler.add(tipClose, Browser.touchStartEvent, this.onStickyClose, this);\n  };\n\n  Tooltip.prototype.addDescribedBy = function (target, id) {\n    var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n\n    if (describedby.indexOf(id) < 0) {\n      describedby.push(id);\n    }\n\n    attributes(target, {\n      'aria-describedby': describedby.join(' ').trim(),\n      'data-tooltip-id': id\n    });\n  };\n\n  Tooltip.prototype.removeDescribedBy = function (target) {\n    var id = target.getAttribute('data-tooltip-id');\n    var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\n    var index = describedby.indexOf(id);\n\n    if (index !== -1) {\n      describedby.splice(index, 1);\n    }\n\n    target.removeAttribute('data-tooltip-id');\n    var orgdescribedby = describedby.join(' ').trim();\n\n    if (orgdescribedby) {\n      target.setAttribute('aria-describedby', orgdescribedby);\n    } else {\n      target.removeAttribute('aria-describedby');\n    }\n  };\n\n  Tooltip.prototype.tapHoldHandler = function (evt) {\n    clearTimeout(this.autoCloseTimer);\n    this.targetHover(evt.originalEvent);\n  };\n\n  Tooltip.prototype.touchEndHandler = function (e) {\n    var _this = this;\n\n    if (this.isSticky) {\n      return;\n    }\n\n    var close = function () {\n      _this.close();\n    };\n\n    this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);\n  };\n\n  Tooltip.prototype.targetClick = function (e) {\n    var target;\n\n    if (this.target) {\n      target = closest(e.target, this.target);\n    } else {\n      target = this.element;\n    }\n\n    if (isNullOrUndefined(target)) {\n      return;\n    }\n\n    if (target.getAttribute('data-tooltip-id') === null) {\n      this.targetHover(e);\n    } else if (!this.isSticky) {\n      this.hideTooltip(this.animation.close, e, target);\n    }\n  };\n\n  Tooltip.prototype.targetHover = function (e) {\n    var target;\n\n    if (this.target) {\n      target = closest(e.target, this.target);\n    } else {\n      target = this.element;\n    }\n\n    if (isNullOrUndefined(target) || target.getAttribute('data-tooltip-id') !== null && this.closeDelay === 0) {\n      return;\n    }\n\n    var targetList = [].slice.call(document.querySelectorAll('[data-tooltip-id= ' + this.ctrlId + '_content]'));\n\n    for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {\n      var target_1 = targetList_1[_i];\n      this.restoreElement(target_1);\n    }\n\n    this.showTooltip(target, this.animation.open, e);\n  };\n\n  Tooltip.prototype.showTooltip = function (target, showAnimation, e) {\n    var _this = this;\n\n    clearTimeout(this.showTimer);\n    clearTimeout(this.hideTimer);\n    this.tooltipEventArgs = {\n      type: e ? e.type : null,\n      cancel: false,\n      target: target,\n      event: e ? e : null,\n      element: this.tooltipEle,\n      isInteracted: !isNullOrUndefined(e)\n    };\n\n    var observeCallback = function (beforeRenderArgs) {\n      _this.beforeRenderCallback(beforeRenderArgs, target, e, showAnimation);\n    };\n\n    this.trigger('beforeRender', this.tooltipEventArgs, observeCallback.bind(this));\n  };\n\n  Tooltip.prototype.beforeRenderCallback = function (beforeRenderArgs, target, e, showAnimation) {\n    var isBlazorTooltipRendered = false;\n\n    if (beforeRenderArgs.cancel) {\n      this.isHidden = true;\n      this.clear();\n    } else {\n      this.isHidden = false;\n\n      if (isNullOrUndefined(this.tooltipEle)) {\n        if (this.isServerRender()) {\n          this.contentTargetValue = target;\n          this.contentEvent = e;\n          this.contentAnimation = showAnimation;\n          var args = {\n            'enableTooltip': 'true'\n          }; // tslint:disable\n\n          this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args); // tslint:enable\n\n          isBlazorTooltipRendered = true;\n        } else {\n          this.ctrlId = this.element.getAttribute('id') ? getUniqueID(this.element.getAttribute('id')) : getUniqueID('tooltip');\n          this.tooltipEle = this.createElement('div', {\n            className: TOOLTIP_WRAP + ' ' + POPUP_ROOT + ' ' + POPUP_LIB,\n            attrs: {\n              role: 'tooltip',\n              'aria-hidden': 'false',\n              'id': this.ctrlId + '_content'\n            },\n            styles: 'width:' + formatUnit(this.width) + ';height:' + formatUnit(this.height) + ';position:absolute;'\n          });\n          this.beforeRenderBlazor(target, this);\n        }\n\n        if (!isBlazorTooltipRendered) {\n          this.afterRenderBlazor(target, e, showAnimation, this);\n        }\n      } else {\n        if (this.isServerRender()) {\n          addClass([this.tooltipEle], POPUP_OPEN);\n          document.body.appendChild(this.tooltipEle);\n          this.renderCloseIcon();\n          this.renderPopup(target);\n        }\n\n        if (target) {\n          this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n          this.addDescribedBy(target, this.ctrlId + '_content');\n          this.renderContent(target);\n          PopupAnimation.stop(this.tooltipEle);\n          this.reposition(target);\n          this.afterRenderBlazor(target, e, showAnimation, this);\n        }\n      }\n    }\n  };\n\n  ;\n\n  Tooltip.prototype.contentUpdated = function (args) {\n    if (isNullOrUndefined(this.tooltipEle)) {\n      if (this.isServerRender()) {\n        this.ctrlId = this.element.id;\n        this.tooltipEle = document.querySelector('#' + this.ctrlId + '_content');\n\n        if (this.tooltipEle) {\n          this.tooltipEle.setAttribute('style', 'width:' + formatUnit(this.width) + ';height:' + formatUnit(this.height) + ';position:absolute;');\n          this.beforeRenderBlazor(this.contentTargetValue, this);\n          this.afterRenderBlazor(this.contentTargetValue, this.contentEvent, this.contentAnimation, this);\n          this.contentTargetValue = this.contentEvent = this.contentAnimation = null;\n        }\n      }\n    }\n  };\n\n  ;\n\n  Tooltip.prototype.beforeRenderBlazor = function (target, ctrlObj) {\n    if (target) {\n      if (Browser.isDevice) {\n        addClass([ctrlObj.tooltipEle], DEVICE);\n      }\n\n      if (ctrlObj.width !== 'auto') {\n        ctrlObj.tooltipEle.style.maxWidth = formatUnit(ctrlObj.width);\n      }\n\n      if (!this.isServerRender()) {\n        ctrlObj.tooltipEle.appendChild(ctrlObj.createElement('div', {\n          className: CONTENT\n        }));\n      }\n\n      document.body.appendChild(ctrlObj.tooltipEle);\n      removeClass([ctrlObj.tooltipEle], HIDE_POPUP);\n      ctrlObj.addDescribedBy(target, ctrlObj.ctrlId + '_content');\n      ctrlObj.renderContent(target);\n      addClass([ctrlObj.tooltipEle], POPUP_OPEN);\n\n      if (ctrlObj.showTipPointer) {\n        ctrlObj.renderArrow();\n      }\n\n      ctrlObj.renderCloseIcon();\n      ctrlObj.renderPopup(target);\n      ctrlObj.adjustArrow(target, ctrlObj.position, ctrlObj.tooltipPositionX, ctrlObj.tooltipPositionY);\n      PopupAnimation.stop(ctrlObj.tooltipEle);\n      ctrlObj.reposition(target);\n    }\n  };\n\n  Tooltip.prototype.afterRenderBlazor = function (target, e, showAnimation, ctrlObj) {\n    if (target) {\n      removeClass([ctrlObj.tooltipEle], POPUP_OPEN);\n      addClass([ctrlObj.tooltipEle], POPUP_CLOSE);\n      ctrlObj.tooltipEventArgs = {\n        type: e ? e.type : null,\n        cancel: false,\n        target: target,\n        event: e ? e : null,\n        element: ctrlObj.tooltipEle,\n        isInteracted: !isNullOrUndefined(e)\n      };\n\n      if (ctrlObj.needTemplateReposition() && !ctrlObj.mouseTrail) {\n        ctrlObj.tooltipEle.style.display = 'none';\n      }\n\n      var observeCallback = function (observedArgs) {\n        ctrlObj.beforeOpenCallback(observedArgs, target, showAnimation, e);\n      };\n\n      ctrlObj.trigger('beforeOpen', ctrlObj.tooltipEventArgs, observeCallback.bind(ctrlObj));\n    }\n  };\n\n  Tooltip.prototype.beforeOpenCallback = function (observedArgs, target, showAnimation, e) {\n    var _this = this;\n\n    if (observedArgs.cancel) {\n      this.isHidden = true;\n      this.clear();\n      this.restoreElement(target);\n    } else {\n      var openAnimation_1 = {\n        name: showAnimation.effect,\n        duration: showAnimation.duration,\n        delay: showAnimation.delay,\n        timingFunction: 'easeOut'\n      };\n\n      if (showAnimation.effect === 'None') {\n        openAnimation_1 = undefined;\n      }\n\n      if (this.openDelay > 0) {\n        var show = function () {\n          if (_this.mouseTrail) {\n            EventHandler.add(target, 'mousemove touchstart mouseenter', _this.onMouseMove, _this);\n          }\n\n          if (_this.popupObj) {\n            _this.popupObj.show(openAnimation_1, target);\n          }\n        };\n\n        this.showTimer = setTimeout(show, this.openDelay);\n      } else {\n        if (this.popupObj) {\n          this.popupObj.show(openAnimation_1, target);\n        }\n      }\n    }\n\n    if (e) {\n      this.wireMouseEvents(e, target);\n    }\n  };\n\n  Tooltip.prototype.needTemplateReposition = function () {\n    // tslint:disable-next-line:no-any\n    var tooltip = this;\n    return !isNullOrUndefined(tooltip.viewContainerRef) && typeof tooltip.viewContainerRef !== 'string' || this.isServerRender() && this.isBlazorTemplate;\n  };\n\n  Tooltip.prototype.checkCollision = function (target, x, y) {\n    var elePos = {\n      left: x,\n      top: y,\n      position: this.position,\n      horizontal: this.tooltipPositionX,\n      vertical: this.tooltipPositionY\n    };\n    var affectedPos = isCollide(this.tooltipEle, this.target ? this.element : null, x, y);\n\n    if (affectedPos.length > 0) {\n      elePos.horizontal = affectedPos.indexOf('left') >= 0 ? 'Right' : affectedPos.indexOf('right') >= 0 ? 'Left' : this.tooltipPositionX;\n      elePos.vertical = affectedPos.indexOf('top') >= 0 ? 'Bottom' : affectedPos.indexOf('bottom') >= 0 ? 'Top' : this.tooltipPositionY;\n    }\n\n    return elePos;\n  };\n\n  Tooltip.prototype.collisionFlipFit = function (target, x, y) {\n    var elePos = this.checkCollision(target, x, y);\n    var newpos = elePos.position;\n\n    if (this.tooltipPositionY !== elePos.vertical) {\n      newpos = this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0 ? elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical;\n    }\n\n    if (this.tooltipPositionX !== elePos.horizontal) {\n      if (newpos.indexOf('Left') === 0) {\n        elePos.vertical = newpos === 'LeftTop' || newpos === 'LeftCenter' ? 'Top' : 'Bottom';\n        newpos = elePos.vertical + 'Left';\n      }\n\n      if (newpos.indexOf('Right') === 0) {\n        elePos.vertical = newpos === 'RightTop' || newpos === 'RightCenter' ? 'Top' : 'Bottom';\n        newpos = elePos.vertical + 'Right';\n      }\n\n      elePos.horizontal = this.tooltipPositionX;\n    }\n\n    this.tooltipEventArgs = {\n      type: null,\n      cancel: false,\n      target: target,\n      event: null,\n      element: this.tooltipEle,\n      collidedPosition: newpos\n    };\n    this.trigger('beforeCollision', this.tooltipEventArgs);\n\n    if (elePos.position !== newpos) {\n      var pos = calculatePosition(target, elePos.horizontal, elePos.vertical);\n      this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\n      var offsetPos = this.calculateTooltipOffset(newpos);\n      offsetPos.top -= 'TopBottom'.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1 && 'TopBottom'.indexOf(newpos.split(/(?=[A-Z])/)[0]) !== -1 ? 2 * this.offsetY : 0;\n      offsetPos.left -= 'RightLeft'.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1 && 'RightLeft'.indexOf(newpos.split(/(?=[A-Z])/)[0]) !== -1 ? 2 * this.offsetX : 0;\n      elePos.position = newpos;\n      elePos.left = pos.left + offsetPos.left;\n      elePos.top = pos.top + offsetPos.top;\n    } else {\n      this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\n    }\n\n    var eleOffset = {\n      left: elePos.left,\n      top: elePos.top\n    };\n    var left = fit(this.tooltipEle, this.target ? this.element : null, {\n      X: true,\n      Y: false\n    }, eleOffset).left;\n    this.tooltipEle.style.display = 'block';\n\n    if (this.showTipPointer && (newpos.indexOf('Bottom') === 0 || newpos.indexOf('Top') === 0)) {\n      var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\n      var arrowleft = parseInt(arrowEle.style.left, 10) - (left - elePos.left);\n\n      if (arrowleft < 0) {\n        arrowleft = 0;\n      } else if (arrowleft + arrowEle.offsetWidth > this.tooltipEle.clientWidth) {\n        arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;\n      }\n\n      arrowEle.style.left = arrowleft.toString() + 'px';\n    }\n\n    this.tooltipEle.style.display = '';\n    eleOffset.left = left;\n    return eleOffset;\n  };\n\n  Tooltip.prototype.hideTooltip = function (hideAnimation, e, targetElement) {\n    var _this = this;\n\n    if (this.closeDelay > 0) {\n      clearTimeout(this.hideTimer);\n      clearTimeout(this.showTimer);\n\n      var hide = function () {\n        if (_this.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {\n          return;\n        }\n\n        _this.tooltipHide(hideAnimation, e, targetElement);\n      };\n\n      this.hideTimer = setTimeout(hide, this.closeDelay);\n    } else {\n      this.tooltipHide(hideAnimation, e, targetElement);\n    }\n  };\n\n  Tooltip.prototype.tooltipHide = function (hideAnimation, e, targetElement) {\n    var _this = this;\n\n    var target;\n\n    if (e) {\n      target = this.target ? targetElement || e.target : this.element;\n    } else {\n      target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\n    }\n\n    this.tooltipEventArgs = {\n      type: e ? e.type : null,\n      cancel: false,\n      target: target,\n      event: e ? e : null,\n      element: this.tooltipEle,\n      isInteracted: !isNullOrUndefined(e)\n    }; // this line commented for close the tooltip popup element even the target element destroyed in a page.\n    //if (isNullOrUndefined(target)) { return; }\n\n    this.trigger('beforeClose', this.tooltipEventArgs, function (observedArgs) {\n      if (!observedArgs.cancel) {\n        if (_this.isServerRender()) {\n          _this.blazorHide(hideAnimation, target);\n        } else {\n          _this.popupHide(hideAnimation, target);\n        }\n      } else {\n        _this.isHidden = false;\n      }\n    });\n  };\n  /* istanbul ignore next */\n\n\n  Tooltip.prototype.blazorHide = function (hideAnimation, target) {\n    var proxy = this;\n\n    var hide = function () {\n      proxy.popupHide(hideAnimation, target);\n    };\n\n    if (this.popupObj) {\n      this.popupHide(hideAnimation, target);\n    } else {\n      setTimeout(hide, 200);\n    }\n  };\n\n  Tooltip.prototype.popupHide = function (hideAnimation, target) {\n    if (target) {\n      this.restoreElement(target);\n    }\n\n    this.isHidden = true;\n    var closeAnimation = {\n      name: hideAnimation.effect,\n      duration: hideAnimation.duration,\n      delay: hideAnimation.delay,\n      timingFunction: 'easeIn'\n    };\n\n    if (hideAnimation.effect === 'None') {\n      closeAnimation = undefined;\n    }\n\n    if (this.popupObj) {\n      this.popupObj.hide(closeAnimation);\n    }\n  };\n\n  Tooltip.prototype.restoreElement = function (target) {\n    this.unwireMouseEvents(target);\n\n    if (!isNullOrUndefined(target.getAttribute('data-content'))) {\n      target.setAttribute('title', target.getAttribute('data-content'));\n      target.removeAttribute('data-content');\n    }\n\n    this.removeDescribedBy(target);\n  };\n\n  Tooltip.prototype.clear = function () {\n    if (this.tooltipEle) {\n      removeClass([this.tooltipEle], POPUP_CLOSE);\n      addClass([this.tooltipEle], POPUP_OPEN);\n    }\n\n    if (this.isHidden) {\n      if (this.popupObj) {\n        this.popupObj.destroy();\n      }\n\n      if (this.isServerRender() && this.tooltipEle) {\n        this.tooltipEle.style.display = 'none';\n        var args = {\n          'enableTooltip': 'false'\n        }; // tslint:disable\n\n        this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args); // tslint:enable\n\n        remove(this.tooltipEle);\n      } else if (this.tooltipEle) {\n        remove(this.tooltipEle);\n      }\n\n      this.tooltipEle = null;\n      this.popupObj = null;\n    }\n  };\n\n  Tooltip.prototype.tooltipHover = function (e) {\n    if (this.tooltipEle) {\n      this.isTooltipOpen = true;\n    }\n  };\n\n  Tooltip.prototype.tooltipMouseOut = function (e) {\n    this.isTooltipOpen = false;\n    this.hideTooltip(this.animation.close, e, this.findTarget());\n  };\n\n  Tooltip.prototype.onMouseOut = function (e) {\n    var enteredElement = e.relatedTarget; // don't close the tooltip only if it is tooltip content element\n\n    if (enteredElement && !this.mouseTrail) {\n      var checkForTooltipElement = closest(enteredElement, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT);\n\n      if (checkForTooltipElement) {\n        EventHandler.add(checkForTooltipElement, 'mouseleave', this.tooltipElementMouseOut, this);\n      } else {\n        this.hideTooltip(this.animation.close, e, this.findTarget());\n\n        if (this.closeDelay === 0) {\n          this.clear();\n        }\n      }\n    } else {\n      this.hideTooltip(this.animation.close, e, this.findTarget());\n      this.clear();\n    }\n  };\n\n  Tooltip.prototype.tooltipElementMouseOut = function (e) {\n    this.hideTooltip(this.animation.close, e, this.findTarget());\n    EventHandler.remove(this.element, 'mouseleave', this.tooltipElementMouseOut);\n    this.clear();\n  };\n\n  Tooltip.prototype.onStickyClose = function (e) {\n    this.close();\n  };\n\n  Tooltip.prototype.onMouseMove = function (event) {\n    var eventPageX = 0;\n    var eventPageY = 0;\n\n    if (event.type.indexOf('touch') > -1) {\n      event.preventDefault();\n      eventPageX = event.touches[0].pageX;\n      eventPageY = event.touches[0].pageY;\n    } else {\n      eventPageX = event.pageX;\n      eventPageY = event.pageY;\n    }\n\n    PopupAnimation.stop(this.tooltipEle);\n    removeClass([this.tooltipEle], POPUP_CLOSE);\n    addClass([this.tooltipEle], POPUP_OPEN);\n    this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);\n    var pos = this.calculateTooltipOffset(this.position);\n    var x = eventPageX + pos.left + this.offsetX;\n    var y = eventPageY + pos.top + this.offsetY;\n    var elePos = this.checkCollision(event.target, x, y);\n\n    if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {\n      var newpos = this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0 ? elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;\n      elePos.position = newpos;\n      this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);\n      var colpos = this.calculateTooltipOffset(elePos.position);\n      elePos.left = eventPageX + colpos.left - this.offsetX;\n      elePos.top = eventPageY + colpos.top - this.offsetY;\n    }\n\n    this.tooltipEle.style.left = elePos.left + 'px';\n    this.tooltipEle.style.top = elePos.top + 'px';\n  };\n\n  Tooltip.prototype.keyDown = function (event) {\n    if (this.tooltipEle && event.keyCode === 27) {\n      this.close();\n    }\n  };\n\n  Tooltip.prototype.touchEnd = function (e) {\n    if (this.tooltipEle && closest(e.target, '.' + ROOT) === null && !this.isSticky) {\n      this.close();\n    }\n  };\n\n  Tooltip.prototype.scrollHandler = function (e) {\n    if (this.tooltipEle) {\n      if (!closest(e.target, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT)) {\n        this.close();\n      }\n    }\n  };\n  /**\r\n   * Core method that initializes the control rendering.\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.render = function () {\n    this.initialize();\n    this.wireEvents(this.opensOn);\n    this.renderComplete();\n  };\n  /**\r\n   * Initializes the values of private members.\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.preRender = function () {\n    this.tipClass = TIP_BOTTOM;\n    this.tooltipPositionX = 'Center';\n    this.tooltipPositionY = 'Top';\n    this.isHidden = true;\n  };\n  /**\r\n   * Binding events to the Tooltip element.\r\n   * @hidden\r\n   */\n\n\n  Tooltip.prototype.wireEvents = function (trigger) {\n    var triggerList = this.getTriggerList(trigger);\n\n    for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {\n      var opensOn = triggerList_1[_i];\n\n      if (opensOn === 'Custom') {\n        return;\n      }\n\n      if (opensOn === 'Focus') {\n        this.wireFocusEvents();\n      }\n\n      if (opensOn === 'Click') {\n        EventHandler.add(this.element, Browser.touchStartEvent, this.targetClick, this);\n      }\n\n      if (opensOn === 'Hover') {\n        if (Browser.isDevice) {\n          this.touchModule = new Touch(this.element, {\n            tapHoldThreshold: TAPHOLD_THRESHOLD,\n            tapHold: this.tapHoldHandler.bind(this)\n          });\n          EventHandler.add(this.element, Browser.touchEndEvent, this.touchEndHandler, this);\n        } else {\n          EventHandler.add(this.element, 'mouseover', this.targetHover, this);\n\n          if (this.isServerRender() && !this.isSticky) {\n            EventHandler.add(this.element, 'mouseleave', this.onMouseOut, this);\n          }\n        }\n      }\n    }\n\n    EventHandler.add(document, 'touchend', this.touchEnd, this);\n    EventHandler.add(document, 'scroll wheel', this.scrollHandler, this);\n    EventHandler.add(document, 'keydown', this.keyDown, this);\n  };\n\n  Tooltip.prototype.getTriggerList = function (trigger) {\n    if (trigger === 'Auto') {\n      trigger = Browser.isDevice ? 'Hover' : 'Hover Focus';\n    }\n\n    return trigger.split(' ');\n  };\n\n  Tooltip.prototype.wireFocusEvents = function () {\n    if (!isNullOrUndefined(this.target)) {\n      var targetList = [].slice.call(this.element.querySelectorAll(this.target));\n\n      for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {\n        var target = targetList_2[_i];\n        EventHandler.add(target, 'focus', this.targetHover, this);\n      }\n    } else {\n      EventHandler.add(this.element, 'focus', this.targetHover, this);\n    }\n  };\n\n  Tooltip.prototype.wireMouseEvents = function (e, target) {\n    if (this.tooltipEle) {\n      if (!this.isSticky) {\n        if (e.type === 'focus') {\n          EventHandler.add(target, 'blur', this.onMouseOut, this);\n        }\n\n        if (e.type === 'mouseover') {\n          if (!this.isServerRender()) {\n            EventHandler.add(target, 'mouseleave', this.onMouseOut, this);\n          }\n        }\n\n        if (this.closeDelay) {\n          EventHandler.add(this.tooltipEle, 'mouseenter', this.tooltipHover, this);\n          EventHandler.add(this.tooltipEle, 'mouseleave', this.tooltipMouseOut, this);\n        }\n      }\n\n      if (this.mouseTrail && this.openDelay === 0) {\n        EventHandler.add(target, 'mousemove touchstart mouseenter', this.onMouseMove, this);\n      }\n    }\n  };\n  /**\r\n   * Unbinding events from the element on widget destroy.\r\n   * @hidden\r\n   */\n\n\n  Tooltip.prototype.unwireEvents = function (trigger) {\n    var triggerList = this.getTriggerList(trigger);\n\n    for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {\n      var opensOn = triggerList_2[_i];\n\n      if (opensOn === 'Custom') {\n        return;\n      }\n\n      if (opensOn === 'Focus') {\n        this.unwireFocusEvents();\n      }\n\n      if (opensOn === 'Click') {\n        EventHandler.remove(this.element, Browser.touchStartEvent, this.targetClick);\n      }\n\n      if (opensOn === 'Hover') {\n        if (Browser.isDevice) {\n          if (this.touchModule) {\n            this.touchModule.destroy();\n          }\n\n          EventHandler.remove(this.element, Browser.touchEndEvent, this.touchEndHandler);\n        } else {\n          EventHandler.remove(this.element, 'mouseover', this.targetHover);\n\n          if (this.isServerRender() && !this.isSticky) {\n            EventHandler.remove(this.element, 'mouseleave', this.onMouseOut);\n          }\n        }\n      }\n    }\n\n    EventHandler.remove(document, 'touchend', this.touchEnd);\n    EventHandler.remove(document, 'scroll wheel', this.scrollHandler);\n    EventHandler.remove(document, 'keydown', this.keyDown);\n  };\n\n  Tooltip.prototype.unwireFocusEvents = function () {\n    if (!isNullOrUndefined(this.target)) {\n      var targetList = [].slice.call(this.element.querySelectorAll(this.target));\n\n      for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {\n        var target = targetList_3[_i];\n        EventHandler.remove(target, 'focus', this.targetHover);\n      }\n    } else {\n      EventHandler.remove(this.element, 'focus', this.targetHover);\n    }\n  };\n\n  Tooltip.prototype.unwireMouseEvents = function (target) {\n    if (!this.isSticky) {\n      var triggerList = this.getTriggerList(this.opensOn);\n\n      for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {\n        var opensOn = triggerList_3[_i];\n\n        if (opensOn === 'Focus') {\n          EventHandler.remove(target, 'blur', this.onMouseOut);\n        }\n\n        if (opensOn === 'Hover' && !Browser.isDevice) {\n          if (!this.isServerRender()) {\n            EventHandler.remove(target, 'mouseleave', this.onMouseOut);\n          }\n        }\n      }\n\n      if (this.closeDelay) {\n        EventHandler.remove(target, 'mouseenter', this.tooltipHover);\n        EventHandler.remove(target, 'mouseleave', this.tooltipMouseOut);\n      }\n    }\n\n    if (this.mouseTrail) {\n      EventHandler.remove(target, 'mousemove touchstart mouseenter', this.onMouseMove);\n    }\n  };\n\n  Tooltip.prototype.findTarget = function () {\n    var target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\n    return target;\n  };\n  /**\r\n   * Core method to return the component name.\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.getModuleName = function () {\n    return 'tooltip';\n  };\n  /**\r\n   * Returns the properties to be maintained in the persisted state.\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.getPersistData = function () {\n    return this.addOnPersist([]);\n  };\n  /**\r\n   * Called internally, if any of the property value changed.\r\n   * @private\r\n   */\n\n\n  Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var targetElement = this.findTarget();\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          if (this.tooltipEle && targetElement) {\n            this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = formatUnit(newProp.width);\n            this.reposition(targetElement);\n          }\n\n          break;\n\n        case 'height':\n          if (this.tooltipEle && targetElement) {\n            this.tooltipEle.style.height = formatUnit(newProp.height);\n            this.reposition(targetElement);\n          }\n\n          break;\n\n        case 'content':\n          if (this.tooltipEle) {\n            if (this.isServerRender()) {\n              this.isBlazorTooltip = true;\n            }\n\n            this.renderContent();\n          } else if (this.isServerRender()) {\n            var args = {\n              'content': newProp.content\n            }; // tslint:disable\n\n            this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args); // tslint:enable\n          }\n\n          break;\n\n        case 'opensOn':\n          this.unwireEvents(oldProp.opensOn);\n          this.wireEvents(newProp.opensOn);\n          break;\n\n        case 'position':\n          this.formatPosition();\n\n          if (this.tooltipEle && targetElement) {\n            var arrowInnerELe = this.tooltipEle.querySelector('.' + ARROW_TIP_INNER);\n            arrowInnerELe.style.top = arrowInnerELe.style.left = null;\n            this.reposition(targetElement);\n          }\n\n          break;\n\n        case 'tipPointerPosition':\n          if (this.tooltipEle && targetElement) {\n            this.reposition(targetElement);\n          }\n\n          break;\n\n        case 'offsetX':\n          if (this.tooltipEle) {\n            var x = newProp.offsetX - oldProp.offsetX;\n            this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + x).toString() + 'px';\n          }\n\n          break;\n\n        case 'offsetY':\n          if (this.tooltipEle) {\n            var y = newProp.offsetY - oldProp.offsetY;\n            this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + y).toString() + 'px';\n          }\n\n          break;\n\n        case 'cssClass':\n          if (this.tooltipEle) {\n            if (oldProp.cssClass) {\n              removeClass([this.tooltipEle], oldProp.cssClass.split(' '));\n            }\n\n            if (newProp.cssClass) {\n              addClass([this.tooltipEle], newProp.cssClass.split(' '));\n            }\n          }\n\n          break;\n\n        case 'enableRtl':\n          if (this.tooltipEle) {\n            if (this.enableRtl) {\n              addClass([this.tooltipEle], RTL);\n            } else {\n              removeClass([this.tooltipEle], RTL);\n            }\n          }\n\n          break;\n      }\n    }\n  };\n  /**\r\n   * It is used to show the Tooltip on the specified target with specific animation settings.\r\n   * @param element Target element where the Tooltip is to be displayed. (It is an optional parameter)\r\n   * @param animation Sets the specific animation, while showing the Tooltip on the screen. (It is an optional parameter)\r\n   * @return {void}\r\n   */\n\n\n  Tooltip.prototype.open = function (element, animation) {\n    if (isNullOrUndefined(animation)) {\n      animation = this.animation.open;\n    }\n\n    if (isNullOrUndefined(element)) {\n      element = this.element;\n    }\n\n    if (element.style.display === 'none') {\n      return;\n    }\n\n    this.showTooltip(element, animation);\n  };\n  /**\r\n   * It is used to hide the Tooltip with specific animation effect.\r\n   * @param animation Sets the specific animation when hiding Tooltip from the screen. (It is an optional parameter)\r\n   * @return {void}\r\n   */\n\n\n  Tooltip.prototype.close = function (animation) {\n    if (!animation) {\n      animation = this.animation.close;\n    }\n\n    this.hideTooltip(animation);\n  };\n  /**\r\n   * It is used to refresh the Tooltip content and its position.\r\n   * @param target Target element where the Tooltip content or position needs to be refreshed.\r\n   * @return {void}\r\n   */\n\n\n  Tooltip.prototype.refresh = function (target) {\n    if (this.tooltipEle) {\n      this.renderContent(target);\n    }\n\n    if (this.popupObj && target) {\n      this.reposition(target);\n    }\n  };\n  /**\r\n   * It is used to destroy the Tooltip component.\r\n   * @method destroy\r\n   * @return {void}\r\n   * @memberof Tooltip\r\n   */\n\n\n  Tooltip.prototype.destroy = function () {\n    if (!this.isServerRender()) {\n      _super.prototype.destroy.call(this);\n\n      if (this.tooltipEle) {\n        remove(this.tooltipEle);\n      }\n    }\n\n    if (this.isServerRender() && this.tooltipEle) {\n      var placeholder = document.querySelector('#' + this.ctrlId + '_content_placeholder');\n\n      if (placeholder) {\n        placeholder.appendChild(this.tooltipEle);\n      }\n    }\n\n    if (this.popupObj) {\n      this.popupObj.destroy();\n    }\n\n    removeClass([this.element], ROOT);\n    this.unwireEvents(this.opensOn);\n    this.unwireMouseEvents(this.element);\n    this.tooltipEle = null;\n    this.popupObj = null;\n  };\n\n  __decorate([Property('auto')], Tooltip.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Tooltip.prototype, \"height\", void 0);\n\n  __decorate([Property()], Tooltip.prototype, \"content\", void 0);\n\n  __decorate([Property()], Tooltip.prototype, \"target\", void 0);\n\n  __decorate([Property('TopCenter')], Tooltip.prototype, \"position\", void 0);\n\n  __decorate([Property(0)], Tooltip.prototype, \"offsetX\", void 0);\n\n  __decorate([Property(0)], Tooltip.prototype, \"offsetY\", void 0);\n\n  __decorate([Property(true)], Tooltip.prototype, \"showTipPointer\", void 0);\n\n  __decorate([Property(true)], Tooltip.prototype, \"enableHtmlParse\", void 0);\n\n  __decorate([Property('Auto')], Tooltip.prototype, \"tipPointerPosition\", void 0);\n\n  __decorate([Property('Auto')], Tooltip.prototype, \"opensOn\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"mouseTrail\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"isSticky\", void 0);\n\n  __decorate([Complex({}, Animation)], Tooltip.prototype, \"animation\", void 0);\n\n  __decorate([Property(0)], Tooltip.prototype, \"openDelay\", void 0);\n\n  __decorate([Property(0)], Tooltip.prototype, \"closeDelay\", void 0);\n\n  __decorate([Property()], Tooltip.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], Tooltip.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"beforeRender\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"afterOpen\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"beforeClose\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"afterClose\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"beforeCollision\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"created\", void 0);\n\n  __decorate([Event()], Tooltip.prototype, \"destroyed\", void 0);\n\n  Tooltip = __decorate([NotifyPropertyChanges], Tooltip);\n  return Tooltip;\n}(Component);\n\nexport { Tooltip };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-popups/src/tooltip/tooltip.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Property","ChildProperty","Event","append","compile","isBlazor","EventHandler","Touch","Browser","Animation","PopupAnimation","isNullOrUndefined","getUniqueID","formatUnit","attributes","closest","removeClass","addClass","remove","updateBlazorTemplate","resetBlazorTemplate","NotifyPropertyChanges","Complex","SanitizeHtmlHelper","Popup","calculatePosition","isCollide","fit","TOUCHEND_HIDE_DELAY","TAPHOLD_THRESHOLD","SHOW_POINTER_TIP_GAP","HIDE_POINTER_TIP_GAP","MOUSE_TRAIL_GAP","POINTER_ADJUST","ROOT","RTL","DEVICE","ICON","CLOSE","TOOLTIP_WRAP","CONTENT","ARROW_TIP","ARROW_TIP_OUTER","ARROW_TIP_INNER","TIP_BOTTOM","TIP_TOP","TIP_LEFT","TIP_RIGHT","POPUP_ROOT","POPUP_OPEN","POPUP_CLOSE","POPUP_LIB","HIDE_POPUP","_super","apply","effect","duration","delay","Tooltip","options","element","_this","call","isBlazorTooltip","contentTargetValue","contentEvent","contentAnimation","initialize","formatPosition","isServerRender","isServerRendered","_a","_b","position","indexOf","split","tooltipPositionY","tooltipPositionX","renderArrow","setTipClass","tip","createElement","className","tipClass","appendChild","tooltipEle","querySelector","renderPopup","elePos","mouseTrail","top","left","getTooltipPosition","classList","popupObj","height","width","X","Y","enableRtl","open","openPopupHandler","bind","close","closePopupHandler","style","display","pos","offsetPos","calculateTooltipOffset","collisionFlipFit","reposition","dataBind","needTemplateReposition","findTarget","trigger","tooltipEventArgs","id","clearTemplate","clear","tooltipEleWidth","offsetWidth","tooltipEleHeight","offsetHeight","arrowEle","tipWidth","tipHeight","tipAdjust","showTipPointer","tipHeightAdjust","clientHeight","tipWidthAdjust","clientWidth","offsetX","offsetY","updateTipPosition","selEle","querySelectorAll","removeList","adjustArrow","leftValue","topValue","tooltipWidth","tooltipHeight","arrowInnerELe","tipPosExclude","tipPointerPosition","renderContent","tooltipContent","cssClass","getAttribute","setAttribute","removeAttribute","content","innerHTML","HTMLElement","enableHtmlSanitizer","setProperties","sanitize","enableHtmlParse","templateFunction","tempArr","undefined","renderReactTemplates","isBlazorTemplate","renderCloseIcon","isSticky","tipClose","add","touchStartEvent","onStickyClose","addDescribedBy","describedby","push","join","trim","removeDescribedBy","index","splice","orgdescribedby","tapHoldHandler","evt","clearTimeout","autoCloseTimer","targetHover","originalEvent","touchEndHandler","e","setTimeout","targetClick","hideTooltip","animation","closeDelay","targetList","slice","document","ctrlId","_i","targetList_1","target_1","restoreElement","showTooltip","showAnimation","showTimer","hideTimer","type","cancel","event","isInteracted","observeCallback","beforeRenderArgs","beforeRenderCallback","isBlazorTooltipRendered","isHidden","args","interopAdaptor","invokeMethodAsync","attrs","role","styles","beforeRenderBlazor","afterRenderBlazor","body","stop","contentUpdated","ctrlObj","isDevice","maxWidth","observedArgs","beforeOpenCallback","openAnimation_1","name","timingFunction","openDelay","show","onMouseMove","wireMouseEvents","tooltip","viewContainerRef","checkCollision","x","y","horizontal","vertical","affectedPos","newpos","collidedPosition","eleOffset","arrowleft","parseInt","toString","hideAnimation","targetElement","hide","isTooltipOpen","tooltipHide","blazorHide","popupHide","proxy","closeAnimation","unwireMouseEvents","destroy","tooltipHover","tooltipMouseOut","onMouseOut","enteredElement","relatedTarget","checkForTooltipElement","tooltipElementMouseOut","eventPageX","eventPageY","preventDefault","touches","pageX","pageY","colpos","keyDown","keyCode","touchEnd","scrollHandler","render","wireEvents","opensOn","renderComplete","preRender","triggerList","getTriggerList","triggerList_1","wireFocusEvents","touchModule","tapHoldThreshold","tapHold","touchEndEvent","targetList_2","unwireEvents","triggerList_2","unwireFocusEvents","targetList_3","triggerList_3","getModuleName","getPersistData","addOnPersist","onPropertyChanged","newProp","oldProp","keys","prop","refresh","placeholder"],"mappings":"AAAA,IAAIA,SAAS,GAAI,QAAQ,KAAKA,SAAd,IAA6B,YAAY;AACrD,MAAIC,aAAa,GAAG,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAChCF,IAAAA,aAAa,GAAGG,MAAM,CAACC,cAAP,IACX;AAAEC,MAAAA,SAAS,EAAE;AAAb,iBAA6BC,KAA7B,IAAsC,UAAUL,CAAV,EAAaC,CAAb,EAAgB;AAAED,MAAAA,CAAC,CAACI,SAAF,GAAcH,CAAd;AAAkB,KAD/D,IAEZ,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AAAE,WAAK,IAAIK,CAAT,IAAcL,CAAd,EAAiB,IAAIA,CAAC,CAACM,cAAF,CAAiBD,CAAjB,CAAJ,EAAyBN,CAAC,CAACM,CAAD,CAAD,GAAOL,CAAC,CAACK,CAAD,CAAR;AAAc,KAF9E;;AAGA,WAAOP,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAApB;AACH,GALD;;AAMA,SAAO,UAAUD,CAAV,EAAaC,CAAb,EAAgB;AACnBF,IAAAA,aAAa,CAACC,CAAD,EAAIC,CAAJ,CAAb;;AACA,aAASO,EAAT,GAAc;AAAE,WAAKC,WAAL,GAAmBT,CAAnB;AAAuB;;AACvCA,IAAAA,CAAC,CAACU,SAAF,GAAcT,CAAC,KAAK,IAAN,GAAaC,MAAM,CAACS,MAAP,CAAcV,CAAd,CAAb,IAAiCO,EAAE,CAACE,SAAH,GAAeT,CAAC,CAACS,SAAjB,EAA4B,IAAIF,EAAJ,EAA7D,CAAd;AACH,GAJD;AAKH,CAZ2C,EAA5C;;AAaA,IAAII,UAAU,GAAI,QAAQ,KAAKA,UAAd,IAA6B,UAAUC,UAAV,EAAsBC,MAAtB,EAA8BC,GAA9B,EAAmCC,IAAnC,EAAyC;AACnF,MAAIC,CAAC,GAAGC,SAAS,CAACC,MAAlB;AAAA,MAA0BC,CAAC,GAAGH,CAAC,GAAG,CAAJ,GAAQH,MAAR,GAAiBE,IAAI,KAAK,IAAT,GAAgBA,IAAI,GAAGd,MAAM,CAACmB,wBAAP,CAAgCP,MAAhC,EAAwCC,GAAxC,CAAvB,GAAsEC,IAArH;AAAA,MAA2HhB,CAA3H;AACA,MAAI,OAAOsB,OAAP,KAAmB,QAAnB,IAA+B,OAAOA,OAAO,CAACC,QAAf,KAA4B,UAA/D,EAA2EH,CAAC,GAAGE,OAAO,CAACC,QAAR,CAAiBV,UAAjB,EAA6BC,MAA7B,EAAqCC,GAArC,EAA0CC,IAA1C,CAAJ,CAA3E,KACK,KAAK,IAAIQ,CAAC,GAAGX,UAAU,CAACM,MAAX,GAAoB,CAAjC,EAAoCK,CAAC,IAAI,CAAzC,EAA4CA,CAAC,EAA7C,EAAiD,IAAIxB,CAAC,GAAGa,UAAU,CAACW,CAAD,CAAlB,EAAuBJ,CAAC,GAAG,CAACH,CAAC,GAAG,CAAJ,GAAQjB,CAAC,CAACoB,CAAD,CAAT,GAAeH,CAAC,GAAG,CAAJ,GAAQjB,CAAC,CAACc,MAAD,EAASC,GAAT,EAAcK,CAAd,CAAT,GAA4BpB,CAAC,CAACc,MAAD,EAASC,GAAT,CAA7C,KAA+DK,CAAnE;AAC7E,SAAOH,CAAC,GAAG,CAAJ,IAASG,CAAT,IAAclB,MAAM,CAACuB,cAAP,CAAsBX,MAAtB,EAA8BC,GAA9B,EAAmCK,CAAnC,CAAd,EAAqDA,CAA5D;AACH,CALD;;AAMA,SAASM,SAAT,EAAoBC,QAApB,EAA8BC,aAA9B,EAA6CC,KAA7C,EAAoDC,MAApD,EAA4DC,OAA5D,EAAqEC,QAArE,QAAqF,sBAArF;AACA,SAASC,YAAT,EAAuBC,KAAvB,EAA8BC,OAA9B,EAAuCC,SAAS,IAAIC,cAApD,QAA0E,sBAA1E;AACA,SAASC,iBAAT,EAA4BC,WAA5B,EAAyCC,UAAzC,QAA2D,sBAA3D;AACA,SAASC,UAAT,EAAqBC,OAArB,EAA8BC,WAA9B,EAA2CC,QAA3C,EAAqDC,MAArD,EAA6DC,oBAA7D,EAAmFC,mBAAnF,QAA8G,sBAA9G;AACA,SAASC,qBAAT,EAAgCC,OAAhC,EAAyCC,kBAAzC,QAAmE,sBAAnE;AACA,SAASC,KAAT,QAAsB,gBAAtB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AACA,SAASC,SAAT,EAAoBC,GAApB,QAA+B,qBAA/B;AACA,IAAIC,mBAAmB,GAAG,IAA1B;AACA,IAAIC,iBAAiB,GAAG,GAAxB;AACA,IAAIC,oBAAoB,GAAG,CAA3B;AACA,IAAIC,oBAAoB,GAAG,CAA3B;AACA,IAAIC,eAAe,GAAG,CAAtB;AACA,IAAIC,cAAc,GAAG,CAArB;AACA,IAAIC,IAAI,GAAG,WAAX;AACA,IAAIC,GAAG,GAAG,OAAV;AACA,IAAIC,MAAM,GAAG,UAAb;AACA,IAAIC,IAAI,GAAG,SAAX;AACA,IAAIC,KAAK,GAAG,iBAAZ;AACA,IAAIC,YAAY,GAAG,gBAAnB;AACA,IAAIC,OAAO,GAAG,eAAd;AACA,IAAIC,SAAS,GAAG,aAAhB;AACA,IAAIC,eAAe,GAAG,mBAAtB;AACA,IAAIC,eAAe,GAAG,mBAAtB;AACA,IAAIC,UAAU,GAAG,cAAjB;AACA,IAAIC,OAAO,GAAG,WAAd;AACA,IAAIC,QAAQ,GAAG,YAAf;AACA,IAAIC,SAAS,GAAG,aAAhB;AACA,IAAIC,UAAU,GAAG,SAAjB;AACA,IAAIC,UAAU,GAAG,cAAjB;AACA,IAAIC,WAAW,GAAG,eAAlB;AACA,IAAIC,SAAS,GAAG,OAAhB;AACA,IAAIC,UAAU,GAAG,UAAjB;;AACA,IAAI3C,SAAS;AAAG;AAAe,UAAU4C,MAAV,EAAkB;AAC7ClF,EAAAA,SAAS,CAACsC,SAAD,EAAY4C,MAAZ,CAAT;;AACA,WAAS5C,SAAT,GAAqB;AACjB,WAAO4C,MAAM,KAAK,IAAX,IAAmBA,MAAM,CAACC,KAAP,CAAa,IAAb,EAAmB/D,SAAnB,CAAnB,IAAoD,IAA3D;AACH;;AACDN,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC;AAAEuD,IAAAA,MAAM,EAAE,QAAV;AAAoBC,IAAAA,QAAQ,EAAE,GAA9B;AAAmCC,IAAAA,KAAK,EAAE;AAA1C,GAAD,CADD,CAAD,EAEPhD,SAAS,CAAC1B,SAFH,EAEc,MAFd,EAEsB,KAAK,CAF3B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC;AAAEuD,IAAAA,MAAM,EAAE,SAAV;AAAqBC,IAAAA,QAAQ,EAAE,GAA/B;AAAoCC,IAAAA,KAAK,EAAE;AAA3C,GAAD,CADD,CAAD,EAEPhD,SAAS,CAAC1B,SAFH,EAEc,OAFd,EAEuB,KAAK,CAF5B,CAAV;;AAGA,SAAO0B,SAAP;AACH,CAZ8B,CAY7BR,aAZ6B,CAA/B;;AAaA,SAASQ,SAAT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAIiD,OAAO;AAAG;AAAe,UAAUL,MAAV,EAAkB;AAC3ClF,EAAAA,SAAS,CAACuF,OAAD,EAAUL,MAAV,CAAT;AACA;AACJ;AACA;;;AACI,WAASK,OAAT,CAAiBC,OAAjB,EAA0BC,OAA1B,EAAmC;AAC/B,QAAIC,KAAK,GAAGR,MAAM,CAACS,IAAP,CAAY,IAAZ,EAAkBH,OAAlB,EAA2BC,OAA3B,KAAuC,IAAnD;;AACAC,IAAAA,KAAK,CAACE,eAAN,GAAwB,KAAxB;AACAF,IAAAA,KAAK,CAACG,kBAAN,GAA2B,IAA3B;AACAH,IAAAA,KAAK,CAACI,YAAN,GAAqB,IAArB;AACAJ,IAAAA,KAAK,CAACK,gBAAN,GAAyB,IAAzB;AACA,WAAOL,KAAP;AACH;;AACDH,EAAAA,OAAO,CAAC3E,SAAR,CAAkBoF,UAAlB,GAA+B,YAAY;AACvC,SAAKC,cAAL;;AACA,QAAI,CAAE,KAAKC,cAAL,EAAN,EAA8B;AAC1BpD,MAAAA,QAAQ,CAAC,CAAC,KAAK2C,OAAN,CAAD,EAAiB1B,IAAjB,CAAR;AACH;AACJ,GALD;;AAMAwB,EAAAA,OAAO,CAAC3E,SAAR,CAAkBsF,cAAlB,GAAmC,YAAY;AAC3C,WAAOhE,QAAQ,MAAM,KAAKiE,gBAA1B;AACH,GAFD;;AAGAZ,EAAAA,OAAO,CAAC3E,SAAR,CAAkBqF,cAAlB,GAAmC,YAAY;AAC3C,QAAIG,EAAJ,EAAQC,EAAR;;AACA,QAAI,KAAKC,QAAL,CAAcC,OAAd,CAAsB,KAAtB,MAAiC,CAAjC,IAAsC,KAAKD,QAAL,CAAcC,OAAd,CAAsB,QAAtB,MAAoC,CAA9E,EAAiF;AAC7EH,MAAAA,EAAE,GAAG,KAAKE,QAAL,CAAcE,KAAd,CAAoB,WAApB,CAAL,EAAuC,KAAKC,gBAAL,GAAwBL,EAAE,CAAC,CAAD,CAAjE,EAAsE,KAAKM,gBAAL,GAAwBN,EAAE,CAAC,CAAD,CAAhG;AACH,KAFD,MAGK;AACDC,MAAAA,EAAE,GAAG,KAAKC,QAAL,CAAcE,KAAd,CAAoB,WAApB,CAAL,EAAuC,KAAKE,gBAAL,GAAwBL,EAAE,CAAC,CAAD,CAAjE,EAAsE,KAAKI,gBAAL,GAAwBJ,EAAE,CAAC,CAAD,CAAhG;AACH;AACJ,GARD;;AASAd,EAAAA,OAAO,CAAC3E,SAAR,CAAkB+F,WAAlB,GAAgC,YAAY;AACxC,SAAKC,WAAL,CAAiB,KAAKN,QAAtB;;AACA,QAAI,CAAE,KAAKJ,cAAL,EAAN,EAA8B;AAC1B,UAAIW,GAAG,GAAG,KAAKC,aAAL,CAAmB,KAAnB,EAA0B;AAAEC,QAAAA,SAAS,EAAEzC,SAAS,GAAG,GAAZ,GAAkB,KAAK0C;AAApC,OAA1B,CAAV;AACAH,MAAAA,GAAG,CAACI,WAAJ,CAAgB,KAAKH,aAAL,CAAmB,KAAnB,EAA0B;AAAEC,QAAAA,SAAS,EAAExC,eAAe,GAAG,GAAlB,GAAwB,KAAKyC;AAA1C,OAA1B,CAAhB;AACAH,MAAAA,GAAG,CAACI,WAAJ,CAAgB,KAAKH,aAAL,CAAmB,KAAnB,EAA0B;AAAEC,QAAAA,SAAS,EAAEvC,eAAe,GAAG,GAAlB,GAAwB,KAAKwC;AAA1C,OAA1B,CAAhB;AACA,WAAKE,UAAL,CAAgBD,WAAhB,CAA4BJ,GAA5B;AACH,KALD,MAMK;AACD,UAAIA,GAAG,GAAG,KAAKK,UAAL,CAAgBC,aAAhB,CAA8B,MAAM7C,SAApC,CAAV;AACAxB,MAAAA,QAAQ,CAAC,CAAC+D,GAAG,CAACM,aAAJ,CAAkB,MAAM5C,eAAxB,CAAD,CAAD,EAA6C,KAAKyC,QAAlD,CAAR;AACAlE,MAAAA,QAAQ,CAAC,CAAC+D,GAAG,CAACM,aAAJ,CAAkB,MAAM3C,eAAxB,CAAD,CAAD,EAA6C,KAAKwC,QAAlD,CAAR;AACA,WAAKE,UAAL,CAAgBD,WAAhB,CAA4BJ,GAA5B;AACH;AACJ,GAdD;;AAeAtB,EAAAA,OAAO,CAAC3E,SAAR,CAAkBgG,WAAlB,GAAgC,UAAUN,QAAV,EAAoB;AAChD,QAAIA,QAAQ,CAACC,OAAT,CAAiB,OAAjB,MAA8B,CAAlC,EAAqC;AACjC,WAAKS,QAAL,GAAgBrC,QAAhB;AACH,KAFD,MAGK,IAAI2B,QAAQ,CAACC,OAAT,CAAiB,QAAjB,MAA+B,CAAnC,EAAsC;AACvC,WAAKS,QAAL,GAAgBtC,OAAhB;AACH,KAFI,MAGA,IAAI4B,QAAQ,CAACC,OAAT,CAAiB,MAAjB,MAA6B,CAAjC,EAAoC;AACrC,WAAKS,QAAL,GAAgBpC,SAAhB;AACH,KAFI,MAGA;AACD,WAAKoC,QAAL,GAAgBvC,UAAhB;AACH;AACJ,GAbD;;AAcAc,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwG,WAAlB,GAAgC,UAAUpG,MAAV,EAAkB;AAC9C,QAAIqG,MAAM,GAAG,KAAKC,UAAL,GAAkB;AAAEC,MAAAA,GAAG,EAAE,CAAP;AAAUC,MAAAA,IAAI,EAAE;AAAhB,KAAlB,GAAwC,KAAKC,kBAAL,CAAwBzG,MAAxB,CAArD;AACA,SAAKkG,UAAL,CAAgBQ,SAAhB,CAA0B3E,MAA1B,CAAiCiC,SAAjC;AACA,SAAK2C,QAAL,GAAgB,IAAItE,KAAJ,CAAU,KAAK6D,UAAf,EAA2B;AACvCU,MAAAA,MAAM,EAAE,KAAKA,MAD0B;AAEvCC,MAAAA,KAAK,EAAE,KAAKA,KAF2B;AAGvCvB,MAAAA,QAAQ,EAAE;AAAEwB,QAAAA,CAAC,EAAET,MAAM,CAACG,IAAZ;AAAkBO,QAAAA,CAAC,EAAEV,MAAM,CAACE;AAA5B,OAH6B;AAIvCS,MAAAA,SAAS,EAAE,KAAKA,SAJuB;AAKvCC,MAAAA,IAAI,EAAE,KAAKC,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CALiC;AAMvCC,MAAAA,KAAK,EAAE,KAAKC,iBAAL,CAAuBF,IAAvB,CAA4B,IAA5B;AANgC,KAA3B,CAAhB;AAQH,GAXD;;AAYA5C,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6G,kBAAlB,GAAuC,UAAUzG,MAAV,EAAkB;AACrD,SAAKkG,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;AACA,QAAIC,GAAG,GAAGlF,iBAAiB,CAACtC,MAAD,EAAS,KAAK0F,gBAAd,EAAgC,KAAKD,gBAArC,CAA3B;AACA,QAAIgC,SAAS,GAAG,KAAKC,sBAAL,CAA4B,KAAKpC,QAAjC,CAAhB;AACA,QAAIe,MAAM,GAAG,KAAKsB,gBAAL,CAAsB3H,MAAtB,EAA8BwH,GAAG,CAAChB,IAAJ,GAAWiB,SAAS,CAACjB,IAAnD,EAAyDgB,GAAG,CAACjB,GAAJ,GAAUkB,SAAS,CAAClB,GAA7E,CAAb;AACA,SAAKL,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,EAAhC;AACA,WAAOlB,MAAP;AACH,GAPD;;AAQA9B,EAAAA,OAAO,CAAC3E,SAAR,CAAkBgI,UAAlB,GAA+B,UAAU5H,MAAV,EAAkB;AAC7C,QAAIqG,MAAM,GAAG,KAAKI,kBAAL,CAAwBzG,MAAxB,CAAb;AACA,SAAK2G,QAAL,CAAcrB,QAAd,GAAyB;AAAEwB,MAAAA,CAAC,EAAET,MAAM,CAACG,IAAZ;AAAkBO,MAAAA,CAAC,EAAEV,MAAM,CAACE;AAA5B,KAAzB;AACA,SAAKI,QAAL,CAAckB,QAAd;AACH,GAJD;;AAKAtD,EAAAA,OAAO,CAAC3E,SAAR,CAAkBsH,gBAAlB,GAAqC,YAAY;AAC7C,QAAI,CAAC,KAAKZ,UAAN,IAAoB,KAAKwB,sBAAL,EAAxB,EAAuD;AACnD,WAAKF,UAAL,CAAgB,KAAKG,UAAL,EAAhB;AACH;;AACD,SAAKC,OAAL,CAAa,WAAb,EAA0B,KAAKC,gBAA/B;AACH,GALD;;AAMA1D,EAAAA,OAAO,CAAC3E,SAAR,CAAkByH,iBAAlB,GAAsC,YAAY;AAC9CpF,IAAAA,mBAAmB,CAAC,KAAKwC,OAAL,CAAayD,EAAb,GAAkB,SAAnB,EAA8B,SAA9B,CAAnB;AACA,SAAKC,aAAL,CAAmB,CAAC,SAAD,CAAnB;AACA,SAAKC,KAAL;AACA,SAAKJ,OAAL,CAAa,YAAb,EAA2B,KAAKC,gBAAhC;AACH,GALD;;AAMA1D,EAAAA,OAAO,CAAC3E,SAAR,CAAkB8H,sBAAlB,GAA2C,UAAUpC,QAAV,EAAoB;AAC3D,QAAIkC,GAAG,GAAG;AAAEjB,MAAAA,GAAG,EAAE,CAAP;AAAUC,MAAAA,IAAI,EAAE;AAAhB,KAAV;AACA,QAAI6B,eAAe,GAAG,KAAKnC,UAAL,CAAgBoC,WAAtC;AACA,QAAIC,gBAAgB,GAAG,KAAKrC,UAAL,CAAgBsC,YAAvC;AACA,QAAIC,QAAQ,GAAG,KAAKvC,UAAL,CAAgBC,aAAhB,CAA8B,MAAM7C,SAApC,CAAf;AACA,QAAIoF,QAAQ,GAAGD,QAAQ,GAAGA,QAAQ,CAACH,WAAZ,GAA0B,CAAjD;AACA,QAAIK,SAAS,GAAGF,QAAQ,GAAGA,QAAQ,CAACD,YAAZ,GAA2B,CAAnD;AACA,QAAII,SAAS,GAAI,KAAKC,cAAL,GAAsBlG,oBAAtB,GAA6CC,oBAA9D;AACA,QAAIkG,eAAe,GAAIH,SAAS,GAAG,CAAb,GAAkB7F,cAAlB,IAAoC,KAAKoD,UAAL,CAAgBsC,YAAhB,GAA+B,KAAKtC,UAAL,CAAgB6C,YAAnF,CAAtB;AACA,QAAIC,cAAc,GAAIN,QAAQ,GAAG,CAAZ,GAAiB5F,cAAjB,IAAmC,KAAKoD,UAAL,CAAgBoC,WAAhB,GAA8B,KAAKpC,UAAL,CAAgB+C,WAAjF,CAArB;;AACA,QAAI,KAAK3C,UAAT,EAAqB;AACjBsC,MAAAA,SAAS,IAAI/F,eAAb;AACH;;AACD,YAAQyC,QAAR;AACI,WAAK,UAAL;AACIkC,QAAAA,GAAG,CAAChB,IAAJ,IAAYkC,QAAQ,GAAGE,SAAvB;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAWgC,gBAAgB,GAAGO,eAA9B;AACA;;AACJ,WAAK,aAAL;AACItB,QAAAA,GAAG,CAAChB,IAAJ,IAAYkC,QAAQ,GAAGE,SAAvB;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAG,CAA/B;AACA;;AACJ,WAAK,aAAL;AACIf,QAAAA,GAAG,CAAChB,IAAJ,IAAYkC,QAAQ,GAAGE,SAAvB;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAYuC,eAAZ;AACA;;AACJ,WAAK,aAAL;AACItB,QAAAA,GAAG,CAACjB,GAAJ,IAAYoC,SAAS,GAAGC,SAAxB;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAawC,cAAb;AACA;;AACJ,WAAK,cAAL;AACIxB,QAAAA,GAAG,CAACjB,GAAJ,IAAYoC,SAAS,GAAGC,SAAxB;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAa6B,eAAe,GAAG,CAA/B;AACA;;AACJ,WAAK,YAAL;AACIb,QAAAA,GAAG,CAACjB,GAAJ,IAAYoC,SAAS,GAAGC,SAAxB;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAa6B,eAAe,GAAGW,cAA/B;AACA;;AACJ,WAAK,YAAL;AACIxB,QAAAA,GAAG,CAAChB,IAAJ,IAAakC,QAAQ,GAAGL,eAAX,GAA6BO,SAA1C;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAYuC,eAAZ;AACA;;AACJ,WAAK,YAAL;AACItB,QAAAA,GAAG,CAAChB,IAAJ,IAAakC,QAAQ,GAAGL,eAAX,GAA6BO,SAA1C;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAG,CAA/B;AACA;;AACJ,WAAK,SAAL;AACIf,QAAAA,GAAG,CAAChB,IAAJ,IAAakC,QAAQ,GAAGL,eAAX,GAA6BO,SAA1C;AACApB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAGO,eAA/B;AACA;;AACJ,WAAK,SAAL;AACItB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAGI,SAAnB,GAA+BC,SAA3C;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAa6B,eAAe,GAAGW,cAA/B;AACA;;AACJ,WAAK,UAAL;AACIxB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAGI,SAAnB,GAA+BC,SAA3C;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAawC,cAAb;AACA;;AACJ;AACIxB,QAAAA,GAAG,CAACjB,GAAJ,IAAYgC,gBAAgB,GAAGI,SAAnB,GAA+BC,SAA3C;AACApB,QAAAA,GAAG,CAAChB,IAAJ,IAAa6B,eAAe,GAAG,CAA/B;AACA;AAhDR;;AAkDAb,IAAAA,GAAG,CAAChB,IAAJ,IAAY,KAAK0C,OAAjB;AACA1B,IAAAA,GAAG,CAACjB,GAAJ,IAAW,KAAK4C,OAAhB;AACA,WAAO3B,GAAP;AACH,GAlED;;AAmEAjD,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwJ,iBAAlB,GAAsC,UAAU9D,QAAV,EAAoB;AACtD,QAAI+D,MAAM,GAAG,KAAKnD,UAAL,CAAgBoD,gBAAhB,CAAiC,MAAMhG,SAAN,GAAkB,IAAlB,GAAyBC,eAAzB,GAA2C,IAA3C,GAAkDC,eAAnF,CAAb;AACA,QAAI+F,UAAU,GAAG,CAAC9F,UAAD,EAAaC,OAAb,EAAsBC,QAAtB,EAAgCC,SAAhC,CAAjB;AACA/B,IAAAA,WAAW,CAACwH,MAAD,EAASE,UAAT,CAAX;AACA,SAAK3D,WAAL,CAAiBN,QAAjB;AACAxD,IAAAA,QAAQ,CAACuH,MAAD,EAAS,KAAKrD,QAAd,CAAR;AACH,GAND;;AAOAzB,EAAAA,OAAO,CAAC3E,SAAR,CAAkB4J,WAAlB,GAAgC,UAAUxJ,MAAV,EAAkBsF,QAAlB,EAA4BI,gBAA5B,EAA8CD,gBAA9C,EAAgE;AAC5F,QAAI,KAAKoD,cAAL,KAAwB,KAA5B,EAAmC;AAC/B;AACH;;AACD,SAAKO,iBAAL,CAAuB9D,QAAvB;AACA,QAAImE,SAAJ;AACA,QAAIC,QAAJ;AACA,SAAKxD,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;AACA,QAAIoC,YAAY,GAAG,KAAKzD,UAAL,CAAgB+C,WAAnC;AACA,QAAIW,aAAa,GAAG,KAAK1D,UAAL,CAAgB6C,YAApC;AACA,QAAIN,QAAQ,GAAG,KAAKvC,UAAL,CAAgBC,aAAhB,CAA8B,MAAM7C,SAApC,CAAf;AACA,QAAIuG,aAAa,GAAG,KAAK3D,UAAL,CAAgBC,aAAhB,CAA8B,MAAM3C,eAApC,CAApB;AACA,QAAIkF,QAAQ,GAAGD,QAAQ,CAACH,WAAxB;AACA,QAAIK,SAAS,GAAGF,QAAQ,CAACD,YAAzB;AACA,SAAKtC,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,EAAhC;;AACA,QAAI,KAAKvB,QAAL,KAAkBvC,UAAlB,IAAgC,KAAKuC,QAAL,KAAkBtC,OAAtD,EAA+D;AAC3D,UAAI,KAAKsC,QAAL,KAAkBvC,UAAtB,EAAkC;AAC9BiG,QAAAA,QAAQ,GAAG,OAAX,CAD8B,CAE9B;;AACAG,QAAAA,aAAa,CAACvC,KAAd,CAAoBf,GAApB,GAA0B,OAAOoC,SAAS,GAAG,CAAnB,IAAwB,IAAlD;AACH,OAJD,MAKK;AACDe,QAAAA,QAAQ,GAAG,EAAEf,SAAS,GAAG,CAAd,IAAmB,IAA9B,CADC,CAED;;AACAkB,QAAAA,aAAa,CAACvC,KAAd,CAAoBf,GAApB,GAA0B,OAAOoC,SAAS,GAAG,CAAnB,IAAwB,IAAlD;AACH;;AACD,UAAI3I,MAAJ,EAAY;AACR,YAAI8J,aAAa,GAAGpE,gBAAgB,KAAK,QAArB,IAAkCiE,YAAY,GAAG3J,MAAM,CAACsI,WAAxD,IAAwE,KAAKhC,UAAjG;;AACA,YAAKwD,aAAa,IAAIpE,gBAAgB,KAAK,MAAvC,IAAmD,CAACoE,aAAD,IAAkB,KAAKC,kBAAL,KAA4B,KAArG,EAA6G;AACzGN,UAAAA,SAAS,GAAIE,YAAY,GAAGjB,QAAf,GAA0B5F,cAA3B,GAA6C,IAAzD;AACH,SAFD,MAGK,IAAKgH,aAAa,IAAIpE,gBAAgB,KAAK,OAAvC,IAAoD,CAACoE,aAAD,IAAkB,KAAKC,kBAAL,KAA4B,OAAtG,EAAgH;AACjHN,UAAAA,SAAS,GAAG3G,cAAc,GAAG,IAA7B;AACH,SAFI,MAGA;AACD2G,UAAAA,SAAS,GAAKE,YAAY,GAAG,CAAhB,GAAsBjB,QAAQ,GAAG,CAAlC,GAAwC,IAApD;AACH;AACJ;AACJ,KAvBD,MAwBK;AACD,UAAI,KAAK1C,QAAL,KAAkBpC,SAAtB,EAAiC;AAC7B6F,QAAAA,SAAS,GAAG,OAAZ,CAD6B,CAE7B;;AACAI,QAAAA,aAAa,CAACvC,KAAd,CAAoBd,IAApB,GAA2B,OAAOkC,QAAQ,GAAG,CAAlB,IAAuB,IAAlD;AACH,OAJD,MAKK;AACDe,QAAAA,SAAS,GAAG,EAAEf,QAAQ,GAAG,CAAb,IAAkB,IAA9B,CADC,CAED;;AACAmB,QAAAA,aAAa,CAACvC,KAAd,CAAoBd,IAApB,GAA4B,CAAEkC,QAAF,IAAeA,QAAQ,GAAG,CAA1B,CAAD,GAAiC,IAA5D;AACH;;AACD,UAAIoB,aAAa,GAAGrE,gBAAgB,KAAK,QAArB,IAAkCmE,aAAa,GAAG5J,MAAM,CAACwI,YAAzD,IAA0E,KAAKlC,UAAnG;;AACA,UAAKwD,aAAa,IAAIrE,gBAAgB,KAAK,KAAvC,IAAkD,CAACqE,aAAD,IAAkB,KAAKC,kBAAL,KAA4B,KAApG,EAA4G;AACxGL,QAAAA,QAAQ,GAAIE,aAAa,GAAGjB,SAAhB,GAA4B7F,cAA7B,GAA+C,IAA1D;AACH,OAFD,MAGK,IAAKgH,aAAa,IAAIrE,gBAAgB,KAAK,QAAvC,IAAqD,CAACqE,aAAD,IAAkB,KAAKC,kBAAL,KAA4B,OAAvG,EAAiH;AAClHL,QAAAA,QAAQ,GAAG5G,cAAc,GAAG,IAA5B;AACH,OAFI,MAGA;AACD4G,QAAAA,QAAQ,GAAKE,aAAa,GAAG,CAAjB,GAAuBjB,SAAS,GAAG,CAApC,GAA0C,IAArD;AACH;AACJ;;AACDF,IAAAA,QAAQ,CAACnB,KAAT,CAAef,GAAf,GAAqBmD,QAArB;AACAjB,IAAAA,QAAQ,CAACnB,KAAT,CAAed,IAAf,GAAsBiD,SAAtB;AACH,GA/DD;;AAgEAlF,EAAAA,OAAO,CAAC3E,SAAR,CAAkBoK,aAAlB,GAAkC,UAAUhK,MAAV,EAAkB;AAChD,QAAIiK,cAAc,GAAG,KAAK/D,UAAL,CAAgBC,aAAhB,CAA8B,MAAM9C,OAApC,CAArB;;AACA,QAAI,KAAK6G,QAAT,EAAmB;AACfpI,MAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoB,KAAKgE,QAAL,CAAc1E,KAAd,CAAoB,GAApB,CAApB,CAAR;AACH;;AACD,QAAIxF,MAAM,IAAI,CAACwB,iBAAiB,CAACxB,MAAM,CAACmK,YAAP,CAAoB,OAApB,CAAD,CAAhC,EAAgE;AAC5DnK,MAAAA,MAAM,CAACoK,YAAP,CAAoB,cAApB,EAAoCpK,MAAM,CAACmK,YAAP,CAAoB,OAApB,CAApC;AACAnK,MAAAA,MAAM,CAACqK,eAAP,CAAuB,OAAvB;AACH;;AACD,QAAI,CAAC7I,iBAAiB,CAAC,KAAK8I,OAAN,CAAtB,EAAsC;AAClC,UAAI,KAAK1F,eAAL,IAAwB,CAAE,KAAKM,cAAL,EAA9B,EAAsD;AAClD+E,QAAAA,cAAc,CAACM,SAAf,GAA2B,EAA3B;;AACA,YAAI,KAAKD,OAAL,YAAwBE,WAA5B,EAAyC;AACrCP,UAAAA,cAAc,CAAChE,WAAf,CAA2B,KAAKqE,OAAhC;AACH,SAFD,MAGK,IAAI,OAAO,KAAKA,OAAZ,KAAwB,QAAxB,IAAoC,KAAKA,OAAL,CAAa/E,OAAb,CAAqB,aAArB,IAAsC,CAA9E,EAAiF;AAClF,cAAI,KAAKkF,mBAAT,EAA8B;AAC1B,iBAAKC,aAAL,CAAmB;AAAEJ,cAAAA,OAAO,EAAElI,kBAAkB,CAACuI,QAAnB,CAA4B,KAAKL,OAAjC;AAAX,aAAnB,EAA2E,IAA3E;AACH;;AACDL,UAAAA,cAAc,CAAC,KAAKW,eAAL,GAAuB,WAAvB,GAAqC,aAAtC,CAAd,GAAqE,KAAKN,OAA1E;AACH,SALI,MAMA;AACD,cAAIO,gBAAgB,GAAG5J,OAAO,CAAC,KAAKqJ,OAAN,CAA9B;AACA,cAAIQ,OAAO,GAAGD,gBAAgB,CAAC,EAAD,EAAK,IAAL,EAAW,SAAX,EAAsB,KAAKpG,OAAL,CAAayD,EAAb,GAAkB,SAAxC,EAAmD6C,SAAnD,EAA8DA,SAA9D,EAAyEd,cAAzE,CAA9B;;AACA,cAAIa,OAAJ,EAAa;AACT9J,YAAAA,MAAM,CAAC8J,OAAD,EAAUb,cAAV,CAAN;AACH;;AACD,eAAKe,oBAAL;;AACA,cAAI,OAAO,KAAKV,OAAZ,KAAwB,QAAxB,IAAoC,KAAKA,OAAL,CAAa/E,OAAb,CAAqB,aAArB,KAAuC,CAA/E,EAAkF;AAC9E,iBAAK0F,gBAAL,GAAwB,IAAxB;AACAjJ,YAAAA,oBAAoB,CAAC,KAAKyC,OAAL,CAAayD,EAAb,GAAkB,SAAnB,EAA8B,SAA9B,EAAyC,IAAzC,CAApB;AACH;AACJ;AACJ;AACJ,KAzBD,MA0BK;AACD,UAAIlI,MAAM,IAAI,CAACwB,iBAAiB,CAACxB,MAAM,CAACmK,YAAP,CAAoB,cAApB,CAAD,CAAhC,EAAuE;AACnEF,QAAAA,cAAc,CAACM,SAAf,GAA2BvK,MAAM,CAACmK,YAAP,CAAoB,cAApB,CAA3B;AACH;AACJ;AACJ,GAxCD;;AAyCA5F,EAAAA,OAAO,CAAC3E,SAAR,CAAkBsL,eAAlB,GAAoC,YAAY;AAC5C,QAAI,CAAC,KAAKC,QAAV,EAAoB;AAChB;AACH;;AACD,QAAIC,QAAQ,GAAG,KAAKtF,aAAL,CAAmB,KAAnB,EAA0B;AAAEC,MAAAA,SAAS,EAAE7C,IAAI,GAAG,GAAP,GAAaC;AAA1B,KAA1B,CAAf;AACA,SAAK+C,UAAL,CAAgBD,WAAhB,CAA4BmF,QAA5B;AACAjK,IAAAA,YAAY,CAACkK,GAAb,CAAiBD,QAAjB,EAA2B/J,OAAO,CAACiK,eAAnC,EAAoD,KAAKC,aAAzD,EAAwE,IAAxE;AACH,GAPD;;AAQAhH,EAAAA,OAAO,CAAC3E,SAAR,CAAkB4L,cAAlB,GAAmC,UAAUxL,MAAV,EAAkBkI,EAAlB,EAAsB;AACrD,QAAIuD,WAAW,GAAG,CAACzL,MAAM,CAACmK,YAAP,CAAoB,kBAApB,KAA2C,EAA5C,EAAgD3E,KAAhD,CAAsD,KAAtD,CAAlB;;AACA,QAAIiG,WAAW,CAAClG,OAAZ,CAAoB2C,EAApB,IAA0B,CAA9B,EAAiC;AAC7BuD,MAAAA,WAAW,CAACC,IAAZ,CAAiBxD,EAAjB;AACH;;AACDvG,IAAAA,UAAU,CAAC3B,MAAD,EAAS;AAAE,0BAAoByL,WAAW,CAACE,IAAZ,CAAiB,GAAjB,EAAsBC,IAAtB,EAAtB;AAAoD,yBAAmB1D;AAAvE,KAAT,CAAV;AACH,GAND;;AAOA3D,EAAAA,OAAO,CAAC3E,SAAR,CAAkBiM,iBAAlB,GAAsC,UAAU7L,MAAV,EAAkB;AACpD,QAAIkI,EAAE,GAAGlI,MAAM,CAACmK,YAAP,CAAoB,iBAApB,CAAT;AACA,QAAIsB,WAAW,GAAG,CAACzL,MAAM,CAACmK,YAAP,CAAoB,kBAApB,KAA2C,EAA5C,EAAgD3E,KAAhD,CAAsD,KAAtD,CAAlB;AACA,QAAIsG,KAAK,GAAGL,WAAW,CAAClG,OAAZ,CAAoB2C,EAApB,CAAZ;;AACA,QAAI4D,KAAK,KAAK,CAAC,CAAf,EAAkB;AACdL,MAAAA,WAAW,CAACM,MAAZ,CAAmBD,KAAnB,EAA0B,CAA1B;AACH;;AACD9L,IAAAA,MAAM,CAACqK,eAAP,CAAuB,iBAAvB;AACA,QAAI2B,cAAc,GAAGP,WAAW,CAACE,IAAZ,CAAiB,GAAjB,EAAsBC,IAAtB,EAArB;;AACA,QAAII,cAAJ,EAAoB;AAChBhM,MAAAA,MAAM,CAACoK,YAAP,CAAoB,kBAApB,EAAwC4B,cAAxC;AACH,KAFD,MAGK;AACDhM,MAAAA,MAAM,CAACqK,eAAP,CAAuB,kBAAvB;AACH;AACJ,GAfD;;AAgBA9F,EAAAA,OAAO,CAAC3E,SAAR,CAAkBqM,cAAlB,GAAmC,UAAUC,GAAV,EAAe;AAC9CC,IAAAA,YAAY,CAAC,KAAKC,cAAN,CAAZ;AACA,SAAKC,WAAL,CAAiBH,GAAG,CAACI,aAArB;AACH,GAHD;;AAIA/H,EAAAA,OAAO,CAAC3E,SAAR,CAAkB2M,eAAlB,GAAoC,UAAUC,CAAV,EAAa;AAC7C,QAAI9H,KAAK,GAAG,IAAZ;;AACA,QAAI,KAAKyG,QAAT,EAAmB;AACf;AACH;;AACD,QAAI/D,KAAK,GAAG,YAAY;AACpB1C,MAAAA,KAAK,CAAC0C,KAAN;AACH,KAFD;;AAGA,SAAKgF,cAAL,GAAsBK,UAAU,CAACrF,KAAD,EAAQ3E,mBAAR,CAAhC;AACH,GATD;;AAUA8B,EAAAA,OAAO,CAAC3E,SAAR,CAAkB8M,WAAlB,GAAgC,UAAUF,CAAV,EAAa;AACzC,QAAIxM,MAAJ;;AACA,QAAI,KAAKA,MAAT,EAAiB;AACbA,MAAAA,MAAM,GAAG4B,OAAO,CAAC4K,CAAC,CAACxM,MAAH,EAAW,KAAKA,MAAhB,CAAhB;AACH,KAFD,MAGK;AACDA,MAAAA,MAAM,GAAG,KAAKyE,OAAd;AACH;;AACD,QAAIjD,iBAAiB,CAACxB,MAAD,CAArB,EAA+B;AAC3B;AACH;;AACD,QAAIA,MAAM,CAACmK,YAAP,CAAoB,iBAApB,MAA2C,IAA/C,EAAqD;AACjD,WAAKkC,WAAL,CAAiBG,CAAjB;AACH,KAFD,MAGK,IAAI,CAAC,KAAKrB,QAAV,EAAoB;AACrB,WAAKwB,WAAL,CAAiB,KAAKC,SAAL,CAAexF,KAAhC,EAAuCoF,CAAvC,EAA0CxM,MAA1C;AACH;AACJ,GAjBD;;AAkBAuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkByM,WAAlB,GAAgC,UAAUG,CAAV,EAAa;AACzC,QAAIxM,MAAJ;;AACA,QAAI,KAAKA,MAAT,EAAiB;AACbA,MAAAA,MAAM,GAAG4B,OAAO,CAAC4K,CAAC,CAACxM,MAAH,EAAW,KAAKA,MAAhB,CAAhB;AACH,KAFD,MAGK;AACDA,MAAAA,MAAM,GAAG,KAAKyE,OAAd;AACH;;AACD,QAAIjD,iBAAiB,CAACxB,MAAD,CAAjB,IAA8BA,MAAM,CAACmK,YAAP,CAAoB,iBAApB,MAA2C,IAA3C,IAAmD,KAAK0C,UAAL,KAAoB,CAAzG,EAA6G;AACzG;AACH;;AACD,QAAIC,UAAU,GAAG,GAAGC,KAAH,CAASpI,IAAT,CAAcqI,QAAQ,CAAC1D,gBAAT,CAA0B,uBAAuB,KAAK2D,MAA5B,GAAqC,WAA/D,CAAd,CAAjB;;AACA,SAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,YAAY,GAAGL,UAAhC,EAA4CI,EAAE,GAAGC,YAAY,CAAC9M,MAA9D,EAAsE6M,EAAE,EAAxE,EAA4E;AACxE,UAAIE,QAAQ,GAAGD,YAAY,CAACD,EAAD,CAA3B;AACA,WAAKG,cAAL,CAAoBD,QAApB;AACH;;AACD,SAAKE,WAAL,CAAiBtN,MAAjB,EAAyB,KAAK4M,SAAL,CAAe3F,IAAxC,EAA8CuF,CAA9C;AACH,GAjBD;;AAkBAjI,EAAAA,OAAO,CAAC3E,SAAR,CAAkB0N,WAAlB,GAAgC,UAAUtN,MAAV,EAAkBuN,aAAlB,EAAiCf,CAAjC,EAAoC;AAChE,QAAI9H,KAAK,GAAG,IAAZ;;AACAyH,IAAAA,YAAY,CAAC,KAAKqB,SAAN,CAAZ;AACArB,IAAAA,YAAY,CAAC,KAAKsB,SAAN,CAAZ;AACA,SAAKxF,gBAAL,GAAwB;AACpByF,MAAAA,IAAI,EAAElB,CAAC,GAAGA,CAAC,CAACkB,IAAL,GAAY,IADC;AACKC,MAAAA,MAAM,EAAE,KADb;AACoB3N,MAAAA,MAAM,EAAEA,MAD5B;AACoC4N,MAAAA,KAAK,EAAEpB,CAAC,GAAGA,CAAH,GAAO,IADnD;AAEpB/H,MAAAA,OAAO,EAAE,KAAKyB,UAFM;AAEM2H,MAAAA,YAAY,EAAE,CAACrM,iBAAiB,CAACgL,CAAD;AAFtC,KAAxB;;AAIA,QAAIsB,eAAe,GAAG,UAAUC,gBAAV,EAA4B;AAC9CrJ,MAAAA,KAAK,CAACsJ,oBAAN,CAA2BD,gBAA3B,EAA6C/N,MAA7C,EAAqDwM,CAArD,EAAwDe,aAAxD;AACH,KAFD;;AAGA,SAAKvF,OAAL,CAAa,cAAb,EAA6B,KAAKC,gBAAlC,EAAoD6F,eAAe,CAAC3G,IAAhB,CAAqB,IAArB,CAApD;AACH,GAZD;;AAaA5C,EAAAA,OAAO,CAAC3E,SAAR,CAAkBoO,oBAAlB,GAAyC,UAAUD,gBAAV,EAA4B/N,MAA5B,EAAoCwM,CAApC,EAAuCe,aAAvC,EAAsD;AAC3F,QAAIU,uBAAuB,GAAG,KAA9B;;AACA,QAAIF,gBAAgB,CAACJ,MAArB,EAA6B;AACzB,WAAKO,QAAL,GAAgB,IAAhB;AACA,WAAK9F,KAAL;AACH,KAHD,MAIK;AACD,WAAK8F,QAAL,GAAgB,KAAhB;;AACA,UAAI1M,iBAAiB,CAAC,KAAK0E,UAAN,CAArB,EAAwC;AACpC,YAAI,KAAKhB,cAAL,EAAJ,EAA2B;AACvB,eAAKL,kBAAL,GAA0B7E,MAA1B;AACA,eAAK8E,YAAL,GAAoB0H,CAApB;AACA,eAAKzH,gBAAL,GAAwBwI,aAAxB;AACA,cAAIY,IAAI,GAAG;AAAE,6BAAiB;AAAnB,WAAX,CAJuB,CAKvB;;AACA,eAAKC,cAAL,CAAoBC,iBAApB,CAAsC,qBAAtC,EAA6DF,IAA7D,EANuB,CAOvB;;AACAF,UAAAA,uBAAuB,GAAG,IAA1B;AACH,SATD,MAUK;AACD,eAAKhB,MAAL,GAAc,KAAKxI,OAAL,CAAa0F,YAAb,CAA0B,IAA1B,IACV1I,WAAW,CAAC,KAAKgD,OAAL,CAAa0F,YAAb,CAA0B,IAA1B,CAAD,CADD,GACqC1I,WAAW,CAAC,SAAD,CAD9D;AAEA,eAAKyE,UAAL,GAAkB,KAAKJ,aAAL,CAAmB,KAAnB,EAA0B;AACxCC,YAAAA,SAAS,EAAE3C,YAAY,GAAG,GAAf,GAAqBS,UAArB,GAAkC,GAAlC,GAAwCG,SADX;AACsBsK,YAAAA,KAAK,EAAE;AACjEC,cAAAA,IAAI,EAAE,SAD2D;AAChD,6BAAe,OADiC;AACxB,oBAAM,KAAKtB,MAAL,GAAc;AADI,aAD7B;AAGrCuB,YAAAA,MAAM,EAAE,WACP9M,UAAU,CAAC,KAAKmF,KAAN,CADH,GACkB,UADlB,GAC+BnF,UAAU,CAAC,KAAKkF,MAAN,CADzC,GACyD;AAJ5B,WAA1B,CAAlB;AAMA,eAAK6H,kBAAL,CAAwBzO,MAAxB,EAAgC,IAAhC;AACH;;AACD,YAAI,CAACiO,uBAAL,EAA8B;AAC1B,eAAKS,iBAAL,CAAuB1O,MAAvB,EAA+BwM,CAA/B,EAAkCe,aAAlC,EAAiD,IAAjD;AACH;AACJ,OAzBD,MA0BK;AACD,YAAI,KAAKrI,cAAL,EAAJ,EAA2B;AACvBpD,UAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoBpC,UAApB,CAAR;AACAkJ,UAAAA,QAAQ,CAAC2B,IAAT,CAAc1I,WAAd,CAA0B,KAAKC,UAA/B;AACA,eAAKgF,eAAL;AACA,eAAK9E,WAAL,CAAiBpG,MAAjB;AACH;;AACD,YAAIA,MAAJ,EAAY;AACR,eAAKwJ,WAAL,CAAiBxJ,MAAjB,EAAyB,KAAKsF,QAA9B,EAAwC,KAAKI,gBAA7C,EAA+D,KAAKD,gBAApE;AACA,eAAK+F,cAAL,CAAoBxL,MAApB,EAA4B,KAAKiN,MAAL,GAAc,UAA1C;AACA,eAAKjD,aAAL,CAAmBhK,MAAnB;AACAuB,UAAAA,cAAc,CAACqN,IAAf,CAAoB,KAAK1I,UAAzB;AACA,eAAK0B,UAAL,CAAgB5H,MAAhB;AACA,eAAK0O,iBAAL,CAAuB1O,MAAvB,EAA+BwM,CAA/B,EAAkCe,aAAlC,EAAiD,IAAjD;AACH;AACJ;AACJ;AACJ,GAnDD;;AAoDA;;AACAhJ,EAAAA,OAAO,CAAC3E,SAAR,CAAkBiP,cAAlB,GAAmC,UAAUV,IAAV,EAAgB;AAC/C,QAAI3M,iBAAiB,CAAC,KAAK0E,UAAN,CAArB,EAAwC;AACpC,UAAI,KAAKhB,cAAL,EAAJ,EAA2B;AACvB,aAAK+H,MAAL,GAAc,KAAKxI,OAAL,CAAayD,EAA3B;AACA,aAAKhC,UAAL,GAAkB8G,QAAQ,CAAC7G,aAAT,CAAuB,MAAM,KAAK8G,MAAX,GAAoB,UAA3C,CAAlB;;AACA,YAAI,KAAK/G,UAAT,EAAqB;AACjB,eAAKA,UAAL,CAAgBkE,YAAhB,CAA6B,OAA7B,EAAsC,WAAW1I,UAAU,CAAC,KAAKmF,KAAN,CAArB,GAClC,UADkC,GACrBnF,UAAU,CAAC,KAAKkF,MAAN,CADW,GACK,qBAD3C;AAEA,eAAK6H,kBAAL,CAAwB,KAAK5J,kBAA7B,EAAiD,IAAjD;AACA,eAAK6J,iBAAL,CAAuB,KAAK7J,kBAA5B,EAAgD,KAAKC,YAArD,EAAmE,KAAKC,gBAAxE,EAA0F,IAA1F;AACA,eAAKF,kBAAL,GAA0B,KAAKC,YAAL,GAAoB,KAAKC,gBAAL,GAAwB,IAAtE;AACH;AACJ;AACJ;AACJ,GAdD;;AAeA;;AACAR,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6O,kBAAlB,GAAuC,UAAUzO,MAAV,EAAkB8O,OAAlB,EAA2B;AAC9D,QAAI9O,MAAJ,EAAY;AACR,UAAIqB,OAAO,CAAC0N,QAAZ,EAAsB;AAClBjN,QAAAA,QAAQ,CAAC,CAACgN,OAAO,CAAC5I,UAAT,CAAD,EAAuBjD,MAAvB,CAAR;AACH;;AACD,UAAI6L,OAAO,CAACjI,KAAR,KAAkB,MAAtB,EAA8B;AAC1BiI,QAAAA,OAAO,CAAC5I,UAAR,CAAmBoB,KAAnB,CAAyB0H,QAAzB,GAAoCtN,UAAU,CAACoN,OAAO,CAACjI,KAAT,CAA9C;AACH;;AACD,UAAI,CAAE,KAAK3B,cAAL,EAAN,EAA8B;AAC1B4J,QAAAA,OAAO,CAAC5I,UAAR,CAAmBD,WAAnB,CAA+B6I,OAAO,CAAChJ,aAAR,CAAsB,KAAtB,EAA6B;AAAEC,UAAAA,SAAS,EAAE1C;AAAb,SAA7B,CAA/B;AACH;;AACD2J,MAAAA,QAAQ,CAAC2B,IAAT,CAAc1I,WAAd,CAA0B6I,OAAO,CAAC5I,UAAlC;AACArE,MAAAA,WAAW,CAAC,CAACiN,OAAO,CAAC5I,UAAT,CAAD,EAAuBjC,UAAvB,CAAX;AACA6K,MAAAA,OAAO,CAACtD,cAAR,CAAuBxL,MAAvB,EAA+B8O,OAAO,CAAC7B,MAAR,GAAiB,UAAhD;AACA6B,MAAAA,OAAO,CAAC9E,aAAR,CAAsBhK,MAAtB;AACA8B,MAAAA,QAAQ,CAAC,CAACgN,OAAO,CAAC5I,UAAT,CAAD,EAAuBpC,UAAvB,CAAR;;AACA,UAAIgL,OAAO,CAACjG,cAAZ,EAA4B;AACxBiG,QAAAA,OAAO,CAACnJ,WAAR;AACH;;AACDmJ,MAAAA,OAAO,CAAC5D,eAAR;AACA4D,MAAAA,OAAO,CAAC1I,WAAR,CAAoBpG,MAApB;AACA8O,MAAAA,OAAO,CAACtF,WAAR,CAAoBxJ,MAApB,EAA4B8O,OAAO,CAACxJ,QAApC,EAA8CwJ,OAAO,CAACpJ,gBAAtD,EAAwEoJ,OAAO,CAACrJ,gBAAhF;AACAlE,MAAAA,cAAc,CAACqN,IAAf,CAAoBE,OAAO,CAAC5I,UAA5B;AACA4I,MAAAA,OAAO,CAAClH,UAAR,CAAmB5H,MAAnB;AACH;AACJ,GAzBD;;AA0BAuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkB8O,iBAAlB,GAAsC,UAAU1O,MAAV,EAAkBwM,CAAlB,EAAqBe,aAArB,EAAoCuB,OAApC,EAA6C;AAC/E,QAAI9O,MAAJ,EAAY;AACR6B,MAAAA,WAAW,CAAC,CAACiN,OAAO,CAAC5I,UAAT,CAAD,EAAuBpC,UAAvB,CAAX;AACAhC,MAAAA,QAAQ,CAAC,CAACgN,OAAO,CAAC5I,UAAT,CAAD,EAAuBnC,WAAvB,CAAR;AACA+K,MAAAA,OAAO,CAAC7G,gBAAR,GAA2B;AACvByF,QAAAA,IAAI,EAAElB,CAAC,GAAGA,CAAC,CAACkB,IAAL,GAAY,IADI;AACEC,QAAAA,MAAM,EAAE,KADV;AACiB3N,QAAAA,MAAM,EAAEA,MADzB;AACiC4N,QAAAA,KAAK,EAAEpB,CAAC,GAAGA,CAAH,GAAO,IADhD;AAEvB/H,QAAAA,OAAO,EAAEqK,OAAO,CAAC5I,UAFM;AAEM2H,QAAAA,YAAY,EAAE,CAACrM,iBAAiB,CAACgL,CAAD;AAFtC,OAA3B;;AAIA,UAAIsC,OAAO,CAAChH,sBAAR,MAAoC,CAACgH,OAAO,CAACxI,UAAjD,EAA6D;AACzDwI,QAAAA,OAAO,CAAC5I,UAAR,CAAmBoB,KAAnB,CAAyBC,OAAzB,GAAmC,MAAnC;AACH;;AACD,UAAIuG,eAAe,GAAG,UAAUmB,YAAV,EAAwB;AAC1CH,QAAAA,OAAO,CAACI,kBAAR,CAA2BD,YAA3B,EAAyCjP,MAAzC,EAAiDuN,aAAjD,EAAgEf,CAAhE;AACH,OAFD;;AAGAsC,MAAAA,OAAO,CAAC9G,OAAR,CAAgB,YAAhB,EAA8B8G,OAAO,CAAC7G,gBAAtC,EAAwD6F,eAAe,CAAC3G,IAAhB,CAAqB2H,OAArB,CAAxD;AACH;AACJ,GAhBD;;AAiBAvK,EAAAA,OAAO,CAAC3E,SAAR,CAAkBsP,kBAAlB,GAAuC,UAAUD,YAAV,EAAwBjP,MAAxB,EAAgCuN,aAAhC,EAA+Cf,CAA/C,EAAkD;AACrF,QAAI9H,KAAK,GAAG,IAAZ;;AACA,QAAIuK,YAAY,CAACtB,MAAjB,EAAyB;AACrB,WAAKO,QAAL,GAAgB,IAAhB;AACA,WAAK9F,KAAL;AACA,WAAKiF,cAAL,CAAoBrN,MAApB;AACH,KAJD,MAKK;AACD,UAAImP,eAAe,GAAG;AAClBC,QAAAA,IAAI,EAAE7B,aAAa,CAACnJ,MADF;AAElBC,QAAAA,QAAQ,EAAEkJ,aAAa,CAAClJ,QAFN;AAGlBC,QAAAA,KAAK,EAAEiJ,aAAa,CAACjJ,KAHH;AAIlB+K,QAAAA,cAAc,EAAE;AAJE,OAAtB;;AAMA,UAAI9B,aAAa,CAACnJ,MAAd,KAAyB,MAA7B,EAAqC;AACjC+K,QAAAA,eAAe,GAAGpE,SAAlB;AACH;;AACD,UAAI,KAAKuE,SAAL,GAAiB,CAArB,EAAwB;AACpB,YAAIC,IAAI,GAAG,YAAY;AACnB,cAAI7K,KAAK,CAAC4B,UAAV,EAAsB;AAClBnF,YAAAA,YAAY,CAACkK,GAAb,CAAiBrL,MAAjB,EAAyB,iCAAzB,EAA4D0E,KAAK,CAAC8K,WAAlE,EAA+E9K,KAA/E;AACH;;AACD,cAAIA,KAAK,CAACiC,QAAV,EAAoB;AAChBjC,YAAAA,KAAK,CAACiC,QAAN,CAAe4I,IAAf,CAAoBJ,eAApB,EAAqCnP,MAArC;AACH;AACJ,SAPD;;AAQA,aAAKwN,SAAL,GAAiBf,UAAU,CAAC8C,IAAD,EAAO,KAAKD,SAAZ,CAA3B;AACH,OAVD,MAWK;AACD,YAAI,KAAK3I,QAAT,EAAmB;AACf,eAAKA,QAAL,CAAc4I,IAAd,CAAmBJ,eAAnB,EAAoCnP,MAApC;AACH;AACJ;AACJ;;AACD,QAAIwM,CAAJ,EAAO;AACH,WAAKiD,eAAL,CAAqBjD,CAArB,EAAwBxM,MAAxB;AACH;AACJ,GArCD;;AAsCAuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkBkI,sBAAlB,GAA2C,YAAY;AACnD;AACA,QAAI4H,OAAO,GAAG,IAAd;AACA,WAAO,CAAClO,iBAAiB,CAACkO,OAAO,CAACC,gBAAT,CAAlB,IACA,OAAOD,OAAO,CAACC,gBAAf,KAAoC,QADpC,IAEC,KAAKzK,cAAL,EAAD,IAA2B,KAAK+F,gBAFvC;AAGH,GAND;;AAOA1G,EAAAA,OAAO,CAAC3E,SAAR,CAAkBgQ,cAAlB,GAAmC,UAAU5P,MAAV,EAAkB6P,CAAlB,EAAqBC,CAArB,EAAwB;AACvD,QAAIzJ,MAAM,GAAG;AACTG,MAAAA,IAAI,EAAEqJ,CADG;AACAtJ,MAAAA,GAAG,EAAEuJ,CADL;AACQxK,MAAAA,QAAQ,EAAE,KAAKA,QADvB;AAETyK,MAAAA,UAAU,EAAE,KAAKrK,gBAFR;AAE0BsK,MAAAA,QAAQ,EAAE,KAAKvK;AAFzC,KAAb;AAIA,QAAIwK,WAAW,GAAG1N,SAAS,CAAC,KAAK2D,UAAN,EAAmB,KAAKlG,MAAL,GAAc,KAAKyE,OAAnB,GAA6B,IAAhD,EAAuDoL,CAAvD,EAA0DC,CAA1D,CAA3B;;AACA,QAAIG,WAAW,CAAC5P,MAAZ,GAAqB,CAAzB,EAA4B;AACxBgG,MAAAA,MAAM,CAAC0J,UAAP,GAAoBE,WAAW,CAAC1K,OAAZ,CAAoB,MAApB,KAA+B,CAA/B,GAAmC,OAAnC,GAA6C0K,WAAW,CAAC1K,OAAZ,CAAoB,OAApB,KAAgC,CAAhC,GAAoC,MAApC,GAC7D,KAAKG,gBADT;AAEAW,MAAAA,MAAM,CAAC2J,QAAP,GAAkBC,WAAW,CAAC1K,OAAZ,CAAoB,KAApB,KAA8B,CAA9B,GAAkC,QAAlC,GAA6C0K,WAAW,CAAC1K,OAAZ,CAAoB,QAApB,KAAiC,CAAjC,GAAqC,KAArC,GAC3D,KAAKE,gBADT;AAEH;;AACD,WAAOY,MAAP;AACH,GAbD;;AAcA9B,EAAAA,OAAO,CAAC3E,SAAR,CAAkB+H,gBAAlB,GAAqC,UAAU3H,MAAV,EAAkB6P,CAAlB,EAAqBC,CAArB,EAAwB;AACzD,QAAIzJ,MAAM,GAAG,KAAKuJ,cAAL,CAAoB5P,MAApB,EAA4B6P,CAA5B,EAA+BC,CAA/B,CAAb;AACA,QAAII,MAAM,GAAG7J,MAAM,CAACf,QAApB;;AACA,QAAI,KAAKG,gBAAL,KAA0BY,MAAM,CAAC2J,QAArC,EAA+C;AAC3CE,MAAAA,MAAM,GAAK,KAAK5K,QAAL,CAAcC,OAAd,CAAsB,QAAtB,MAAoC,CAApC,IAAyC,KAAKD,QAAL,CAAcC,OAAd,CAAsB,KAAtB,MAAiC,CAA3E,GACNc,MAAM,CAAC2J,QAAP,GAAkB,KAAKtK,gBADjB,GACoC,KAAKA,gBAAL,GAAwBW,MAAM,CAAC2J,QAD7E;AAEH;;AACD,QAAI,KAAKtK,gBAAL,KAA0BW,MAAM,CAAC0J,UAArC,EAAiD;AAC7C,UAAIG,MAAM,CAAC3K,OAAP,CAAe,MAAf,MAA2B,CAA/B,EAAkC;AAC9Bc,QAAAA,MAAM,CAAC2J,QAAP,GAAmBE,MAAM,KAAK,SAAX,IAAwBA,MAAM,KAAK,YAApC,GAAoD,KAApD,GAA4D,QAA9E;AACAA,QAAAA,MAAM,GAAI7J,MAAM,CAAC2J,QAAP,GAAkB,MAA5B;AACH;;AACD,UAAIE,MAAM,CAAC3K,OAAP,CAAe,OAAf,MAA4B,CAAhC,EAAmC;AAC/Bc,QAAAA,MAAM,CAAC2J,QAAP,GAAmBE,MAAM,KAAK,UAAX,IAAyBA,MAAM,KAAK,aAArC,GAAsD,KAAtD,GAA8D,QAAhF;AACAA,QAAAA,MAAM,GAAI7J,MAAM,CAAC2J,QAAP,GAAkB,OAA5B;AACH;;AACD3J,MAAAA,MAAM,CAAC0J,UAAP,GAAoB,KAAKrK,gBAAzB;AACH;;AACD,SAAKuC,gBAAL,GAAwB;AACpByF,MAAAA,IAAI,EAAE,IADc;AACRC,MAAAA,MAAM,EAAE,KADA;AACO3N,MAAAA,MAAM,EAAEA,MADf;AACuB4N,MAAAA,KAAK,EAAE,IAD9B;AAEpBnJ,MAAAA,OAAO,EAAE,KAAKyB,UAFM;AAEMiK,MAAAA,gBAAgB,EAAED;AAFxB,KAAxB;AAIA,SAAKlI,OAAL,CAAa,iBAAb,EAAgC,KAAKC,gBAArC;;AACA,QAAI5B,MAAM,CAACf,QAAP,KAAoB4K,MAAxB,EAAgC;AAC5B,UAAI1I,GAAG,GAAGlF,iBAAiB,CAACtC,MAAD,EAASqG,MAAM,CAAC0J,UAAhB,EAA4B1J,MAAM,CAAC2J,QAAnC,CAA3B;AACA,WAAKxG,WAAL,CAAiBxJ,MAAjB,EAAyBkQ,MAAzB,EAAiC7J,MAAM,CAAC0J,UAAxC,EAAoD1J,MAAM,CAAC2J,QAA3D;AACA,UAAIvI,SAAS,GAAG,KAAKC,sBAAL,CAA4BwI,MAA5B,CAAhB;AACAzI,MAAAA,SAAS,CAAClB,GAAV,IAAmB,YAAYhB,OAAZ,CAAoB,KAAKD,QAAL,CAAcE,KAAd,CAAoB,WAApB,EAAiC,CAAjC,CAApB,MAA6D,CAAC,CAA/D,IACb,YAAYD,OAAZ,CAAoB2K,MAAM,CAAC1K,KAAP,CAAa,WAAb,EAA0B,CAA1B,CAApB,MAAsD,CAAC,CAD3C,GACkD,IAAI,KAAK2D,OAD3D,GACsE,CADvF;AAEA1B,MAAAA,SAAS,CAACjB,IAAV,IAAoB,YAAYjB,OAAZ,CAAoB,KAAKD,QAAL,CAAcE,KAAd,CAAoB,WAApB,EAAiC,CAAjC,CAApB,MAA6D,CAAC,CAA/D,IACd,YAAYD,OAAZ,CAAoB2K,MAAM,CAAC1K,KAAP,CAAa,WAAb,EAA0B,CAA1B,CAApB,MAAsD,CAAC,CAD1C,GACiD,IAAI,KAAK0D,OAD1D,GACqE,CADvF;AAEA7C,MAAAA,MAAM,CAACf,QAAP,GAAkB4K,MAAlB;AACA7J,MAAAA,MAAM,CAACG,IAAP,GAAcgB,GAAG,CAAChB,IAAJ,GAAWiB,SAAS,CAACjB,IAAnC;AACAH,MAAAA,MAAM,CAACE,GAAP,GAAaiB,GAAG,CAACjB,GAAJ,GAAUkB,SAAS,CAAClB,GAAjC;AACH,KAXD,MAYK;AACD,WAAKiD,WAAL,CAAiBxJ,MAAjB,EAAyBkQ,MAAzB,EAAiC7J,MAAM,CAAC0J,UAAxC,EAAoD1J,MAAM,CAAC2J,QAA3D;AACH;;AACD,QAAII,SAAS,GAAG;AAAE5J,MAAAA,IAAI,EAAEH,MAAM,CAACG,IAAf;AAAqBD,MAAAA,GAAG,EAAEF,MAAM,CAACE;AAAjC,KAAhB;AACA,QAAIC,IAAI,GAAGhE,GAAG,CAAC,KAAK0D,UAAN,EAAmB,KAAKlG,MAAL,GAAc,KAAKyE,OAAnB,GAA6B,IAAhD,EAAuD;AAAEqC,MAAAA,CAAC,EAAE,IAAL;AAAWC,MAAAA,CAAC,EAAE;AAAd,KAAvD,EAA8EqJ,SAA9E,CAAH,CAA4F5J,IAAvG;AACA,SAAKN,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,OAAhC;;AACA,QAAI,KAAKsB,cAAL,KAAwBqH,MAAM,CAAC3K,OAAP,CAAe,QAAf,MAA6B,CAA7B,IAAkC2K,MAAM,CAAC3K,OAAP,CAAe,KAAf,MAA0B,CAApF,CAAJ,EAA4F;AACxF,UAAIkD,QAAQ,GAAG,KAAKvC,UAAL,CAAgBC,aAAhB,CAA8B,MAAM7C,SAApC,CAAf;AACA,UAAI+M,SAAS,GAAGC,QAAQ,CAAC7H,QAAQ,CAACnB,KAAT,CAAed,IAAhB,EAAsB,EAAtB,CAAR,IAAqCA,IAAI,GAAGH,MAAM,CAACG,IAAnD,CAAhB;;AACA,UAAI6J,SAAS,GAAG,CAAhB,EAAmB;AACfA,QAAAA,SAAS,GAAG,CAAZ;AACH,OAFD,MAGK,IAAKA,SAAS,GAAG5H,QAAQ,CAACH,WAAtB,GAAqC,KAAKpC,UAAL,CAAgB+C,WAAzD,EAAsE;AACvEoH,QAAAA,SAAS,GAAG,KAAKnK,UAAL,CAAgB+C,WAAhB,GAA8BR,QAAQ,CAACH,WAAnD;AACH;;AACDG,MAAAA,QAAQ,CAACnB,KAAT,CAAed,IAAf,GAAsB6J,SAAS,CAACE,QAAV,KAAuB,IAA7C;AACH;;AACD,SAAKrK,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,EAAhC;AACA6I,IAAAA,SAAS,CAAC5J,IAAV,GAAiBA,IAAjB;AACA,WAAO4J,SAAP;AACH,GAvDD;;AAwDA7L,EAAAA,OAAO,CAAC3E,SAAR,CAAkB+M,WAAlB,GAAgC,UAAU6D,aAAV,EAAyBhE,CAAzB,EAA4BiE,aAA5B,EAA2C;AACvE,QAAI/L,KAAK,GAAG,IAAZ;;AACA,QAAI,KAAKmI,UAAL,GAAkB,CAAtB,EAAyB;AACrBV,MAAAA,YAAY,CAAC,KAAKsB,SAAN,CAAZ;AACAtB,MAAAA,YAAY,CAAC,KAAKqB,SAAN,CAAZ;;AACA,UAAIkD,IAAI,GAAG,YAAY;AACnB,YAAIhM,KAAK,CAACmI,UAAN,IAAoBnI,KAAK,CAACwB,UAA1B,IAAwCxB,KAAK,CAACiM,aAAlD,EAAiE;AAC7D;AACH;;AACDjM,QAAAA,KAAK,CAACkM,WAAN,CAAkBJ,aAAlB,EAAiChE,CAAjC,EAAoCiE,aAApC;AACH,OALD;;AAMA,WAAKhD,SAAL,GAAiBhB,UAAU,CAACiE,IAAD,EAAO,KAAK7D,UAAZ,CAA3B;AACH,KAVD,MAWK;AACD,WAAK+D,WAAL,CAAiBJ,aAAjB,EAAgChE,CAAhC,EAAmCiE,aAAnC;AACH;AACJ,GAhBD;;AAiBAlM,EAAAA,OAAO,CAAC3E,SAAR,CAAkBgR,WAAlB,GAAgC,UAAUJ,aAAV,EAAyBhE,CAAzB,EAA4BiE,aAA5B,EAA2C;AACvE,QAAI/L,KAAK,GAAG,IAAZ;;AACA,QAAI1E,MAAJ;;AACA,QAAIwM,CAAJ,EAAO;AACHxM,MAAAA,MAAM,GAAG,KAAKA,MAAL,GAAeyQ,aAAa,IAAIjE,CAAC,CAACxM,MAAlC,GAA4C,KAAKyE,OAA1D;AACH,KAFD,MAGK;AACDzE,MAAAA,MAAM,GAAGgN,QAAQ,CAAC7G,aAAT,CAAuB,uBAAuB,KAAK8G,MAA5B,GAAqC,WAA5D,CAAT;AACH;;AACD,SAAKhF,gBAAL,GAAwB;AACpByF,MAAAA,IAAI,EAAElB,CAAC,GAAGA,CAAC,CAACkB,IAAL,GAAY,IADC;AACKC,MAAAA,MAAM,EAAE,KADb;AACoB3N,MAAAA,MAAM,EAAEA,MAD5B;AACoC4N,MAAAA,KAAK,EAAEpB,CAAC,GAAGA,CAAH,GAAO,IADnD;AAEpB/H,MAAAA,OAAO,EAAE,KAAKyB,UAFM;AAEM2H,MAAAA,YAAY,EAAE,CAACrM,iBAAiB,CAACgL,CAAD;AAFtC,KAAxB,CATuE,CAavE;AACA;;AACA,SAAKxE,OAAL,CAAa,aAAb,EAA4B,KAAKC,gBAAjC,EAAmD,UAAUgH,YAAV,EAAwB;AACvE,UAAI,CAACA,YAAY,CAACtB,MAAlB,EAA0B;AACtB,YAAIjJ,KAAK,CAACQ,cAAN,EAAJ,EAA4B;AACxBR,UAAAA,KAAK,CAACmM,UAAN,CAAiBL,aAAjB,EAAgCxQ,MAAhC;AACH,SAFD,MAGK;AACD0E,UAAAA,KAAK,CAACoM,SAAN,CAAgBN,aAAhB,EAA+BxQ,MAA/B;AACH;AACJ,OAPD,MAQK;AACD0E,QAAAA,KAAK,CAACwJ,QAAN,GAAiB,KAAjB;AACH;AACJ,KAZD;AAaH,GA5BD;AA6BA;;;AACA3J,EAAAA,OAAO,CAAC3E,SAAR,CAAkBiR,UAAlB,GAA+B,UAAUL,aAAV,EAAyBxQ,MAAzB,EAAiC;AAC5D,QAAI+Q,KAAK,GAAG,IAAZ;;AACA,QAAIL,IAAI,GAAG,YAAY;AACnBK,MAAAA,KAAK,CAACD,SAAN,CAAgBN,aAAhB,EAA+BxQ,MAA/B;AACH,KAFD;;AAGA,QAAI,KAAK2G,QAAT,EAAmB;AACf,WAAKmK,SAAL,CAAeN,aAAf,EAA8BxQ,MAA9B;AACH,KAFD,MAGK;AACDyM,MAAAA,UAAU,CAACiE,IAAD,EAAO,GAAP,CAAV;AACH;AACJ,GAXD;;AAYAnM,EAAAA,OAAO,CAAC3E,SAAR,CAAkBkR,SAAlB,GAA8B,UAAUN,aAAV,EAAyBxQ,MAAzB,EAAiC;AAC3D,QAAIA,MAAJ,EAAY;AACR,WAAKqN,cAAL,CAAoBrN,MAApB;AACH;;AACD,SAAKkO,QAAL,GAAgB,IAAhB;AACA,QAAI8C,cAAc,GAAG;AACjB5B,MAAAA,IAAI,EAAEoB,aAAa,CAACpM,MADH;AAEjBC,MAAAA,QAAQ,EAAEmM,aAAa,CAACnM,QAFP;AAGjBC,MAAAA,KAAK,EAAEkM,aAAa,CAAClM,KAHJ;AAIjB+K,MAAAA,cAAc,EAAE;AAJC,KAArB;;AAMA,QAAImB,aAAa,CAACpM,MAAd,KAAyB,MAA7B,EAAqC;AACjC4M,MAAAA,cAAc,GAAGjG,SAAjB;AACH;;AACD,QAAI,KAAKpE,QAAT,EAAmB;AACf,WAAKA,QAAL,CAAc+J,IAAd,CAAmBM,cAAnB;AACH;AACJ,GAjBD;;AAkBAzM,EAAAA,OAAO,CAAC3E,SAAR,CAAkByN,cAAlB,GAAmC,UAAUrN,MAAV,EAAkB;AACjD,SAAKiR,iBAAL,CAAuBjR,MAAvB;;AACA,QAAI,CAACwB,iBAAiB,CAACxB,MAAM,CAACmK,YAAP,CAAoB,cAApB,CAAD,CAAtB,EAA6D;AACzDnK,MAAAA,MAAM,CAACoK,YAAP,CAAoB,OAApB,EAA6BpK,MAAM,CAACmK,YAAP,CAAoB,cAApB,CAA7B;AACAnK,MAAAA,MAAM,CAACqK,eAAP,CAAuB,cAAvB;AACH;;AACD,SAAKwB,iBAAL,CAAuB7L,MAAvB;AACH,GAPD;;AAQAuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwI,KAAlB,GAA0B,YAAY;AAClC,QAAI,KAAKlC,UAAT,EAAqB;AACjBrE,MAAAA,WAAW,CAAC,CAAC,KAAKqE,UAAN,CAAD,EAAoBnC,WAApB,CAAX;AACAjC,MAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoBpC,UAApB,CAAR;AACH;;AACD,QAAI,KAAKoK,QAAT,EAAmB;AACf,UAAI,KAAKvH,QAAT,EAAmB;AACf,aAAKA,QAAL,CAAcuK,OAAd;AACH;;AACD,UAAI,KAAKhM,cAAL,MAAyB,KAAKgB,UAAlC,EAA8C;AAC1C,aAAKA,UAAL,CAAgBoB,KAAhB,CAAsBC,OAAtB,GAAgC,MAAhC;AACA,YAAI4G,IAAI,GAAG;AAAE,2BAAiB;AAAnB,SAAX,CAF0C,CAG1C;;AACA,aAAKC,cAAL,CAAoBC,iBAApB,CAAsC,qBAAtC,EAA6DF,IAA7D,EAJ0C,CAK1C;;AACApM,QAAAA,MAAM,CAAC,KAAKmE,UAAN,CAAN;AACH,OAPD,MAQK,IAAI,KAAKA,UAAT,EAAqB;AACtBnE,QAAAA,MAAM,CAAC,KAAKmE,UAAN,CAAN;AACH;;AACD,WAAKA,UAAL,GAAkB,IAAlB;AACA,WAAKS,QAAL,GAAgB,IAAhB;AACH;AACJ,GAvBD;;AAwBApC,EAAAA,OAAO,CAAC3E,SAAR,CAAkBuR,YAAlB,GAAiC,UAAU3E,CAAV,EAAa;AAC1C,QAAI,KAAKtG,UAAT,EAAqB;AACjB,WAAKyK,aAAL,GAAqB,IAArB;AACH;AACJ,GAJD;;AAKApM,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwR,eAAlB,GAAoC,UAAU5E,CAAV,EAAa;AAC7C,SAAKmE,aAAL,GAAqB,KAArB;AACA,SAAKhE,WAAL,CAAiB,KAAKC,SAAL,CAAexF,KAAhC,EAAuCoF,CAAvC,EAA0C,KAAKzE,UAAL,EAA1C;AACH,GAHD;;AAIAxD,EAAAA,OAAO,CAAC3E,SAAR,CAAkByR,UAAlB,GAA+B,UAAU7E,CAAV,EAAa;AACxC,QAAI8E,cAAc,GAAG9E,CAAC,CAAC+E,aAAvB,CADwC,CAExC;;AACA,QAAID,cAAc,IAAI,CAAC,KAAKhL,UAA5B,EAAwC;AACpC,UAAIkL,sBAAsB,GAAG5P,OAAO,CAAC0P,cAAD,EAAiB,MAAMlO,YAAN,GAAqB,GAArB,GAA2BY,SAA3B,GAAuC,GAAvC,GAA6CH,UAA9D,CAApC;;AACA,UAAI2N,sBAAJ,EAA4B;AACxBrQ,QAAAA,YAAY,CAACkK,GAAb,CAAiBmG,sBAAjB,EAAyC,YAAzC,EAAuD,KAAKC,sBAA5D,EAAoF,IAApF;AACH,OAFD,MAGK;AACD,aAAK9E,WAAL,CAAiB,KAAKC,SAAL,CAAexF,KAAhC,EAAuCoF,CAAvC,EAA0C,KAAKzE,UAAL,EAA1C;;AACA,YAAI,KAAK8E,UAAL,KAAoB,CAAxB,EAA2B;AACvB,eAAKzE,KAAL;AACH;AACJ;AACJ,KAXD,MAYK;AACD,WAAKuE,WAAL,CAAiB,KAAKC,SAAL,CAAexF,KAAhC,EAAuCoF,CAAvC,EAA0C,KAAKzE,UAAL,EAA1C;AACA,WAAKK,KAAL;AACH;AACJ,GAnBD;;AAoBA7D,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6R,sBAAlB,GAA2C,UAAUjF,CAAV,EAAa;AACpD,SAAKG,WAAL,CAAiB,KAAKC,SAAL,CAAexF,KAAhC,EAAuCoF,CAAvC,EAA0C,KAAKzE,UAAL,EAA1C;AACA5G,IAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkC,YAAlC,EAAgD,KAAKgN,sBAArD;AACA,SAAKrJ,KAAL;AACH,GAJD;;AAKA7D,EAAAA,OAAO,CAAC3E,SAAR,CAAkB2L,aAAlB,GAAkC,UAAUiB,CAAV,EAAa;AAC3C,SAAKpF,KAAL;AACH,GAFD;;AAGA7C,EAAAA,OAAO,CAAC3E,SAAR,CAAkB4P,WAAlB,GAAgC,UAAU5B,KAAV,EAAiB;AAC7C,QAAI8D,UAAU,GAAG,CAAjB;AACA,QAAIC,UAAU,GAAG,CAAjB;;AACA,QAAI/D,KAAK,CAACF,IAAN,CAAWnI,OAAX,CAAmB,OAAnB,IAA8B,CAAC,CAAnC,EAAsC;AAClCqI,MAAAA,KAAK,CAACgE,cAAN;AACAF,MAAAA,UAAU,GAAG9D,KAAK,CAACiE,OAAN,CAAc,CAAd,EAAiBC,KAA9B;AACAH,MAAAA,UAAU,GAAG/D,KAAK,CAACiE,OAAN,CAAc,CAAd,EAAiBE,KAA9B;AACH,KAJD,MAKK;AACDL,MAAAA,UAAU,GAAG9D,KAAK,CAACkE,KAAnB;AACAH,MAAAA,UAAU,GAAG/D,KAAK,CAACmE,KAAnB;AACH;;AACDxQ,IAAAA,cAAc,CAACqN,IAAf,CAAoB,KAAK1I,UAAzB;AACArE,IAAAA,WAAW,CAAC,CAAC,KAAKqE,UAAN,CAAD,EAAoBnC,WAApB,CAAX;AACAjC,IAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoBpC,UAApB,CAAR;AACA,SAAK0F,WAAL,CAAiBoE,KAAK,CAAC5N,MAAvB,EAA+B,KAAKsF,QAApC,EAA8C,KAAKI,gBAAnD,EAAqE,KAAKD,gBAA1E;AACA,QAAI+B,GAAG,GAAG,KAAKE,sBAAL,CAA4B,KAAKpC,QAAjC,CAAV;AACA,QAAIuK,CAAC,GAAG6B,UAAU,GAAGlK,GAAG,CAAChB,IAAjB,GAAwB,KAAK0C,OAArC;AACA,QAAI4G,CAAC,GAAG6B,UAAU,GAAGnK,GAAG,CAACjB,GAAjB,GAAuB,KAAK4C,OAApC;AACA,QAAI9C,MAAM,GAAG,KAAKuJ,cAAL,CAAoBhC,KAAK,CAAC5N,MAA1B,EAAkC6P,CAAlC,EAAqCC,CAArC,CAAb;;AACA,QAAI,KAAKpK,gBAAL,KAA0BW,MAAM,CAAC0J,UAAjC,IAA+C,KAAKtK,gBAAL,KAA0BY,MAAM,CAAC2J,QAApF,EAA8F;AAC1F,UAAIE,MAAM,GAAI,KAAK5K,QAAL,CAAcC,OAAd,CAAsB,QAAtB,MAAoC,CAApC,IAAyC,KAAKD,QAAL,CAAcC,OAAd,CAAsB,KAAtB,MAAiC,CAA3E,GACTc,MAAM,CAAC2J,QAAP,GAAkB3J,MAAM,CAAC0J,UADhB,GAC6B1J,MAAM,CAAC0J,UAAP,GAAoB1J,MAAM,CAAC2J,QADrE;AAEA3J,MAAAA,MAAM,CAACf,QAAP,GAAkB4K,MAAlB;AACA,WAAK1G,WAAL,CAAiBoE,KAAK,CAAC5N,MAAvB,EAA+BqG,MAAM,CAACf,QAAtC,EAAgDe,MAAM,CAAC0J,UAAvD,EAAmE1J,MAAM,CAAC2J,QAA1E;AACA,UAAIgC,MAAM,GAAG,KAAKtK,sBAAL,CAA4BrB,MAAM,CAACf,QAAnC,CAAb;AACAe,MAAAA,MAAM,CAACG,IAAP,GAAckL,UAAU,GAAGM,MAAM,CAACxL,IAApB,GAA2B,KAAK0C,OAA9C;AACA7C,MAAAA,MAAM,CAACE,GAAP,GAAaoL,UAAU,GAAGK,MAAM,CAACzL,GAApB,GAA0B,KAAK4C,OAA5C;AACH;;AACD,SAAKjD,UAAL,CAAgBoB,KAAhB,CAAsBd,IAAtB,GAA6BH,MAAM,CAACG,IAAP,GAAc,IAA3C;AACA,SAAKN,UAAL,CAAgBoB,KAAhB,CAAsBf,GAAtB,GAA4BF,MAAM,CAACE,GAAP,GAAa,IAAzC;AACH,GA/BD;;AAgCAhC,EAAAA,OAAO,CAAC3E,SAAR,CAAkBqS,OAAlB,GAA4B,UAAUrE,KAAV,EAAiB;AACzC,QAAI,KAAK1H,UAAL,IAAmB0H,KAAK,CAACsE,OAAN,KAAkB,EAAzC,EAA6C;AACzC,WAAK9K,KAAL;AACH;AACJ,GAJD;;AAKA7C,EAAAA,OAAO,CAAC3E,SAAR,CAAkBuS,QAAlB,GAA6B,UAAU3F,CAAV,EAAa;AACtC,QAAI,KAAKtG,UAAL,IAAmBtE,OAAO,CAAC4K,CAAC,CAACxM,MAAH,EAAW,MAAM+C,IAAjB,CAAP,KAAkC,IAArD,IAA6D,CAAC,KAAKoI,QAAvE,EAAiF;AAC7E,WAAK/D,KAAL;AACH;AACJ,GAJD;;AAKA7C,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwS,aAAlB,GAAkC,UAAU5F,CAAV,EAAa;AAC3C,QAAI,KAAKtG,UAAT,EAAqB;AACjB,UAAI,CAAEtE,OAAO,CAAC4K,CAAC,CAACxM,MAAH,EAAW,MAAMoD,YAAN,GAAqB,GAArB,GAA2BY,SAA3B,GAAuC,GAAvC,GAA6CH,UAAxD,CAAb,EAAmF;AAC/E,aAAKuD,KAAL;AACH;AACJ;AACJ,GAND;AAOA;AACJ;AACA;AACA;;;AACI7C,EAAAA,OAAO,CAAC3E,SAAR,CAAkByS,MAAlB,GAA2B,YAAY;AACnC,SAAKrN,UAAL;AACA,SAAKsN,UAAL,CAAgB,KAAKC,OAArB;AACA,SAAKC,cAAL;AACH,GAJD;AAKA;AACJ;AACA;AACA;;;AACIjO,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6S,SAAlB,GAA8B,YAAY;AACtC,SAAKzM,QAAL,GAAgBvC,UAAhB;AACA,SAAKiC,gBAAL,GAAwB,QAAxB;AACA,SAAKD,gBAAL,GAAwB,KAAxB;AACA,SAAKyI,QAAL,GAAgB,IAAhB;AACH,GALD;AAMA;AACJ;AACA;AACA;;;AACI3J,EAAAA,OAAO,CAAC3E,SAAR,CAAkB0S,UAAlB,GAA+B,UAAUtK,OAAV,EAAmB;AAC9C,QAAI0K,WAAW,GAAG,KAAKC,cAAL,CAAoB3K,OAApB,CAAlB;;AACA,SAAK,IAAIkF,EAAE,GAAG,CAAT,EAAY0F,aAAa,GAAGF,WAAjC,EAA8CxF,EAAE,GAAG0F,aAAa,CAACvS,MAAjE,EAAyE6M,EAAE,EAA3E,EAA+E;AAC3E,UAAIqF,OAAO,GAAGK,aAAa,CAAC1F,EAAD,CAA3B;;AACA,UAAIqF,OAAO,KAAK,QAAhB,EAA0B;AACtB;AACH;;AACD,UAAIA,OAAO,KAAK,OAAhB,EAAyB;AACrB,aAAKM,eAAL;AACH;;AACD,UAAIN,OAAO,KAAK,OAAhB,EAAyB;AACrBpR,QAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAK5G,OAAtB,EAA+BpD,OAAO,CAACiK,eAAvC,EAAwD,KAAKoB,WAA7D,EAA0E,IAA1E;AACH;;AACD,UAAI6F,OAAO,KAAK,OAAhB,EAAyB;AACrB,YAAIlR,OAAO,CAAC0N,QAAZ,EAAsB;AAClB,eAAK+D,WAAL,GAAmB,IAAI1R,KAAJ,CAAU,KAAKqD,OAAf,EAAwB;AACvCsO,YAAAA,gBAAgB,EAAErQ,iBADqB;AAEvCsQ,YAAAA,OAAO,EAAE,KAAK/G,cAAL,CAAoB9E,IAApB,CAAyB,IAAzB;AAF8B,WAAxB,CAAnB;AAIAhG,UAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAK5G,OAAtB,EAA+BpD,OAAO,CAAC4R,aAAvC,EAAsD,KAAK1G,eAA3D,EAA4E,IAA5E;AACH,SAND,MAOK;AACDpL,UAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAK5G,OAAtB,EAA+B,WAA/B,EAA4C,KAAK4H,WAAjD,EAA8D,IAA9D;;AACA,cAAI,KAAKnH,cAAL,MAAyB,CAAC,KAAKiG,QAAnC,EAA6C;AACzChK,YAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAK5G,OAAtB,EAA+B,YAA/B,EAA6C,KAAK4M,UAAlD,EAA8D,IAA9D;AACH;AACJ;AACJ;AACJ;;AACDlQ,IAAAA,YAAY,CAACkK,GAAb,CAAiB2B,QAAjB,EAA2B,UAA3B,EAAuC,KAAKmF,QAA5C,EAAsD,IAAtD;AACAhR,IAAAA,YAAY,CAACkK,GAAb,CAAiB2B,QAAjB,EAA2B,cAA3B,EAA2C,KAAKoF,aAAhD,EAA+D,IAA/D;AACAjR,IAAAA,YAAY,CAACkK,GAAb,CAAiB2B,QAAjB,EAA2B,SAA3B,EAAsC,KAAKiF,OAA3C,EAAoD,IAApD;AACH,GAhCD;;AAiCA1N,EAAAA,OAAO,CAAC3E,SAAR,CAAkB+S,cAAlB,GAAmC,UAAU3K,OAAV,EAAmB;AAClD,QAAIA,OAAO,KAAK,MAAhB,EAAwB;AACpBA,MAAAA,OAAO,GAAI3G,OAAO,CAAC0N,QAAT,GAAqB,OAArB,GAA+B,aAAzC;AACH;;AACD,WAAO/G,OAAO,CAACxC,KAAR,CAAc,GAAd,CAAP;AACH,GALD;;AAMAjB,EAAAA,OAAO,CAAC3E,SAAR,CAAkBiT,eAAlB,GAAoC,YAAY;AAC5C,QAAI,CAACrR,iBAAiB,CAAC,KAAKxB,MAAN,CAAtB,EAAqC;AACjC,UAAI8M,UAAU,GAAG,GAAGC,KAAH,CAASpI,IAAT,CAAc,KAAKF,OAAL,CAAa6E,gBAAb,CAA8B,KAAKtJ,MAAnC,CAAd,CAAjB;;AACA,WAAK,IAAIkN,EAAE,GAAG,CAAT,EAAYgG,YAAY,GAAGpG,UAAhC,EAA4CI,EAAE,GAAGgG,YAAY,CAAC7S,MAA9D,EAAsE6M,EAAE,EAAxE,EAA4E;AACxE,YAAIlN,MAAM,GAAGkT,YAAY,CAAChG,EAAD,CAAzB;AACA/L,QAAAA,YAAY,CAACkK,GAAb,CAAiBrL,MAAjB,EAAyB,OAAzB,EAAkC,KAAKqM,WAAvC,EAAoD,IAApD;AACH;AACJ,KAND,MAOK;AACDlL,MAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAK5G,OAAtB,EAA+B,OAA/B,EAAwC,KAAK4H,WAA7C,EAA0D,IAA1D;AACH;AACJ,GAXD;;AAYA9H,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6P,eAAlB,GAAoC,UAAUjD,CAAV,EAAaxM,MAAb,EAAqB;AACrD,QAAI,KAAKkG,UAAT,EAAqB;AACjB,UAAI,CAAC,KAAKiF,QAAV,EAAoB;AAChB,YAAIqB,CAAC,CAACkB,IAAF,KAAW,OAAf,EAAwB;AACpBvM,UAAAA,YAAY,CAACkK,GAAb,CAAiBrL,MAAjB,EAAyB,MAAzB,EAAiC,KAAKqR,UAAtC,EAAkD,IAAlD;AACH;;AACD,YAAI7E,CAAC,CAACkB,IAAF,KAAW,WAAf,EAA4B;AACxB,cAAI,CAAC,KAAKxI,cAAL,EAAL,EAA4B;AACxB/D,YAAAA,YAAY,CAACkK,GAAb,CAAiBrL,MAAjB,EAAyB,YAAzB,EAAuC,KAAKqR,UAA5C,EAAwD,IAAxD;AACH;AACJ;;AACD,YAAI,KAAKxE,UAAT,EAAqB;AACjB1L,UAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAKnF,UAAtB,EAAkC,YAAlC,EAAgD,KAAKiL,YAArD,EAAmE,IAAnE;AACAhQ,UAAAA,YAAY,CAACkK,GAAb,CAAiB,KAAKnF,UAAtB,EAAkC,YAAlC,EAAgD,KAAKkL,eAArD,EAAsE,IAAtE;AACH;AACJ;;AACD,UAAI,KAAK9K,UAAL,IAAmB,KAAKgJ,SAAL,KAAmB,CAA1C,EAA6C;AACzCnO,QAAAA,YAAY,CAACkK,GAAb,CAAiBrL,MAAjB,EAAyB,iCAAzB,EAA4D,KAAKwP,WAAjE,EAA8E,IAA9E;AACH;AACJ;AACJ,GApBD;AAqBA;AACJ;AACA;AACA;;;AACIjL,EAAAA,OAAO,CAAC3E,SAAR,CAAkBuT,YAAlB,GAAiC,UAAUnL,OAAV,EAAmB;AAChD,QAAI0K,WAAW,GAAG,KAAKC,cAAL,CAAoB3K,OAApB,CAAlB;;AACA,SAAK,IAAIkF,EAAE,GAAG,CAAT,EAAYkG,aAAa,GAAGV,WAAjC,EAA8CxF,EAAE,GAAGkG,aAAa,CAAC/S,MAAjE,EAAyE6M,EAAE,EAA3E,EAA+E;AAC3E,UAAIqF,OAAO,GAAGa,aAAa,CAAClG,EAAD,CAA3B;;AACA,UAAIqF,OAAO,KAAK,QAAhB,EAA0B;AACtB;AACH;;AACD,UAAIA,OAAO,KAAK,OAAhB,EAAyB;AACrB,aAAKc,iBAAL;AACH;;AACD,UAAId,OAAO,KAAK,OAAhB,EAAyB;AACrBpR,QAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkCpD,OAAO,CAACiK,eAA1C,EAA2D,KAAKoB,WAAhE;AACH;;AACD,UAAI6F,OAAO,KAAK,OAAhB,EAAyB;AACrB,YAAIlR,OAAO,CAAC0N,QAAZ,EAAsB;AAClB,cAAI,KAAK+D,WAAT,EAAsB;AAClB,iBAAKA,WAAL,CAAiB5B,OAAjB;AACH;;AACD/P,UAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkCpD,OAAO,CAAC4R,aAA1C,EAAyD,KAAK1G,eAA9D;AACH,SALD,MAMK;AACDpL,UAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkC,WAAlC,EAA+C,KAAK4H,WAApD;;AACA,cAAI,KAAKnH,cAAL,MAAyB,CAAC,KAAKiG,QAAnC,EAA6C;AACzChK,YAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkC,YAAlC,EAAgD,KAAK4M,UAArD;AACH;AACJ;AACJ;AACJ;;AACDlQ,IAAAA,YAAY,CAACY,MAAb,CAAoBiL,QAApB,EAA8B,UAA9B,EAA0C,KAAKmF,QAA/C;AACAhR,IAAAA,YAAY,CAACY,MAAb,CAAoBiL,QAApB,EAA8B,cAA9B,EAA8C,KAAKoF,aAAnD;AACAjR,IAAAA,YAAY,CAACY,MAAb,CAAoBiL,QAApB,EAA8B,SAA9B,EAAyC,KAAKiF,OAA9C;AACH,GA/BD;;AAgCA1N,EAAAA,OAAO,CAAC3E,SAAR,CAAkByT,iBAAlB,GAAsC,YAAY;AAC9C,QAAI,CAAC7R,iBAAiB,CAAC,KAAKxB,MAAN,CAAtB,EAAqC;AACjC,UAAI8M,UAAU,GAAG,GAAGC,KAAH,CAASpI,IAAT,CAAc,KAAKF,OAAL,CAAa6E,gBAAb,CAA8B,KAAKtJ,MAAnC,CAAd,CAAjB;;AACA,WAAK,IAAIkN,EAAE,GAAG,CAAT,EAAYoG,YAAY,GAAGxG,UAAhC,EAA4CI,EAAE,GAAGoG,YAAY,CAACjT,MAA9D,EAAsE6M,EAAE,EAAxE,EAA4E;AACxE,YAAIlN,MAAM,GAAGsT,YAAY,CAACpG,EAAD,CAAzB;AACA/L,QAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,OAA5B,EAAqC,KAAKqM,WAA1C;AACH;AACJ,KAND,MAOK;AACDlL,MAAAA,YAAY,CAACY,MAAb,CAAoB,KAAK0C,OAAzB,EAAkC,OAAlC,EAA2C,KAAK4H,WAAhD;AACH;AACJ,GAXD;;AAYA9H,EAAAA,OAAO,CAAC3E,SAAR,CAAkBqR,iBAAlB,GAAsC,UAAUjR,MAAV,EAAkB;AACpD,QAAI,CAAC,KAAKmL,QAAV,EAAoB;AAChB,UAAIuH,WAAW,GAAG,KAAKC,cAAL,CAAoB,KAAKJ,OAAzB,CAAlB;;AACA,WAAK,IAAIrF,EAAE,GAAG,CAAT,EAAYqG,aAAa,GAAGb,WAAjC,EAA8CxF,EAAE,GAAGqG,aAAa,CAAClT,MAAjE,EAAyE6M,EAAE,EAA3E,EAA+E;AAC3E,YAAIqF,OAAO,GAAGgB,aAAa,CAACrG,EAAD,CAA3B;;AACA,YAAIqF,OAAO,KAAK,OAAhB,EAAyB;AACrBpR,UAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,MAA5B,EAAoC,KAAKqR,UAAzC;AACH;;AACD,YAAIkB,OAAO,KAAK,OAAZ,IAAuB,CAAClR,OAAO,CAAC0N,QAApC,EAA8C;AAC1C,cAAI,CAAC,KAAK7J,cAAL,EAAL,EAA4B;AACxB/D,YAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,YAA5B,EAA0C,KAAKqR,UAA/C;AACH;AACJ;AACJ;;AACD,UAAI,KAAKxE,UAAT,EAAqB;AACjB1L,QAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,YAA5B,EAA0C,KAAKmR,YAA/C;AACAhQ,QAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,YAA5B,EAA0C,KAAKoR,eAA/C;AACH;AACJ;;AACD,QAAI,KAAK9K,UAAT,EAAqB;AACjBnF,MAAAA,YAAY,CAACY,MAAb,CAAoB/B,MAApB,EAA4B,iCAA5B,EAA+D,KAAKwP,WAApE;AACH;AACJ,GAtBD;;AAuBAjL,EAAAA,OAAO,CAAC3E,SAAR,CAAkBmI,UAAlB,GAA+B,YAAY;AACvC,QAAI/H,MAAM,GAAGgN,QAAQ,CAAC7G,aAAT,CAAuB,uBAAuB,KAAK8G,MAA5B,GAAqC,WAA5D,CAAb;AACA,WAAOjN,MAAP;AACH,GAHD;AAIA;AACJ;AACA;AACA;;;AACIuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkB4T,aAAlB,GAAkC,YAAY;AAC1C,WAAO,SAAP;AACH,GAFD;AAGA;AACJ;AACA;AACA;;;AACIjP,EAAAA,OAAO,CAAC3E,SAAR,CAAkB6T,cAAlB,GAAmC,YAAY;AAC3C,WAAO,KAAKC,YAAL,CAAkB,EAAlB,CAAP;AACH,GAFD;AAGA;AACJ;AACA;AACA;;;AACInP,EAAAA,OAAO,CAAC3E,SAAR,CAAkB+T,iBAAlB,GAAsC,UAAUC,OAAV,EAAmBC,OAAnB,EAA4B;AAC9D,QAAIpD,aAAa,GAAG,KAAK1I,UAAL,EAApB;;AACA,SAAK,IAAImF,EAAE,GAAG,CAAT,EAAY9H,EAAE,GAAGhG,MAAM,CAAC0U,IAAP,CAAYF,OAAZ,CAAtB,EAA4C1G,EAAE,GAAG9H,EAAE,CAAC/E,MAApD,EAA4D6M,EAAE,EAA9D,EAAkE;AAC9D,UAAI6G,IAAI,GAAG3O,EAAE,CAAC8H,EAAD,CAAb;;AACA,cAAQ6G,IAAR;AACI,aAAK,OAAL;AACI,cAAI,KAAK7N,UAAL,IAAmBuK,aAAvB,EAAsC;AAClC,iBAAKvK,UAAL,CAAgBoB,KAAhB,CAAsBT,KAAtB,GAA8B,KAAKX,UAAL,CAAgBoB,KAAhB,CAAsB0H,QAAtB,GAAiCtN,UAAU,CAACkS,OAAO,CAAC/M,KAAT,CAAzE;AACA,iBAAKe,UAAL,CAAgB6I,aAAhB;AACH;;AACD;;AACJ,aAAK,QAAL;AACI,cAAI,KAAKvK,UAAL,IAAmBuK,aAAvB,EAAsC;AAClC,iBAAKvK,UAAL,CAAgBoB,KAAhB,CAAsBV,MAAtB,GAA+BlF,UAAU,CAACkS,OAAO,CAAChN,MAAT,CAAzC;AACA,iBAAKgB,UAAL,CAAgB6I,aAAhB;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,KAAKvK,UAAT,EAAqB;AACjB,gBAAI,KAAKhB,cAAL,EAAJ,EAA2B;AACvB,mBAAKN,eAAL,GAAuB,IAAvB;AACH;;AACD,iBAAKoF,aAAL;AACH,WALD,MAMK,IAAI,KAAK9E,cAAL,EAAJ,EAA2B;AAC5B,gBAAIiJ,IAAI,GAAG;AAAE,yBAAWyF,OAAO,CAACtJ;AAArB,aAAX,CAD4B,CAE5B;;AACA,iBAAK8D,cAAL,CAAoBC,iBAApB,CAAsC,qBAAtC,EAA6DF,IAA7D,EAH4B,CAI5B;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,eAAKgF,YAAL,CAAkBU,OAAO,CAACtB,OAA1B;AACA,eAAKD,UAAL,CAAgBsB,OAAO,CAACrB,OAAxB;AACA;;AACJ,aAAK,UAAL;AACI,eAAKtN,cAAL;;AACA,cAAI,KAAKiB,UAAL,IAAmBuK,aAAvB,EAAsC;AAClC,gBAAI5G,aAAa,GAAG,KAAK3D,UAAL,CAAgBC,aAAhB,CAA8B,MAAM3C,eAApC,CAApB;AACAqG,YAAAA,aAAa,CAACvC,KAAd,CAAoBf,GAApB,GAA0BsD,aAAa,CAACvC,KAAd,CAAoBd,IAApB,GAA2B,IAArD;AACA,iBAAKoB,UAAL,CAAgB6I,aAAhB;AACH;;AACD;;AACJ,aAAK,oBAAL;AACI,cAAI,KAAKvK,UAAL,IAAmBuK,aAAvB,EAAsC;AAClC,iBAAK7I,UAAL,CAAgB6I,aAAhB;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,KAAKvK,UAAT,EAAqB;AACjB,gBAAI2J,CAAC,GAAG+D,OAAO,CAAC1K,OAAR,GAAkB2K,OAAO,CAAC3K,OAAlC;AACA,iBAAKhD,UAAL,CAAgBoB,KAAhB,CAAsBd,IAAtB,GAA6B,CAAC8J,QAAQ,CAAC,KAAKpK,UAAL,CAAgBoB,KAAhB,CAAsBd,IAAvB,EAA6B,EAA7B,CAAR,GAA4CqJ,CAA7C,EAAiDU,QAAjD,KAA8D,IAA3F;AACH;;AACD;;AACJ,aAAK,SAAL;AACI,cAAI,KAAKrK,UAAT,EAAqB;AACjB,gBAAI4J,CAAC,GAAG8D,OAAO,CAACzK,OAAR,GAAkB0K,OAAO,CAAC1K,OAAlC;AACA,iBAAKjD,UAAL,CAAgBoB,KAAhB,CAAsBf,GAAtB,GAA4B,CAAC+J,QAAQ,CAAC,KAAKpK,UAAL,CAAgBoB,KAAhB,CAAsBf,GAAvB,EAA4B,EAA5B,CAAR,GAA2CuJ,CAA5C,EAAgDS,QAAhD,KAA6D,IAAzF;AACH;;AACD;;AACJ,aAAK,UAAL;AACI,cAAI,KAAKrK,UAAT,EAAqB;AACjB,gBAAI2N,OAAO,CAAC3J,QAAZ,EAAsB;AAClBrI,cAAAA,WAAW,CAAC,CAAC,KAAKqE,UAAN,CAAD,EAAoB2N,OAAO,CAAC3J,QAAR,CAAiB1E,KAAjB,CAAuB,GAAvB,CAApB,CAAX;AACH;;AACD,gBAAIoO,OAAO,CAAC1J,QAAZ,EAAsB;AAClBpI,cAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoB0N,OAAO,CAAC1J,QAAR,CAAiB1E,KAAjB,CAAuB,GAAvB,CAApB,CAAR;AACH;AACJ;;AACD;;AACJ,aAAK,WAAL;AACI,cAAI,KAAKU,UAAT,EAAqB;AACjB,gBAAI,KAAKc,SAAT,EAAoB;AAChBlF,cAAAA,QAAQ,CAAC,CAAC,KAAKoE,UAAN,CAAD,EAAoBlD,GAApB,CAAR;AACH,aAFD,MAGK;AACDnB,cAAAA,WAAW,CAAC,CAAC,KAAKqE,UAAN,CAAD,EAAoBlD,GAApB,CAAX;AACH;AACJ;;AACD;AA3ER;AA6EH;AACJ,GAlFD;AAmFA;AACJ;AACA;AACA;AACA;AACA;;;AACIuB,EAAAA,OAAO,CAAC3E,SAAR,CAAkBqH,IAAlB,GAAyB,UAAUxC,OAAV,EAAmBmI,SAAnB,EAA8B;AACnD,QAAIpL,iBAAiB,CAACoL,SAAD,CAArB,EAAkC;AAC9BA,MAAAA,SAAS,GAAG,KAAKA,SAAL,CAAe3F,IAA3B;AACH;;AACD,QAAIzF,iBAAiB,CAACiD,OAAD,CAArB,EAAgC;AAC5BA,MAAAA,OAAO,GAAG,KAAKA,OAAf;AACH;;AACD,QAAIA,OAAO,CAAC6C,KAAR,CAAcC,OAAd,KAA0B,MAA9B,EAAsC;AAClC;AACH;;AACD,SAAK+F,WAAL,CAAiB7I,OAAjB,EAA0BmI,SAA1B;AACH,GAXD;AAYA;AACJ;AACA;AACA;AACA;;;AACIrI,EAAAA,OAAO,CAAC3E,SAAR,CAAkBwH,KAAlB,GAA0B,UAAUwF,SAAV,EAAqB;AAC3C,QAAI,CAACA,SAAL,EAAgB;AACZA,MAAAA,SAAS,GAAG,KAAKA,SAAL,CAAexF,KAA3B;AACH;;AACD,SAAKuF,WAAL,CAAiBC,SAAjB;AACH,GALD;AAMA;AACJ;AACA;AACA;AACA;;;AACIrI,EAAAA,OAAO,CAAC3E,SAAR,CAAkBoU,OAAlB,GAA4B,UAAUhU,MAAV,EAAkB;AAC1C,QAAI,KAAKkG,UAAT,EAAqB;AACjB,WAAK8D,aAAL,CAAmBhK,MAAnB;AACH;;AACD,QAAI,KAAK2G,QAAL,IAAiB3G,MAArB,EAA6B;AACzB,WAAK4H,UAAL,CAAgB5H,MAAhB;AACH;AACJ,GAPD;AAQA;AACJ;AACA;AACA;AACA;AACA;;;AACIuE,EAAAA,OAAO,CAAC3E,SAAR,CAAkBsR,OAAlB,GAA4B,YAAY;AACpC,QAAI,CAAC,KAAKhM,cAAL,EAAL,EAA4B;AACxBhB,MAAAA,MAAM,CAACtE,SAAP,CAAiBsR,OAAjB,CAAyBvM,IAAzB,CAA8B,IAA9B;;AACA,UAAI,KAAKuB,UAAT,EAAqB;AACjBnE,QAAAA,MAAM,CAAC,KAAKmE,UAAN,CAAN;AACH;AACJ;;AACD,QAAI,KAAKhB,cAAL,MAAyB,KAAKgB,UAAlC,EAA8C;AAC1C,UAAI+N,WAAW,GAAGjH,QAAQ,CAAC7G,aAAT,CAAuB,MAAM,KAAK8G,MAAX,GAAoB,sBAA3C,CAAlB;;AACA,UAAIgH,WAAJ,EAAiB;AACbA,QAAAA,WAAW,CAAChO,WAAZ,CAAwB,KAAKC,UAA7B;AACH;AACJ;;AACD,QAAI,KAAKS,QAAT,EAAmB;AACf,WAAKA,QAAL,CAAcuK,OAAd;AACH;;AACDrP,IAAAA,WAAW,CAAC,CAAC,KAAK4C,OAAN,CAAD,EAAiB1B,IAAjB,CAAX;AACA,SAAKoQ,YAAL,CAAkB,KAAKZ,OAAvB;AACA,SAAKtB,iBAAL,CAAuB,KAAKxM,OAA5B;AACA,SAAKyB,UAAL,GAAkB,IAAlB;AACA,SAAKS,QAAL,GAAgB,IAAhB;AACH,GArBD;;AAsBA7G,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,OAFZ,EAEqB,KAAK,CAF1B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,QAFZ,EAEsB,KAAK,CAF3B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,EADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,SAFZ,EAEuB,KAAK,CAF5B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,EADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,QAFZ,EAEsB,KAAK,CAF3B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,WAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,UAFZ,EAEwB,KAAK,CAF7B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,SAFZ,EAEuB,KAAK,CAF5B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,SAFZ,EAEuB,KAAK,CAF5B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,gBAFZ,EAE8B,KAAK,CAFnC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,IAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,iBAFZ,EAE+B,KAAK,CAFpC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,oBAFZ,EAEkC,KAAK,CAFvC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,MAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,SAFZ,EAEuB,KAAK,CAF5B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,YAFZ,EAE0B,KAAK,CAF/B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,UAFZ,EAEwB,KAAK,CAF7B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPqC,OAAO,CAAC,EAAD,EAAKb,SAAL,CADA,CAAD,EAEPiD,OAAO,CAAC3E,SAFD,EAEY,WAFZ,EAEyB,KAAK,CAF9B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,WAFZ,EAEyB,KAAK,CAF9B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,CAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,YAFZ,EAE0B,KAAK,CAF/B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,EADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,UAFZ,EAEwB,KAAK,CAF7B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPe,QAAQ,CAAC,KAAD,CADD,CAAD,EAEP0D,OAAO,CAAC3E,SAFD,EAEY,qBAFZ,EAEmC,KAAK,CAFxC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,cAFZ,EAE4B,KAAK,CAFjC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,YAFZ,EAE0B,KAAK,CAF/B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,WAFZ,EAEyB,KAAK,CAF9B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,aAFZ,EAE2B,KAAK,CAFhC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,YAFZ,EAE0B,KAAK,CAF/B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,iBAFZ,EAE+B,KAAK,CAFpC,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,SAFZ,EAEuB,KAAK,CAF5B,CAAV;;AAGAE,EAAAA,UAAU,CAAC,CACPiB,KAAK,EADE,CAAD,EAEPwD,OAAO,CAAC3E,SAFD,EAEY,WAFZ,EAEyB,KAAK,CAF9B,CAAV;;AAGA2E,EAAAA,OAAO,GAAGzE,UAAU,CAAC,CACjBoC,qBADiB,CAAD,EAEjBqC,OAFiB,CAApB;AAGA,SAAOA,OAAP;AACH,CA/rC4B,CA+rC3B3D,SA/rC2B,CAA7B;;AAgsCA,SAAS2D,OAAT","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { Component, Property, ChildProperty, Event, append, compile, isBlazor } from '@syncfusion/ej2-base';\r\nimport { EventHandler, Touch, Browser, Animation as PopupAnimation } from '@syncfusion/ej2-base';\r\nimport { isNullOrUndefined, getUniqueID, formatUnit } from '@syncfusion/ej2-base';\r\nimport { attributes, closest, removeClass, addClass, remove, updateBlazorTemplate, resetBlazorTemplate } from '@syncfusion/ej2-base';\r\nimport { NotifyPropertyChanges, Complex, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\r\nimport { Popup } from '../popup/popup';\r\nimport { calculatePosition } from '../common/position';\r\nimport { isCollide, fit } from '../common/collision';\r\nvar TOUCHEND_HIDE_DELAY = 1500;\r\nvar TAPHOLD_THRESHOLD = 500;\r\nvar SHOW_POINTER_TIP_GAP = 0;\r\nvar HIDE_POINTER_TIP_GAP = 8;\r\nvar MOUSE_TRAIL_GAP = 2;\r\nvar POINTER_ADJUST = 2;\r\nvar ROOT = 'e-tooltip';\r\nvar RTL = 'e-rtl';\r\nvar DEVICE = 'e-bigger';\r\nvar ICON = 'e-icons';\r\nvar CLOSE = 'e-tooltip-close';\r\nvar TOOLTIP_WRAP = 'e-tooltip-wrap';\r\nvar CONTENT = 'e-tip-content';\r\nvar ARROW_TIP = 'e-arrow-tip';\r\nvar ARROW_TIP_OUTER = 'e-arrow-tip-outer';\r\nvar ARROW_TIP_INNER = 'e-arrow-tip-inner';\r\nvar TIP_BOTTOM = 'e-tip-bottom';\r\nvar TIP_TOP = 'e-tip-top';\r\nvar TIP_LEFT = 'e-tip-left';\r\nvar TIP_RIGHT = 'e-tip-right';\r\nvar POPUP_ROOT = 'e-popup';\r\nvar POPUP_OPEN = 'e-popup-open';\r\nvar POPUP_CLOSE = 'e-popup-close';\r\nvar POPUP_LIB = 'e-lib';\r\nvar HIDE_POPUP = 'e-hidden';\r\nvar Animation = /** @class */ (function (_super) {\r\n    __extends(Animation, _super);\r\n    function Animation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    __decorate([\r\n        Property({ effect: 'FadeIn', duration: 150, delay: 0 })\r\n    ], Animation.prototype, \"open\", void 0);\r\n    __decorate([\r\n        Property({ effect: 'FadeOut', duration: 150, delay: 0 })\r\n    ], Animation.prototype, \"close\", void 0);\r\n    return Animation;\r\n}(ChildProperty));\r\nexport { Animation };\r\n/**\r\n * Represents the Tooltip component that displays a piece of information about the target element on mouse hover.\r\n * ```html\r\n * <div id=\"tooltip\">Show Tooltip</div>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var tooltipObj = new Tooltip({ content: 'Tooltip text' });\r\n *   tooltipObj.appendTo(\"#tooltip\");\r\n * </script>\r\n * ```\r\n */\r\nvar Tooltip = /** @class */ (function (_super) {\r\n    __extends(Tooltip, _super);\r\n    /**\r\n     * Constructor for creating the Tooltip Component\r\n     */\r\n    function Tooltip(options, element) {\r\n        var _this = _super.call(this, options, element) || this;\r\n        _this.isBlazorTooltip = false;\r\n        _this.contentTargetValue = null;\r\n        _this.contentEvent = null;\r\n        _this.contentAnimation = null;\r\n        return _this;\r\n    }\r\n    Tooltip.prototype.initialize = function () {\r\n        this.formatPosition();\r\n        if (!(this.isServerRender())) {\r\n            addClass([this.element], ROOT);\r\n        }\r\n    };\r\n    Tooltip.prototype.isServerRender = function () {\r\n        return isBlazor() && this.isServerRendered;\r\n    };\r\n    Tooltip.prototype.formatPosition = function () {\r\n        var _a, _b;\r\n        if (this.position.indexOf('Top') === 0 || this.position.indexOf('Bottom') === 0) {\r\n            _a = this.position.split(/(?=[A-Z])/), this.tooltipPositionY = _a[0], this.tooltipPositionX = _a[1];\r\n        }\r\n        else {\r\n            _b = this.position.split(/(?=[A-Z])/), this.tooltipPositionX = _b[0], this.tooltipPositionY = _b[1];\r\n        }\r\n    };\r\n    Tooltip.prototype.renderArrow = function () {\r\n        this.setTipClass(this.position);\r\n        if (!(this.isServerRender())) {\r\n            var tip = this.createElement('div', { className: ARROW_TIP + ' ' + this.tipClass });\r\n            tip.appendChild(this.createElement('div', { className: ARROW_TIP_OUTER + ' ' + this.tipClass }));\r\n            tip.appendChild(this.createElement('div', { className: ARROW_TIP_INNER + ' ' + this.tipClass }));\r\n            this.tooltipEle.appendChild(tip);\r\n        }\r\n        else {\r\n            var tip = this.tooltipEle.querySelector('.' + ARROW_TIP);\r\n            addClass([tip.querySelector('.' + ARROW_TIP_OUTER)], this.tipClass);\r\n            addClass([tip.querySelector('.' + ARROW_TIP_INNER)], this.tipClass);\r\n            this.tooltipEle.appendChild(tip);\r\n        }\r\n    };\r\n    Tooltip.prototype.setTipClass = function (position) {\r\n        if (position.indexOf('Right') === 0) {\r\n            this.tipClass = TIP_LEFT;\r\n        }\r\n        else if (position.indexOf('Bottom') === 0) {\r\n            this.tipClass = TIP_TOP;\r\n        }\r\n        else if (position.indexOf('Left') === 0) {\r\n            this.tipClass = TIP_RIGHT;\r\n        }\r\n        else {\r\n            this.tipClass = TIP_BOTTOM;\r\n        }\r\n    };\r\n    Tooltip.prototype.renderPopup = function (target) {\r\n        var elePos = this.mouseTrail ? { top: 0, left: 0 } : this.getTooltipPosition(target);\r\n        this.tooltipEle.classList.remove(POPUP_LIB);\r\n        this.popupObj = new Popup(this.tooltipEle, {\r\n            height: this.height,\r\n            width: this.width,\r\n            position: { X: elePos.left, Y: elePos.top },\r\n            enableRtl: this.enableRtl,\r\n            open: this.openPopupHandler.bind(this),\r\n            close: this.closePopupHandler.bind(this)\r\n        });\r\n    };\r\n    Tooltip.prototype.getTooltipPosition = function (target) {\r\n        this.tooltipEle.style.display = 'block';\r\n        var pos = calculatePosition(target, this.tooltipPositionX, this.tooltipPositionY);\r\n        var offsetPos = this.calculateTooltipOffset(this.position);\r\n        var elePos = this.collisionFlipFit(target, pos.left + offsetPos.left, pos.top + offsetPos.top);\r\n        this.tooltipEle.style.display = '';\r\n        return elePos;\r\n    };\r\n    Tooltip.prototype.reposition = function (target) {\r\n        var elePos = this.getTooltipPosition(target);\r\n        this.popupObj.position = { X: elePos.left, Y: elePos.top };\r\n        this.popupObj.dataBind();\r\n    };\r\n    Tooltip.prototype.openPopupHandler = function () {\r\n        if (!this.mouseTrail && this.needTemplateReposition()) {\r\n            this.reposition(this.findTarget());\r\n        }\r\n        this.trigger('afterOpen', this.tooltipEventArgs);\r\n    };\r\n    Tooltip.prototype.closePopupHandler = function () {\r\n        resetBlazorTemplate(this.element.id + 'content', 'Content');\r\n        this.clearTemplate(['content']);\r\n        this.clear();\r\n        this.trigger('afterClose', this.tooltipEventArgs);\r\n    };\r\n    Tooltip.prototype.calculateTooltipOffset = function (position) {\r\n        var pos = { top: 0, left: 0 };\r\n        var tooltipEleWidth = this.tooltipEle.offsetWidth;\r\n        var tooltipEleHeight = this.tooltipEle.offsetHeight;\r\n        var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\r\n        var tipWidth = arrowEle ? arrowEle.offsetWidth : 0;\r\n        var tipHeight = arrowEle ? arrowEle.offsetHeight : 0;\r\n        var tipAdjust = (this.showTipPointer ? SHOW_POINTER_TIP_GAP : HIDE_POINTER_TIP_GAP);\r\n        var tipHeightAdjust = (tipHeight / 2) + POINTER_ADJUST + (this.tooltipEle.offsetHeight - this.tooltipEle.clientHeight);\r\n        var tipWidthAdjust = (tipWidth / 2) + POINTER_ADJUST + (this.tooltipEle.offsetWidth - this.tooltipEle.clientWidth);\r\n        if (this.mouseTrail) {\r\n            tipAdjust += MOUSE_TRAIL_GAP;\r\n        }\r\n        switch (position) {\r\n            case 'RightTop':\r\n                pos.left += tipWidth + tipAdjust;\r\n                pos.top -= tooltipEleHeight - tipHeightAdjust;\r\n                break;\r\n            case 'RightCenter':\r\n                pos.left += tipWidth + tipAdjust;\r\n                pos.top -= (tooltipEleHeight / 2);\r\n                break;\r\n            case 'RightBottom':\r\n                pos.left += tipWidth + tipAdjust;\r\n                pos.top -= (tipHeightAdjust);\r\n                break;\r\n            case 'BottomRight':\r\n                pos.top += (tipHeight + tipAdjust);\r\n                pos.left -= (tipWidthAdjust);\r\n                break;\r\n            case 'BottomCenter':\r\n                pos.top += (tipHeight + tipAdjust);\r\n                pos.left -= (tooltipEleWidth / 2);\r\n                break;\r\n            case 'BottomLeft':\r\n                pos.top += (tipHeight + tipAdjust);\r\n                pos.left -= (tooltipEleWidth - tipWidthAdjust);\r\n                break;\r\n            case 'LeftBottom':\r\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\r\n                pos.top -= (tipHeightAdjust);\r\n                break;\r\n            case 'LeftCenter':\r\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\r\n                pos.top -= (tooltipEleHeight / 2);\r\n                break;\r\n            case 'LeftTop':\r\n                pos.left -= (tipWidth + tooltipEleWidth + tipAdjust);\r\n                pos.top -= (tooltipEleHeight - tipHeightAdjust);\r\n                break;\r\n            case 'TopLeft':\r\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\r\n                pos.left -= (tooltipEleWidth - tipWidthAdjust);\r\n                break;\r\n            case 'TopRight':\r\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\r\n                pos.left -= (tipWidthAdjust);\r\n                break;\r\n            default:\r\n                pos.top -= (tooltipEleHeight + tipHeight + tipAdjust);\r\n                pos.left -= (tooltipEleWidth / 2);\r\n                break;\r\n        }\r\n        pos.left += this.offsetX;\r\n        pos.top += this.offsetY;\r\n        return pos;\r\n    };\r\n    Tooltip.prototype.updateTipPosition = function (position) {\r\n        var selEle = this.tooltipEle.querySelectorAll('.' + ARROW_TIP + ',.' + ARROW_TIP_OUTER + ',.' + ARROW_TIP_INNER);\r\n        var removeList = [TIP_BOTTOM, TIP_TOP, TIP_LEFT, TIP_RIGHT];\r\n        removeClass(selEle, removeList);\r\n        this.setTipClass(position);\r\n        addClass(selEle, this.tipClass);\r\n    };\r\n    Tooltip.prototype.adjustArrow = function (target, position, tooltipPositionX, tooltipPositionY) {\r\n        if (this.showTipPointer === false) {\r\n            return;\r\n        }\r\n        this.updateTipPosition(position);\r\n        var leftValue;\r\n        var topValue;\r\n        this.tooltipEle.style.display = 'block';\r\n        var tooltipWidth = this.tooltipEle.clientWidth;\r\n        var tooltipHeight = this.tooltipEle.clientHeight;\r\n        var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\r\n        var arrowInnerELe = this.tooltipEle.querySelector('.' + ARROW_TIP_INNER);\r\n        var tipWidth = arrowEle.offsetWidth;\r\n        var tipHeight = arrowEle.offsetHeight;\r\n        this.tooltipEle.style.display = '';\r\n        if (this.tipClass === TIP_BOTTOM || this.tipClass === TIP_TOP) {\r\n            if (this.tipClass === TIP_BOTTOM) {\r\n                topValue = '99.9%';\r\n                // Arrow icon aligned -2px height from ArrowOuterTip div\r\n                arrowInnerELe.style.top = '-' + (tipHeight - 2) + 'px';\r\n            }\r\n            else {\r\n                topValue = -(tipHeight - 1) + 'px';\r\n                // Arrow icon aligned -6px height from ArrowOuterTip div\r\n                arrowInnerELe.style.top = '-' + (tipHeight - 6) + 'px';\r\n            }\r\n            if (target) {\r\n                var tipPosExclude = tooltipPositionX !== 'Center' || (tooltipWidth > target.offsetWidth) || this.mouseTrail;\r\n                if ((tipPosExclude && tooltipPositionX === 'Left') || (!tipPosExclude && this.tipPointerPosition === 'End')) {\r\n                    leftValue = (tooltipWidth - tipWidth - POINTER_ADJUST) + 'px';\r\n                }\r\n                else if ((tipPosExclude && tooltipPositionX === 'Right') || (!tipPosExclude && this.tipPointerPosition === 'Start')) {\r\n                    leftValue = POINTER_ADJUST + 'px';\r\n                }\r\n                else {\r\n                    leftValue = ((tooltipWidth / 2) - (tipWidth / 2)) + 'px';\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (this.tipClass === TIP_RIGHT) {\r\n                leftValue = '99.9%';\r\n                // Arrow icon aligned -2px left from ArrowOuterTip div\r\n                arrowInnerELe.style.left = '-' + (tipWidth - 2) + 'px';\r\n            }\r\n            else {\r\n                leftValue = -(tipWidth - 1) + 'px';\r\n                // Arrow icon aligned -2px from ArrowOuterTip width\r\n                arrowInnerELe.style.left = (-(tipWidth) + (tipWidth - 2)) + 'px';\r\n            }\r\n            var tipPosExclude = tooltipPositionY !== 'Center' || (tooltipHeight > target.offsetHeight) || this.mouseTrail;\r\n            if ((tipPosExclude && tooltipPositionY === 'Top') || (!tipPosExclude && this.tipPointerPosition === 'End')) {\r\n                topValue = (tooltipHeight - tipHeight - POINTER_ADJUST) + 'px';\r\n            }\r\n            else if ((tipPosExclude && tooltipPositionY === 'Bottom') || (!tipPosExclude && this.tipPointerPosition === 'Start')) {\r\n                topValue = POINTER_ADJUST + 'px';\r\n            }\r\n            else {\r\n                topValue = ((tooltipHeight / 2) - (tipHeight / 2)) + 'px';\r\n            }\r\n        }\r\n        arrowEle.style.top = topValue;\r\n        arrowEle.style.left = leftValue;\r\n    };\r\n    Tooltip.prototype.renderContent = function (target) {\r\n        var tooltipContent = this.tooltipEle.querySelector('.' + CONTENT);\r\n        if (this.cssClass) {\r\n            addClass([this.tooltipEle], this.cssClass.split(' '));\r\n        }\r\n        if (target && !isNullOrUndefined(target.getAttribute('title'))) {\r\n            target.setAttribute('data-content', target.getAttribute('title'));\r\n            target.removeAttribute('title');\r\n        }\r\n        if (!isNullOrUndefined(this.content)) {\r\n            if (this.isBlazorTooltip || !(this.isServerRender())) {\r\n                tooltipContent.innerHTML = '';\r\n                if (this.content instanceof HTMLElement) {\r\n                    tooltipContent.appendChild(this.content);\r\n                }\r\n                else if (typeof this.content === 'string' && this.content.indexOf('<div>Blazor') < 0) {\r\n                    if (this.enableHtmlSanitizer) {\r\n                        this.setProperties({ content: SanitizeHtmlHelper.sanitize(this.content) }, true);\r\n                    }\r\n                    tooltipContent[this.enableHtmlParse ? 'innerHTML' : 'textContent'] = this.content;\r\n                }\r\n                else {\r\n                    var templateFunction = compile(this.content);\r\n                    var tempArr = templateFunction({}, this, 'content', this.element.id + 'content', undefined, undefined, tooltipContent);\r\n                    if (tempArr) {\r\n                        append(tempArr, tooltipContent);\r\n                    }\r\n                    this.renderReactTemplates();\r\n                    if (typeof this.content === 'string' && this.content.indexOf('<div>Blazor') >= 0) {\r\n                        this.isBlazorTemplate = true;\r\n                        updateBlazorTemplate(this.element.id + 'content', 'Content', this);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (target && !isNullOrUndefined(target.getAttribute('data-content'))) {\r\n                tooltipContent.innerHTML = target.getAttribute('data-content');\r\n            }\r\n        }\r\n    };\r\n    Tooltip.prototype.renderCloseIcon = function () {\r\n        if (!this.isSticky) {\r\n            return;\r\n        }\r\n        var tipClose = this.createElement('div', { className: ICON + ' ' + CLOSE });\r\n        this.tooltipEle.appendChild(tipClose);\r\n        EventHandler.add(tipClose, Browser.touchStartEvent, this.onStickyClose, this);\r\n    };\r\n    Tooltip.prototype.addDescribedBy = function (target, id) {\r\n        var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\r\n        if (describedby.indexOf(id) < 0) {\r\n            describedby.push(id);\r\n        }\r\n        attributes(target, { 'aria-describedby': describedby.join(' ').trim(), 'data-tooltip-id': id });\r\n    };\r\n    Tooltip.prototype.removeDescribedBy = function (target) {\r\n        var id = target.getAttribute('data-tooltip-id');\r\n        var describedby = (target.getAttribute('aria-describedby') || '').split(/\\s+/);\r\n        var index = describedby.indexOf(id);\r\n        if (index !== -1) {\r\n            describedby.splice(index, 1);\r\n        }\r\n        target.removeAttribute('data-tooltip-id');\r\n        var orgdescribedby = describedby.join(' ').trim();\r\n        if (orgdescribedby) {\r\n            target.setAttribute('aria-describedby', orgdescribedby);\r\n        }\r\n        else {\r\n            target.removeAttribute('aria-describedby');\r\n        }\r\n    };\r\n    Tooltip.prototype.tapHoldHandler = function (evt) {\r\n        clearTimeout(this.autoCloseTimer);\r\n        this.targetHover(evt.originalEvent);\r\n    };\r\n    Tooltip.prototype.touchEndHandler = function (e) {\r\n        var _this = this;\r\n        if (this.isSticky) {\r\n            return;\r\n        }\r\n        var close = function () {\r\n            _this.close();\r\n        };\r\n        this.autoCloseTimer = setTimeout(close, TOUCHEND_HIDE_DELAY);\r\n    };\r\n    Tooltip.prototype.targetClick = function (e) {\r\n        var target;\r\n        if (this.target) {\r\n            target = closest(e.target, this.target);\r\n        }\r\n        else {\r\n            target = this.element;\r\n        }\r\n        if (isNullOrUndefined(target)) {\r\n            return;\r\n        }\r\n        if (target.getAttribute('data-tooltip-id') === null) {\r\n            this.targetHover(e);\r\n        }\r\n        else if (!this.isSticky) {\r\n            this.hideTooltip(this.animation.close, e, target);\r\n        }\r\n    };\r\n    Tooltip.prototype.targetHover = function (e) {\r\n        var target;\r\n        if (this.target) {\r\n            target = closest(e.target, this.target);\r\n        }\r\n        else {\r\n            target = this.element;\r\n        }\r\n        if (isNullOrUndefined(target) || (target.getAttribute('data-tooltip-id') !== null && this.closeDelay === 0)) {\r\n            return;\r\n        }\r\n        var targetList = [].slice.call(document.querySelectorAll('[data-tooltip-id= ' + this.ctrlId + '_content]'));\r\n        for (var _i = 0, targetList_1 = targetList; _i < targetList_1.length; _i++) {\r\n            var target_1 = targetList_1[_i];\r\n            this.restoreElement(target_1);\r\n        }\r\n        this.showTooltip(target, this.animation.open, e);\r\n    };\r\n    Tooltip.prototype.showTooltip = function (target, showAnimation, e) {\r\n        var _this = this;\r\n        clearTimeout(this.showTimer);\r\n        clearTimeout(this.hideTimer);\r\n        this.tooltipEventArgs = {\r\n            type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\r\n            element: this.tooltipEle, isInteracted: !isNullOrUndefined(e)\r\n        };\r\n        var observeCallback = function (beforeRenderArgs) {\r\n            _this.beforeRenderCallback(beforeRenderArgs, target, e, showAnimation);\r\n        };\r\n        this.trigger('beforeRender', this.tooltipEventArgs, observeCallback.bind(this));\r\n    };\r\n    Tooltip.prototype.beforeRenderCallback = function (beforeRenderArgs, target, e, showAnimation) {\r\n        var isBlazorTooltipRendered = false;\r\n        if (beforeRenderArgs.cancel) {\r\n            this.isHidden = true;\r\n            this.clear();\r\n        }\r\n        else {\r\n            this.isHidden = false;\r\n            if (isNullOrUndefined(this.tooltipEle)) {\r\n                if (this.isServerRender()) {\r\n                    this.contentTargetValue = target;\r\n                    this.contentEvent = e;\r\n                    this.contentAnimation = showAnimation;\r\n                    var args = { 'enableTooltip': 'true' };\r\n                    // tslint:disable\r\n                    this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args);\r\n                    // tslint:enable\r\n                    isBlazorTooltipRendered = true;\r\n                }\r\n                else {\r\n                    this.ctrlId = this.element.getAttribute('id') ?\r\n                        getUniqueID(this.element.getAttribute('id')) : getUniqueID('tooltip');\r\n                    this.tooltipEle = this.createElement('div', {\r\n                        className: TOOLTIP_WRAP + ' ' + POPUP_ROOT + ' ' + POPUP_LIB, attrs: {\r\n                            role: 'tooltip', 'aria-hidden': 'false', 'id': this.ctrlId + '_content'\r\n                        }, styles: 'width:' +\r\n                            formatUnit(this.width) + ';height:' + formatUnit(this.height) + ';position:absolute;'\r\n                    });\r\n                    this.beforeRenderBlazor(target, this);\r\n                }\r\n                if (!isBlazorTooltipRendered) {\r\n                    this.afterRenderBlazor(target, e, showAnimation, this);\r\n                }\r\n            }\r\n            else {\r\n                if (this.isServerRender()) {\r\n                    addClass([this.tooltipEle], POPUP_OPEN);\r\n                    document.body.appendChild(this.tooltipEle);\r\n                    this.renderCloseIcon();\r\n                    this.renderPopup(target);\r\n                }\r\n                if (target) {\r\n                    this.adjustArrow(target, this.position, this.tooltipPositionX, this.tooltipPositionY);\r\n                    this.addDescribedBy(target, this.ctrlId + '_content');\r\n                    this.renderContent(target);\r\n                    PopupAnimation.stop(this.tooltipEle);\r\n                    this.reposition(target);\r\n                    this.afterRenderBlazor(target, e, showAnimation, this);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ;\r\n    Tooltip.prototype.contentUpdated = function (args) {\r\n        if (isNullOrUndefined(this.tooltipEle)) {\r\n            if (this.isServerRender()) {\r\n                this.ctrlId = this.element.id;\r\n                this.tooltipEle = document.querySelector('#' + this.ctrlId + '_content');\r\n                if (this.tooltipEle) {\r\n                    this.tooltipEle.setAttribute('style', 'width:' + formatUnit(this.width) +\r\n                        ';height:' + formatUnit(this.height) + ';position:absolute;');\r\n                    this.beforeRenderBlazor(this.contentTargetValue, this);\r\n                    this.afterRenderBlazor(this.contentTargetValue, this.contentEvent, this.contentAnimation, this);\r\n                    this.contentTargetValue = this.contentEvent = this.contentAnimation = null;\r\n                }\r\n            }\r\n        }\r\n    };\r\n    ;\r\n    Tooltip.prototype.beforeRenderBlazor = function (target, ctrlObj) {\r\n        if (target) {\r\n            if (Browser.isDevice) {\r\n                addClass([ctrlObj.tooltipEle], DEVICE);\r\n            }\r\n            if (ctrlObj.width !== 'auto') {\r\n                ctrlObj.tooltipEle.style.maxWidth = formatUnit(ctrlObj.width);\r\n            }\r\n            if (!(this.isServerRender())) {\r\n                ctrlObj.tooltipEle.appendChild(ctrlObj.createElement('div', { className: CONTENT }));\r\n            }\r\n            document.body.appendChild(ctrlObj.tooltipEle);\r\n            removeClass([ctrlObj.tooltipEle], HIDE_POPUP);\r\n            ctrlObj.addDescribedBy(target, ctrlObj.ctrlId + '_content');\r\n            ctrlObj.renderContent(target);\r\n            addClass([ctrlObj.tooltipEle], POPUP_OPEN);\r\n            if (ctrlObj.showTipPointer) {\r\n                ctrlObj.renderArrow();\r\n            }\r\n            ctrlObj.renderCloseIcon();\r\n            ctrlObj.renderPopup(target);\r\n            ctrlObj.adjustArrow(target, ctrlObj.position, ctrlObj.tooltipPositionX, ctrlObj.tooltipPositionY);\r\n            PopupAnimation.stop(ctrlObj.tooltipEle);\r\n            ctrlObj.reposition(target);\r\n        }\r\n    };\r\n    Tooltip.prototype.afterRenderBlazor = function (target, e, showAnimation, ctrlObj) {\r\n        if (target) {\r\n            removeClass([ctrlObj.tooltipEle], POPUP_OPEN);\r\n            addClass([ctrlObj.tooltipEle], POPUP_CLOSE);\r\n            ctrlObj.tooltipEventArgs = {\r\n                type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\r\n                element: ctrlObj.tooltipEle, isInteracted: !isNullOrUndefined(e)\r\n            };\r\n            if (ctrlObj.needTemplateReposition() && !ctrlObj.mouseTrail) {\r\n                ctrlObj.tooltipEle.style.display = 'none';\r\n            }\r\n            var observeCallback = function (observedArgs) {\r\n                ctrlObj.beforeOpenCallback(observedArgs, target, showAnimation, e);\r\n            };\r\n            ctrlObj.trigger('beforeOpen', ctrlObj.tooltipEventArgs, observeCallback.bind(ctrlObj));\r\n        }\r\n    };\r\n    Tooltip.prototype.beforeOpenCallback = function (observedArgs, target, showAnimation, e) {\r\n        var _this = this;\r\n        if (observedArgs.cancel) {\r\n            this.isHidden = true;\r\n            this.clear();\r\n            this.restoreElement(target);\r\n        }\r\n        else {\r\n            var openAnimation_1 = {\r\n                name: showAnimation.effect,\r\n                duration: showAnimation.duration,\r\n                delay: showAnimation.delay,\r\n                timingFunction: 'easeOut'\r\n            };\r\n            if (showAnimation.effect === 'None') {\r\n                openAnimation_1 = undefined;\r\n            }\r\n            if (this.openDelay > 0) {\r\n                var show = function () {\r\n                    if (_this.mouseTrail) {\r\n                        EventHandler.add(target, 'mousemove touchstart mouseenter', _this.onMouseMove, _this);\r\n                    }\r\n                    if (_this.popupObj) {\r\n                        _this.popupObj.show(openAnimation_1, target);\r\n                    }\r\n                };\r\n                this.showTimer = setTimeout(show, this.openDelay);\r\n            }\r\n            else {\r\n                if (this.popupObj) {\r\n                    this.popupObj.show(openAnimation_1, target);\r\n                }\r\n            }\r\n        }\r\n        if (e) {\r\n            this.wireMouseEvents(e, target);\r\n        }\r\n    };\r\n    Tooltip.prototype.needTemplateReposition = function () {\r\n        // tslint:disable-next-line:no-any\r\n        var tooltip = this;\r\n        return !isNullOrUndefined(tooltip.viewContainerRef)\r\n            && typeof tooltip.viewContainerRef !== 'string'\r\n            || (this.isServerRender()) && this.isBlazorTemplate;\r\n    };\r\n    Tooltip.prototype.checkCollision = function (target, x, y) {\r\n        var elePos = {\r\n            left: x, top: y, position: this.position,\r\n            horizontal: this.tooltipPositionX, vertical: this.tooltipPositionY\r\n        };\r\n        var affectedPos = isCollide(this.tooltipEle, (this.target ? this.element : null), x, y);\r\n        if (affectedPos.length > 0) {\r\n            elePos.horizontal = affectedPos.indexOf('left') >= 0 ? 'Right' : affectedPos.indexOf('right') >= 0 ? 'Left' :\r\n                this.tooltipPositionX;\r\n            elePos.vertical = affectedPos.indexOf('top') >= 0 ? 'Bottom' : affectedPos.indexOf('bottom') >= 0 ? 'Top' :\r\n                this.tooltipPositionY;\r\n        }\r\n        return elePos;\r\n    };\r\n    Tooltip.prototype.collisionFlipFit = function (target, x, y) {\r\n        var elePos = this.checkCollision(target, x, y);\r\n        var newpos = elePos.position;\r\n        if (this.tooltipPositionY !== elePos.vertical) {\r\n            newpos = ((this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0) ?\r\n                elePos.vertical + this.tooltipPositionX : this.tooltipPositionX + elePos.vertical);\r\n        }\r\n        if (this.tooltipPositionX !== elePos.horizontal) {\r\n            if (newpos.indexOf('Left') === 0) {\r\n                elePos.vertical = (newpos === 'LeftTop' || newpos === 'LeftCenter') ? 'Top' : 'Bottom';\r\n                newpos = (elePos.vertical + 'Left');\r\n            }\r\n            if (newpos.indexOf('Right') === 0) {\r\n                elePos.vertical = (newpos === 'RightTop' || newpos === 'RightCenter') ? 'Top' : 'Bottom';\r\n                newpos = (elePos.vertical + 'Right');\r\n            }\r\n            elePos.horizontal = this.tooltipPositionX;\r\n        }\r\n        this.tooltipEventArgs = {\r\n            type: null, cancel: false, target: target, event: null,\r\n            element: this.tooltipEle, collidedPosition: newpos\r\n        };\r\n        this.trigger('beforeCollision', this.tooltipEventArgs);\r\n        if (elePos.position !== newpos) {\r\n            var pos = calculatePosition(target, elePos.horizontal, elePos.vertical);\r\n            this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\r\n            var offsetPos = this.calculateTooltipOffset(newpos);\r\n            offsetPos.top -= (('TopBottom'.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1) &&\r\n                ('TopBottom'.indexOf(newpos.split(/(?=[A-Z])/)[0]) !== -1)) ? (2 * this.offsetY) : 0;\r\n            offsetPos.left -= (('RightLeft'.indexOf(this.position.split(/(?=[A-Z])/)[0]) !== -1) &&\r\n                ('RightLeft'.indexOf(newpos.split(/(?=[A-Z])/)[0]) !== -1)) ? (2 * this.offsetX) : 0;\r\n            elePos.position = newpos;\r\n            elePos.left = pos.left + offsetPos.left;\r\n            elePos.top = pos.top + offsetPos.top;\r\n        }\r\n        else {\r\n            this.adjustArrow(target, newpos, elePos.horizontal, elePos.vertical);\r\n        }\r\n        var eleOffset = { left: elePos.left, top: elePos.top };\r\n        var left = fit(this.tooltipEle, (this.target ? this.element : null), { X: true, Y: false }, eleOffset).left;\r\n        this.tooltipEle.style.display = 'block';\r\n        if (this.showTipPointer && (newpos.indexOf('Bottom') === 0 || newpos.indexOf('Top') === 0)) {\r\n            var arrowEle = this.tooltipEle.querySelector('.' + ARROW_TIP);\r\n            var arrowleft = parseInt(arrowEle.style.left, 10) - (left - elePos.left);\r\n            if (arrowleft < 0) {\r\n                arrowleft = 0;\r\n            }\r\n            else if ((arrowleft + arrowEle.offsetWidth) > this.tooltipEle.clientWidth) {\r\n                arrowleft = this.tooltipEle.clientWidth - arrowEle.offsetWidth;\r\n            }\r\n            arrowEle.style.left = arrowleft.toString() + 'px';\r\n        }\r\n        this.tooltipEle.style.display = '';\r\n        eleOffset.left = left;\r\n        return eleOffset;\r\n    };\r\n    Tooltip.prototype.hideTooltip = function (hideAnimation, e, targetElement) {\r\n        var _this = this;\r\n        if (this.closeDelay > 0) {\r\n            clearTimeout(this.hideTimer);\r\n            clearTimeout(this.showTimer);\r\n            var hide = function () {\r\n                if (_this.closeDelay && _this.tooltipEle && _this.isTooltipOpen) {\r\n                    return;\r\n                }\r\n                _this.tooltipHide(hideAnimation, e, targetElement);\r\n            };\r\n            this.hideTimer = setTimeout(hide, this.closeDelay);\r\n        }\r\n        else {\r\n            this.tooltipHide(hideAnimation, e, targetElement);\r\n        }\r\n    };\r\n    Tooltip.prototype.tooltipHide = function (hideAnimation, e, targetElement) {\r\n        var _this = this;\r\n        var target;\r\n        if (e) {\r\n            target = this.target ? (targetElement || e.target) : this.element;\r\n        }\r\n        else {\r\n            target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\r\n        }\r\n        this.tooltipEventArgs = {\r\n            type: e ? e.type : null, cancel: false, target: target, event: e ? e : null,\r\n            element: this.tooltipEle, isInteracted: !isNullOrUndefined(e)\r\n        };\r\n        // this line commented for close the tooltip popup element even the target element destroyed in a page.\r\n        //if (isNullOrUndefined(target)) { return; }\r\n        this.trigger('beforeClose', this.tooltipEventArgs, function (observedArgs) {\r\n            if (!observedArgs.cancel) {\r\n                if (_this.isServerRender()) {\r\n                    _this.blazorHide(hideAnimation, target);\r\n                }\r\n                else {\r\n                    _this.popupHide(hideAnimation, target);\r\n                }\r\n            }\r\n            else {\r\n                _this.isHidden = false;\r\n            }\r\n        });\r\n    };\r\n    /* istanbul ignore next */\r\n    Tooltip.prototype.blazorHide = function (hideAnimation, target) {\r\n        var proxy = this;\r\n        var hide = function () {\r\n            proxy.popupHide(hideAnimation, target);\r\n        };\r\n        if (this.popupObj) {\r\n            this.popupHide(hideAnimation, target);\r\n        }\r\n        else {\r\n            setTimeout(hide, 200);\r\n        }\r\n    };\r\n    Tooltip.prototype.popupHide = function (hideAnimation, target) {\r\n        if (target) {\r\n            this.restoreElement(target);\r\n        }\r\n        this.isHidden = true;\r\n        var closeAnimation = {\r\n            name: hideAnimation.effect,\r\n            duration: hideAnimation.duration,\r\n            delay: hideAnimation.delay,\r\n            timingFunction: 'easeIn'\r\n        };\r\n        if (hideAnimation.effect === 'None') {\r\n            closeAnimation = undefined;\r\n        }\r\n        if (this.popupObj) {\r\n            this.popupObj.hide(closeAnimation);\r\n        }\r\n    };\r\n    Tooltip.prototype.restoreElement = function (target) {\r\n        this.unwireMouseEvents(target);\r\n        if (!isNullOrUndefined(target.getAttribute('data-content'))) {\r\n            target.setAttribute('title', target.getAttribute('data-content'));\r\n            target.removeAttribute('data-content');\r\n        }\r\n        this.removeDescribedBy(target);\r\n    };\r\n    Tooltip.prototype.clear = function () {\r\n        if (this.tooltipEle) {\r\n            removeClass([this.tooltipEle], POPUP_CLOSE);\r\n            addClass([this.tooltipEle], POPUP_OPEN);\r\n        }\r\n        if (this.isHidden) {\r\n            if (this.popupObj) {\r\n                this.popupObj.destroy();\r\n            }\r\n            if (this.isServerRender() && this.tooltipEle) {\r\n                this.tooltipEle.style.display = 'none';\r\n                var args = { 'enableTooltip': 'false' };\r\n                // tslint:disable\r\n                this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args);\r\n                // tslint:enable\r\n                remove(this.tooltipEle);\r\n            }\r\n            else if (this.tooltipEle) {\r\n                remove(this.tooltipEle);\r\n            }\r\n            this.tooltipEle = null;\r\n            this.popupObj = null;\r\n        }\r\n    };\r\n    Tooltip.prototype.tooltipHover = function (e) {\r\n        if (this.tooltipEle) {\r\n            this.isTooltipOpen = true;\r\n        }\r\n    };\r\n    Tooltip.prototype.tooltipMouseOut = function (e) {\r\n        this.isTooltipOpen = false;\r\n        this.hideTooltip(this.animation.close, e, this.findTarget());\r\n    };\r\n    Tooltip.prototype.onMouseOut = function (e) {\r\n        var enteredElement = e.relatedTarget;\r\n        // don't close the tooltip only if it is tooltip content element\r\n        if (enteredElement && !this.mouseTrail) {\r\n            var checkForTooltipElement = closest(enteredElement, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT);\r\n            if (checkForTooltipElement) {\r\n                EventHandler.add(checkForTooltipElement, 'mouseleave', this.tooltipElementMouseOut, this);\r\n            }\r\n            else {\r\n                this.hideTooltip(this.animation.close, e, this.findTarget());\r\n                if (this.closeDelay === 0) {\r\n                    this.clear();\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.hideTooltip(this.animation.close, e, this.findTarget());\r\n            this.clear();\r\n        }\r\n    };\r\n    Tooltip.prototype.tooltipElementMouseOut = function (e) {\r\n        this.hideTooltip(this.animation.close, e, this.findTarget());\r\n        EventHandler.remove(this.element, 'mouseleave', this.tooltipElementMouseOut);\r\n        this.clear();\r\n    };\r\n    Tooltip.prototype.onStickyClose = function (e) {\r\n        this.close();\r\n    };\r\n    Tooltip.prototype.onMouseMove = function (event) {\r\n        var eventPageX = 0;\r\n        var eventPageY = 0;\r\n        if (event.type.indexOf('touch') > -1) {\r\n            event.preventDefault();\r\n            eventPageX = event.touches[0].pageX;\r\n            eventPageY = event.touches[0].pageY;\r\n        }\r\n        else {\r\n            eventPageX = event.pageX;\r\n            eventPageY = event.pageY;\r\n        }\r\n        PopupAnimation.stop(this.tooltipEle);\r\n        removeClass([this.tooltipEle], POPUP_CLOSE);\r\n        addClass([this.tooltipEle], POPUP_OPEN);\r\n        this.adjustArrow(event.target, this.position, this.tooltipPositionX, this.tooltipPositionY);\r\n        var pos = this.calculateTooltipOffset(this.position);\r\n        var x = eventPageX + pos.left + this.offsetX;\r\n        var y = eventPageY + pos.top + this.offsetY;\r\n        var elePos = this.checkCollision(event.target, x, y);\r\n        if (this.tooltipPositionX !== elePos.horizontal || this.tooltipPositionY !== elePos.vertical) {\r\n            var newpos = (this.position.indexOf('Bottom') === 0 || this.position.indexOf('Top') === 0) ?\r\n                elePos.vertical + elePos.horizontal : elePos.horizontal + elePos.vertical;\r\n            elePos.position = newpos;\r\n            this.adjustArrow(event.target, elePos.position, elePos.horizontal, elePos.vertical);\r\n            var colpos = this.calculateTooltipOffset(elePos.position);\r\n            elePos.left = eventPageX + colpos.left - this.offsetX;\r\n            elePos.top = eventPageY + colpos.top - this.offsetY;\r\n        }\r\n        this.tooltipEle.style.left = elePos.left + 'px';\r\n        this.tooltipEle.style.top = elePos.top + 'px';\r\n    };\r\n    Tooltip.prototype.keyDown = function (event) {\r\n        if (this.tooltipEle && event.keyCode === 27) {\r\n            this.close();\r\n        }\r\n    };\r\n    Tooltip.prototype.touchEnd = function (e) {\r\n        if (this.tooltipEle && closest(e.target, '.' + ROOT) === null && !this.isSticky) {\r\n            this.close();\r\n        }\r\n    };\r\n    Tooltip.prototype.scrollHandler = function (e) {\r\n        if (this.tooltipEle) {\r\n            if (!(closest(e.target, \".\" + TOOLTIP_WRAP + \".\" + POPUP_LIB + \".\" + POPUP_ROOT))) {\r\n                this.close();\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Core method that initializes the control rendering.\r\n     * @private\r\n     */\r\n    Tooltip.prototype.render = function () {\r\n        this.initialize();\r\n        this.wireEvents(this.opensOn);\r\n        this.renderComplete();\r\n    };\r\n    /**\r\n     * Initializes the values of private members.\r\n     * @private\r\n     */\r\n    Tooltip.prototype.preRender = function () {\r\n        this.tipClass = TIP_BOTTOM;\r\n        this.tooltipPositionX = 'Center';\r\n        this.tooltipPositionY = 'Top';\r\n        this.isHidden = true;\r\n    };\r\n    /**\r\n     * Binding events to the Tooltip element.\r\n     * @hidden\r\n     */\r\n    Tooltip.prototype.wireEvents = function (trigger) {\r\n        var triggerList = this.getTriggerList(trigger);\r\n        for (var _i = 0, triggerList_1 = triggerList; _i < triggerList_1.length; _i++) {\r\n            var opensOn = triggerList_1[_i];\r\n            if (opensOn === 'Custom') {\r\n                return;\r\n            }\r\n            if (opensOn === 'Focus') {\r\n                this.wireFocusEvents();\r\n            }\r\n            if (opensOn === 'Click') {\r\n                EventHandler.add(this.element, Browser.touchStartEvent, this.targetClick, this);\r\n            }\r\n            if (opensOn === 'Hover') {\r\n                if (Browser.isDevice) {\r\n                    this.touchModule = new Touch(this.element, {\r\n                        tapHoldThreshold: TAPHOLD_THRESHOLD,\r\n                        tapHold: this.tapHoldHandler.bind(this)\r\n                    });\r\n                    EventHandler.add(this.element, Browser.touchEndEvent, this.touchEndHandler, this);\r\n                }\r\n                else {\r\n                    EventHandler.add(this.element, 'mouseover', this.targetHover, this);\r\n                    if (this.isServerRender() && !this.isSticky) {\r\n                        EventHandler.add(this.element, 'mouseleave', this.onMouseOut, this);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        EventHandler.add(document, 'touchend', this.touchEnd, this);\r\n        EventHandler.add(document, 'scroll wheel', this.scrollHandler, this);\r\n        EventHandler.add(document, 'keydown', this.keyDown, this);\r\n    };\r\n    Tooltip.prototype.getTriggerList = function (trigger) {\r\n        if (trigger === 'Auto') {\r\n            trigger = (Browser.isDevice) ? 'Hover' : 'Hover Focus';\r\n        }\r\n        return trigger.split(' ');\r\n    };\r\n    Tooltip.prototype.wireFocusEvents = function () {\r\n        if (!isNullOrUndefined(this.target)) {\r\n            var targetList = [].slice.call(this.element.querySelectorAll(this.target));\r\n            for (var _i = 0, targetList_2 = targetList; _i < targetList_2.length; _i++) {\r\n                var target = targetList_2[_i];\r\n                EventHandler.add(target, 'focus', this.targetHover, this);\r\n            }\r\n        }\r\n        else {\r\n            EventHandler.add(this.element, 'focus', this.targetHover, this);\r\n        }\r\n    };\r\n    Tooltip.prototype.wireMouseEvents = function (e, target) {\r\n        if (this.tooltipEle) {\r\n            if (!this.isSticky) {\r\n                if (e.type === 'focus') {\r\n                    EventHandler.add(target, 'blur', this.onMouseOut, this);\r\n                }\r\n                if (e.type === 'mouseover') {\r\n                    if (!this.isServerRender()) {\r\n                        EventHandler.add(target, 'mouseleave', this.onMouseOut, this);\r\n                    }\r\n                }\r\n                if (this.closeDelay) {\r\n                    EventHandler.add(this.tooltipEle, 'mouseenter', this.tooltipHover, this);\r\n                    EventHandler.add(this.tooltipEle, 'mouseleave', this.tooltipMouseOut, this);\r\n                }\r\n            }\r\n            if (this.mouseTrail && this.openDelay === 0) {\r\n                EventHandler.add(target, 'mousemove touchstart mouseenter', this.onMouseMove, this);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Unbinding events from the element on widget destroy.\r\n     * @hidden\r\n     */\r\n    Tooltip.prototype.unwireEvents = function (trigger) {\r\n        var triggerList = this.getTriggerList(trigger);\r\n        for (var _i = 0, triggerList_2 = triggerList; _i < triggerList_2.length; _i++) {\r\n            var opensOn = triggerList_2[_i];\r\n            if (opensOn === 'Custom') {\r\n                return;\r\n            }\r\n            if (opensOn === 'Focus') {\r\n                this.unwireFocusEvents();\r\n            }\r\n            if (opensOn === 'Click') {\r\n                EventHandler.remove(this.element, Browser.touchStartEvent, this.targetClick);\r\n            }\r\n            if (opensOn === 'Hover') {\r\n                if (Browser.isDevice) {\r\n                    if (this.touchModule) {\r\n                        this.touchModule.destroy();\r\n                    }\r\n                    EventHandler.remove(this.element, Browser.touchEndEvent, this.touchEndHandler);\r\n                }\r\n                else {\r\n                    EventHandler.remove(this.element, 'mouseover', this.targetHover);\r\n                    if (this.isServerRender() && !this.isSticky) {\r\n                        EventHandler.remove(this.element, 'mouseleave', this.onMouseOut);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        EventHandler.remove(document, 'touchend', this.touchEnd);\r\n        EventHandler.remove(document, 'scroll wheel', this.scrollHandler);\r\n        EventHandler.remove(document, 'keydown', this.keyDown);\r\n    };\r\n    Tooltip.prototype.unwireFocusEvents = function () {\r\n        if (!isNullOrUndefined(this.target)) {\r\n            var targetList = [].slice.call(this.element.querySelectorAll(this.target));\r\n            for (var _i = 0, targetList_3 = targetList; _i < targetList_3.length; _i++) {\r\n                var target = targetList_3[_i];\r\n                EventHandler.remove(target, 'focus', this.targetHover);\r\n            }\r\n        }\r\n        else {\r\n            EventHandler.remove(this.element, 'focus', this.targetHover);\r\n        }\r\n    };\r\n    Tooltip.prototype.unwireMouseEvents = function (target) {\r\n        if (!this.isSticky) {\r\n            var triggerList = this.getTriggerList(this.opensOn);\r\n            for (var _i = 0, triggerList_3 = triggerList; _i < triggerList_3.length; _i++) {\r\n                var opensOn = triggerList_3[_i];\r\n                if (opensOn === 'Focus') {\r\n                    EventHandler.remove(target, 'blur', this.onMouseOut);\r\n                }\r\n                if (opensOn === 'Hover' && !Browser.isDevice) {\r\n                    if (!this.isServerRender()) {\r\n                        EventHandler.remove(target, 'mouseleave', this.onMouseOut);\r\n                    }\r\n                }\r\n            }\r\n            if (this.closeDelay) {\r\n                EventHandler.remove(target, 'mouseenter', this.tooltipHover);\r\n                EventHandler.remove(target, 'mouseleave', this.tooltipMouseOut);\r\n            }\r\n        }\r\n        if (this.mouseTrail) {\r\n            EventHandler.remove(target, 'mousemove touchstart mouseenter', this.onMouseMove);\r\n        }\r\n    };\r\n    Tooltip.prototype.findTarget = function () {\r\n        var target = document.querySelector('[data-tooltip-id= ' + this.ctrlId + '_content]');\r\n        return target;\r\n    };\r\n    /**\r\n     * Core method to return the component name.\r\n     * @private\r\n     */\r\n    Tooltip.prototype.getModuleName = function () {\r\n        return 'tooltip';\r\n    };\r\n    /**\r\n     * Returns the properties to be maintained in the persisted state.\r\n     * @private\r\n     */\r\n    Tooltip.prototype.getPersistData = function () {\r\n        return this.addOnPersist([]);\r\n    };\r\n    /**\r\n     * Called internally, if any of the property value changed.\r\n     * @private\r\n     */\r\n    Tooltip.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        var targetElement = this.findTarget();\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'width':\r\n                    if (this.tooltipEle && targetElement) {\r\n                        this.tooltipEle.style.width = this.tooltipEle.style.maxWidth = formatUnit(newProp.width);\r\n                        this.reposition(targetElement);\r\n                    }\r\n                    break;\r\n                case 'height':\r\n                    if (this.tooltipEle && targetElement) {\r\n                        this.tooltipEle.style.height = formatUnit(newProp.height);\r\n                        this.reposition(targetElement);\r\n                    }\r\n                    break;\r\n                case 'content':\r\n                    if (this.tooltipEle) {\r\n                        if (this.isServerRender()) {\r\n                            this.isBlazorTooltip = true;\r\n                        }\r\n                        this.renderContent();\r\n                    }\r\n                    else if (this.isServerRender()) {\r\n                        var args = { 'content': newProp.content };\r\n                        // tslint:disable\r\n                        this.interopAdaptor.invokeMethodAsync('OnTooltipServerCall', args);\r\n                        // tslint:enable\r\n                    }\r\n                    break;\r\n                case 'opensOn':\r\n                    this.unwireEvents(oldProp.opensOn);\r\n                    this.wireEvents(newProp.opensOn);\r\n                    break;\r\n                case 'position':\r\n                    this.formatPosition();\r\n                    if (this.tooltipEle && targetElement) {\r\n                        var arrowInnerELe = this.tooltipEle.querySelector('.' + ARROW_TIP_INNER);\r\n                        arrowInnerELe.style.top = arrowInnerELe.style.left = null;\r\n                        this.reposition(targetElement);\r\n                    }\r\n                    break;\r\n                case 'tipPointerPosition':\r\n                    if (this.tooltipEle && targetElement) {\r\n                        this.reposition(targetElement);\r\n                    }\r\n                    break;\r\n                case 'offsetX':\r\n                    if (this.tooltipEle) {\r\n                        var x = newProp.offsetX - oldProp.offsetX;\r\n                        this.tooltipEle.style.left = (parseInt(this.tooltipEle.style.left, 10) + (x)).toString() + 'px';\r\n                    }\r\n                    break;\r\n                case 'offsetY':\r\n                    if (this.tooltipEle) {\r\n                        var y = newProp.offsetY - oldProp.offsetY;\r\n                        this.tooltipEle.style.top = (parseInt(this.tooltipEle.style.top, 10) + (y)).toString() + 'px';\r\n                    }\r\n                    break;\r\n                case 'cssClass':\r\n                    if (this.tooltipEle) {\r\n                        if (oldProp.cssClass) {\r\n                            removeClass([this.tooltipEle], oldProp.cssClass.split(' '));\r\n                        }\r\n                        if (newProp.cssClass) {\r\n                            addClass([this.tooltipEle], newProp.cssClass.split(' '));\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'enableRtl':\r\n                    if (this.tooltipEle) {\r\n                        if (this.enableRtl) {\r\n                            addClass([this.tooltipEle], RTL);\r\n                        }\r\n                        else {\r\n                            removeClass([this.tooltipEle], RTL);\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * It is used to show the Tooltip on the specified target with specific animation settings.\r\n     * @param element Target element where the Tooltip is to be displayed. (It is an optional parameter)\r\n     * @param animation Sets the specific animation, while showing the Tooltip on the screen. (It is an optional parameter)\r\n     * @return {void}\r\n     */\r\n    Tooltip.prototype.open = function (element, animation) {\r\n        if (isNullOrUndefined(animation)) {\r\n            animation = this.animation.open;\r\n        }\r\n        if (isNullOrUndefined(element)) {\r\n            element = this.element;\r\n        }\r\n        if (element.style.display === 'none') {\r\n            return;\r\n        }\r\n        this.showTooltip(element, animation);\r\n    };\r\n    /**\r\n     * It is used to hide the Tooltip with specific animation effect.\r\n     * @param animation Sets the specific animation when hiding Tooltip from the screen. (It is an optional parameter)\r\n     * @return {void}\r\n     */\r\n    Tooltip.prototype.close = function (animation) {\r\n        if (!animation) {\r\n            animation = this.animation.close;\r\n        }\r\n        this.hideTooltip(animation);\r\n    };\r\n    /**\r\n     * It is used to refresh the Tooltip content and its position.\r\n     * @param target Target element where the Tooltip content or position needs to be refreshed.\r\n     * @return {void}\r\n     */\r\n    Tooltip.prototype.refresh = function (target) {\r\n        if (this.tooltipEle) {\r\n            this.renderContent(target);\r\n        }\r\n        if (this.popupObj && target) {\r\n            this.reposition(target);\r\n        }\r\n    };\r\n    /**\r\n     * It is used to destroy the Tooltip component.\r\n     * @method destroy\r\n     * @return {void}\r\n     * @memberof Tooltip\r\n     */\r\n    Tooltip.prototype.destroy = function () {\r\n        if (!this.isServerRender()) {\r\n            _super.prototype.destroy.call(this);\r\n            if (this.tooltipEle) {\r\n                remove(this.tooltipEle);\r\n            }\r\n        }\r\n        if (this.isServerRender() && this.tooltipEle) {\r\n            var placeholder = document.querySelector('#' + this.ctrlId + '_content_placeholder');\r\n            if (placeholder) {\r\n                placeholder.appendChild(this.tooltipEle);\r\n            }\r\n        }\r\n        if (this.popupObj) {\r\n            this.popupObj.destroy();\r\n        }\r\n        removeClass([this.element], ROOT);\r\n        this.unwireEvents(this.opensOn);\r\n        this.unwireMouseEvents(this.element);\r\n        this.tooltipEle = null;\r\n        this.popupObj = null;\r\n    };\r\n    __decorate([\r\n        Property('auto')\r\n    ], Tooltip.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Property('auto')\r\n    ], Tooltip.prototype, \"height\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tooltip.prototype, \"content\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tooltip.prototype, \"target\", void 0);\r\n    __decorate([\r\n        Property('TopCenter')\r\n    ], Tooltip.prototype, \"position\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tooltip.prototype, \"offsetX\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tooltip.prototype, \"offsetY\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], Tooltip.prototype, \"showTipPointer\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], Tooltip.prototype, \"enableHtmlParse\", void 0);\r\n    __decorate([\r\n        Property('Auto')\r\n    ], Tooltip.prototype, \"tipPointerPosition\", void 0);\r\n    __decorate([\r\n        Property('Auto')\r\n    ], Tooltip.prototype, \"opensOn\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"mouseTrail\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"isSticky\", void 0);\r\n    __decorate([\r\n        Complex({}, Animation)\r\n    ], Tooltip.prototype, \"animation\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tooltip.prototype, \"openDelay\", void 0);\r\n    __decorate([\r\n        Property(0)\r\n    ], Tooltip.prototype, \"closeDelay\", void 0);\r\n    __decorate([\r\n        Property()\r\n    ], Tooltip.prototype, \"cssClass\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Tooltip.prototype, \"enableHtmlSanitizer\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"beforeRender\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"beforeOpen\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"afterOpen\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"beforeClose\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"afterClose\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"beforeCollision\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"created\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Tooltip.prototype, \"destroyed\", void 0);\r\n    Tooltip = __decorate([\r\n        NotifyPropertyChanges\r\n    ], Tooltip);\r\n    return Tooltip;\r\n}(Component));\r\nexport { Tooltip };\r\n"]},"metadata":{},"sourceType":"module"}