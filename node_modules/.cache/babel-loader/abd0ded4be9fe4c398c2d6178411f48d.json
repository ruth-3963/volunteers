{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}; /// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\n\n\nimport { EventHandler, Property, Event, compile, KeyboardEvents, append, select } from '@syncfusion/ej2-base';\nimport { attributes, isNullOrUndefined, getUniqueID, formatUnit, isUndefined, getValue } from '@syncfusion/ej2-base';\nimport { Animation, Browser, NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { addClass, removeClass, closest, prepend, detach, classList, isBlazor } from '@syncfusion/ej2-base';\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { incrementalSearch } from '../common/incremental-search';\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\n/* tslint:disable */\n\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data'; // don't use space in classnames \n\nexport var dropDownListClasses = {\n  root: 'e-dropdownlist',\n  hover: dropDownBaseClasses.hover,\n  selected: dropDownBaseClasses.selected,\n  rtl: dropDownBaseClasses.rtl,\n  li: dropDownBaseClasses.li,\n  disable: dropDownBaseClasses.disabled,\n  base: dropDownBaseClasses.root,\n  focus: dropDownBaseClasses.focus,\n  input: 'e-input-group',\n  inputFocus: 'e-input-focus',\n  icon: 'e-input-group-icon e-ddl-icon',\n  iconAnimation: 'e-icon-anim',\n  value: 'e-input-value',\n  device: 'e-ddl-device',\n  backIcon: 'e-input-group-icon e-back-icon e-icons',\n  filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\n  filterInput: 'e-input-filter',\n  filterParent: 'e-filter-parent',\n  mobileFilter: 'e-ddl-device-filter',\n  footer: 'e-ddl-footer',\n  header: 'e-ddl-header',\n  clearIcon: 'e-clear-icon',\n  clearIconHide: 'e-clear-icon-hide',\n  popupFullScreen: 'e-popup-full-page',\n  disableIcon: 'e-ddl-disable-icon',\n  hiddenElement: 'e-ddl-hidden'\n};\nvar inputObject = {\n  container: null,\n  buttons: []\n};\n/**\r\n * The DropDownList component contains a list of predefined values from which you can\r\n * choose a single value.\r\n * ```html\r\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\r\n * ```\r\n * ```typescript\r\n *   let dropDownListObj:DropDownList = new DropDownList();\r\n *   dropDownListObj.appendTo(\"#list\");\r\n * ```\r\n */\n\nvar DropDownList =\n/** @class */\nfunction (_super) {\n  __extends(DropDownList, _super);\n  /**\r\n   * * Constructor for creating the DropDownList component.\r\n   */\n\n\n  function DropDownList(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.previousValue = null;\n    _this.isListSearched = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    return _this;\n  }\n\n  ;\n  /**\r\n   * Initialize the event handler.\r\n   * @private\r\n   */\n\n  DropDownList.prototype.preRender = function () {\n    var checkBlazor = isBlazor() && this.isServerRendered;\n    this.isServerBlazor = checkBlazor ? true : false;\n\n    if (this.isServerBlazor) {\n      this.initializeData();\n    } else {\n      this.element.style.opacity = '0';\n      this.initializeData();\n\n      _super.prototype.preRender.call(this);\n    }\n\n    this.activeIndex = this.index;\n    this.queryString = '';\n  };\n\n  DropDownList.prototype.initializeData = function () {\n    this.isPopupOpen = false;\n    this.isDocumentClick = false;\n    this.isInteracted = false;\n    this.isFilterFocus = false;\n    this.beforePopupOpen = false;\n    this.initial = true;\n    this.initRemoteRender = false;\n    this.isNotSearchList = false;\n    this.isTyped = false;\n    this.isSelected = false;\n    this.preventFocus = false;\n    this.preventAutoFill = false;\n    this.isValidKey = false;\n    this.typedString = '';\n    this.isEscapeKey = false;\n    this.isPreventBlur = false;\n    this.isTabKey = false;\n    this.actionCompleteData = {\n      isUpdated: false\n    };\n    this.prevSelectPoints = {};\n    this.isSelectCustom = false;\n    this.isDropDownClick = false;\n    this.preventAltUp = false;\n    this.isCustomFilter = false;\n    this.isSecondClick = false;\n    this.keyConfigure = {\n      tab: 'tab',\n      enter: '13',\n      escape: '27',\n      end: '35',\n      home: '36',\n      down: '40',\n      up: '38',\n      pageUp: '33',\n      pageDown: '34',\n      open: 'alt+40',\n      close: 'shift+tab',\n      hide: 'alt+38',\n      space: '32'\n    };\n  };\n\n  DropDownList.prototype.setZIndex = function () {\n    if (this.popupObj) {\n      this.popupObj.setProperties({\n        'zIndex': this.zIndex\n      });\n    }\n  };\n\n  DropDownList.prototype.renderList = function (isEmptyData) {\n    if (!this.isServerBlazor) {\n      _super.prototype.render.call(this, isEmptyData);\n\n      this.unWireListEvents();\n      this.wireListEvents();\n    } else {\n      // tslint:disable-next-line\n      this.interopAdaptor.invokeMethodAsync('OnServerRenderList', this.beforePopupOpen, false);\n    }\n  };\n\n  DropDownList.prototype.floatLabelChange = function () {\n    if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\n      var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\n\n      if (this.inputElement.value !== '' || this.isInteracted) {\n        classList(floatElement, ['e-label-top'], ['e-label-bottom']);\n      } else {\n        classList(floatElement, ['e-label-bottom'], ['e-label-top']);\n      }\n    }\n  };\n\n  DropDownList.prototype.resetHandler = function (e) {\n    e.preventDefault();\n    this.clearAll(e);\n  };\n\n  DropDownList.prototype.resetFocusElement = function () {\n    this.removeHover();\n    this.removeSelection();\n    this.removeFocus();\n    this.list.scrollTop = 0;\n\n    if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\n      var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\n\n      if (li) {\n        li.classList.add(dropDownListClasses.focus);\n      }\n    }\n  };\n\n  DropDownList.prototype.clearAll = function (e, properties) {\n    if (isNullOrUndefined(properties) || !isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n      this.isActive = true;\n      this.resetSelection(properties);\n    }\n\n    var dataItem = this.getItemData();\n\n    if (this.previousValue === dataItem.value) {\n      return;\n    }\n\n    this.onChangeEvent(e);\n  };\n\n  DropDownList.prototype.resetSelection = function (properties) {\n    if (this.list) {\n      if (!isNullOrUndefined(properties) && (isNullOrUndefined(properties.dataSource) || !(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)) {\n        this.selectedLI = null;\n        this.actionCompleteData.isUpdated = false;\n        this.actionCompleteData.ulElement = null;\n        this.actionCompleteData.list = null;\n        this.resetList(properties.dataSource);\n      } else {\n        if (this.allowFiltering && this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\n        }\n\n        this.resetFocusElement();\n      }\n    }\n\n    if (!this.isServerBlazor) {\n      this.hiddenElement.innerHTML = '';\n    }\n\n    this.inputElement.value = '';\n    this.value = null;\n    this.itemData = null;\n    this.text = null;\n    this.index = null;\n    this.activeIndex = null;\n    this.item = null;\n    this.queryString = '';\n\n    if (this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n      this.valueTempElement = null;\n    }\n\n    this.setSelection(null, null);\n    this.isSelectCustom = false;\n    this.updateIconState();\n    this.cloneElements();\n  };\n\n  DropDownList.prototype.setHTMLAttributes = function () {\n    if (Object.keys(this.htmlAttributes).length) {\n      for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\n        var htmlAttr = _a[_i];\n\n        if (htmlAttr === 'class') {\n          var updatedClassValue = this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ').trim();\n\n          if (updatedClassValue !== '') {\n            addClass([this.inputWrapper.container], updatedClassValue.split(' '));\n          }\n        } else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\n          this.enabled = false;\n          this.setEnable();\n        } else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\n          this.readonly = true;\n          this.dataBind();\n        } else if (htmlAttr === 'style') {\n          this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\n        } else {\n          var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder', 'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\n          var validateAttr = ['name', 'required'];\n\n          if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n            defaultAttr.push('tabindex');\n          }\n\n          if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\n            this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          } else if (defaultAttr.indexOf(htmlAttr) > -1) {\n            htmlAttr === 'placeholder' ? Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement) : this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          } else {\n            this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\n          }\n        }\n      }\n    }\n\n    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\n      this.inputWrapper.container.removeAttribute('tabindex');\n    }\n  };\n\n  DropDownList.prototype.getAriaAttributes = function () {\n    return {\n      'aria-disabled': 'false',\n      'aria-owns': this.element.id + '_options',\n      'role': 'listbox',\n      'aria-haspopup': 'true',\n      'aria-expanded': 'false',\n      'aria-activedescendant': 'null',\n      'aria-live': 'polite',\n      'aria-labelledby': this.hiddenElement.id\n    };\n  };\n\n  DropDownList.prototype.setEnableRtl = function () {\n    Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\n\n    if (this.popupObj) {\n      this.popupObj.enableRtl = this.enableRtl;\n      this.popupObj.dataBind();\n    }\n  };\n\n  DropDownList.prototype.setEnable = function () {\n    Input.setEnabled(this.enabled, this.inputElement);\n\n    if (this.enabled) {\n      removeClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'false');\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.hidePopup();\n      addClass([this.inputWrapper.container], dropDownListClasses.disable);\n      this.inputElement.setAttribute('aria-disabled', 'true');\n      this.targetElement().tabIndex = -1;\n    }\n  };\n  /**\r\n   * Get the properties to be maintained in the persisted state.\r\n   */\n\n\n  DropDownList.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  ;\n\n  DropDownList.prototype.getLocaleName = function () {\n    return 'drop-down-list';\n  };\n\n  ;\n\n  DropDownList.prototype.preventTabIndex = function (element) {\n    if (this.getModuleName() === 'dropdownlist') {\n      element.tabIndex = -1;\n    }\n  };\n\n  DropDownList.prototype.targetElement = function () {\n    return this.inputWrapper.container;\n  };\n\n  DropDownList.prototype.getNgDirective = function () {\n    return 'EJS-DROPDOWNLIST';\n  };\n\n  DropDownList.prototype.getElementByText = function (text) {\n    return this.getElementByValue(this.getValueByText(text));\n  };\n\n  DropDownList.prototype.getElementByValue = function (value) {\n    var item;\n    var listItems = this.getItems();\n\n    for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\n      var liItem = listItems_1[_i];\n\n      if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\n        item = liItem;\n        break;\n      }\n    }\n\n    return item;\n  };\n\n  ;\n\n  DropDownList.prototype.initValue = function () {\n    this.renderList();\n\n    if (this.dataSource instanceof DataManager) {\n      this.initRemoteRender = true;\n    } else {\n      this.updateValues();\n    }\n  };\n\n  DropDownList.prototype.updateValues = function () {\n    if (!isNullOrUndefined(this.value)) {\n      this.setSelection(this.getElementByValue(this.value), null);\n    } else if (this.text && isNullOrUndefined(this.value)) {\n      var element = this.getElementByText(this.text);\n\n      if (isNullOrUndefined(element)) {\n        this.setProperties({\n          text: null\n        });\n        return;\n      } else {\n        this.setSelection(element, null);\n      }\n    } else {\n      this.setSelection(this.liCollections[this.activeIndex], null);\n    }\n\n    this.setHiddenValue();\n    Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n  };\n\n  DropDownList.prototype.onBlur = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var target = e.relatedTarget;\n    var currentTarget = e.target;\n    var isPreventBlur = this.isPreventBlur;\n    this.isPreventBlur = false; //IE 11 - issue\n\n    if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) || !this.isFilterLayout() && isNullOrUndefined(target))) {\n      if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\n        this.filterInput.focus();\n      } else {\n        this.targetElement().focus();\n      }\n\n      return;\n    }\n\n    if (this.isDocumentClick || !isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter)) {\n      if (!this.beforePopupOpen) {\n        this.isDocumentClick = false;\n      }\n\n      return;\n    }\n\n    if (this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement && (document.activeElement !== target || document.activeElement === target && currentTarget.classList.contains(dropDownListClasses.inputFocus)) || isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering && currentTarget !== this.inputWrapper.container || this.getModuleName() !== 'dropdownlist' && !this.inputWrapper.container.contains(target) || this.isTabKey) {\n      this.isDocumentClick = this.isPopupOpen ? true : false;\n      this.focusOutAction(e);\n      this.isTabKey = false;\n    }\n\n    if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\n      this.isActive = false;\n      this.beforePopupOpen = false;\n    }\n  };\n\n  DropDownList.prototype.focusOutAction = function (e) {\n    this.isInteracted = false;\n    this.focusOut(e);\n    this.onFocusOut();\n  };\n\n  DropDownList.prototype.onFocusOut = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isSelected) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(null);\n    }\n\n    this.floatLabelChange();\n    this.dispatchEvent(this.hiddenElement, 'change');\n\n    if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\n      this.dispatchEvent(this.inputElement, 'blur');\n    }\n\n    if (this.inputWrapper.clearButton) {\n      addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n    }\n\n    this.trigger('blur');\n  };\n\n  DropDownList.prototype.onFocus = function (e) {\n    if (!this.isInteracted) {\n      this.isInteracted = true;\n      var args = {\n        isInteracted: e ? true : false,\n        event: e\n      };\n      this.trigger('focus', args);\n    }\n\n    this.updateIconState();\n  };\n\n  DropDownList.prototype.resetValueHandler = function (e) {\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement && e.target === formElement) {\n      var val = this.element.tagName === this.getNgDirective() ? null : this.inputElement.getAttribute('value');\n      this.text = val;\n    }\n  };\n\n  DropDownList.prototype.wireEvent = function () {\n    EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\n    EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\n    EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\n    this.bindCommonEvent();\n  };\n\n  DropDownList.prototype.bindCommonEvent = function () {\n    EventHandler.add(this.targetElement(), 'blur', this.onBlur, this);\n    var formElement = closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.keyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.targetElement(), {\n        keyAction: this.mobileKeyActionHandler.bind(this),\n        keyConfigs: this.keyConfigure,\n        eventName: 'keydown'\n      });\n    }\n\n    this.bindClearEvent();\n  };\n\n  DropDownList.prototype.bindClearEvent = function () {\n    if (this.showClearButton) {\n      EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\n    }\n  };\n\n  DropDownList.prototype.unBindCommonEvent = function () {\n    if (this.targetElement()) {\n      EventHandler.remove(this.targetElement(), 'blur', this.onBlur);\n    }\n\n    var formElement = this.inputElement && closest(this.inputElement, 'form');\n\n    if (formElement) {\n      EventHandler.remove(formElement, 'reset', this.resetValueHandler);\n    }\n\n    if (!Browser.isDevice) {\n      this.keyboardModule.destroy();\n    }\n\n    if (this.showClearButton) {\n      EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\n    }\n  };\n\n  DropDownList.prototype.updateIconState = function () {\n    if (this.showClearButton) {\n      if (this.inputElement.value !== '' && !this.readonly) {\n        removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      } else {\n        addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n      }\n    }\n  };\n  /**\r\n   * Event binding for list\r\n   */\n\n\n  DropDownList.prototype.wireListEvents = function () {\n    EventHandler.add(this.list, 'click', this.onMouseClick, this);\n    EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\n    EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\n  };\n\n  ;\n\n  DropDownList.prototype.onSearch = function (e) {\n    if (e.charCode !== 32 && e.charCode !== 13) {\n      if (this.list === undefined) {\n        if (!this.isServerBlazor) {\n          this.renderList();\n        } else {\n          this.isServerIncrementalSearch = true; // tslint:disable-next-line\n\n          this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\n        }\n      }\n\n      this.searchKeyEvent = e;\n      this.onServerIncrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onServerIncrementalSearch = function (e) {\n    if (!this.isRequested && !isNullOrUndefined(this.list) && !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\n      this.incrementalSearch(e);\n    }\n  };\n\n  DropDownList.prototype.onMouseClick = function (e) {\n    var target = e.target;\n    var classList = target.classList;\n    var li = closest(target, '.' + dropDownBaseClasses.li);\n\n    if (!this.isValidLI(li)) {\n      return;\n    }\n\n    this.setSelection(li, e);\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      history.back();\n    } else {\n      var delay = 100;\n      this.closePopup(delay);\n    }\n  };\n\n  DropDownList.prototype.onMouseOver = function (e) {\n    var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\n    this.setHover(currentLi);\n  };\n\n  ;\n\n  DropDownList.prototype.setHover = function (li) {\n    if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\n      this.removeHover();\n      addClass([li], dropDownBaseClasses.hover);\n    }\n  };\n\n  ;\n\n  DropDownList.prototype.onMouseLeave = function (e) {\n    this.removeHover();\n  };\n\n  ;\n\n  DropDownList.prototype.removeHover = function () {\n    if (this.list) {\n      var hoveredItem = this.isServerBlazor && this.popupObj && this.popupObj.element ? this.popupObj.element.querySelectorAll('.' + dropDownBaseClasses.hover) : this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\n\n      if (hoveredItem && hoveredItem.length) {\n        removeClass(hoveredItem, dropDownBaseClasses.hover);\n      }\n    }\n  };\n\n  ;\n\n  DropDownList.prototype.isValidLI = function (li) {\n    return li && li.hasAttribute('role') && li.getAttribute('role') === 'option';\n  };\n\n  ;\n\n  DropDownList.prototype.incrementalSearch = function (e) {\n    if (this.liCollections.length > 0) {\n      var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id, this.isServerBlazor);\n\n      if (!isNullOrUndefined(li)) {\n        this.setSelection(li, e);\n        this.setScrollPosition();\n      }\n    }\n  };\n\n  ;\n  /**\r\n   * Hides the spinner loader.\r\n   * @returns void.\r\n   */\n\n  DropDownList.prototype.hideSpinner = function () {\n    if (!isNullOrUndefined(this.spinnerElement)) {\n      hideSpinner(this.spinnerElement);\n      removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      this.spinnerElement.innerHTML = '';\n      this.spinnerElement = null;\n    }\n  };\n  /**\r\n   * Shows the spinner loader.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.showSpinner = function () {\n    if (isNullOrUndefined(this.spinnerElement)) {\n      this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] || !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\n      addClass([this.spinnerElement], dropDownListClasses.disableIcon);\n      createSpinner({\n        target: this.spinnerElement,\n        width: Browser.isDevice ? '16px' : '14px'\n      }, this.createElement);\n      showSpinner(this.spinnerElement);\n    }\n  };\n\n  DropDownList.prototype.keyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\n    var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\n    this.isEscapeKey = e.action === 'escape';\n    this.isTabKey = !this.isPopupOpen && e.action === 'tab';\n    var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\n    var isNavigation = e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown' || e.action === 'home' || e.action === 'end';\n\n    if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      var isTabAction = e.action === 'tab' || e.action === 'close';\n\n      if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (!(this.isServerBlazor && (e.action === 'open' || e.action === 'space')) && isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0 || this.isRequested) {\n        if (!(this.isServerBlazor && isNavAction)) {\n          return;\n        }\n      }\n\n      if (isTabAction && this.getModuleName() !== 'autocomplete' && this.isPopupOpen || e.action === 'escape') {\n        e.preventDefault();\n      }\n\n      this.isSelected = e.action === 'escape' ? false : this.isSelected;\n      this.isTyped = isNavigation || e.action === 'escape' ? false : this.isTyped;\n\n      switch (e.action) {\n        case 'down':\n        case 'up':\n          this.updateUpDownAction(e);\n          break;\n\n        case 'pageUp':\n          this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'pageDown':\n          this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\n          e.preventDefault();\n          break;\n\n        case 'home':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'end':\n          this.updateHomeEndAction(e);\n          break;\n\n        case 'space':\n          if (this.getModuleName() === 'dropdownlist') {\n            if (!this.beforePopupOpen) {\n              this.showPopup();\n            }\n          }\n\n          break;\n\n        case 'open':\n          this.showPopup();\n          break;\n\n        case 'hide':\n          this.preventAltUp = this.isPopupOpen;\n          this.hidePopup(e);\n          this.focusDropDown(e);\n          break;\n\n        case 'enter':\n          this.selectCurrentItem(e);\n          break;\n\n        case 'tab':\n          this.selectCurrentValueOnTab(e);\n          break;\n\n        case 'escape':\n        case 'close':\n          if (this.isPopupOpen) {\n            this.hidePopup(e);\n            this.focusDropDown(e);\n          }\n\n          break;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateUpDownAction = function (e) {\n    if (this.isServerBlazor && isNullOrUndefined(this.list)) {\n      this.isServerNavigation = true; // tslint:disable-next-line\n\n      this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\n    } else {\n      this.isServerNavigation = false;\n      var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (this.isSelectFocusItem(focusEle)) {\n        this.setSelection(focusEle, e);\n      } else {\n        var nextItem = void 0;\n        var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\n        var startIndex = 0;\n\n        if (this.getModuleName() === 'autocomplete') {\n          startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\n          index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\n        }\n\n        nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\n\n        if (!isNullOrUndefined(nextItem)) {\n          this.setSelection(nextItem, e);\n        }\n      }\n\n      e.preventDefault();\n    }\n  };\n\n  DropDownList.prototype.updateHomeEndAction = function (e) {\n    if (this.getModuleName() === 'dropdownlist') {\n      if (this.isServerBlazor && isNullOrUndefined(this.list)) {\n        this.isServerNavigation = true; // tslint:disable-next-line\n\n        this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\n      } else {\n        this.isServerNavigation = false;\n        var findLi = 0;\n\n        if (e.action === 'home') {\n          findLi = 0;\n        } else {\n          findLi = this.getItems().length - 1;\n        }\n\n        e.preventDefault();\n\n        if (this.activeIndex === findLi) {\n          return;\n        }\n\n        this.setSelection(this.liCollections[findLi], e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectCurrentValueOnTab = function (e) {\n    if (this.getModuleName() === 'autocomplete') {\n      this.selectCurrentItem(e);\n    } else {\n      if (this.isPopupOpen) {\n        this.hidePopup(e);\n        this.focusDropDown(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.mobileKeyActionHandler = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.isEditTextBox() && !this.isPopupOpen) {\n      return;\n    }\n\n    if (!this.readonly) {\n      if (this.list === undefined && !this.isRequested) {\n        this.searchKeyEvent = e;\n        this.renderList();\n      }\n\n      if (isNullOrUndefined(this.list) || !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0 || this.isRequested) {\n        return;\n      }\n\n      if (e.action === 'enter') {\n        this.selectCurrentItem(e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectCurrentItem = function (e) {\n    if (this.isPopupOpen) {\n      var li = this.list.querySelector('.' + dropDownListClasses.focus);\n\n      if (li) {\n        this.setSelection(li, e);\n        this.isTyped = false;\n      }\n\n      if (this.isSelected) {\n        this.isSelectCustom = false;\n        this.onChangeEvent(e);\n      }\n\n      this.hidePopup();\n      this.focusDropDown(e);\n    } else {\n      this.showPopup();\n    }\n  };\n\n  DropDownList.prototype.isSelectFocusItem = function (element) {\n    return !isNullOrUndefined(element);\n  };\n\n  DropDownList.prototype.getPageCount = function () {\n    var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null : getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\n    return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\n  };\n\n  DropDownList.prototype.pageUpSelection = function (steps, event) {\n    var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\n    this.setSelection(previousItem, event);\n  };\n\n  ;\n\n  DropDownList.prototype.pageDownSelection = function (steps, event) {\n    var list = this.getItems();\n    var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\n    this.setSelection(previousItem, event);\n  };\n\n  ;\n\n  DropDownList.prototype.unWireEvent = function () {\n    EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\n    EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\n    EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\n    this.unBindCommonEvent();\n  };\n  /**\r\n   * Event un binding for list items.\r\n   */\n\n\n  DropDownList.prototype.unWireListEvents = function () {\n    EventHandler.remove(this.list, 'click', this.onMouseClick);\n    EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\n    EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\n  };\n\n  ;\n\n  DropDownList.prototype.checkSelector = function (id) {\n    return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\n  };\n\n  DropDownList.prototype.onDocumentClick = function (e) {\n    var target = e.target;\n\n    if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) && !this.inputWrapper.container.contains(e.target)) {\n      if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\n        this.isDocumentClick = true;\n        var isActive = this.isRequested;\n        this.isInteracted = false;\n        this.hidePopup(e);\n\n        if (!isActive) {\n          this.onFocusOut();\n          this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n        }\n      }\n    } else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && !(this.getModuleName() === 'combobox' && !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\n      this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() || document.activeElement === this.filterInput);\n      e.preventDefault();\n    }\n  };\n\n  DropDownList.prototype.activeStateChange = function () {\n    if (this.isDocumentClick) {\n      this.hidePopup();\n      this.onFocusOut();\n      this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\n    }\n  };\n\n  DropDownList.prototype.focusDropDown = function (e) {\n    if (!this.initial && this.isFilterLayout()) {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.dropDownClick = function (e) {\n    if (e.which === 3 || e.button === 2) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\n      return;\n    }\n\n    var target = e.target;\n\n    if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\n      e.preventDefault();\n    }\n\n    if (!this.readonly) {\n      if (this.isPopupOpen) {\n        this.hidePopup();\n\n        if (this.isFilterLayout()) {\n          this.focusDropDown(e);\n        }\n      } else {\n        this.focusIn(e);\n        this.floatLabelChange();\n        this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\n        this.isDropDownClick = true;\n        this.showPopup();\n      }\n\n      var proxy_1 = this;\n      var duration = isBlazor() ? 1000 : this.element.tagName === this.getNgDirective() && this.itemTemplate ? 500 : 100;\n\n      if (!this.isSecondClick) {\n        setTimeout(function () {\n          proxy_1.cloneElements();\n          proxy_1.isSecondClick = true;\n        }, duration);\n      }\n    } else {\n      this.focusIn(e);\n    }\n  };\n\n  DropDownList.prototype.cloneElements = function () {\n    if (this.list) {\n      var ulElement = this.list.querySelector('ul');\n\n      if (ulElement) {\n        ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\n        this.actionCompleteData.ulElement = ulElement;\n      }\n    }\n  };\n\n  DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\n    var _this = this;\n\n    this.removeSelection();\n    li.classList.add(dropDownBaseClasses.selected);\n    this.removeHover();\n    var value = this.getFormattedValue(li.getAttribute('data-value'));\n    var selectedData = this.getDataByValue(value);\n\n    if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\n      var items = this.detachChanges(selectedData);\n      this.isSelected = true;\n      var eventArgs = {\n        e: e,\n        item: li,\n        itemData: items,\n        isInteracted: e ? true : false,\n        cancel: false\n      };\n      this.trigger('select', eventArgs, function (eventArgs) {\n        if (eventArgs.cancel) {\n          li.classList.remove(dropDownBaseClasses.selected);\n        } else {\n          _this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n          if (_this.isServerBlazor) {\n            // tslint:disable-next-line\n            _this.interopAdaptor.invokeMethodAsync('OnServerItemData', _this.itemData);\n          }\n\n          if (isSelection) {\n            _this.setSelectOptions(li, e);\n          }\n        }\n      });\n    } else {\n      this.selectEventCallback(li, e, preventSelect, selectedData, value);\n\n      if (this.isServerBlazor) {\n        // tslint:disable-next-line\n        this.interopAdaptor.invokeMethodAsync('OnServerItemData', this.itemData);\n      }\n\n      if (isSelection) {\n        this.setSelectOptions(li, e);\n      }\n    }\n  };\n\n  DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\n    this.previousItemData = !isNullOrUndefined(this.itemData) ? this.itemData : null;\n    this.item = li;\n    this.itemData = selectedData;\n    var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\n\n    if (focusedItem) {\n      removeClass([focusedItem], dropDownBaseClasses.focus);\n    }\n\n    li.setAttribute('aria-selected', 'true');\n    this.activeIndex = this.getIndexByValue(value);\n  };\n\n  DropDownList.prototype.activeItem = function (li) {\n    if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\n      this.removeSelection();\n      li.classList.add(dropDownBaseClasses.selected);\n      this.removeHover();\n      li.setAttribute('aria-selected', 'true');\n    }\n  };\n\n  DropDownList.prototype.setValue = function (e) {\n    var dataItem = this.getItemData();\n\n    if (dataItem.value === null) {\n      if (isBlazor() && dataItem.text !== null || dataItem.text !== '') {\n        Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      } else {\n        Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n    } else {\n      Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n\n    if (this.isServerBlazor) {\n      // tslint:disable-next-line\n      this.interopAdaptor.invokeMethodAsync('OnServerValueTemplate', dataItem);\n    }\n\n    if (this.valueTemplate && this.itemData !== null && !this.isServerBlazor) {\n      this.DropDownBaseresetBlazorTemplates(false, false, false, false, true);\n      this.setValueTemplate();\n    } else if (this.inputElement.previousSibling === this.valueTempElement) {\n      detach(this.valueTempElement);\n      this.inputElement.style.display = 'block';\n    }\n\n    if (this.previousValue === dataItem.value) {\n      this.isSelected = false;\n      return true;\n    } else {\n      this.isSelected = !this.initial ? true : false;\n      this.isSelectCustom = false;\n\n      if (this.getModuleName() === 'dropdownlist') {\n        this.updateIconState();\n      }\n\n      return false;\n    }\n  };\n\n  DropDownList.prototype.setSelection = function (li, e) {\n    if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || this.isPopupOpen && this.isSelected && li.classList.contains(dropDownBaseClasses.selected))) {\n      this.updateSelectedItem(li, e, false, true);\n    } else {\n      this.setSelectOptions(li, e);\n    }\n  };\n\n  DropDownList.prototype.setSelectOptions = function (li, e) {\n    if (this.list) {\n      this.removeHover();\n    }\n\n    this.previousSelectedLI = !isNullOrUndefined(this.selectedLI) ? this.selectedLI : null;\n    this.selectedLI = li;\n\n    if (this.setValue(e)) {\n      return;\n    }\n\n    if (this.isPopupOpen) {\n      attributes(this.targetElement(), {\n        'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n      });\n\n      if (this.isFilterLayout() && this.filterInput) {\n        attributes(this.filterInput, {\n          'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n        });\n      }\n    }\n\n    if (!this.isPopupOpen && !isNullOrUndefined(li) || this.isPopupOpen && !isNullOrUndefined(e) && (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter')) {\n      this.isSelectCustom = false;\n      this.onChangeEvent(e);\n    }\n\n    if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\n      this.setScrollPosition(e);\n    }\n\n    if (Browser.info.name !== 'mozilla') {\n      attributes(this.inputElement, {\n        'aria-label': this.inputElement.value\n      });\n      attributes(this.targetElement(), {\n        'aria-describedby': this.inputElement.id\n      });\n      this.targetElement().removeAttribute('aria-live');\n    }\n  };\n\n  DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\n    var checkTemplate = false;\n\n    if (dropdownTemplate) {\n      var exception = void 0;\n\n      try {\n        checkTemplate = document.querySelectorAll(dropdownTemplate).length ? true : false;\n      } catch (exception) {\n        checkTemplate = false;\n      }\n    }\n\n    return checkTemplate;\n  };\n\n  DropDownList.prototype.setValueTemplate = function () {\n    var compiledString; // tslint:disable-next-line\n\n    if (this.isReact) {\n      this.clearTemplate(['valueTemplate']);\n    }\n\n    if (!this.valueTempElement) {\n      this.valueTempElement = this.createElement('span', {\n        className: dropDownListClasses.value\n      });\n      this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\n      this.inputElement.style.display = 'none';\n    }\n\n    this.valueTempElement.innerHTML = '';\n    var templateData = isBlazor() ? JSON.parse(JSON.stringify(this.itemData)) : this.itemData;\n    var valuecheck = this.dropdownCompiler(this.valueTemplate);\n\n    if (valuecheck) {\n      compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\n    } else {\n      compiledString = compile(this.valueTemplate);\n    } // tslint:disable-next-line\n\n\n    var valueCompTemp = compiledString(templateData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\n\n    if (valueCompTemp && valueCompTemp.length > 0) {\n      for (var i = 0; i < valueCompTemp.length; i++) {\n        this.valueTempElement.appendChild(valueCompTemp[i]);\n      }\n    }\n\n    this.renderReactTemplates();\n    this.DropDownBaseupdateBlazorTemplates(false, false, false, false, true, true, true);\n  };\n\n  DropDownList.prototype.removeSelection = function () {\n    if (this.list) {\n      var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\n\n      if (selectedItems.length) {\n        removeClass(selectedItems, dropDownBaseClasses.selected);\n        selectedItems[0].removeAttribute('aria-selected');\n      }\n    }\n  };\n\n  ;\n\n  DropDownList.prototype.getItemData = function () {\n    var fields = this.fields;\n    var dataItem = null;\n    dataItem = this.itemData;\n    var dataValue;\n    var dataText;\n\n    if (!isNullOrUndefined(dataItem)) {\n      dataValue = getValue(fields.value, dataItem);\n      dataText = getValue(fields.text, dataItem);\n    }\n\n    var value = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataValue : dataItem;\n    var text = !isNullOrUndefined(dataItem) && !isUndefined(dataValue) ? dataText : dataItem;\n    return {\n      value: value,\n      text: text\n    };\n  };\n  /**\r\n   * To trigger the change event for list.\r\n   */\n\n\n  DropDownList.prototype.onChangeEvent = function (eve) {\n    var dataItem = this.getItemData();\n    var index = this.isSelectCustom ? null : this.activeIndex;\n    this.setProperties({\n      'index': index,\n      'text': dataItem.text,\n      'value': dataItem.value\n    }, true);\n    this.detachChangeEvent(eve);\n  };\n\n  ;\n\n  DropDownList.prototype.detachChanges = function (value) {\n    var items;\n\n    if (typeof value === 'string' || typeof value === 'boolean' || typeof value === 'number') {\n      items = Object.defineProperties({}, {\n        value: {\n          value: value,\n          enumerable: true\n        },\n        text: {\n          value: value,\n          enumerable: true\n        }\n      });\n    } else {\n      items = value;\n    }\n\n    return items;\n  };\n\n  DropDownList.prototype.detachChangeEvent = function (eve) {\n    this.isSelected = false;\n    this.previousValue = this.value;\n    this.activeIndex = this.index;\n    this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\n\n    if (!this.initial) {\n      var items = this.detachChanges(this.itemData);\n      var preItems = void 0;\n\n      if (typeof this.previousItemData === 'string' || typeof this.previousItemData === 'boolean' || typeof this.previousItemData === 'number') {\n        preItems = Object.defineProperties({}, {\n          value: {\n            value: this.previousItemData,\n            enumerable: true\n          },\n          text: {\n            value: this.previousItemData,\n            enumerable: true\n          }\n        });\n      } else {\n        preItems = this.previousItemData;\n      }\n\n      this.setHiddenValue();\n      var eventArgs = {\n        e: eve,\n        item: this.item,\n        itemData: items,\n        previousItem: this.previousSelectedLI,\n        previousItemData: preItems,\n        isInteracted: eve ? true : false,\n        value: this.value,\n        element: this.element\n      };\n\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', eventArgs);\n      }\n\n      if (this.isServerBlazor && this.enablePersistence) {\n        // tslint:disable-next-line\n        this.interopAdaptor.invokeMethodAsync('ServerChange');\n      }\n    }\n\n    if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\n      removeClass([this.inputWrapper.container], 'e-valid-input');\n    }\n  };\n\n  DropDownList.prototype.setHiddenValue = function () {\n    if (!isNullOrUndefined(this.value)) {\n      if (this.isServerBlazor && this.hiddenElement.querySelector('option')) {\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.textContent = this.text;\n        selectedElement.setAttribute('value', this.value.toString());\n      } else if (!this.isServerBlazor) {\n        this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\n        var selectedElement = this.hiddenElement.querySelector('option');\n        selectedElement.setAttribute('value', this.value.toString());\n      }\n    } else if (!this.isServerBlazor) {\n      this.hiddenElement.innerHTML = '';\n    }\n  };\n  /**\r\n   * Filter bar implementation\r\n   */\n\n\n  DropDownList.prototype.onFilterUp = function (e) {\n    if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\n      this.isValidKey = false;\n\n      switch (e.keyCode) {\n        case 38: //up arrow \n\n        case 40:\n          //down arrow \n          if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else {\n            this.preventAutoFill = false;\n          }\n\n          this.preventAltUp = false;\n          e.preventDefault();\n          break;\n\n        case 46: //delete\n\n        case 8:\n          //backspace\n          this.typedString = this.filterInput.value;\n\n          if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\n            this.preventAutoFill = true;\n            this.searchLists(e);\n          } else if (this.typedString === '') {\n            if (this.list) {\n              this.resetFocusElement();\n            }\n\n            this.activeIndex = null;\n\n            if (this.getModuleName() === 'autocomplete') {\n              this.hidePopup();\n            }\n          }\n\n          e.preventDefault();\n          break;\n\n        default:\n          this.typedString = this.filterInput.value;\n          this.preventAutoFill = false;\n          this.searchLists(e);\n          break;\n      }\n    } else {\n      this.isValidKey = false;\n    }\n  };\n\n  DropDownList.prototype.onFilterDown = function (e) {\n    switch (e.keyCode) {\n      case 13:\n        //enter\n        break;\n\n      case 40: //down arrow\n\n      case 38:\n        //up arrow \n        this.queryString = this.filterInput.value;\n        e.preventDefault();\n        break;\n\n      case 9:\n        //tab \n        if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\n          e.preventDefault();\n        }\n\n        break;\n\n      default:\n        this.prevSelectPoints = this.getSelectionPoints();\n        this.queryString = this.filterInput.value;\n        break;\n    }\n  };\n\n  DropDownList.prototype.removeFillSelection = function () {\n    if (this.isInteracted) {\n      var selection = this.getSelectionPoints();\n      this.inputElement.setSelectionRange(selection.end, selection.end);\n    }\n  };\n\n  DropDownList.prototype.getQuery = function (query) {\n    var filterQuery;\n\n    if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\n      filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\n      var filterType = this.typedString === '' ? 'contains' : this.filterType;\n      var dataType = this.typeOfData(this.dataSource).typeof;\n\n      if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\n        filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      } else {\n        var fields = this.fields.text ? this.fields.text : '';\n        filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\n      }\n    } else {\n      filterQuery = query ? query : this.query ? this.query : new Query();\n    }\n\n    return filterQuery;\n  };\n\n  DropDownList.prototype.getSelectionPoints = function () {\n    var input = this.inputElement;\n    return {\n      start: Math.abs(input.selectionStart),\n      end: Math.abs(input.selectionEnd)\n    };\n  };\n\n  DropDownList.prototype.searchLists = function (e) {\n    var _this = this;\n\n    this.isTyped = true;\n    this.activeIndex = null;\n    this.isListSearched = true;\n\n    if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\n      var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n      clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\n    }\n\n    this.isDataFetched = false;\n\n    if (this.isFiltering()) {\n      if (this.isServerBlazor) {\n        this.beforePopupOpen = this.getModuleName() === 'combobox' && this.isFiltering() && !this.beforePopupOpen ? !this.beforePopupOpen : this.beforePopupOpen;\n\n        if (this.filterInput.value === '' && this.getModuleName() !== 'dropdownlist') {\n          // tslint:disable-next-line\n          this.interopAdaptor.invokeMethodAsync('OnServerRenderList', this.beforePopupOpen, false);\n        } else {\n          // tslint:disable-next-line\n          this.interopAdaptor.invokeMethodAsync('OnServerFilter', this.filterInput.value);\n        }\n      } else {\n        var eventArgs_1 = {\n          preventDefaultAction: false,\n          text: this.filterInput.value,\n          updateData: function (dataSource, query, fields) {\n            if (eventArgs_1.cancel) {\n              return;\n            }\n\n            _this.isCustomFilter = true;\n\n            _this.filteringAction(dataSource, query, fields);\n          },\n          baseEventArgs: e,\n          cancel: false\n        };\n        this.trigger('filtering', eventArgs_1, function (eventArgs) {\n          if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\n            _this.filteringAction(_this.dataSource, null, _this.fields);\n          }\n        });\n      }\n    }\n  };\n  /**\r\n   * To filter the data from given data source by using query\r\n   * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\r\n   * @param  {Query} query - Specify the query to filter the data.\r\n   * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\r\n   * @return {void}.\r\n     */\n\n\n  DropDownList.prototype.filter = function (dataSource, query, fields) {\n    this.isCustomFilter = true;\n    this.filteringAction(dataSource, query, fields);\n  };\n\n  DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\n    if (!isNullOrUndefined(this.filterInput)) {\n      this.beforePopupOpen = true;\n\n      if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\n        this.actionCompleteData.isUpdated = false;\n        this.isTyped = false;\n\n        if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\n          this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\n        }\n\n        this.isTyped = true;\n\n        if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\n          this.focusIndexItem();\n          this.setScrollPosition();\n        }\n\n        this.isNotSearchList = true;\n      } else {\n        this.isNotSearchList = false;\n        query = this.filterInput.value.trim() === '' ? null : query;\n        this.resetList(dataSource, fields, query);\n      }\n\n      this.renderReactTemplates();\n    }\n  };\n\n  DropDownList.prototype.setSearchBox = function (popupElement) {\n    if (this.isFiltering()) {\n      var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ? popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\n        className: dropDownListClasses.filterParent\n      });\n\n      if (this.isServerBlazor) {\n        parentElement.innerHTML = '';\n      }\n\n      this.filterInput = this.createElement('input', {\n        attrs: {\n          type: 'text'\n        },\n        className: dropDownListClasses.filterInput\n      });\n      this.element.parentNode.insertBefore(this.filterInput, this.element);\n      var backIcon = false;\n\n      if (Browser.isDevice) {\n        backIcon = true;\n      }\n\n      this.filterInputObj = Input.createInput({\n        element: this.filterInput,\n        buttons: backIcon ? [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\n        properties: {\n          placeholder: this.filterBarPlaceholder\n        }\n      }, this.createElement);\n\n      if (!isNullOrUndefined(this.cssClass)) {\n        if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\n          addClass([this.filterInputObj.container], 'e-outline');\n        } else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\n          addClass([this.filterInputObj.container], 'e-filled');\n        }\n      }\n\n      append([this.filterInputObj.container], parentElement);\n      prepend([parentElement], popupElement);\n      attributes(this.filterInput, {\n        'aria-disabled': 'false',\n        'aria-owns': this.element.id + '_options',\n        'role': 'listbox',\n        'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\n        'autocomplete': 'off',\n        'autocorrect': 'off',\n        'autocapitalize': 'off',\n        'spellcheck': 'false'\n      });\n      this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n\n      if (!Browser.isDevice && this.clearIconElement) {\n        EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\n        this.clearIconElement.style.visibility = 'hidden';\n      }\n\n      if (!Browser.isDevice) {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.keyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      } else {\n        this.searchKeyModule = new KeyboardEvents(this.filterInput, {\n          keyAction: this.mobileKeyActionHandler.bind(this),\n          keyConfigs: this.keyConfigure,\n          eventName: 'keydown'\n        });\n      }\n\n      EventHandler.add(this.filterInput, 'input', this.onInput, this);\n      EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\n      EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\n      EventHandler.add(this.filterInput, 'blur', this.onBlur, this);\n      EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\n      return this.filterInputObj;\n    } else {\n      return inputObject;\n    }\n  };\n\n  ;\n\n  DropDownList.prototype.onInput = function (e) {\n    this.isValidKey = true; // For filtering works in mobile firefox.\n\n    if (Browser.isDevice && Browser.info.name === 'mozilla') {\n      this.typedString = this.filterInput.value;\n      this.preventAutoFill = true;\n      this.searchLists(e);\n    }\n  };\n\n  DropDownList.prototype.pasteHandler = function (e) {\n    var _this = this;\n\n    setTimeout(function () {\n      _this.typedString = _this.filterInput.value;\n\n      _this.searchLists(e);\n    });\n  };\n\n  DropDownList.prototype.onActionFailure = function (e) {\n    _super.prototype.onActionFailure.call(this, e);\n\n    if (this.beforePopupOpen) {\n      this.renderPopup();\n    }\n  };\n\n  DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\n    var _this = this;\n\n    if (this.isNotSearchList) {\n      this.isNotSearchList = false;\n      return;\n    }\n\n    if (this.isActive) {\n      var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\n\n      _super.prototype.onActionComplete.call(this, ulElement, list, e);\n\n      this.updateSelectElementData(this.allowFiltering);\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\n        this.isRequested = false;\n        this.keyActionHandler(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\n        this.incrementalSearch(this.searchKeyEvent);\n        this.searchKeyEvent = null;\n      }\n\n      this.list.scrollTop = 0;\n\n      if (!isNullOrUndefined(ulElement)) {\n        attributes(ulElement, {\n          'id': this.element.id + '_options',\n          'role': 'listbox',\n          'aria-hidden': 'false'\n        });\n      }\n\n      if (this.initRemoteRender) {\n        this.initial = true;\n        this.activeIndex = this.index;\n        this.updateValues();\n        this.initRemoteRender = false;\n        this.initial = false;\n\n        if (this.value && this.dataSource instanceof DataManager) {\n          var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\n          var checkVal = list.some(function (x) {\n            return x[checkField_1] === _this.value;\n          });\n\n          if (!checkVal) {\n            this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value))).then(function (e) {\n              if (e.result.length > 0) {\n                _this.addItem(e.result, list.length);\n\n                _this.updateValues();\n              }\n            });\n          }\n        }\n      }\n\n      if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\n        if (!this.actionCompleteData.isUpdated || !this.isCustomFilter && !this.isFilterFocus || isNullOrUndefined(this.itemData) && this.allowFiltering && (this.dataSource instanceof DataManager || !isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) && this.dataSource.length !== 0)) {\n          if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n            setTimeout(function () {\n              _this.actionCompleteData = {\n                ulElement: ulElement.cloneNode(true),\n                list: list,\n                isUpdated: true\n              };\n            }, 0);\n          } else {\n            this.actionCompleteData = {\n              ulElement: ulElement.cloneNode(true),\n              list: list,\n              isUpdated: true\n            };\n          }\n        }\n\n        this.addNewItem(list, selectedItem);\n\n        if (!isNullOrUndefined(this.itemData)) {\n          this.focusIndexItem();\n        }\n      }\n\n      if (this.beforePopupOpen) {\n        this.renderPopup();\n      }\n    }\n  };\n\n  DropDownList.prototype.addNewItem = function (listData, newElement) {\n    var _this = this;\n\n    if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\n      var value_1 = this.getItemData().value;\n      var isExist = listData.some(function (data) {\n        return (typeof data === 'string' || typeof data === 'number') && data === value_1 || getValue(_this.fields.value, data) === value_1;\n      });\n\n      if (!isExist) {\n        this.addItem(this.itemData);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\n    var _this = this;\n\n    if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\n      if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\n        setTimeout(function () {\n          _this.actionCompleteDataUpdate(li, item, index);\n        }, 0);\n      } else {\n        this.actionCompleteDataUpdate(li, item, index);\n      }\n    }\n  };\n\n  DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\n    if (index != null) {\n      this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\n    } else {\n      this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\n    }\n\n    if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\n      this.actionCompleteData.list.push(item);\n    }\n  };\n\n  DropDownList.prototype.focusIndexItem = function () {\n    var value = this.getItemData().value;\n    this.activeIndex = this.getIndexByValue(value);\n    var element = this.findListElement(this.list, 'li', 'data-value', value);\n    this.selectedLI = element;\n    this.activeItem(element);\n    this.removeFocus();\n  };\n\n  DropDownList.prototype.updateSelection = function () {\n    var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\n\n    if (selectedItem) {\n      this.setProperties({\n        'index': this.getIndexByValue(selectedItem.getAttribute('data-value'))\n      });\n      this.activeIndex = this.index;\n    } else {\n      this.removeFocus();\n      this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\n    }\n  };\n\n  DropDownList.prototype.removeFocus = function () {\n    var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\n\n    if (highlightedItem && highlightedItem.length) {\n      removeClass(highlightedItem, dropDownListClasses.focus);\n    }\n  };\n\n  ;\n\n  DropDownList.prototype.renderPopup = function () {\n    var _this = this;\n\n    if (this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.refreshPopup();\n      return;\n    }\n\n    var args = {\n      cancel: false\n    };\n    this.trigger('beforeOpen', args, function (args) {\n      if (!args.cancel) {\n        var popupEle = _this.serverPopupEle ? _this.serverPopupEle : _this.createElement('div', {\n          id: _this.element.id + '_popup',\n          className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\n        });\n\n        var searchBox = _this.setSearchBox(popupEle);\n\n        _this.listHeight = formatUnit(_this.popupHeight);\n\n        if (_this.headerTemplate && !_this.isServerBlazor) {\n          _this.setHeaderTemplate(popupEle);\n        }\n\n        append([_this.list], popupEle);\n\n        if (_this.footerTemplate && !_this.isServerBlazor) {\n          _this.setFooterTemplate(popupEle);\n        }\n\n        if (_this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-footer')) {\n          popupEle.appendChild(popupEle.querySelector('.e-ddl-footer'));\n        }\n\n        document.body.appendChild(popupEle);\n\n        _this.updateServerPopup(popupEle);\n\n        popupEle.style.visibility = 'hidden';\n\n        if (_this.popupHeight !== 'auto') {\n          _this.searchBoxHeight = 0;\n\n          if (!isNullOrUndefined(searchBox.container)) {\n            _this.searchBoxHeight = searchBox.container.parentElement.getBoundingClientRect().height;\n            _this.listHeight = (parseInt(_this.listHeight, 10) - _this.searchBoxHeight).toString() + 'px';\n          }\n\n          if (_this.headerTemplate || _this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-header')) {\n            _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\n            var height = Math.round(_this.header.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          if (_this.footerTemplate || _this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-footer')) {\n            _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\n            var height = Math.round(_this.footer.getBoundingClientRect().height);\n            _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\n          }\n\n          _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\n\n          popupEle.style.maxHeight = formatUnit(_this.popupHeight);\n        } else {\n          popupEle.style.height = 'auto';\n        }\n\n        var offsetValue = 0;\n        var left = void 0;\n\n        if (!isNullOrUndefined(_this.selectedLI) && !isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0) {\n          _this.setScrollPosition();\n        } else {\n          _this.list.scrollTop = 0;\n        }\n\n        if (Browser.isDevice && !_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' || _this.isDropDownClick && _this.getModuleName() === 'combobox')) {\n          offsetValue = _this.getOffsetValue(popupEle);\n          var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\n          left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\n        }\n\n        _this.getFocusElement();\n\n        _this.createPopup(popupEle, offsetValue, left);\n\n        _this.checkCollision(popupEle);\n\n        if (Browser.isDevice) {\n          _this.popupObj.element.classList.add(dropDownListClasses.device);\n\n          if (_this.getModuleName() === 'dropdownlist' || _this.getModuleName() === 'combobox' && !_this.allowFiltering && _this.isDropDownClick) {\n            _this.popupObj.collision = {\n              X: 'fit',\n              Y: 'fit'\n            };\n          }\n\n          if (_this.isFilterLayout()) {\n            _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\n\n            _this.popupObj.position = {\n              X: 0,\n              Y: 0\n            };\n\n            _this.popupObj.dataBind();\n\n            attributes(_this.popupObj.element, {\n              style: 'left:0px;right:0px;top:0px;bottom:0px;'\n            });\n            addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\n\n            _this.setSearchBoxPosition();\n\n            _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\n            _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\n            EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\n            EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\n          }\n        }\n\n        popupEle.style.visibility = 'visible';\n        addClass([popupEle], 'e-popup-close');\n\n        var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\n\n        for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\n          var element = scrollParentElements_1[_i];\n          EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\n        }\n\n        if (Browser.isDevice && _this.isFilterLayout()) {\n          EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\n        }\n\n        if (!isNullOrUndefined(_this.list)) {\n          _this.unWireListEvents();\n\n          _this.wireListEvents();\n        }\n\n        attributes(_this.targetElement(), {\n          'aria-expanded': 'true'\n        });\n        var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\n        addClass([inputParent], [dropDownListClasses.inputFocus]);\n        var animModel = {\n          name: 'FadeIn',\n          duration: 100\n        };\n        _this.beforePopupOpen = true;\n        var popupInstance = isBlazor() && _this.isServerRendered ? null : _this.popupObj;\n        var eventArgs = {\n          popup: popupInstance,\n          cancel: false,\n          animation: animModel\n        };\n\n        _this.trigger('open', eventArgs, function (eventArgs) {\n          if (!eventArgs.cancel) {\n            _this.serverBlazorUpdateSelection();\n\n            _this.bindServerScrollEvent();\n\n            addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\n\n            _this.renderReactTemplates();\n\n            _this.popupObj.show(new Animation(eventArgs.animation), _this.zIndex === 1000 ? _this.element : null);\n          } else {\n            _this.beforePopupOpen = false;\n\n            _this.destroyPopup();\n          }\n        });\n      } else {\n        _this.beforePopupOpen = false;\n      }\n    });\n  };\n\n  DropDownList.prototype.checkCollision = function (popupEle) {\n    if (!Browser.isDevice || Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick)) {\n      var collision = isCollide(popupEle);\n\n      if (collision.length > 0) {\n        popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\n      }\n\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.serverBlazorUpdateSelection = function () {\n    if (this.isServerBlazor && (this.value !== null || this.index !== null || this.text !== null) || this.getModuleName() !== 'dropdownlist' && !this.isTyped) {\n      if (this.getModuleName() === 'dropdownlist') {\n        this.removeSelection();\n        this.removeFocus();\n        this.removeHover();\n        this.updateValues();\n      }\n\n      if (this.getModuleName() === 'combobox' && this.ulElement && this.findListElement(this.ulElement, 'li', 'data-value', this.value) && !this.isTyped) {\n        this.updateValues();\n      }\n\n      if (this.isServerBlazor && this.getModuleName() !== 'dropdownlist' && (this.text === '' || this.text === null) && this.ulElement) {\n        if (!this.ulElement.querySelector('li').classList.contains(dropDownBaseClasses.hover)) {\n          addClass([this.ulElement.querySelector('li')], dropDownBaseClasses.hover);\n        }\n      }\n    }\n  };\n\n  DropDownList.prototype.bindServerScrollEvent = function () {\n    if (this.isServerBlazor && this.list) {\n      if (this.fields.groupBy && !this.isGroupChecking) {\n        EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\n      }\n    }\n  };\n\n  DropDownList.prototype.updateServerPopup = function (popupEle) {\n    if (this.isServerBlazor) {\n      if (popupEle && popupEle.querySelector('li')) {\n        removeClass([popupEle.querySelector('.e-content')], ['e-nodata']);\n      }\n\n      this.initial = false;\n      popupEle.removeAttribute('style');\n    }\n  };\n\n  DropDownList.prototype.getOffsetValue = function (popupEle) {\n    var popupStyles = getComputedStyle(popupEle);\n    var borderTop = parseInt(popupStyles.borderTopWidth, 10);\n    var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\n    return this.setPopupPosition(borderTop + borderBottom);\n  };\n\n  DropDownList.prototype.createPopup = function (element, offsetValue, left) {\n    var _this = this;\n\n    this.popupObj = new Popup(element, {\n      width: this.setWidth(),\n      targetType: 'relative',\n      relateTo: this.inputWrapper.container,\n      collision: {\n        X: 'flip',\n        Y: 'flip'\n      },\n      offsetY: offsetValue,\n      enableRtl: this.enableRtl,\n      offsetX: left,\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      zIndex: this.zIndex,\n      close: function () {\n        if (!_this.isDocumentClick) {\n          _this.focusDropDown();\n        } // tslint:disable-next-line\n\n\n        if (_this.isReact) {\n          _this.clearTemplate(['headerTemplate', 'footerTemplate']);\n        }\n\n        var isResetItem = _this.getModuleName() === 'autocomplete' ? true : false;\n\n        _this.DropDownBaseresetBlazorTemplates(isResetItem, isResetItem, true, true, false, true, true);\n\n        _this.isNotSearchList = false;\n        _this.isDocumentClick = false;\n\n        _this.destroyPopup();\n\n        var formElement = closest(_this.inputElement, 'form');\n\n        if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\n          _this.isActive = true;\n\n          _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\n        }\n      },\n      open: function () {\n        EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\n        _this.isPopupOpen = true;\n\n        var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement && _this.actionCompleteData.ulElement.querySelector('li');\n\n        var ulElement = _this.list.querySelector('ul li');\n\n        if (_this.isFiltering() && _this.itemTemplate && _this.element.tagName === _this.getNgDirective() && actionList && ulElement && actionList.textContent !== ulElement.textContent && _this.element.tagName !== 'EJS-COMBOBOX') {\n          _this.cloneElements();\n        }\n\n        if (_this.isFilterLayout()) {\n          removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n          _this.isFilterFocus = true;\n\n          _this.filterInput.focus();\n\n          if (_this.inputWrapper.clearButton) {\n            addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\n          }\n        }\n\n        _this.activeStateChange();\n      },\n      targetExitViewport: function () {\n        if (!Browser.isDevice) {\n          _this.hidePopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.isEmptyList = function () {\n    return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\n  };\n\n  DropDownList.prototype.getFocusElement = function () {// combo-box used this method\n  };\n\n  DropDownList.prototype.isFilterLayout = function () {\n    return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\n  };\n\n  DropDownList.prototype.scrollHandler = function () {\n    if (Browser.isDevice && (this.getModuleName() === 'dropdownlist' && !this.isFilterLayout() || this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick)) {\n      this.hidePopup();\n    }\n  };\n\n  DropDownList.prototype.setSearchBoxPosition = function () {\n    var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\n    this.popupObj.element.style.maxHeight = '100%';\n    this.popupObj.element.style.width = '100%';\n    this.list.style.maxHeight = window.innerHeight - searchBoxHeight + 'px';\n    this.list.style.height = window.innerHeight - searchBoxHeight + 'px';\n    var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\n    detach(this.filterInput);\n    clearElement.parentElement.insertBefore(this.filterInput, clearElement);\n  };\n\n  DropDownList.prototype.setPopupPosition = function (border) {\n    var offsetValue;\n    var popupOffset = border;\n    var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\n    var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n    var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\n    var liHeight = firstItem.getBoundingClientRect().height;\n    var listHeight = this.list.offsetHeight / 2;\n    var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\n    var lastItemOffsetValue = lastItem.offsetTop;\n\n    if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) && this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\n      var count = this.list.offsetHeight / liHeight;\n      var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\n      offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\n      this.list.scrollTop = selectedLI.offsetTop;\n    } else if (height > listHeight) {\n      offsetValue = listHeight - liHeight / 2;\n      this.list.scrollTop = height - listHeight + liHeight / 2;\n    } else {\n      offsetValue = height;\n    }\n\n    var inputHeight = this.inputWrapper.container.offsetHeight;\n    offsetValue = offsetValue + liHeight + popupOffset - (liHeight - inputHeight) / 2;\n    return -offsetValue;\n  };\n\n  DropDownList.prototype.setWidth = function () {\n    var width = formatUnit(this.popupWidth);\n\n    if (width.indexOf('%') > -1) {\n      var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\n      width = inputWidth.toString() + 'px';\n    }\n\n    if (Browser.isDevice && !this.allowFiltering && (this.getModuleName() === 'dropdownlist' || this.isDropDownClick && this.getModuleName() === 'combobox')) {\n      var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\n      width = parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) - parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) + parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2 + 'px';\n    }\n\n    return width;\n  };\n\n  DropDownList.prototype.scrollBottom = function (isInitial) {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var currentOffset = this.list.offsetHeight;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\n      nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = nextOffset;\n      }\n    }\n  };\n\n  DropDownList.prototype.scrollTop = function () {\n    if (!isNullOrUndefined(this.selectedLI)) {\n      var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\n      var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n      nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\n      var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\n\n      if (this.activeIndex === 0) {\n        this.list.scrollTop = 0;\n      } else if (nextOffset < 0) {\n        this.list.scrollTop = this.list.scrollTop + nextOffset;\n      } else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\n        this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ? this.fixedHeaderElement.offsetHeight : 0);\n      }\n    }\n  };\n\n  DropDownList.prototype.isEditTextBox = function () {\n    return false;\n  };\n\n  DropDownList.prototype.isFiltering = function () {\n    return this.allowFiltering;\n  };\n\n  DropDownList.prototype.isPopupButton = function () {\n    return true;\n  };\n\n  DropDownList.prototype.setScrollPosition = function (e) {\n    if (!isNullOrUndefined(e)) {\n      switch (e.action) {\n        case 'pageDown':\n        case 'down':\n        case 'end':\n          this.scrollBottom();\n          break;\n\n        default:\n          this.scrollTop();\n          break;\n      }\n    } else {\n      this.scrollBottom(true);\n    }\n  };\n\n  DropDownList.prototype.clearText = function () {\n    this.filterInput.value = this.typedString = '';\n    this.searchLists(null);\n  };\n\n  DropDownList.prototype.listScroll = function () {\n    this.filterInput.blur();\n  };\n\n  DropDownList.prototype.setEleWidth = function (width) {\n    if (!isNullOrUndefined(width)) {\n      if (typeof width === 'number') {\n        this.inputWrapper.container.style.width = formatUnit(width);\n      } else if (typeof width === 'string') {\n        this.inputWrapper.container.style.width = width.match(/px|%|em/) ? width : formatUnit(width);\n      }\n    }\n  };\n\n  DropDownList.prototype.closePopup = function (delay) {\n    var _this = this;\n\n    this.isTyped = false;\n\n    if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\n      return;\n    }\n\n    EventHandler.remove(document, 'mousedown', this.onDocumentClick);\n    this.isActive = false;\n    this.filterInputObj = null;\n    this.isDropDownClick = false;\n    this.preventAutoFill = false;\n    var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\n\n    for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\n      var element = scrollableParentElements_1[_i];\n      EventHandler.remove(element, 'scroll', this.scrollHandler);\n    }\n\n    if (Browser.isDevice && this.isFilterLayout()) {\n      removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\n      EventHandler.remove(this.list, 'scroll', this.listScroll);\n    }\n\n    if (this.isFilterLayout()) {\n      if (!Browser.isDevice) {\n        this.searchKeyModule.destroy();\n\n        if (this.clearIconElement) {\n          EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n        }\n      }\n\n      if (this.backIconElement) {\n        EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\n        EventHandler.remove(this.clearIconElement, 'click', this.clearText);\n      }\n\n      EventHandler.remove(this.filterInput, 'input', this.onInput);\n      EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\n      EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\n      EventHandler.remove(this.filterInput, 'blur', this.onBlur);\n      EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\n      this.filterInput = null;\n    }\n\n    attributes(this.targetElement(), {\n      'aria-expanded': 'false',\n      'aria-activedescendant': null\n    });\n    this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\n\n    if (this.isFiltering()) {\n      this.actionCompleteData.isUpdated = false;\n    }\n\n    this.beforePopupOpen = false;\n    var animModel = {\n      name: 'FadeOut',\n      duration: 100,\n      delay: delay ? delay : 0\n    };\n    var popupInstance = isBlazor() && this.isServerRendered ? null : this.popupObj;\n    var eventArgs = {\n      popup: popupInstance,\n      cancel: false,\n      animation: animModel\n    };\n    this.trigger('close', eventArgs, function (eventArgs) {\n      if (!isNullOrUndefined(_this.popupObj) && !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\n        var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\n\n        fixedHeader.parentNode.removeChild(fixedHeader);\n        _this.fixedHeaderElement = null;\n      }\n\n      if (!eventArgs.cancel) {\n        if (_this.getModuleName() === 'autocomplete' && !_this.isServerBlazor) {\n          _this.rippleFun();\n        }\n\n        if (_this.isPopupOpen) {\n          _this.popupObj.hide(new Animation(eventArgs.animation));\n        } else {\n          _this.destroyPopup();\n        }\n      }\n    });\n  };\n\n  DropDownList.prototype.destroyPopup = function () {\n    var popupHolderEle = select('#' + this.element.id + '_popup_holder', document);\n\n    if (this.isServerBlazor && this.serverPopupEle && popupHolderEle) {\n      popupHolderEle.appendChild(this.serverPopupEle); // tslint:disable-next-line\n\n      this.interopAdaptor.invokeMethodAsync('OnServerClosePopup');\n    }\n\n    this.isPopupOpen = false;\n    this.isFilterFocus = false;\n    this.popupObj.destroy();\n    detach(this.popupObj.element);\n  };\n\n  DropDownList.prototype.clickOnBackIcon = function () {\n    this.hidePopup();\n    this.focusIn();\n  };\n  /**\r\n   * To Initialize the control rendering\r\n   * @private\r\n   */\n  // tslint:disable-next-line\n\n\n  DropDownList.prototype.render = function () {\n    if (this.isServerBlazor) {\n      this.inputElement = this.element;\n      this.inputWrapper = {\n        container: this.element.parentElement\n      };\n      this.hiddenElement = this.inputWrapper.container.querySelector('select');\n      this.inputWrapper.buttons = [this.inputWrapper.container.querySelector('.e-input-group-icon.e-ddl-icon')];\n\n      if (this.showClearButton) {\n        this.inputWrapper.clearButton = this.inputWrapper.container.querySelector('.e-clear-icon');\n        Input.wireClearBtnEvents(this.element, this.inputWrapper.clearButton, this.inputWrapper.container);\n      }\n\n      if (this.floatLabelType === 'Auto') {\n        Input.wireFloatingEvents(this.element);\n      }\n\n      Input.bindInitialEvent({\n        element: this.element,\n        buttons: null,\n        customTag: null,\n        floatLabelType: this.floatLabelType,\n        properties: this.properties\n      });\n      this.setFields();\n      this.wireEvent();\n      this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n\n      if (!this.enabled) {\n        this.targetElement().tabIndex = -1;\n      }\n\n      if (this.element.hasAttribute('autofocus')) {\n        this.focusIn();\n      }\n\n      this.initial = false;\n    } else {\n      if (this.element.tagName === 'INPUT') {\n        this.inputElement = this.element;\n\n        if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\n          this.inputElement.setAttribute('role', 'textbox');\n        }\n\n        if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\n          this.inputElement.setAttribute('type', 'text');\n        }\n      } else {\n        this.inputElement = this.createElement('input', {\n          attrs: {\n            role: 'textbox',\n            type: 'text'\n          }\n        });\n\n        if (this.element.tagName !== this.getNgDirective()) {\n          this.element.style.display = 'none';\n        }\n\n        this.element.parentElement.insertBefore(this.inputElement, this.element);\n        this.preventTabIndex(this.inputElement);\n      }\n\n      var updatedCssClassValues = this.cssClass;\n\n      if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\n        updatedCssClassValues = this.cssClass.replace(/\\s+/g, ' ').trim();\n      }\n\n      this.inputWrapper = Input.createInput({\n        element: this.inputElement,\n        buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\n        floatLabelType: this.floatLabelType,\n        properties: {\n          readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\n          placeholder: this.placeholder,\n          cssClass: updatedCssClassValues,\n          enabled: this.enabled,\n          enableRtl: this.enableRtl,\n          showClearButton: this.showClearButton\n        }\n      }, this.createElement);\n\n      if (this.element.tagName === this.getNgDirective()) {\n        this.element.appendChild(this.inputWrapper.container);\n      } else {\n        this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\n      }\n\n      this.hiddenElement = this.createElement('select', {\n        attrs: {\n          'aria-hidden': 'true',\n          'tabindex': '-1',\n          'class': dropDownListClasses.hiddenElement\n        }\n      });\n      prepend([this.hiddenElement], this.inputWrapper.container);\n      this.validationAttribute(this.element, this.hiddenElement);\n      this.setFields();\n      this.inputWrapper.container.style.width = formatUnit(this.width);\n      this.inputWrapper.container.classList.add('e-ddl');\n      this.wireEvent();\n      this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n      this.element.removeAttribute('tabindex');\n      var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\n      this.element.id = id;\n      this.hiddenElement.id = id + '_hidden';\n      this.targetElement().setAttribute('tabindex', this.tabIndex);\n      attributes(this.targetElement(), this.getAriaAttributes());\n      this.updateDataAttribute(this.htmlAttributes);\n      this.setHTMLAttributes();\n\n      if (this.value !== null || this.activeIndex !== null || this.text !== null) {\n        this.initValue();\n      } else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\n        var selectElement = this.element;\n        this.value = selectElement.options[selectElement.selectedIndex].value;\n        this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\n        this.initValue();\n      }\n\n      this.preventTabIndex(this.element);\n\n      if (!this.enabled) {\n        this.targetElement().tabIndex = -1;\n      }\n\n      this.initial = false;\n      this.element.style.opacity = '';\n\n      this.inputElement.onselect = function (e) {\n        e.stopImmediatePropagation();\n      };\n\n      this.inputElement.onchange = function (e) {\n        e.stopImmediatePropagation();\n      };\n\n      if (this.element.hasAttribute('autofocus')) {\n        this.focusIn();\n      }\n\n      if (!isNullOrUndefined(this.text)) {\n        this.inputElement.setAttribute('value', this.text);\n      }\n    }\n\n    if (this.element.hasAttribute('data-val')) {\n      this.element.setAttribute('data-val', 'false');\n    }\n\n    this.renderComplete();\n  };\n\n  ;\n\n  DropDownList.prototype.setFooterTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.footer) {\n      this.footer.innerHTML = '';\n    } else {\n      this.footer = this.createElement('div');\n      addClass([this.footer], dropDownListClasses.footer);\n    }\n\n    var footercheck = this.dropdownCompiler(this.footerTemplate);\n\n    if (footercheck) {\n      compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.footerTemplate);\n    } // tslint:disable-next-line\n\n\n    var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\n\n    if (footerCompTemp && footerCompTemp.length > 0) {\n      for (var i = 0; i < footerCompTemp.length; i++) {\n        this.footer.appendChild(footerCompTemp[i]);\n      }\n    }\n\n    this.DropDownBaseupdateBlazorTemplates(false, false, false, false, false, false, true);\n    append([this.footer], popupEle);\n  };\n\n  DropDownList.prototype.setHeaderTemplate = function (popupEle) {\n    var compiledString;\n\n    if (this.header) {\n      this.header.innerHTML = '';\n    } else {\n      this.header = this.createElement('div');\n      addClass([this.header], dropDownListClasses.header);\n    }\n\n    var headercheck = this.dropdownCompiler(this.headerTemplate);\n\n    if (headercheck) {\n      compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\n    } else {\n      compiledString = compile(this.headerTemplate);\n    } // tslint:disable-next-line\n\n\n    var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\n\n    if (headerCompTemp && headerCompTemp.length) {\n      for (var i = 0; i < headerCompTemp.length; i++) {\n        this.header.appendChild(headerCompTemp[i]);\n      }\n    }\n\n    this.DropDownBaseupdateBlazorTemplates(false, false, false, false, false, true, false);\n    var contentEle = popupEle.querySelector('div.e-content');\n    popupEle.insertBefore(this.header, contentEle);\n  };\n\n  DropDownList.prototype.setOldText = function (text) {\n    this.text = text;\n  };\n\n  DropDownList.prototype.setOldValue = function (value) {\n    this.value = value;\n  };\n\n  DropDownList.prototype.refreshPopup = function () {\n    if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) && (this.allowFiltering && !(Browser.isDevice && this.isFilterLayout()) || this.getModuleName() === 'autocomplete')) {\n      removeClass([this.popupObj.element], 'e-popup-close');\n      this.popupObj.refreshPosition(this.inputWrapper.container);\n      this.popupObj.resolveCollision();\n    }\n  };\n\n  DropDownList.prototype.checkData = function (newProp) {\n    if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering && !(this.isListSearched && newProp.dataSource instanceof DataManager)) {\n      this.list = null;\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n\n    this.isListSearched = false;\n    var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\n    var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\n\n    if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\n      this.itemData = null;\n    }\n\n    if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\n      this.actionCompleteData = {\n        ulElement: null,\n        list: null,\n        isUpdated: false\n      };\n    }\n  };\n\n  DropDownList.prototype.updateDataSource = function (props) {\n    if (this.inputElement.value !== '' || !isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) {\n      this.clearAll(null, props);\n    }\n\n    if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource) || !(props.dataSource instanceof DataManager) && props.dataSource.length === 0)) || !(props.dataSource === [])) {\n      this.typedString = '';\n      this.resetList(this.dataSource);\n    }\n\n    if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\n      this.checkCustomValue();\n    }\n  };\n\n  DropDownList.prototype.checkCustomValue = function () {\n    this.itemData = this.getDataByValue(this.value);\n    var dataItem = this.getItemData();\n    this.setProperties({\n      'value': dataItem.value,\n      'text': dataItem.text\n    });\n  };\n\n  DropDownList.prototype.updateInputFields = function () {\n    if (this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n    }\n  };\n  /**\r\n   * Dynamically change the value of properties.\r\n   * @private\r\n   */\n\n\n  DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\n    if (this.getModuleName() === 'dropdownlist') {\n      if (!this.isServerBlazor) {\n        this.checkData(newProp);\n        this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\n      }\n    }\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'query':\n        case 'dataSource':\n          break;\n\n        case 'htmlAttributes':\n          this.setHTMLAttributes();\n          break;\n\n        case 'width':\n          this.setEleWidth(newProp.width);\n          break;\n\n        case 'placeholder':\n          Input.setPlaceholder(newProp.placeholder, this.inputElement);\n          break;\n\n        case 'filterBarPlaceholder':\n          if (this.filterInput) {\n            Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\n          }\n\n          break;\n\n        case 'readonly':\n          if (this.getModuleName() !== 'dropdownlist') {\n            Input.setReadonly(newProp.readonly, this.inputElement);\n          }\n\n          break;\n\n        case 'cssClass':\n          this.setCssClass(newProp.cssClass, oldProp.cssClass);\n          break;\n\n        case 'enableRtl':\n          this.setEnableRtl();\n          break;\n\n        case 'enabled':\n          this.setEnable();\n          break;\n\n        case 'text':\n          if (newProp.text === null) {\n            this.clearAll();\n            break;\n          }\n\n          if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n              this.initRemoteRender = true;\n            }\n\n            this.renderList();\n          }\n\n          if (!this.initRemoteRender) {\n            var li = this.getElementByText(newProp.text);\n\n            if (!this.checkValidLi(li)) {\n              if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                this.setSelectionData(newProp.text, oldProp.text, 'text');\n              } else if (!this.isServerBlazor) {\n                this.setOldText(oldProp.text);\n              }\n            }\n\n            this.updateInputFields();\n          }\n\n          break;\n\n        case 'value':\n          if (newProp.value === null) {\n            this.clearAll();\n            break;\n          }\n\n          this.notify('beforeValueChange', {\n            newProp: newProp\n          }); // gird component value type change\n\n          if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n              this.initRemoteRender = true;\n            }\n\n            this.renderList();\n          }\n\n          if (!this.initRemoteRender) {\n            var item = this.getElementByValue(newProp.value);\n\n            if (!this.checkValidLi(item)) {\n              if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                this.setSelectionData(newProp.value, oldProp.value, 'value');\n              } else if (!this.isServerBlazor) {\n                this.setOldValue(oldProp.value);\n              }\n            }\n\n            this.updateInputFields();\n          }\n\n          break;\n\n        case 'index':\n          if (newProp.index === null) {\n            this.clearAll();\n            break;\n          }\n\n          if (!this.list) {\n            if (this.dataSource instanceof DataManager) {\n              this.initRemoteRender = true;\n            }\n\n            this.renderList();\n          }\n\n          if (!this.initRemoteRender && this.liCollections) {\n            var element = this.liCollections[newProp.index];\n\n            if (!this.checkValidLi(element)) {\n              if (this.liCollections && this.liCollections.length === 100 && this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\n                this.setSelectionData(newProp.index, oldProp.index, 'index');\n              } else if (!this.isServerBlazor) {\n                this.index = oldProp.index;\n              }\n            }\n\n            this.updateInputFields();\n          }\n\n          break;\n\n        case 'footerTemplate':\n          if (this.popupObj) {\n            this.setFooterTemplate(this.popupObj.element);\n          }\n\n          break;\n\n        case 'headerTemplate':\n          if (this.popupObj) {\n            this.setHeaderTemplate(this.popupObj.element);\n          }\n\n          break;\n\n        case 'valueTemplate':\n          if (!isNullOrUndefined(this.itemData) && this.valueTemplate != null) {\n            this.setValueTemplate();\n          }\n\n          break;\n\n        case 'allowFiltering':\n          if (this.allowFiltering) {\n            this.actionCompleteData = {\n              ulElement: this.ulElement,\n              list: this.listData,\n              isUpdated: true\n            };\n            this.updateSelectElementData(this.allowFiltering);\n          }\n\n          break;\n\n        case 'floatLabelType':\n          Input.removeFloating(this.inputWrapper);\n          Input.addFloating(this.inputElement, newProp.floatLabelType, this.placeholder, this.createElement);\n          break;\n\n        case 'showClearButton':\n          Input.setClearButton(newProp.showClearButton, this.inputElement, this.inputWrapper, null, this.createElement);\n          this.bindClearEvent();\n          break;\n\n        default:\n          var ddlProps = void 0;\n          ddlProps = this.getPropObject(prop, newProp, oldProp);\n\n          _super.prototype.onPropertyChanged.call(this, ddlProps.newProperty, ddlProps.oldProperty);\n\n          break;\n      }\n    }\n\n    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n  };\n\n  DropDownList.prototype.checkValidLi = function (element) {\n    if (this.isValidLI(element)) {\n      this.setSelection(element, null);\n      return true;\n    }\n\n    return false;\n  };\n\n  DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\n    var _this = this;\n\n    var li;\n\n    this.updateListValues = function () {\n      if (prop === 'text') {\n        li = _this.getElementByText(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldText(oldProp);\n        }\n      } else if (prop === 'value') {\n        li = _this.getElementByValue(newProp);\n\n        if (!_this.checkValidLi(li)) {\n          _this.setOldValue(oldProp);\n        }\n      } else if (prop === 'index') {\n        li = _this.liCollections[newProp];\n\n        if (!_this.checkValidLi(li)) {\n          _this.index = oldProp;\n        }\n      }\n    };\n  };\n\n  DropDownList.prototype.setCssClass = function (newClass, oldClass) {\n    if (!isNullOrUndefined(oldClass)) {\n      oldClass = oldClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newClass)) {\n      newClass = newClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\n\n    if (this.popupObj) {\n      Input.setCssClass(newClass, [this.popupObj.element], oldClass);\n    }\n  };\n  /**\r\n   * Return the module name.\r\n   * @private\r\n   */\n\n\n  DropDownList.prototype.getModuleName = function () {\n    return 'dropdownlist';\n  };\n  /**\r\n   * Opens the popup that displays the list of items.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.showPopup = function () {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (isBlazor() && this.itemTemplate) {\n      this.DropDownBaseupdateBlazorTemplates(true, false, false, false);\n    }\n\n    if (this.beforePopupOpen) {\n      this.refreshPopup();\n      return;\n    }\n\n    this.beforePopupOpen = true;\n\n    if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\n      this.isActive = true;\n      this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\n    } else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) || this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\n      this.renderList();\n    } else if (this.isFiltering() && this.isServerBlazor) {\n      this.renderList();\n    }\n\n    if (!this.isServerBlazor) {\n      this.invokeRenderPopup();\n    }\n\n    var popupHolderEle = !this.isFiltering() || select('#' + this.element.id + '_popup_holder', document);\n    var isDropdownComp = this.getModuleName() === 'dropdownlist' || !this.isFiltering();\n\n    if (this.isServerBlazor && popupHolderEle && !isNullOrUndefined(this.list) && isDropdownComp) {\n      this.invokeRenderPopup();\n    }\n  };\n\n  DropDownList.prototype.invokeRenderPopup = function () {\n    if (Browser.isDevice && this.isFilterLayout()) {\n      var proxy_2 = this;\n\n      window.onpopstate = function () {\n        proxy_2.hidePopup();\n      };\n\n      history.pushState({}, '');\n    }\n\n    if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\n      this.renderPopup();\n    }\n\n    attributes(this.targetElement(), {\n      'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null\n    });\n  };\n\n  DropDownList.prototype.clientRenderPopup = function (data, popupEle) {\n    if (popupEle) {\n      this.serverPopupEle = popupEle;\n      this.list = popupEle.querySelector('.e-dropdownbase.e-content') ? popupEle.querySelector('.e-dropdownbase.e-content') : this.list;\n      this.ulElement = this.list.querySelector('ul');\n\n      if (isNullOrUndefined(this.ulElement) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\n        addClass([this.list], [dropDownBaseClasses.noData]);\n      }\n\n      this.liCollections = this.ulElement ? this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li) : [];\n      this.listData = data;\n\n      if (this.getModuleName() === 'autocomplete' && this.liCollections.length > 0) {\n        this.renderHightSearch();\n      }\n\n      this.initRemoteRender = false;\n\n      if (!this.isPopupOpen) {\n        this.serverBlazorUpdateSelection();\n      }\n\n      this.unWireListEvents();\n      this.wireListEvents();\n\n      if (this.isServerIncrementalSearch && this.searchKeyEvent) {\n        this.isServerIncrementalSearch = false;\n        this.initial = false;\n        this.onServerIncrementalSearch(this.searchKeyEvent);\n      }\n\n      if (this.isServerNavigation && this.searchKeyEvent) {\n        if (this.searchKeyEvent.action === 'down' || this.searchKeyEvent.action === 'up') {\n          this.isServerNavigation = false;\n          this.updateUpDownAction(this.searchKeyEvent);\n        } else if (this.searchKeyEvent.action === 'home' || this.searchKeyEvent.action === 'end') {\n          this.isServerNavigation = false;\n          this.updateHomeEndAction(this.searchKeyEvent);\n        }\n      }\n\n      if (this.beforePopupOpen) {\n        this.invokeRenderPopup();\n      }\n\n      if (this.getModuleName() !== 'dropdownlist') {\n        this.onActionComplete(this.ulElement, this.listData);\n      }\n    } else if (data != null && this.listData !== data) {\n      this.listData = data;\n      this.initRemoteRender = false;\n    }\n  };\n\n  DropDownList.prototype.renderHightSearch = function () {// update high light search \n  };\n\n  DropDownList.prototype.updateclientItemData = function (data) {\n    this.listData = data;\n  };\n\n  DropDownList.prototype.initValueItemData = function (selectData) {\n    this.itemData = selectData;\n    this.previousValue = this.value;\n    this.initial = false;\n  };\n\n  DropDownList.prototype.serverUpdateListElement = function (data, popupEle) {\n    this.listData = data;\n\n    if (this.ulElement) {\n      this.liCollections = this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\n    }\n  };\n  /**\r\n   * Hides the popup if it is in an open state.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.hidePopup = function (e) {\n    var isHeader = this.headerTemplate ? true : false;\n    var isFooter = this.headerTemplate ? true : false;\n    this.DropDownBaseresetBlazorTemplates(false, false, false, false, false, isHeader, isFooter);\n\n    if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\n      Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\n      this.isEscapeKey = false;\n\n      if (!isNullOrUndefined(this.index)) {\n        var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\n        this.selectedLI = this.liCollections[this.index] || element;\n\n        if (this.selectedLI) {\n          this.updateSelectedItem(this.selectedLI, null, true);\n\n          if (this.valueTemplate && this.itemData !== null) {\n            this.setValueTemplate();\n          }\n        }\n      } else {\n        this.resetSelection();\n      }\n    }\n\n    this.closePopup();\n    var dataItem = this.getItemData();\n    var isSelectVal = this.isServerBlazor ? !isNullOrUndefined(this.value) : !isNullOrUndefined(this.selectedLI);\n\n    if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom || isSelectVal && this.inputElement.value !== dataItem.text)) {\n      this.isSelectCustom = false;\n      this.clearAll(e);\n    }\n  };\n  /**\r\n   * Sets the focus on the component for interaction.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.focusIn = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\n      return;\n    }\n\n    var isFocused = false;\n\n    if (this.preventFocus && Browser.isDevice) {\n      this.inputWrapper.container.tabIndex = 1;\n      this.inputWrapper.container.focus();\n      this.preventFocus = false;\n      isFocused = true;\n    }\n\n    if (!isFocused) {\n      this.targetElement().focus();\n    }\n\n    addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n    this.onFocus(e);\n  };\n  /**\r\n   * Moves the focus from the component if the component is already focused.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.focusOut = function (e) {\n    if (!this.enabled) {\n      return;\n    }\n\n    this.isTyped = true;\n    this.hidePopup(e);\n\n    if (this.targetElement()) {\n      this.targetElement().blur();\n    }\n\n    removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\n  };\n  /**\r\n   * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\r\n   * @method destroy\r\n   * @return {void}.\r\n   */\n\n\n  DropDownList.prototype.destroy = function () {\n    this.isActive = false; // tslint:disable-next-line\n\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (!this.isServerBlazor || this.popupObj && document.body.contains(this.popupObj.element)) {\n      this.hidePopup();\n    }\n\n    this.unWireEvent();\n\n    if (this.list) {\n      this.unWireListEvents();\n\n      if (this.isServerBlazor) {\n        if (this.fields.groupBy && !this.isGroupChecking) {\n          EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\n        }\n      }\n    }\n\n    if (!this.isServerBlazor) {\n      if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\n        return;\n      }\n\n      if (this.inputElement) {\n        var attrArray = ['readonly', 'aria-disabled', 'aria-placeholder', 'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded', 'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect', 'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\n\n        for (var i = 0; i < attrArray.length; i++) {\n          this.inputElement.removeAttribute(attrArray[i]);\n        }\n\n        this.inputElement.setAttribute('tabindex', this.tabIndex);\n        this.inputElement.classList.remove('e-input');\n        Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\n      }\n\n      this.element.style.display = 'block';\n\n      if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\n        detach(this.inputWrapper.container);\n      } else {\n        this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\n        detach(this.inputWrapper.container);\n      }\n\n      _super.prototype.destroy.call(this);\n    }\n  };\n\n  ;\n  /**\r\n   * Gets all the list items bound on this component.\r\n   * @returns Element[].\r\n   */\n\n  DropDownList.prototype.getItems = function () {\n    if (!this.list) {\n      if (this.dataSource instanceof DataManager) {\n        this.initRemoteRender = true;\n      }\n\n      this.renderList();\n    }\n\n    return this.ulElement ? _super.prototype.getItems.call(this) : [];\n  };\n  /**\r\n   * Gets the data Object that matches the given value.\r\n   * @param { string | number } value - Specifies the value of the list item.\r\n   * @returns Object.\r\n   * @blazorType object\r\n   */\n\n\n  DropDownList.prototype.getDataByValue = function (value) {\n    return _super.prototype.getDataByValue.call(this, value);\n  };\n  /**\r\n   * Allows you to clear the selected values from the component.\r\n   * @returns void.\r\n   */\n\n\n  DropDownList.prototype.clear = function () {\n    this.value = null;\n  };\n\n  __decorate([Property(null)], DropDownList.prototype, \"cssClass\", void 0);\n\n  __decorate([Property('100%')], DropDownList.prototype, \"width\", void 0);\n\n  __decorate([Property('300px')], DropDownList.prototype, \"popupHeight\", void 0);\n\n  __decorate([Property('100%')], DropDownList.prototype, \"popupWidth\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"placeholder\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\n\n  __decorate([Property({})], DropDownList.prototype, \"htmlAttributes\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"query\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"valueTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"headerTemplate\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"footerTemplate\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"allowFiltering\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"readonly\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"text\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"value\", void 0);\n\n  __decorate([Property(null)], DropDownList.prototype, \"index\", void 0);\n\n  __decorate([Property('Never')], DropDownList.prototype, \"floatLabelType\", void 0);\n\n  __decorate([Property(false)], DropDownList.prototype, \"showClearButton\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"filtering\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"change\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"open\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"close\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"blur\", void 0);\n\n  __decorate([Event()], DropDownList.prototype, \"focus\", void 0);\n\n  DropDownList = __decorate([NotifyPropertyChanges], DropDownList);\n  return DropDownList;\n}(DropDownBase);\n\nexport { DropDownList };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-react-dropdowns/node_modules/@syncfusion/ej2-dropdowns/src/drop-down-list/drop-down-list.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","EventHandler","Property","Event","compile","KeyboardEvents","append","select","attributes","isNullOrUndefined","getUniqueID","formatUnit","isUndefined","getValue","Animation","Browser","NotifyPropertyChanges","addClass","removeClass","closest","prepend","detach","classList","isBlazor","Popup","isCollide","createSpinner","showSpinner","hideSpinner","Input","incrementalSearch","DropDownBase","dropDownBaseClasses","DataManager","Query","Predicate","dropDownListClasses","root","hover","selected","rtl","li","disable","disabled","base","focus","input","inputFocus","icon","iconAnimation","value","device","backIcon","filterBarClearIcon","filterInput","filterParent","mobileFilter","footer","header","clearIcon","clearIconHide","popupFullScreen","disableIcon","hiddenElement","inputObject","container","buttons","DropDownList","_super","options","element","_this","call","previousValue","isListSearched","preventChange","isAngular","preRender","checkBlazor","isServerRendered","isServerBlazor","initializeData","style","opacity","activeIndex","index","queryString","isPopupOpen","isDocumentClick","isInteracted","isFilterFocus","beforePopupOpen","initial","initRemoteRender","isNotSearchList","isTyped","isSelected","preventFocus","preventAutoFill","isValidKey","typedString","isEscapeKey","isPreventBlur","isTabKey","actionCompleteData","isUpdated","prevSelectPoints","isSelectCustom","isDropDownClick","preventAltUp","isCustomFilter","isSecondClick","keyConfigure","tab","enter","escape","end","home","down","up","pageUp","pageDown","open","close","hide","space","setZIndex","popupObj","setProperties","zIndex","renderList","isEmptyData","render","unWireListEvents","wireListEvents","interopAdaptor","invokeMethodAsync","floatLabelChange","getModuleName","floatLabelType","floatElement","inputWrapper","querySelector","inputElement","resetHandler","e","preventDefault","clearAll","resetFocusElement","removeHover","removeSelection","removeFocus","list","scrollTop","ulElement","add","properties","dataSource","isActive","resetSelection","dataItem","getItemData","onChangeEvent","selectedLI","resetList","allowFiltering","onActionComplete","cloneNode","innerHTML","itemData","text","item","valueTempElement","display","setSelection","updateIconState","cloneElements","setHTMLAttributes","keys","htmlAttributes","_i","_a","htmlAttr","updatedClassValue","replace","trim","split","enabled","setEnable","readonly","dataBind","setAttribute","defaultAttr","validateAttr","push","indexOf","setPlaceholder","removeAttribute","getAriaAttributes","id","setEnableRtl","enableRtl","parentElement","setEnabled","targetElement","tabIndex","hidePopup","getPersistData","addOnPersist","getLocaleName","preventTabIndex","getNgDirective","getElementByText","getElementByValue","getValueByText","listItems","getItems","listItems_1","liItem","getFormattedValue","getAttribute","initValue","updateValues","liCollections","setHiddenValue","setValue","showClearButton","onBlur","relatedTarget","currentTarget","isFilterLayout","document","body","contains","activeElement","focusOutAction","isRequested","focusOut","onFocusOut","dispatchEvent","tagName","clearButton","trigger","onFocus","args","event","resetValueHandler","formElement","val","wireEvent","dropDownClick","focusIn","onSearch","bindCommonEvent","isDevice","keyboardModule","keyAction","keyActionHandler","bind","keyConfigs","eventName","mobileKeyActionHandler","bindClearEvent","unBindCommonEvent","remove","destroy","onMouseClick","onMouseOver","onMouseLeave","charCode","undefined","isServerIncrementalSearch","searchKeyEvent","onServerIncrementalSearch","isValidLI","history","back","delay","closePopup","currentLi","setHover","hoveredItem","querySelectorAll","hasAttribute","setScrollPosition","spinnerElement","filterInputObj","width","createElement","preventAction","action","preventHomeEnd","isNavAction","isNavigation","isEditTextBox","isTabAction","updateUpDownAction","pageUpSelection","getPageCount","pageDownSelection","updateHomeEndAction","showPopup","focusDropDown","selectCurrentItem","selectCurrentValueOnTab","isServerNavigation","focusEle","isSelectFocusItem","nextItem","startIndex","findLi","liHeight","noData","getComputedStyle","getPropertyValue","Math","round","getBoundingClientRect","height","parseInt","steps","previousItem","unWireEvent","checkSelector","onDocumentClick","isIE","info","name","activeStateChange","which","button","proxy_1","duration","itemTemplate","setTimeout","updateSelectedItem","preventSelect","isSelection","selectedData","getDataByValue","items","detachChanges","eventArgs","cancel","selectEventCallback","setSelectOptions","previousItemData","focusedItem","getIndexByValue","activeItem","valueTemplate","DropDownBaseresetBlazorTemplates","setValueTemplate","previousSibling","previousSelectedLI","type","dropdownCompiler","dropdownTemplate","checkTemplate","exception","compiledString","isReact","clearTemplate","className","insertBefore","templateData","JSON","parse","stringify","valuecheck","valueCompTemp","valueTemplateId","isStringTemplate","appendChild","renderReactTemplates","DropDownBaseupdateBlazorTemplates","selectedItems","fields","dataValue","dataText","eve","detachChangeEvent","defineProperties","enumerable","preItems","enablePersistence","selectedElement","textContent","toString","onFilterUp","ctrlKey","keyCode","searchLists","onFilterDown","getSelectionPoints","removeFillSelection","selection","setSelectionRange","getQuery","query","filterQuery","clone","filterType","dataType","typeOfData","typeof","where","ignoreCase","ignoreAccent","start","abs","selectionStart","selectionEnd","clearElement","visibility","isDataFetched","isFiltering","eventArgs_1","preventDefaultAction","updateData","filteringAction","baseEventArgs","filter","focusIndexItem","setSearchBox","popupElement","attrs","parentNode","createInput","placeholder","filterBarPlaceholder","cssClass","clearIconElement","clearText","searchKeyModule","onInput","pasteHandler","onActionFailure","renderPopup","selectedItem","updateSelectElementData","checkField_1","checkVal","some","x","executeQuery","then","result","addItem","addNewItem","listData","newElement","value_1","isExist","data","updateActionCompleteData","actionCompleteDataUpdate","childNodes","findListElement","updateSelection","highlightedItem","refreshPopup","popupEle","serverPopupEle","searchBox","listHeight","popupHeight","headerTemplate","setHeaderTemplate","footerTemplate","setFooterTemplate","updateServerPopup","searchBoxHeight","maxHeight","offsetValue","left","getOffsetValue","firstItem","isEmptyList","textIndent","paddingLeft","borderLeftWidth","getFocusElement","createPopup","checkCollision","collision","X","Y","position","setSearchBoxPosition","backIconElement","clickOnBackIcon","scrollParentElements","getScrollableParent","scrollParentElements_1","scrollHandler","listScroll","inputParent","animModel","popupInstance","popup","animation","serverBlazorUpdateSelection","bindServerScrollEvent","show","destroyPopup","marginTop","resolveCollision","groupBy","isGroupChecking","setFloatingHeader","popupStyles","borderTop","borderTopWidth","borderBottom","borderBottomWidth","setPopupPosition","setWidth","targetType","relateTo","offsetY","offsetX","isResetItem","actionList","targetExitViewport","window","innerHeight","border","popupOffset","lastItem","offsetHeight","offsetTop","lastItemOffsetValue","count","paddingBottom","inputHeight","popupWidth","inputWidth","offsetWidth","parseFloat","scrollBottom","isInitial","currentOffset","nextBottom","nextOffset","paddingTop","boxRange","fixedHeaderElement","isPopupButton","blur","setEleWidth","match","scrollableParentElements","scrollableParentElements_1","fixedHeader","removeChild","rippleFun","popupHolderEle","wireClearBtnEvents","wireFloatingEvents","bindInitialEvent","customTag","setFields","role","updatedCssClassValues","validationAttribute","updateDataAttribute","selectElement","selectedIndex","onselect","stopImmediatePropagation","onchange","renderComplete","footercheck","footerCompTemp","footerTemplateId","headercheck","headerCompTemp","headerTemplateId","contentEle","setOldText","setOldValue","refreshPosition","checkData","newProp","isChangeValue","isChangeText","updateDataSource","props","checkCustomValue","updateInputFields","onPropertyChanged","oldProp","setUpdateInitial","prop","setReadonly","setCssClass","checkValidLi","setSelectionData","notify","removeFloating","addFloating","setClearButton","ddlProps","getPropObject","newProperty","oldProperty","updateListValues","newClass","oldClass","invokeRenderPopup","isDropdownComp","proxy_2","onpopstate","pushState","children","clientRenderPopup","renderHightSearch","updateclientItemData","initValueItemData","selectData","serverUpdateListElement","isHeader","isFooter","isSelectVal","isFocused","attrArray","clear"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\n/// <reference path='../drop-down-base/drop-down-base-model.d.ts'/>\r\nimport { EventHandler, Property, Event, compile, KeyboardEvents, append, select } from '@syncfusion/ej2-base';\r\nimport { attributes, isNullOrUndefined, getUniqueID, formatUnit, isUndefined, getValue } from '@syncfusion/ej2-base';\r\nimport { Animation, Browser, NotifyPropertyChanges } from '@syncfusion/ej2-base';\r\nimport { addClass, removeClass, closest, prepend, detach, classList, isBlazor } from '@syncfusion/ej2-base';\r\nimport { Popup, isCollide, createSpinner, showSpinner, hideSpinner } from '@syncfusion/ej2-popups';\r\nimport { Input } from '@syncfusion/ej2-inputs';\r\nimport { incrementalSearch } from '../common/incremental-search';\r\nimport { DropDownBase, dropDownBaseClasses } from '../drop-down-base/drop-down-base';\r\n/* tslint:disable */\r\nimport { DataManager, Query, Predicate } from '@syncfusion/ej2-data';\r\n// don't use space in classnames \r\nexport var dropDownListClasses = {\r\n    root: 'e-dropdownlist',\r\n    hover: dropDownBaseClasses.hover,\r\n    selected: dropDownBaseClasses.selected,\r\n    rtl: dropDownBaseClasses.rtl,\r\n    li: dropDownBaseClasses.li,\r\n    disable: dropDownBaseClasses.disabled,\r\n    base: dropDownBaseClasses.root,\r\n    focus: dropDownBaseClasses.focus,\r\n    input: 'e-input-group',\r\n    inputFocus: 'e-input-focus',\r\n    icon: 'e-input-group-icon e-ddl-icon',\r\n    iconAnimation: 'e-icon-anim',\r\n    value: 'e-input-value',\r\n    device: 'e-ddl-device',\r\n    backIcon: 'e-input-group-icon e-back-icon e-icons',\r\n    filterBarClearIcon: 'e-input-group-icon e-clear-icon e-icons',\r\n    filterInput: 'e-input-filter',\r\n    filterParent: 'e-filter-parent',\r\n    mobileFilter: 'e-ddl-device-filter',\r\n    footer: 'e-ddl-footer',\r\n    header: 'e-ddl-header',\r\n    clearIcon: 'e-clear-icon',\r\n    clearIconHide: 'e-clear-icon-hide',\r\n    popupFullScreen: 'e-popup-full-page',\r\n    disableIcon: 'e-ddl-disable-icon',\r\n    hiddenElement: 'e-ddl-hidden'\r\n};\r\nvar inputObject = {\r\n    container: null,\r\n    buttons: []\r\n};\r\n/**\r\n * The DropDownList component contains a list of predefined values from which you can\r\n * choose a single value.\r\n * ```html\r\n * <input type=\"text\" tabindex=\"1\" id=\"list\"> </input>\r\n * ```\r\n * ```typescript\r\n *   let dropDownListObj:DropDownList = new DropDownList();\r\n *   dropDownListObj.appendTo(\"#list\");\r\n * ```\r\n */\r\nvar DropDownList = /** @class */ (function (_super) {\r\n    __extends(DropDownList, _super);\r\n    /**\r\n     * * Constructor for creating the DropDownList component.\r\n     */\r\n    function DropDownList(options, element) {\r\n        var _this = _super.call(this, options, element) || this;\r\n        _this.previousValue = null;\r\n        _this.isListSearched = false;\r\n        _this.preventChange = false;\r\n        _this.isAngular = false;\r\n        return _this;\r\n    }\r\n    ;\r\n    /**\r\n     * Initialize the event handler.\r\n     * @private\r\n     */\r\n    DropDownList.prototype.preRender = function () {\r\n        var checkBlazor = isBlazor() && this.isServerRendered;\r\n        this.isServerBlazor = (checkBlazor) ? true : false;\r\n        if (this.isServerBlazor) {\r\n            this.initializeData();\r\n        }\r\n        else {\r\n            this.element.style.opacity = '0';\r\n            this.initializeData();\r\n            _super.prototype.preRender.call(this);\r\n        }\r\n        this.activeIndex = this.index;\r\n        this.queryString = '';\r\n    };\r\n    DropDownList.prototype.initializeData = function () {\r\n        this.isPopupOpen = false;\r\n        this.isDocumentClick = false;\r\n        this.isInteracted = false;\r\n        this.isFilterFocus = false;\r\n        this.beforePopupOpen = false;\r\n        this.initial = true;\r\n        this.initRemoteRender = false;\r\n        this.isNotSearchList = false;\r\n        this.isTyped = false;\r\n        this.isSelected = false;\r\n        this.preventFocus = false;\r\n        this.preventAutoFill = false;\r\n        this.isValidKey = false;\r\n        this.typedString = '';\r\n        this.isEscapeKey = false;\r\n        this.isPreventBlur = false;\r\n        this.isTabKey = false;\r\n        this.actionCompleteData = { isUpdated: false };\r\n        this.prevSelectPoints = {};\r\n        this.isSelectCustom = false;\r\n        this.isDropDownClick = false;\r\n        this.preventAltUp = false;\r\n        this.isCustomFilter = false;\r\n        this.isSecondClick = false;\r\n        this.keyConfigure = {\r\n            tab: 'tab',\r\n            enter: '13',\r\n            escape: '27',\r\n            end: '35',\r\n            home: '36',\r\n            down: '40',\r\n            up: '38',\r\n            pageUp: '33',\r\n            pageDown: '34',\r\n            open: 'alt+40',\r\n            close: 'shift+tab',\r\n            hide: 'alt+38',\r\n            space: '32'\r\n        };\r\n    };\r\n    DropDownList.prototype.setZIndex = function () {\r\n        if (this.popupObj) {\r\n            this.popupObj.setProperties({ 'zIndex': this.zIndex });\r\n        }\r\n    };\r\n    DropDownList.prototype.renderList = function (isEmptyData) {\r\n        if (!this.isServerBlazor) {\r\n            _super.prototype.render.call(this, isEmptyData);\r\n            this.unWireListEvents();\r\n            this.wireListEvents();\r\n        }\r\n        else {\r\n            // tslint:disable-next-line\r\n            this.interopAdaptor.invokeMethodAsync('OnServerRenderList', this.beforePopupOpen, false);\r\n        }\r\n    };\r\n    DropDownList.prototype.floatLabelChange = function () {\r\n        if (this.getModuleName() === 'dropdownlist' && this.floatLabelType === 'Auto') {\r\n            var floatElement = this.inputWrapper.container.querySelector('.e-float-text');\r\n            if (this.inputElement.value !== '' || this.isInteracted) {\r\n                classList(floatElement, ['e-label-top'], ['e-label-bottom']);\r\n            }\r\n            else {\r\n                classList(floatElement, ['e-label-bottom'], ['e-label-top']);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.resetHandler = function (e) {\r\n        e.preventDefault();\r\n        this.clearAll(e);\r\n    };\r\n    DropDownList.prototype.resetFocusElement = function () {\r\n        this.removeHover();\r\n        this.removeSelection();\r\n        this.removeFocus();\r\n        this.list.scrollTop = 0;\r\n        if (this.getModuleName() !== 'autocomplete' && !isNullOrUndefined(this.ulElement)) {\r\n            var li = this.ulElement.querySelector('.' + dropDownListClasses.li);\r\n            if (li) {\r\n                li.classList.add(dropDownListClasses.focus);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.clearAll = function (e, properties) {\r\n        if (isNullOrUndefined(properties) || (!isNullOrUndefined(properties) &&\r\n            (isNullOrUndefined(properties.dataSource) ||\r\n                (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\r\n            this.isActive = true;\r\n            this.resetSelection(properties);\r\n        }\r\n        var dataItem = this.getItemData();\r\n        if (this.previousValue === dataItem.value) {\r\n            return;\r\n        }\r\n        this.onChangeEvent(e);\r\n    };\r\n    DropDownList.prototype.resetSelection = function (properties) {\r\n        if (this.list) {\r\n            if ((!isNullOrUndefined(properties) &&\r\n                (isNullOrUndefined(properties.dataSource) ||\r\n                    (!(properties.dataSource instanceof DataManager) && properties.dataSource.length === 0)))) {\r\n                this.selectedLI = null;\r\n                this.actionCompleteData.isUpdated = false;\r\n                this.actionCompleteData.ulElement = null;\r\n                this.actionCompleteData.list = null;\r\n                this.resetList(properties.dataSource);\r\n            }\r\n            else {\r\n                if (this.allowFiltering && this.getModuleName() !== 'autocomplete'\r\n                    && !isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\r\n                    this.onActionComplete(this.actionCompleteData.ulElement.cloneNode(true), this.actionCompleteData.list);\r\n                }\r\n                this.resetFocusElement();\r\n            }\r\n        }\r\n        if (!this.isServerBlazor) {\r\n            this.hiddenElement.innerHTML = '';\r\n        }\r\n        this.inputElement.value = '';\r\n        this.value = null;\r\n        this.itemData = null;\r\n        this.text = null;\r\n        this.index = null;\r\n        this.activeIndex = null;\r\n        this.item = null;\r\n        this.queryString = '';\r\n        if (this.valueTempElement) {\r\n            detach(this.valueTempElement);\r\n            this.inputElement.style.display = 'block';\r\n            this.valueTempElement = null;\r\n        }\r\n        this.setSelection(null, null);\r\n        this.isSelectCustom = false;\r\n        this.updateIconState();\r\n        this.cloneElements();\r\n    };\r\n    DropDownList.prototype.setHTMLAttributes = function () {\r\n        if (Object.keys(this.htmlAttributes).length) {\r\n            for (var _i = 0, _a = Object.keys(this.htmlAttributes); _i < _a.length; _i++) {\r\n                var htmlAttr = _a[_i];\r\n                if (htmlAttr === 'class') {\r\n                    var updatedClassValue = (this.htmlAttributes[htmlAttr].replace(/\\s+/g, ' ')).trim();\r\n                    if (updatedClassValue !== '') {\r\n                        addClass([this.inputWrapper.container], updatedClassValue.split(' '));\r\n                    }\r\n                }\r\n                else if (htmlAttr === 'disabled' && this.htmlAttributes[htmlAttr] === 'disabled') {\r\n                    this.enabled = false;\r\n                    this.setEnable();\r\n                }\r\n                else if (htmlAttr === 'readonly' && !isNullOrUndefined(this.htmlAttributes[htmlAttr])) {\r\n                    this.readonly = true;\r\n                    this.dataBind();\r\n                }\r\n                else if (htmlAttr === 'style') {\r\n                    this.inputWrapper.container.setAttribute('style', this.htmlAttributes[htmlAttr]);\r\n                }\r\n                else {\r\n                    var defaultAttr = ['title', 'id', 'placeholder', 'aria-placeholder',\r\n                        'role', 'autocorrect', 'autocomplete', 'autocapitalize', 'spellcheck', 'minlength', 'maxlength'];\r\n                    var validateAttr = ['name', 'required'];\r\n                    if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\r\n                        defaultAttr.push('tabindex');\r\n                    }\r\n                    if (htmlAttr.indexOf('data') === 0 || validateAttr.indexOf(htmlAttr) > -1) {\r\n                        this.hiddenElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\r\n                    }\r\n                    else if (defaultAttr.indexOf(htmlAttr) > -1) {\r\n                        htmlAttr === 'placeholder' ? Input.setPlaceholder(this.htmlAttributes[htmlAttr], this.inputElement) :\r\n                            this.inputElement.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\r\n                    }\r\n                    else {\r\n                        this.inputWrapper.container.setAttribute(htmlAttr, this.htmlAttributes[htmlAttr]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.getModuleName() === 'autocomplete' || this.getModuleName() === 'combobox') {\r\n            this.inputWrapper.container.removeAttribute('tabindex');\r\n        }\r\n    };\r\n    DropDownList.prototype.getAriaAttributes = function () {\r\n        return {\r\n            'aria-disabled': 'false',\r\n            'aria-owns': this.element.id + '_options',\r\n            'role': 'listbox',\r\n            'aria-haspopup': 'true',\r\n            'aria-expanded': 'false',\r\n            'aria-activedescendant': 'null',\r\n            'aria-live': 'polite',\r\n            'aria-labelledby': this.hiddenElement.id\r\n        };\r\n    };\r\n    DropDownList.prototype.setEnableRtl = function () {\r\n        Input.setEnableRtl(this.enableRtl, [this.inputElement.parentElement]);\r\n        if (this.popupObj) {\r\n            this.popupObj.enableRtl = this.enableRtl;\r\n            this.popupObj.dataBind();\r\n        }\r\n    };\r\n    DropDownList.prototype.setEnable = function () {\r\n        Input.setEnabled(this.enabled, this.inputElement);\r\n        if (this.enabled) {\r\n            removeClass([this.inputWrapper.container], dropDownListClasses.disable);\r\n            this.inputElement.setAttribute('aria-disabled', 'false');\r\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\r\n        }\r\n        else {\r\n            this.hidePopup();\r\n            addClass([this.inputWrapper.container], dropDownListClasses.disable);\r\n            this.inputElement.setAttribute('aria-disabled', 'true');\r\n            this.targetElement().tabIndex = -1;\r\n        }\r\n    };\r\n    /**\r\n     * Get the properties to be maintained in the persisted state.\r\n     */\r\n    DropDownList.prototype.getPersistData = function () {\r\n        return this.addOnPersist(['value']);\r\n    };\r\n    ;\r\n    DropDownList.prototype.getLocaleName = function () {\r\n        return 'drop-down-list';\r\n    };\r\n    ;\r\n    DropDownList.prototype.preventTabIndex = function (element) {\r\n        if (this.getModuleName() === 'dropdownlist') {\r\n            element.tabIndex = -1;\r\n        }\r\n    };\r\n    DropDownList.prototype.targetElement = function () {\r\n        return this.inputWrapper.container;\r\n    };\r\n    DropDownList.prototype.getNgDirective = function () {\r\n        return 'EJS-DROPDOWNLIST';\r\n    };\r\n    DropDownList.prototype.getElementByText = function (text) {\r\n        return this.getElementByValue(this.getValueByText(text));\r\n    };\r\n    DropDownList.prototype.getElementByValue = function (value) {\r\n        var item;\r\n        var listItems = this.getItems();\r\n        for (var _i = 0, listItems_1 = listItems; _i < listItems_1.length; _i++) {\r\n            var liItem = listItems_1[_i];\r\n            if (this.getFormattedValue(liItem.getAttribute('data-value')) === value) {\r\n                item = liItem;\r\n                break;\r\n            }\r\n        }\r\n        return item;\r\n    };\r\n    ;\r\n    DropDownList.prototype.initValue = function () {\r\n        this.renderList();\r\n        if (this.dataSource instanceof DataManager) {\r\n            this.initRemoteRender = true;\r\n        }\r\n        else {\r\n            this.updateValues();\r\n        }\r\n    };\r\n    DropDownList.prototype.updateValues = function () {\r\n        if (!isNullOrUndefined(this.value)) {\r\n            this.setSelection(this.getElementByValue(this.value), null);\r\n        }\r\n        else if (this.text && isNullOrUndefined(this.value)) {\r\n            var element = this.getElementByText(this.text);\r\n            if (isNullOrUndefined(element)) {\r\n                this.setProperties({ text: null });\r\n                return;\r\n            }\r\n            else {\r\n                this.setSelection(element, null);\r\n            }\r\n        }\r\n        else {\r\n            this.setSelection(this.liCollections[this.activeIndex], null);\r\n        }\r\n        this.setHiddenValue();\r\n        Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\r\n    };\r\n    DropDownList.prototype.onBlur = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        var target = e.relatedTarget;\r\n        var currentTarget = e.target;\r\n        var isPreventBlur = this.isPreventBlur;\r\n        this.isPreventBlur = false;\r\n        //IE 11 - issue\r\n        if (isPreventBlur && !this.isDocumentClick && this.isPopupOpen && (!isNullOrUndefined(currentTarget) ||\r\n            !this.isFilterLayout() && isNullOrUndefined(target))) {\r\n            if (this.getModuleName() === 'dropdownlist' && this.allowFiltering && this.isPopupOpen) {\r\n                this.filterInput.focus();\r\n            }\r\n            else {\r\n                this.targetElement().focus();\r\n            }\r\n            return;\r\n        }\r\n        if (this.isDocumentClick || (!isNullOrUndefined(this.popupObj)\r\n            && document.body.contains(this.popupObj.element) &&\r\n            this.popupObj.element.classList.contains(dropDownListClasses.mobileFilter))) {\r\n            if (!this.beforePopupOpen) {\r\n                this.isDocumentClick = false;\r\n            }\r\n            return;\r\n        }\r\n        if (((this.getModuleName() === 'dropdownlist' && !this.isFilterFocus && target !== this.inputElement)\r\n            && (document.activeElement !== target || (document.activeElement === target &&\r\n                currentTarget.classList.contains(dropDownListClasses.inputFocus)))) ||\r\n            (isNullOrUndefined(target) && this.getModuleName() === 'dropdownlist' && this.allowFiltering &&\r\n                currentTarget !== this.inputWrapper.container) || this.getModuleName() !== 'dropdownlist' &&\r\n            !this.inputWrapper.container.contains(target) || this.isTabKey) {\r\n            this.isDocumentClick = this.isPopupOpen ? true : false;\r\n            this.focusOutAction(e);\r\n            this.isTabKey = false;\r\n        }\r\n        if (this.isRequested && !this.isPopupOpen && !this.isPreventBlur) {\r\n            this.isActive = false;\r\n            this.beforePopupOpen = false;\r\n        }\r\n    };\r\n    DropDownList.prototype.focusOutAction = function (e) {\r\n        this.isInteracted = false;\r\n        this.focusOut(e);\r\n        this.onFocusOut();\r\n    };\r\n    DropDownList.prototype.onFocusOut = function () {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        if (this.isSelected) {\r\n            this.isSelectCustom = false;\r\n            this.onChangeEvent(null);\r\n        }\r\n        this.floatLabelChange();\r\n        this.dispatchEvent(this.hiddenElement, 'change');\r\n        if (this.getModuleName() === 'dropdownlist' && this.element.tagName !== 'INPUT') {\r\n            this.dispatchEvent(this.inputElement, 'blur');\r\n        }\r\n        if (this.inputWrapper.clearButton) {\r\n            addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\r\n        }\r\n        this.trigger('blur');\r\n    };\r\n    DropDownList.prototype.onFocus = function (e) {\r\n        if (!this.isInteracted) {\r\n            this.isInteracted = true;\r\n            var args = { isInteracted: e ? true : false, event: e };\r\n            this.trigger('focus', args);\r\n        }\r\n        this.updateIconState();\r\n    };\r\n    DropDownList.prototype.resetValueHandler = function (e) {\r\n        var formElement = closest(this.inputElement, 'form');\r\n        if (formElement && e.target === formElement) {\r\n            var val = (this.element.tagName === this.getNgDirective()) ? null : this.inputElement.getAttribute('value');\r\n            this.text = val;\r\n        }\r\n    };\r\n    DropDownList.prototype.wireEvent = function () {\r\n        EventHandler.add(this.inputWrapper.container, 'mousedown', this.dropDownClick, this);\r\n        EventHandler.add(this.inputWrapper.container, 'focus', this.focusIn, this);\r\n        EventHandler.add(this.inputWrapper.container, 'keypress', this.onSearch, this);\r\n        this.bindCommonEvent();\r\n    };\r\n    DropDownList.prototype.bindCommonEvent = function () {\r\n        EventHandler.add(this.targetElement(), 'blur', this.onBlur, this);\r\n        var formElement = closest(this.inputElement, 'form');\r\n        if (formElement) {\r\n            EventHandler.add(formElement, 'reset', this.resetValueHandler, this);\r\n        }\r\n        if (!Browser.isDevice) {\r\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\r\n                keyAction: this.keyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\r\n            });\r\n        }\r\n        else {\r\n            this.keyboardModule = new KeyboardEvents(this.targetElement(), {\r\n                keyAction: this.mobileKeyActionHandler.bind(this), keyConfigs: this.keyConfigure, eventName: 'keydown'\r\n            });\r\n        }\r\n        this.bindClearEvent();\r\n    };\r\n    DropDownList.prototype.bindClearEvent = function () {\r\n        if (this.showClearButton) {\r\n            EventHandler.add(this.inputWrapper.clearButton, 'mousedown', this.resetHandler, this);\r\n        }\r\n    };\r\n    DropDownList.prototype.unBindCommonEvent = function () {\r\n        if (this.targetElement()) {\r\n            EventHandler.remove(this.targetElement(), 'blur', this.onBlur);\r\n        }\r\n        var formElement = this.inputElement && closest(this.inputElement, 'form');\r\n        if (formElement) {\r\n            EventHandler.remove(formElement, 'reset', this.resetValueHandler);\r\n        }\r\n        if (!Browser.isDevice) {\r\n            this.keyboardModule.destroy();\r\n        }\r\n        if (this.showClearButton) {\r\n            EventHandler.remove(this.inputWrapper.clearButton, 'mousedown', this.resetHandler);\r\n        }\r\n    };\r\n    DropDownList.prototype.updateIconState = function () {\r\n        if (this.showClearButton) {\r\n            if (this.inputElement.value !== '' && !this.readonly) {\r\n                removeClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\r\n            }\r\n            else {\r\n                addClass([this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * Event binding for list\r\n     */\r\n    DropDownList.prototype.wireListEvents = function () {\r\n        EventHandler.add(this.list, 'click', this.onMouseClick, this);\r\n        EventHandler.add(this.list, 'mouseover', this.onMouseOver, this);\r\n        EventHandler.add(this.list, 'mouseout', this.onMouseLeave, this);\r\n    };\r\n    ;\r\n    DropDownList.prototype.onSearch = function (e) {\r\n        if (e.charCode !== 32 && e.charCode !== 13) {\r\n            if (this.list === undefined) {\r\n                if (!this.isServerBlazor) {\r\n                    this.renderList();\r\n                }\r\n                else {\r\n                    this.isServerIncrementalSearch = true;\r\n                    // tslint:disable-next-line\r\n                    this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\r\n                }\r\n            }\r\n            this.searchKeyEvent = e;\r\n            this.onServerIncrementalSearch(e);\r\n        }\r\n    };\r\n    DropDownList.prototype.onServerIncrementalSearch = function (e) {\r\n        if (!this.isRequested && !isNullOrUndefined(this.list) &&\r\n            !isNullOrUndefined(this.list.querySelector('li')) && this.enabled && !this.readonly) {\r\n            this.incrementalSearch(e);\r\n        }\r\n    };\r\n    DropDownList.prototype.onMouseClick = function (e) {\r\n        var target = e.target;\r\n        var classList = target.classList;\r\n        var li = closest(target, '.' + dropDownBaseClasses.li);\r\n        if (!this.isValidLI(li)) {\r\n            return;\r\n        }\r\n        this.setSelection(li, e);\r\n        if (Browser.isDevice && this.isFilterLayout()) {\r\n            history.back();\r\n        }\r\n        else {\r\n            var delay = 100;\r\n            this.closePopup(delay);\r\n        }\r\n    };\r\n    DropDownList.prototype.onMouseOver = function (e) {\r\n        var currentLi = closest(e.target, '.' + dropDownBaseClasses.li);\r\n        this.setHover(currentLi);\r\n    };\r\n    ;\r\n    DropDownList.prototype.setHover = function (li) {\r\n        if (this.enabled && this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.hover)) {\r\n            this.removeHover();\r\n            addClass([li], dropDownBaseClasses.hover);\r\n        }\r\n    };\r\n    ;\r\n    DropDownList.prototype.onMouseLeave = function (e) {\r\n        this.removeHover();\r\n    };\r\n    ;\r\n    DropDownList.prototype.removeHover = function () {\r\n        if (this.list) {\r\n            var hoveredItem = (this.isServerBlazor && this.popupObj && this.popupObj.element) ?\r\n                this.popupObj.element.querySelectorAll('.' + dropDownBaseClasses.hover) :\r\n                this.list.querySelectorAll('.' + dropDownBaseClasses.hover);\r\n            if (hoveredItem && hoveredItem.length) {\r\n                removeClass(hoveredItem, dropDownBaseClasses.hover);\r\n            }\r\n        }\r\n    };\r\n    ;\r\n    DropDownList.prototype.isValidLI = function (li) {\r\n        return (li && li.hasAttribute('role') && li.getAttribute('role') === 'option');\r\n    };\r\n    ;\r\n    DropDownList.prototype.incrementalSearch = function (e) {\r\n        if (this.liCollections.length > 0) {\r\n            var li = incrementalSearch(e.charCode, this.liCollections, this.activeIndex, true, this.element.id, this.isServerBlazor);\r\n            if (!isNullOrUndefined(li)) {\r\n                this.setSelection(li, e);\r\n                this.setScrollPosition();\r\n            }\r\n        }\r\n    };\r\n    ;\r\n    /**\r\n     * Hides the spinner loader.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.hideSpinner = function () {\r\n        if (!isNullOrUndefined(this.spinnerElement)) {\r\n            hideSpinner(this.spinnerElement);\r\n            removeClass([this.spinnerElement], dropDownListClasses.disableIcon);\r\n            this.spinnerElement.innerHTML = '';\r\n            this.spinnerElement = null;\r\n        }\r\n    };\r\n    /**\r\n     * Shows the spinner loader.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.showSpinner = function () {\r\n        if (isNullOrUndefined(this.spinnerElement)) {\r\n            this.spinnerElement = Browser.isDevice && !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[1] ||\r\n                !isNullOrUndefined(this.filterInputObj) && this.filterInputObj.buttons[0] || this.inputWrapper.buttons[0];\r\n            addClass([this.spinnerElement], dropDownListClasses.disableIcon);\r\n            createSpinner({\r\n                target: this.spinnerElement,\r\n                width: Browser.isDevice ? '16px' : '14px'\r\n            }, this.createElement);\r\n            showSpinner(this.spinnerElement);\r\n        }\r\n    };\r\n    DropDownList.prototype.keyActionHandler = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        var preventAction = e.action === 'pageUp' || e.action === 'pageDown';\r\n        var preventHomeEnd = this.getModuleName() !== 'dropdownlist' && (e.action === 'home' || e.action === 'end');\r\n        this.isEscapeKey = e.action === 'escape';\r\n        this.isTabKey = !this.isPopupOpen && e.action === 'tab';\r\n        var isNavAction = e.action === 'down' || e.action === 'up' || e.action === 'home' || e.action === 'end';\r\n        var isNavigation = (e.action === 'down' || e.action === 'up' || e.action === 'pageUp' || e.action === 'pageDown'\r\n            || e.action === 'home' || e.action === 'end');\r\n        if ((this.isEditTextBox() || preventAction || preventHomeEnd) && !this.isPopupOpen) {\r\n            return;\r\n        }\r\n        if (!this.readonly) {\r\n            var isTabAction = e.action === 'tab' || e.action === 'close';\r\n            if (this.list === undefined && !this.isRequested && !isTabAction && e.action !== 'escape') {\r\n                this.searchKeyEvent = e;\r\n                this.renderList();\r\n            }\r\n            if (!(this.isServerBlazor && (e.action === 'open' || e.action === 'space')) && isNullOrUndefined(this.list) ||\r\n                (!isNullOrUndefined(this.liCollections) && isNavigation && this.liCollections.length === 0) || this.isRequested) {\r\n                if (!(this.isServerBlazor && isNavAction)) {\r\n                    return;\r\n                }\r\n            }\r\n            if ((isTabAction && this.getModuleName() !== 'autocomplete') && this.isPopupOpen\r\n                || e.action === 'escape') {\r\n                e.preventDefault();\r\n            }\r\n            this.isSelected = e.action === 'escape' ? false : this.isSelected;\r\n            this.isTyped = (isNavigation || e.action === 'escape') ? false : this.isTyped;\r\n            switch (e.action) {\r\n                case 'down':\r\n                case 'up':\r\n                    this.updateUpDownAction(e);\r\n                    break;\r\n                case 'pageUp':\r\n                    this.pageUpSelection(this.activeIndex - this.getPageCount(), e);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'pageDown':\r\n                    this.pageDownSelection(this.activeIndex + this.getPageCount(), e);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'home':\r\n                    this.updateHomeEndAction(e);\r\n                    break;\r\n                case 'end':\r\n                    this.updateHomeEndAction(e);\r\n                    break;\r\n                case 'space':\r\n                    if (this.getModuleName() === 'dropdownlist') {\r\n                        if (!this.beforePopupOpen) {\r\n                            this.showPopup();\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'open':\r\n                    this.showPopup();\r\n                    break;\r\n                case 'hide':\r\n                    this.preventAltUp = this.isPopupOpen;\r\n                    this.hidePopup(e);\r\n                    this.focusDropDown(e);\r\n                    break;\r\n                case 'enter':\r\n                    this.selectCurrentItem(e);\r\n                    break;\r\n                case 'tab':\r\n                    this.selectCurrentValueOnTab(e);\r\n                    break;\r\n                case 'escape':\r\n                case 'close':\r\n                    if (this.isPopupOpen) {\r\n                        this.hidePopup(e);\r\n                        this.focusDropDown(e);\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.updateUpDownAction = function (e) {\r\n        if (this.isServerBlazor && isNullOrUndefined(this.list)) {\r\n            this.isServerNavigation = true;\r\n            // tslint:disable-next-line\r\n            this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\r\n        }\r\n        else {\r\n            this.isServerNavigation = false;\r\n            var focusEle = this.list.querySelector('.' + dropDownListClasses.focus);\r\n            if (this.isSelectFocusItem(focusEle)) {\r\n                this.setSelection(focusEle, e);\r\n            }\r\n            else {\r\n                var nextItem = void 0;\r\n                var index = e.action === 'down' ? this.activeIndex + 1 : this.activeIndex - 1;\r\n                var startIndex = 0;\r\n                if (this.getModuleName() === 'autocomplete') {\r\n                    startIndex = e.action === 'down' && isNullOrUndefined(this.activeIndex) ? 0 : this.liCollections.length - 1;\r\n                    index = index < 0 ? this.liCollections.length - 1 : index === this.liCollections.length ? 0 : index;\r\n                }\r\n                nextItem = isNullOrUndefined(this.activeIndex) ? this.liCollections[startIndex] : this.liCollections[index];\r\n                if (!isNullOrUndefined(nextItem)) {\r\n                    this.setSelection(nextItem, e);\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        }\r\n    };\r\n    DropDownList.prototype.updateHomeEndAction = function (e) {\r\n        if (this.getModuleName() === 'dropdownlist') {\r\n            if (this.isServerBlazor && isNullOrUndefined(this.list)) {\r\n                this.isServerNavigation = true;\r\n                // tslint:disable-next-line\r\n                this.interopAdaptor.invokeMethodAsync('OnServerRenderList', true, false);\r\n            }\r\n            else {\r\n                this.isServerNavigation = false;\r\n                var findLi = 0;\r\n                if (e.action === 'home') {\r\n                    findLi = 0;\r\n                }\r\n                else {\r\n                    findLi = this.getItems().length - 1;\r\n                }\r\n                e.preventDefault();\r\n                if (this.activeIndex === findLi) {\r\n                    return;\r\n                }\r\n                this.setSelection(this.liCollections[findLi], e);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.selectCurrentValueOnTab = function (e) {\r\n        if (this.getModuleName() === 'autocomplete') {\r\n            this.selectCurrentItem(e);\r\n        }\r\n        else {\r\n            if (this.isPopupOpen) {\r\n                this.hidePopup(e);\r\n                this.focusDropDown(e);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.mobileKeyActionHandler = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        if ((this.isEditTextBox()) && !this.isPopupOpen) {\r\n            return;\r\n        }\r\n        if (!this.readonly) {\r\n            if (this.list === undefined && !this.isRequested) {\r\n                this.searchKeyEvent = e;\r\n                this.renderList();\r\n            }\r\n            if (isNullOrUndefined(this.list) || (!isNullOrUndefined(this.liCollections) &&\r\n                this.liCollections.length === 0) || this.isRequested) {\r\n                return;\r\n            }\r\n            if (e.action === 'enter') {\r\n                this.selectCurrentItem(e);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.selectCurrentItem = function (e) {\r\n        if (this.isPopupOpen) {\r\n            var li = this.list.querySelector('.' + dropDownListClasses.focus);\r\n            if (li) {\r\n                this.setSelection(li, e);\r\n                this.isTyped = false;\r\n            }\r\n            if (this.isSelected) {\r\n                this.isSelectCustom = false;\r\n                this.onChangeEvent(e);\r\n            }\r\n            this.hidePopup();\r\n            this.focusDropDown(e);\r\n        }\r\n        else {\r\n            this.showPopup();\r\n        }\r\n    };\r\n    DropDownList.prototype.isSelectFocusItem = function (element) {\r\n        return !isNullOrUndefined(element);\r\n    };\r\n    DropDownList.prototype.getPageCount = function () {\r\n        var liHeight = this.list.classList.contains(dropDownBaseClasses.noData) ? null :\r\n            getComputedStyle(this.getItems()[0], null).getPropertyValue('height');\r\n        return Math.round(this.list.getBoundingClientRect().height / parseInt(liHeight, 10));\r\n    };\r\n    DropDownList.prototype.pageUpSelection = function (steps, event) {\r\n        var previousItem = steps >= 0 ? this.liCollections[steps + 1] : this.liCollections[0];\r\n        this.setSelection(previousItem, event);\r\n    };\r\n    ;\r\n    DropDownList.prototype.pageDownSelection = function (steps, event) {\r\n        var list = this.getItems();\r\n        var previousItem = steps <= list.length ? this.liCollections[steps - 1] : this.liCollections[list.length - 1];\r\n        this.setSelection(previousItem, event);\r\n    };\r\n    ;\r\n    DropDownList.prototype.unWireEvent = function () {\r\n        EventHandler.remove(this.inputWrapper.container, 'mousedown', this.dropDownClick);\r\n        EventHandler.remove(this.inputWrapper.container, 'keypress', this.onSearch);\r\n        EventHandler.remove(this.inputWrapper.container, 'focus', this.focusIn);\r\n        this.unBindCommonEvent();\r\n    };\r\n    /**\r\n     * Event un binding for list items.\r\n     */\r\n    DropDownList.prototype.unWireListEvents = function () {\r\n        EventHandler.remove(this.list, 'click', this.onMouseClick);\r\n        EventHandler.remove(this.list, 'mouseover', this.onMouseOver);\r\n        EventHandler.remove(this.list, 'mouseout', this.onMouseLeave);\r\n    };\r\n    ;\r\n    DropDownList.prototype.checkSelector = function (id) {\r\n        return '[id=\"' + id.replace(/(:|\\.|\\[|\\]|,|=|@|\\\\|\\/|#)/g, '\\\\$1') + '\"]';\r\n    };\r\n    DropDownList.prototype.onDocumentClick = function (e) {\r\n        var target = e.target;\r\n        if (!(!isNullOrUndefined(this.popupObj) && closest(target, this.checkSelector(this.popupObj.element.id))) &&\r\n            !this.inputWrapper.container.contains(e.target)) {\r\n            if (this.inputWrapper.container.classList.contains(dropDownListClasses.inputFocus) || this.isPopupOpen) {\r\n                this.isDocumentClick = true;\r\n                var isActive = this.isRequested;\r\n                this.isInteracted = false;\r\n                this.hidePopup(e);\r\n                if (!isActive) {\r\n                    this.onFocusOut();\r\n                    this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\r\n                }\r\n            }\r\n        }\r\n        else if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput)\r\n            && !(this.getModuleName() === 'combobox' &&\r\n                !this.allowFiltering && Browser.isDevice && target === this.inputWrapper.buttons[0])) {\r\n            this.isPreventBlur = (Browser.isIE || Browser.info.name === 'edge') && (document.activeElement === this.targetElement() ||\r\n                document.activeElement === this.filterInput);\r\n            e.preventDefault();\r\n        }\r\n    };\r\n    DropDownList.prototype.activeStateChange = function () {\r\n        if (this.isDocumentClick) {\r\n            this.hidePopup();\r\n            this.onFocusOut();\r\n            this.inputWrapper.container.classList.remove(dropDownListClasses.inputFocus);\r\n        }\r\n    };\r\n    DropDownList.prototype.focusDropDown = function (e) {\r\n        if (!this.initial && this.isFilterLayout()) {\r\n            this.focusIn(e);\r\n        }\r\n    };\r\n    DropDownList.prototype.dropDownClick = function (e) {\r\n        if (e.which === 3 || e.button === 2) {\r\n            return;\r\n        }\r\n        if (this.targetElement().classList.contains(dropDownListClasses.disable) || this.inputWrapper.clearButton === e.target) {\r\n            return;\r\n        }\r\n        var target = e.target;\r\n        if (target !== this.inputElement && !(this.allowFiltering && target === this.filterInput) && this.getModuleName() !== 'combobox') {\r\n            e.preventDefault();\r\n        }\r\n        if (!this.readonly) {\r\n            if (this.isPopupOpen) {\r\n                this.hidePopup();\r\n                if (this.isFilterLayout()) {\r\n                    this.focusDropDown(e);\r\n                }\r\n            }\r\n            else {\r\n                this.focusIn(e);\r\n                this.floatLabelChange();\r\n                this.queryString = this.inputElement.value.trim() === '' ? null : this.inputElement.value;\r\n                this.isDropDownClick = true;\r\n                this.showPopup();\r\n            }\r\n            var proxy_1 = this;\r\n            var duration = (isBlazor()) ? 1000 : (this.element.tagName === this.getNgDirective() && this.itemTemplate) ? 500 : 100;\r\n            if (!this.isSecondClick) {\r\n                setTimeout(function () { proxy_1.cloneElements(); proxy_1.isSecondClick = true; }, duration);\r\n            }\r\n        }\r\n        else {\r\n            this.focusIn(e);\r\n        }\r\n    };\r\n    DropDownList.prototype.cloneElements = function () {\r\n        if (this.list) {\r\n            var ulElement = this.list.querySelector('ul');\r\n            if (ulElement) {\r\n                ulElement = ulElement.cloneNode ? ulElement.cloneNode(true) : ulElement;\r\n                this.actionCompleteData.ulElement = ulElement;\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.updateSelectedItem = function (li, e, preventSelect, isSelection) {\r\n        var _this = this;\r\n        this.removeSelection();\r\n        li.classList.add(dropDownBaseClasses.selected);\r\n        this.removeHover();\r\n        var value = this.getFormattedValue(li.getAttribute('data-value'));\r\n        var selectedData = this.getDataByValue(value);\r\n        if (!this.initial && !preventSelect && !isNullOrUndefined(e)) {\r\n            var items = this.detachChanges(selectedData);\r\n            this.isSelected = true;\r\n            var eventArgs = {\r\n                e: e,\r\n                item: li,\r\n                itemData: items,\r\n                isInteracted: e ? true : false,\r\n                cancel: false\r\n            };\r\n            this.trigger('select', eventArgs, function (eventArgs) {\r\n                if (eventArgs.cancel) {\r\n                    li.classList.remove(dropDownBaseClasses.selected);\r\n                }\r\n                else {\r\n                    _this.selectEventCallback(li, e, preventSelect, selectedData, value);\r\n                    if (_this.isServerBlazor) {\r\n                        // tslint:disable-next-line\r\n                        _this.interopAdaptor.invokeMethodAsync('OnServerItemData', _this.itemData);\r\n                    }\r\n                    if (isSelection) {\r\n                        _this.setSelectOptions(li, e);\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            this.selectEventCallback(li, e, preventSelect, selectedData, value);\r\n            if (this.isServerBlazor) {\r\n                // tslint:disable-next-line\r\n                this.interopAdaptor.invokeMethodAsync('OnServerItemData', this.itemData);\r\n            }\r\n            if (isSelection) {\r\n                this.setSelectOptions(li, e);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.selectEventCallback = function (li, e, preventSelect, selectedData, value) {\r\n        this.previousItemData = (!isNullOrUndefined(this.itemData)) ? this.itemData : null;\r\n        this.item = li;\r\n        this.itemData = selectedData;\r\n        var focusedItem = this.list.querySelector('.' + dropDownBaseClasses.focus);\r\n        if (focusedItem) {\r\n            removeClass([focusedItem], dropDownBaseClasses.focus);\r\n        }\r\n        li.setAttribute('aria-selected', 'true');\r\n        this.activeIndex = this.getIndexByValue(value);\r\n    };\r\n    DropDownList.prototype.activeItem = function (li) {\r\n        if (this.isValidLI(li) && !li.classList.contains(dropDownBaseClasses.selected)) {\r\n            this.removeSelection();\r\n            li.classList.add(dropDownBaseClasses.selected);\r\n            this.removeHover();\r\n            li.setAttribute('aria-selected', 'true');\r\n        }\r\n    };\r\n    DropDownList.prototype.setValue = function (e) {\r\n        var dataItem = this.getItemData();\r\n        if (dataItem.value === null) {\r\n            if (isBlazor() && dataItem.text !== null || dataItem.text !== '') {\r\n                Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\r\n            }\r\n            else {\r\n                Input.setValue(null, this.inputElement, this.floatLabelType, this.showClearButton);\r\n            }\r\n        }\r\n        else {\r\n            Input.setValue(dataItem.text, this.inputElement, this.floatLabelType, this.showClearButton);\r\n        }\r\n        if (this.isServerBlazor) {\r\n            // tslint:disable-next-line\r\n            this.interopAdaptor.invokeMethodAsync('OnServerValueTemplate', dataItem);\r\n        }\r\n        if (this.valueTemplate && this.itemData !== null && !this.isServerBlazor) {\r\n            this.DropDownBaseresetBlazorTemplates(false, false, false, false, true);\r\n            this.setValueTemplate();\r\n        }\r\n        else if (this.inputElement.previousSibling === this.valueTempElement) {\r\n            detach(this.valueTempElement);\r\n            this.inputElement.style.display = 'block';\r\n        }\r\n        if (this.previousValue === dataItem.value) {\r\n            this.isSelected = false;\r\n            return true;\r\n        }\r\n        else {\r\n            this.isSelected = !this.initial ? true : false;\r\n            this.isSelectCustom = false;\r\n            if (this.getModuleName() === 'dropdownlist') {\r\n                this.updateIconState();\r\n            }\r\n            return false;\r\n        }\r\n    };\r\n    DropDownList.prototype.setSelection = function (li, e) {\r\n        if (this.isValidLI(li) && (!li.classList.contains(dropDownBaseClasses.selected) || (this.isPopupOpen && this.isSelected\r\n            && li.classList.contains(dropDownBaseClasses.selected)))) {\r\n            this.updateSelectedItem(li, e, false, true);\r\n        }\r\n        else {\r\n            this.setSelectOptions(li, e);\r\n        }\r\n    };\r\n    DropDownList.prototype.setSelectOptions = function (li, e) {\r\n        if (this.list) {\r\n            this.removeHover();\r\n        }\r\n        this.previousSelectedLI = (!isNullOrUndefined(this.selectedLI)) ? this.selectedLI : null;\r\n        this.selectedLI = li;\r\n        if (this.setValue(e)) {\r\n            return;\r\n        }\r\n        if (this.isPopupOpen) {\r\n            attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\r\n            if (this.isFilterLayout() && this.filterInput) {\r\n                attributes(this.filterInput, { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\r\n            }\r\n        }\r\n        if ((!this.isPopupOpen && !isNullOrUndefined(li)) || (this.isPopupOpen && !isNullOrUndefined(e) &&\r\n            (e.type !== 'keydown' || e.type === 'keydown' && e.action === 'enter'))) {\r\n            this.isSelectCustom = false;\r\n            this.onChangeEvent(e);\r\n        }\r\n        if (this.isPopupOpen && !isNullOrUndefined(this.selectedLI) && this.itemData !== null && (!e || e.type !== 'click')) {\r\n            this.setScrollPosition(e);\r\n        }\r\n        if (Browser.info.name !== 'mozilla') {\r\n            attributes(this.inputElement, { 'aria-label': this.inputElement.value });\r\n            attributes(this.targetElement(), { 'aria-describedby': this.inputElement.id });\r\n            this.targetElement().removeAttribute('aria-live');\r\n        }\r\n    };\r\n    DropDownList.prototype.dropdownCompiler = function (dropdownTemplate) {\r\n        var checkTemplate = false;\r\n        if (dropdownTemplate) {\r\n            var exception = void 0;\r\n            try {\r\n                checkTemplate = (document.querySelectorAll(dropdownTemplate).length) ? true : false;\r\n            }\r\n            catch (exception) {\r\n                checkTemplate = false;\r\n            }\r\n        }\r\n        return checkTemplate;\r\n    };\r\n    DropDownList.prototype.setValueTemplate = function () {\r\n        var compiledString;\r\n        // tslint:disable-next-line\r\n        if (this.isReact) {\r\n            this.clearTemplate(['valueTemplate']);\r\n        }\r\n        if (!this.valueTempElement) {\r\n            this.valueTempElement = this.createElement('span', { className: dropDownListClasses.value });\r\n            this.inputElement.parentElement.insertBefore(this.valueTempElement, this.inputElement);\r\n            this.inputElement.style.display = 'none';\r\n        }\r\n        this.valueTempElement.innerHTML = '';\r\n        var templateData = (isBlazor()) ? JSON.parse(JSON.stringify(this.itemData)) : this.itemData;\r\n        var valuecheck = this.dropdownCompiler(this.valueTemplate);\r\n        if (valuecheck) {\r\n            compiledString = compile(document.querySelector(this.valueTemplate).innerHTML.trim());\r\n        }\r\n        else {\r\n            compiledString = compile(this.valueTemplate);\r\n        }\r\n        // tslint:disable-next-line\r\n        var valueCompTemp = compiledString(templateData, this, 'valueTemplate', this.valueTemplateId, this.isStringTemplate, null, this.valueTempElement);\r\n        if (valueCompTemp && valueCompTemp.length > 0) {\r\n            for (var i = 0; i < valueCompTemp.length; i++) {\r\n                this.valueTempElement.appendChild(valueCompTemp[i]);\r\n            }\r\n        }\r\n        this.renderReactTemplates();\r\n        this.DropDownBaseupdateBlazorTemplates(false, false, false, false, true, true, true);\r\n    };\r\n    DropDownList.prototype.removeSelection = function () {\r\n        if (this.list) {\r\n            var selectedItems = this.list.querySelectorAll('.' + dropDownBaseClasses.selected);\r\n            if (selectedItems.length) {\r\n                removeClass(selectedItems, dropDownBaseClasses.selected);\r\n                selectedItems[0].removeAttribute('aria-selected');\r\n            }\r\n        }\r\n    };\r\n    ;\r\n    DropDownList.prototype.getItemData = function () {\r\n        var fields = this.fields;\r\n        var dataItem = null;\r\n        dataItem = this.itemData;\r\n        var dataValue;\r\n        var dataText;\r\n        if (!isNullOrUndefined(dataItem)) {\r\n            dataValue = getValue(fields.value, dataItem);\r\n            dataText = getValue(fields.text, dataItem);\r\n        }\r\n        var value = (!isNullOrUndefined(dataItem) &&\r\n            !isUndefined(dataValue) ? dataValue : dataItem);\r\n        var text = (!isNullOrUndefined(dataItem) &&\r\n            !isUndefined(dataValue) ? dataText : dataItem);\r\n        return { value: value, text: text };\r\n    };\r\n    /**\r\n     * To trigger the change event for list.\r\n     */\r\n    DropDownList.prototype.onChangeEvent = function (eve) {\r\n        var dataItem = this.getItemData();\r\n        var index = this.isSelectCustom ? null : this.activeIndex;\r\n        this.setProperties({ 'index': index, 'text': dataItem.text, 'value': dataItem.value }, true);\r\n        this.detachChangeEvent(eve);\r\n    };\r\n    ;\r\n    DropDownList.prototype.detachChanges = function (value) {\r\n        var items;\r\n        if (typeof value === 'string' ||\r\n            typeof value === 'boolean' ||\r\n            typeof value === 'number') {\r\n            items = Object.defineProperties({}, {\r\n                value: {\r\n                    value: value,\r\n                    enumerable: true\r\n                },\r\n                text: {\r\n                    value: value,\r\n                    enumerable: true\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            items = value;\r\n        }\r\n        return items;\r\n    };\r\n    DropDownList.prototype.detachChangeEvent = function (eve) {\r\n        this.isSelected = false;\r\n        this.previousValue = this.value;\r\n        this.activeIndex = this.index;\r\n        this.typedString = !isNullOrUndefined(this.text) ? this.text : '';\r\n        if (!this.initial) {\r\n            var items = this.detachChanges(this.itemData);\r\n            var preItems = void 0;\r\n            if (typeof this.previousItemData === 'string' ||\r\n                typeof this.previousItemData === 'boolean' ||\r\n                typeof this.previousItemData === 'number') {\r\n                preItems = Object.defineProperties({}, {\r\n                    value: {\r\n                        value: this.previousItemData,\r\n                        enumerable: true\r\n                    },\r\n                    text: {\r\n                        value: this.previousItemData,\r\n                        enumerable: true\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                preItems = this.previousItemData;\r\n            }\r\n            this.setHiddenValue();\r\n            var eventArgs = {\r\n                e: eve,\r\n                item: this.item,\r\n                itemData: items,\r\n                previousItem: this.previousSelectedLI,\r\n                previousItemData: preItems,\r\n                isInteracted: eve ? true : false,\r\n                value: this.value,\r\n                element: this.element\r\n            };\r\n            if (this.isAngular && this.preventChange) {\r\n                this.preventChange = false;\r\n            }\r\n            else {\r\n                this.trigger('change', eventArgs);\r\n            }\r\n            if (this.isServerBlazor && this.enablePersistence) {\r\n                // tslint:disable-next-line\r\n                this.interopAdaptor.invokeMethodAsync('ServerChange');\r\n            }\r\n        }\r\n        if ((isNullOrUndefined(this.value) || this.value === '') && this.floatLabelType !== 'Always') {\r\n            removeClass([this.inputWrapper.container], 'e-valid-input');\r\n        }\r\n    };\r\n    DropDownList.prototype.setHiddenValue = function () {\r\n        if (!isNullOrUndefined(this.value)) {\r\n            if (this.isServerBlazor && this.hiddenElement.querySelector('option')) {\r\n                var selectedElement = this.hiddenElement.querySelector('option');\r\n                selectedElement.textContent = this.text;\r\n                selectedElement.setAttribute('value', this.value.toString());\r\n            }\r\n            else if (!this.isServerBlazor) {\r\n                this.hiddenElement.innerHTML = '<option selected>' + this.text + '</option>';\r\n                var selectedElement = this.hiddenElement.querySelector('option');\r\n                selectedElement.setAttribute('value', this.value.toString());\r\n            }\r\n        }\r\n        else if (!this.isServerBlazor) {\r\n            this.hiddenElement.innerHTML = '';\r\n        }\r\n    };\r\n    /**\r\n     * Filter bar implementation\r\n     */\r\n    DropDownList.prototype.onFilterUp = function (e) {\r\n        if (!(e.ctrlKey && e.keyCode === 86) && (this.isValidKey || e.keyCode === 40 || e.keyCode === 38)) {\r\n            this.isValidKey = false;\r\n            switch (e.keyCode) {\r\n                case 38: //up arrow \r\n                case 40: //down arrow \r\n                    if (this.getModuleName() === 'autocomplete' && !this.isPopupOpen && !this.preventAltUp && !this.isRequested) {\r\n                        this.preventAutoFill = true;\r\n                        this.searchLists(e);\r\n                    }\r\n                    else {\r\n                        this.preventAutoFill = false;\r\n                    }\r\n                    this.preventAltUp = false;\r\n                    e.preventDefault();\r\n                    break;\r\n                case 46: //delete\r\n                case 8: //backspace\r\n                    this.typedString = this.filterInput.value;\r\n                    if (!this.isPopupOpen && this.typedString !== '' || this.isPopupOpen && this.queryString.length > 0) {\r\n                        this.preventAutoFill = true;\r\n                        this.searchLists(e);\r\n                    }\r\n                    else if (this.typedString === '' && this.queryString === '' && this.getModuleName() !== 'autocomplete') {\r\n                        this.preventAutoFill = true;\r\n                        this.searchLists(e);\r\n                    }\r\n                    else if (this.typedString === '') {\r\n                        if (this.list) {\r\n                            this.resetFocusElement();\r\n                        }\r\n                        this.activeIndex = null;\r\n                        if (this.getModuleName() === 'autocomplete') {\r\n                            this.hidePopup();\r\n                        }\r\n                    }\r\n                    e.preventDefault();\r\n                    break;\r\n                default:\r\n                    this.typedString = this.filterInput.value;\r\n                    this.preventAutoFill = false;\r\n                    this.searchLists(e);\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            this.isValidKey = false;\r\n        }\r\n    };\r\n    DropDownList.prototype.onFilterDown = function (e) {\r\n        switch (e.keyCode) {\r\n            case 13: //enter\r\n                break;\r\n            case 40: //down arrow\r\n            case 38: //up arrow \r\n                this.queryString = this.filterInput.value;\r\n                e.preventDefault();\r\n                break;\r\n            case 9: //tab \r\n                if (this.isPopupOpen && this.getModuleName() !== 'autocomplete') {\r\n                    e.preventDefault();\r\n                }\r\n                break;\r\n            default:\r\n                this.prevSelectPoints = this.getSelectionPoints();\r\n                this.queryString = this.filterInput.value;\r\n                break;\r\n        }\r\n    };\r\n    DropDownList.prototype.removeFillSelection = function () {\r\n        if (this.isInteracted) {\r\n            var selection = this.getSelectionPoints();\r\n            this.inputElement.setSelectionRange(selection.end, selection.end);\r\n        }\r\n    };\r\n    DropDownList.prototype.getQuery = function (query) {\r\n        var filterQuery;\r\n        if (!this.isCustomFilter && this.allowFiltering && this.filterInput) {\r\n            filterQuery = query ? query.clone() : this.query ? this.query.clone() : new Query();\r\n            var filterType = this.typedString === '' ? 'contains' : this.filterType;\r\n            var dataType = this.typeOfData(this.dataSource).typeof;\r\n            if (!(this.dataSource instanceof DataManager) && dataType === 'string' || dataType === 'number') {\r\n                filterQuery.where('', filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\r\n            }\r\n            else {\r\n                var fields = (this.fields.text) ? this.fields.text : '';\r\n                filterQuery.where(fields, filterType, this.typedString, this.ignoreCase, this.ignoreAccent);\r\n            }\r\n        }\r\n        else {\r\n            filterQuery = query ? query : this.query ? this.query : new Query();\r\n        }\r\n        return filterQuery;\r\n    };\r\n    DropDownList.prototype.getSelectionPoints = function () {\r\n        var input = this.inputElement;\r\n        return { start: Math.abs(input.selectionStart), end: Math.abs(input.selectionEnd) };\r\n    };\r\n    DropDownList.prototype.searchLists = function (e) {\r\n        var _this = this;\r\n        this.isTyped = true;\r\n        this.activeIndex = null;\r\n        this.isListSearched = true;\r\n        if (this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon)) {\r\n            var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\r\n            clearElement.style.visibility = this.filterInput.value === '' ? 'hidden' : 'visible';\r\n        }\r\n        this.isDataFetched = false;\r\n        if (this.isFiltering()) {\r\n            if (this.isServerBlazor) {\r\n                this.beforePopupOpen = (this.getModuleName() === 'combobox' && this.isFiltering() && !this.beforePopupOpen)\r\n                    ? !this.beforePopupOpen : this.beforePopupOpen;\r\n                if (this.filterInput.value === '' && this.getModuleName() !== 'dropdownlist') {\r\n                    // tslint:disable-next-line\r\n                    this.interopAdaptor.invokeMethodAsync('OnServerRenderList', this.beforePopupOpen, false);\r\n                }\r\n                else {\r\n                    // tslint:disable-next-line\r\n                    this.interopAdaptor.invokeMethodAsync('OnServerFilter', this.filterInput.value);\r\n                }\r\n            }\r\n            else {\r\n                var eventArgs_1 = {\r\n                    preventDefaultAction: false,\r\n                    text: this.filterInput.value,\r\n                    updateData: function (dataSource, query, fields) {\r\n                        if (eventArgs_1.cancel) {\r\n                            return;\r\n                        }\r\n                        _this.isCustomFilter = true;\r\n                        _this.filteringAction(dataSource, query, fields);\r\n                    },\r\n                    baseEventArgs: e,\r\n                    cancel: false\r\n                };\r\n                this.trigger('filtering', eventArgs_1, function (eventArgs) {\r\n                    if (!eventArgs.cancel && !_this.isCustomFilter && !eventArgs.preventDefaultAction) {\r\n                        _this.filteringAction(_this.dataSource, null, _this.fields);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * To filter the data from given data source by using query\r\n     * @param  {Object[] | DataManager } dataSource - Set the data source to filter.\r\n     * @param  {Query} query - Specify the query to filter the data.\r\n     * @param  {FieldSettingsModel} fields - Specify the fields to map the column in the data table.\r\n     * @return {void}.\r\n\r\n     */\r\n    DropDownList.prototype.filter = function (dataSource, query, fields) {\r\n        this.isCustomFilter = true;\r\n        this.filteringAction(dataSource, query, fields);\r\n    };\r\n    DropDownList.prototype.filteringAction = function (dataSource, query, fields) {\r\n        if (!isNullOrUndefined(this.filterInput)) {\r\n            this.beforePopupOpen = true;\r\n            if (this.filterInput.value.trim() === '' && !this.itemTemplate) {\r\n                this.actionCompleteData.isUpdated = false;\r\n                this.isTyped = false;\r\n                if (!isNullOrUndefined(this.actionCompleteData.ulElement) && !isNullOrUndefined(this.actionCompleteData.list)) {\r\n                    this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list);\r\n                }\r\n                this.isTyped = true;\r\n                if (!isNullOrUndefined(this.itemData) && this.getModuleName() === 'dropdownlist') {\r\n                    this.focusIndexItem();\r\n                    this.setScrollPosition();\r\n                }\r\n                this.isNotSearchList = true;\r\n            }\r\n            else {\r\n                this.isNotSearchList = false;\r\n                query = (this.filterInput.value.trim() === '') ? null : query;\r\n                this.resetList(dataSource, fields, query);\r\n            }\r\n            this.renderReactTemplates();\r\n        }\r\n    };\r\n    DropDownList.prototype.setSearchBox = function (popupElement) {\r\n        if (this.isFiltering()) {\r\n            var parentElement = popupElement.querySelector('.' + dropDownListClasses.filterParent) ?\r\n                popupElement.querySelector('.' + dropDownListClasses.filterParent) : this.createElement('span', {\r\n                className: dropDownListClasses.filterParent\r\n            });\r\n            if (this.isServerBlazor) {\r\n                parentElement.innerHTML = '';\r\n            }\r\n            this.filterInput = this.createElement('input', {\r\n                attrs: { type: 'text' },\r\n                className: dropDownListClasses.filterInput\r\n            });\r\n            this.element.parentNode.insertBefore(this.filterInput, this.element);\r\n            var backIcon = false;\r\n            if (Browser.isDevice) {\r\n                backIcon = true;\r\n            }\r\n            this.filterInputObj = Input.createInput({\r\n                element: this.filterInput,\r\n                buttons: backIcon ?\r\n                    [dropDownListClasses.backIcon, dropDownListClasses.filterBarClearIcon] : [dropDownListClasses.filterBarClearIcon],\r\n                properties: { placeholder: this.filterBarPlaceholder }\r\n            }, this.createElement);\r\n            if (!isNullOrUndefined(this.cssClass)) {\r\n                if (this.cssClass.split(' ').indexOf('e-outline') !== -1) {\r\n                    addClass([this.filterInputObj.container], 'e-outline');\r\n                }\r\n                else if (this.cssClass.split(' ').indexOf('e-filled') !== -1) {\r\n                    addClass([this.filterInputObj.container], 'e-filled');\r\n                }\r\n            }\r\n            append([this.filterInputObj.container], parentElement);\r\n            prepend([parentElement], popupElement);\r\n            attributes(this.filterInput, {\r\n                'aria-disabled': 'false',\r\n                'aria-owns': this.element.id + '_options',\r\n                'role': 'listbox',\r\n                'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null,\r\n                'autocomplete': 'off',\r\n                'autocorrect': 'off',\r\n                'autocapitalize': 'off',\r\n                'spellcheck': 'false'\r\n            });\r\n            this.clearIconElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\r\n            if (!Browser.isDevice && this.clearIconElement) {\r\n                EventHandler.add(this.clearIconElement, 'click', this.clearText, this);\r\n                this.clearIconElement.style.visibility = 'hidden';\r\n            }\r\n            if (!Browser.isDevice) {\r\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\r\n                    keyAction: this.keyActionHandler.bind(this),\r\n                    keyConfigs: this.keyConfigure,\r\n                    eventName: 'keydown'\r\n                });\r\n            }\r\n            else {\r\n                this.searchKeyModule = new KeyboardEvents(this.filterInput, {\r\n                    keyAction: this.mobileKeyActionHandler.bind(this),\r\n                    keyConfigs: this.keyConfigure,\r\n                    eventName: 'keydown'\r\n                });\r\n            }\r\n            EventHandler.add(this.filterInput, 'input', this.onInput, this);\r\n            EventHandler.add(this.filterInput, 'keyup', this.onFilterUp, this);\r\n            EventHandler.add(this.filterInput, 'keydown', this.onFilterDown, this);\r\n            EventHandler.add(this.filterInput, 'blur', this.onBlur, this);\r\n            EventHandler.add(this.filterInput, 'paste', this.pasteHandler, this);\r\n            return this.filterInputObj;\r\n        }\r\n        else {\r\n            return inputObject;\r\n        }\r\n    };\r\n    ;\r\n    DropDownList.prototype.onInput = function (e) {\r\n        this.isValidKey = true;\r\n        // For filtering works in mobile firefox.\r\n        if (Browser.isDevice && Browser.info.name === 'mozilla') {\r\n            this.typedString = this.filterInput.value;\r\n            this.preventAutoFill = true;\r\n            this.searchLists(e);\r\n        }\r\n    };\r\n    DropDownList.prototype.pasteHandler = function (e) {\r\n        var _this = this;\r\n        setTimeout(function () {\r\n            _this.typedString = _this.filterInput.value;\r\n            _this.searchLists(e);\r\n        });\r\n    };\r\n    DropDownList.prototype.onActionFailure = function (e) {\r\n        _super.prototype.onActionFailure.call(this, e);\r\n        if (this.beforePopupOpen) {\r\n            this.renderPopup();\r\n        }\r\n    };\r\n    DropDownList.prototype.onActionComplete = function (ulElement, list, e, isUpdated) {\r\n        var _this = this;\r\n        if (this.isNotSearchList) {\r\n            this.isNotSearchList = false;\r\n            return;\r\n        }\r\n        if (this.isActive) {\r\n            var selectedItem = this.selectedLI ? this.selectedLI.cloneNode(true) : null;\r\n            _super.prototype.onActionComplete.call(this, ulElement, list, e);\r\n            this.updateSelectElementData(this.allowFiltering);\r\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent) && this.searchKeyEvent.type === 'keydown') {\r\n                this.isRequested = false;\r\n                this.keyActionHandler(this.searchKeyEvent);\r\n                this.searchKeyEvent = null;\r\n            }\r\n            if (this.isRequested && !isNullOrUndefined(this.searchKeyEvent)) {\r\n                this.incrementalSearch(this.searchKeyEvent);\r\n                this.searchKeyEvent = null;\r\n            }\r\n            this.list.scrollTop = 0;\r\n            if (!isNullOrUndefined(ulElement)) {\r\n                attributes(ulElement, { 'id': this.element.id + '_options', 'role': 'listbox', 'aria-hidden': 'false' });\r\n            }\r\n            if (this.initRemoteRender) {\r\n                this.initial = true;\r\n                this.activeIndex = this.index;\r\n                this.updateValues();\r\n                this.initRemoteRender = false;\r\n                this.initial = false;\r\n                if (this.value && this.dataSource instanceof DataManager) {\r\n                    var checkField_1 = isNullOrUndefined(this.fields.value) ? this.fields.text : this.fields.value;\r\n                    var checkVal = list.some(function (x) { return x[checkField_1] === _this.value; });\r\n                    if (!checkVal) {\r\n                        this.dataSource.executeQuery(this.getQuery(this.query).where(new Predicate(checkField_1, 'equal', this.value)))\r\n                            .then(function (e) {\r\n                            if (e.result.length > 0) {\r\n                                _this.addItem(e.result, list.length);\r\n                                _this.updateValues();\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            }\r\n            if (this.getModuleName() !== 'autocomplete' && this.isFiltering() && !this.isTyped) {\r\n                if (!this.actionCompleteData.isUpdated || ((!this.isCustomFilter\r\n                    && !this.isFilterFocus) || (isNullOrUndefined(this.itemData) && this.allowFiltering)\r\n                    && ((this.dataSource instanceof DataManager)\r\n                        || (!isNullOrUndefined(this.dataSource) && !isNullOrUndefined(this.dataSource.length) &&\r\n                            this.dataSource.length !== 0)))) {\r\n                    if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\r\n                        setTimeout(function () {\r\n                            _this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\r\n                        }, 0);\r\n                    }\r\n                    else {\r\n                        this.actionCompleteData = { ulElement: ulElement.cloneNode(true), list: list, isUpdated: true };\r\n                    }\r\n                }\r\n                this.addNewItem(list, selectedItem);\r\n                if (!isNullOrUndefined(this.itemData)) {\r\n                    this.focusIndexItem();\r\n                }\r\n            }\r\n            if (this.beforePopupOpen) {\r\n                this.renderPopup();\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.addNewItem = function (listData, newElement) {\r\n        var _this = this;\r\n        if (!isNullOrUndefined(this.itemData) && !isNullOrUndefined(newElement)) {\r\n            var value_1 = this.getItemData().value;\r\n            var isExist = listData.some(function (data) {\r\n                return (((typeof data === 'string' || typeof data === 'number') && data === value_1) ||\r\n                    (getValue(_this.fields.value, data) === value_1));\r\n            });\r\n            if (!isExist) {\r\n                this.addItem(this.itemData);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.updateActionCompleteData = function (li, item, index) {\r\n        var _this = this;\r\n        if (this.getModuleName() !== 'autocomplete' && this.actionCompleteData.ulElement) {\r\n            if (this.itemTemplate && this.element.tagName === 'EJS-COMBOBOX' && this.allowFiltering) {\r\n                setTimeout(function () {\r\n                    _this.actionCompleteDataUpdate(li, item, index);\r\n                }, 0);\r\n            }\r\n            else {\r\n                this.actionCompleteDataUpdate(li, item, index);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.actionCompleteDataUpdate = function (li, item, index) {\r\n        if (index != null) {\r\n            this.actionCompleteData.ulElement.insertBefore(li.cloneNode(true), this.actionCompleteData.ulElement.childNodes[index]);\r\n        }\r\n        else {\r\n            this.actionCompleteData.ulElement.appendChild(li.cloneNode(true));\r\n        }\r\n        if (this.isFiltering() && this.actionCompleteData.list.indexOf(item) < 0) {\r\n            this.actionCompleteData.list.push(item);\r\n        }\r\n    };\r\n    DropDownList.prototype.focusIndexItem = function () {\r\n        var value = this.getItemData().value;\r\n        this.activeIndex = this.getIndexByValue(value);\r\n        var element = this.findListElement(this.list, 'li', 'data-value', value);\r\n        this.selectedLI = element;\r\n        this.activeItem(element);\r\n        this.removeFocus();\r\n    };\r\n    DropDownList.prototype.updateSelection = function () {\r\n        var selectedItem = this.list.querySelector('.' + dropDownBaseClasses.selected);\r\n        if (selectedItem) {\r\n            this.setProperties({ 'index': this.getIndexByValue(selectedItem.getAttribute('data-value')) });\r\n            this.activeIndex = this.index;\r\n        }\r\n        else {\r\n            this.removeFocus();\r\n            this.list.querySelector('.' + dropDownBaseClasses.li).classList.add(dropDownListClasses.focus);\r\n        }\r\n    };\r\n    DropDownList.prototype.removeFocus = function () {\r\n        var highlightedItem = this.list.querySelectorAll('.' + dropDownListClasses.focus);\r\n        if (highlightedItem && highlightedItem.length) {\r\n            removeClass(highlightedItem, dropDownListClasses.focus);\r\n        }\r\n    };\r\n    ;\r\n    DropDownList.prototype.renderPopup = function () {\r\n        var _this = this;\r\n        if (this.popupObj && document.body.contains(this.popupObj.element)) {\r\n            this.refreshPopup();\r\n            return;\r\n        }\r\n        var args = { cancel: false };\r\n        this.trigger('beforeOpen', args, function (args) {\r\n            if (!args.cancel) {\r\n                var popupEle = (_this.serverPopupEle) ? _this.serverPopupEle : _this.createElement('div', {\r\n                    id: _this.element.id + '_popup', className: 'e-ddl e-popup ' + (_this.cssClass != null ? _this.cssClass : '')\r\n                });\r\n                var searchBox = _this.setSearchBox(popupEle);\r\n                _this.listHeight = formatUnit(_this.popupHeight);\r\n                if (_this.headerTemplate && !_this.isServerBlazor) {\r\n                    _this.setHeaderTemplate(popupEle);\r\n                }\r\n                append([_this.list], popupEle);\r\n                if (_this.footerTemplate && !_this.isServerBlazor) {\r\n                    _this.setFooterTemplate(popupEle);\r\n                }\r\n                if (_this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-footer')) {\r\n                    popupEle.appendChild(popupEle.querySelector('.e-ddl-footer'));\r\n                }\r\n                document.body.appendChild(popupEle);\r\n                _this.updateServerPopup(popupEle);\r\n                popupEle.style.visibility = 'hidden';\r\n                if (_this.popupHeight !== 'auto') {\r\n                    _this.searchBoxHeight = 0;\r\n                    if (!isNullOrUndefined(searchBox.container)) {\r\n                        _this.searchBoxHeight = (searchBox.container.parentElement).getBoundingClientRect().height;\r\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (_this.searchBoxHeight)).toString() + 'px';\r\n                    }\r\n                    if (_this.headerTemplate || (_this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-header'))) {\r\n                        _this.header = _this.header ? _this.header : popupEle.querySelector('.e-ddl-header');\r\n                        var height = Math.round(_this.header.getBoundingClientRect().height);\r\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\r\n                    }\r\n                    if (_this.footerTemplate || (_this.isServerRendered && popupEle && popupEle.querySelector('.e-ddl-footer'))) {\r\n                        _this.footer = _this.footer ? _this.footer : popupEle.querySelector('.e-ddl-footer');\r\n                        var height = Math.round(_this.footer.getBoundingClientRect().height);\r\n                        _this.listHeight = (parseInt(_this.listHeight, 10) - (height + _this.searchBoxHeight)).toString() + 'px';\r\n                    }\r\n                    _this.list.style.maxHeight = (parseInt(_this.listHeight, 10) - 2).toString() + 'px'; // due to box-sizing property\r\n                    popupEle.style.maxHeight = formatUnit(_this.popupHeight);\r\n                }\r\n                else {\r\n                    popupEle.style.height = 'auto';\r\n                }\r\n                var offsetValue = 0;\r\n                var left = void 0;\r\n                if (!isNullOrUndefined(_this.selectedLI) && (!isNullOrUndefined(_this.activeIndex) && _this.activeIndex >= 0)) {\r\n                    _this.setScrollPosition();\r\n                }\r\n                else {\r\n                    _this.list.scrollTop = 0;\r\n                }\r\n                if (Browser.isDevice && (!_this.allowFiltering && (_this.getModuleName() === 'dropdownlist' ||\r\n                    (_this.isDropDownClick && _this.getModuleName() === 'combobox')))) {\r\n                    offsetValue = _this.getOffsetValue(popupEle);\r\n                    var firstItem = _this.isEmptyList() ? _this.list : _this.liCollections[0];\r\n                    left = -(parseInt(getComputedStyle(firstItem).textIndent, 10) -\r\n                        parseInt(getComputedStyle(_this.inputElement).paddingLeft, 10) +\r\n                        parseInt(getComputedStyle(_this.inputElement.parentElement).borderLeftWidth, 10));\r\n                }\r\n                _this.getFocusElement();\r\n                _this.createPopup(popupEle, offsetValue, left);\r\n                _this.checkCollision(popupEle);\r\n                if (Browser.isDevice) {\r\n                    _this.popupObj.element.classList.add(dropDownListClasses.device);\r\n                    if (_this.getModuleName() === 'dropdownlist' || (_this.getModuleName() === 'combobox'\r\n                        && !_this.allowFiltering && _this.isDropDownClick)) {\r\n                        _this.popupObj.collision = { X: 'fit', Y: 'fit' };\r\n                    }\r\n                    if (_this.isFilterLayout()) {\r\n                        _this.popupObj.element.classList.add(dropDownListClasses.mobileFilter);\r\n                        _this.popupObj.position = { X: 0, Y: 0 };\r\n                        _this.popupObj.dataBind();\r\n                        attributes(_this.popupObj.element, { style: 'left:0px;right:0px;top:0px;bottom:0px;' });\r\n                        addClass([document.body, _this.popupObj.element], dropDownListClasses.popupFullScreen);\r\n                        _this.setSearchBoxPosition();\r\n                        _this.backIconElement = searchBox.container.querySelector('.e-back-icon');\r\n                        _this.clearIconElement = searchBox.container.querySelector('.' + dropDownListClasses.clearIcon);\r\n                        EventHandler.add(_this.backIconElement, 'click', _this.clickOnBackIcon, _this);\r\n                        EventHandler.add(_this.clearIconElement, 'click', _this.clearText, _this);\r\n                    }\r\n                }\r\n                popupEle.style.visibility = 'visible';\r\n                addClass([popupEle], 'e-popup-close');\r\n                var scrollParentElements = _this.popupObj.getScrollableParent(_this.inputWrapper.container);\r\n                for (var _i = 0, scrollParentElements_1 = scrollParentElements; _i < scrollParentElements_1.length; _i++) {\r\n                    var element = scrollParentElements_1[_i];\r\n                    EventHandler.add(element, 'scroll', _this.scrollHandler, _this);\r\n                }\r\n                if (Browser.isDevice && _this.isFilterLayout()) {\r\n                    EventHandler.add(_this.list, 'scroll', _this.listScroll, _this);\r\n                }\r\n                if (!isNullOrUndefined(_this.list)) {\r\n                    _this.unWireListEvents();\r\n                    _this.wireListEvents();\r\n                }\r\n                attributes(_this.targetElement(), { 'aria-expanded': 'true' });\r\n                var inputParent = _this.isFiltering() ? _this.filterInput.parentElement : _this.inputWrapper.container;\r\n                addClass([inputParent], [dropDownListClasses.inputFocus]);\r\n                var animModel = { name: 'FadeIn', duration: 100 };\r\n                _this.beforePopupOpen = true;\r\n                var popupInstance = (isBlazor() && _this.isServerRendered) ? null : _this.popupObj;\r\n                var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\r\n                _this.trigger('open', eventArgs, function (eventArgs) {\r\n                    if (!eventArgs.cancel) {\r\n                        _this.serverBlazorUpdateSelection();\r\n                        _this.bindServerScrollEvent();\r\n                        addClass([_this.inputWrapper.container], [dropDownListClasses.iconAnimation]);\r\n                        _this.renderReactTemplates();\r\n                        _this.popupObj.show(new Animation(eventArgs.animation), (_this.zIndex === 1000) ? _this.element : null);\r\n                    }\r\n                    else {\r\n                        _this.beforePopupOpen = false;\r\n                        _this.destroyPopup();\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                _this.beforePopupOpen = false;\r\n            }\r\n        });\r\n    };\r\n    DropDownList.prototype.checkCollision = function (popupEle) {\r\n        if (!Browser.isDevice || (Browser.isDevice && !(this.getModuleName() === 'dropdownlist' || this.isDropDownClick))) {\r\n            var collision = isCollide(popupEle);\r\n            if (collision.length > 0) {\r\n                popupEle.style.marginTop = -parseInt(getComputedStyle(popupEle).marginTop, 10) + 'px';\r\n            }\r\n            this.popupObj.resolveCollision();\r\n        }\r\n    };\r\n    DropDownList.prototype.serverBlazorUpdateSelection = function () {\r\n        if (this.isServerBlazor && (this.value !== null || this.index !== null || this.text !== null) ||\r\n            (this.getModuleName() !== 'dropdownlist' && !this.isTyped)) {\r\n            if (this.getModuleName() === 'dropdownlist') {\r\n                this.removeSelection();\r\n                this.removeFocus();\r\n                this.removeHover();\r\n                this.updateValues();\r\n            }\r\n            if (this.getModuleName() === 'combobox' && this.ulElement &&\r\n                this.findListElement(this.ulElement, 'li', 'data-value', this.value) && !this.isTyped) {\r\n                this.updateValues();\r\n            }\r\n            if (this.isServerBlazor && this.getModuleName() !== 'dropdownlist' &&\r\n                (this.text === '' || this.text === null) && this.ulElement) {\r\n                if (!this.ulElement.querySelector('li').classList.contains(dropDownBaseClasses.hover)) {\r\n                    addClass([this.ulElement.querySelector('li')], dropDownBaseClasses.hover);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.bindServerScrollEvent = function () {\r\n        if (this.isServerBlazor && this.list) {\r\n            if ((this.fields.groupBy) && !this.isGroupChecking) {\r\n                EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\r\n                EventHandler.add(this.list, 'scroll', this.setFloatingHeader, this);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.updateServerPopup = function (popupEle) {\r\n        if (this.isServerBlazor) {\r\n            if (popupEle && popupEle.querySelector('li')) {\r\n                removeClass([popupEle.querySelector('.e-content')], ['e-nodata']);\r\n            }\r\n            this.initial = false;\r\n            popupEle.removeAttribute('style');\r\n        }\r\n    };\r\n    DropDownList.prototype.getOffsetValue = function (popupEle) {\r\n        var popupStyles = getComputedStyle(popupEle);\r\n        var borderTop = parseInt(popupStyles.borderTopWidth, 10);\r\n        var borderBottom = parseInt(popupStyles.borderBottomWidth, 10);\r\n        return this.setPopupPosition(borderTop + borderBottom);\r\n    };\r\n    DropDownList.prototype.createPopup = function (element, offsetValue, left) {\r\n        var _this = this;\r\n        this.popupObj = new Popup(element, {\r\n            width: this.setWidth(), targetType: 'relative',\r\n            relateTo: this.inputWrapper.container, collision: { X: 'flip', Y: 'flip' }, offsetY: offsetValue,\r\n            enableRtl: this.enableRtl, offsetX: left, position: { X: 'left', Y: 'bottom' },\r\n            zIndex: this.zIndex,\r\n            close: function () {\r\n                if (!_this.isDocumentClick) {\r\n                    _this.focusDropDown();\r\n                }\r\n                // tslint:disable-next-line\r\n                if (_this.isReact) {\r\n                    _this.clearTemplate(['headerTemplate', 'footerTemplate']);\r\n                }\r\n                var isResetItem = (_this.getModuleName() === 'autocomplete') ? true : false;\r\n                _this.DropDownBaseresetBlazorTemplates(isResetItem, isResetItem, true, true, false, true, true);\r\n                _this.isNotSearchList = false;\r\n                _this.isDocumentClick = false;\r\n                _this.destroyPopup();\r\n                var formElement = closest(_this.inputElement, 'form');\r\n                if (_this.isFiltering() && _this.actionCompleteData.list && _this.actionCompleteData.list[0]) {\r\n                    _this.isActive = true;\r\n                    _this.onActionComplete(_this.actionCompleteData.ulElement, _this.actionCompleteData.list, null, true);\r\n                }\r\n            },\r\n            open: function () {\r\n                EventHandler.add(document, 'mousedown', _this.onDocumentClick, _this);\r\n                _this.isPopupOpen = true;\r\n                var actionList = _this.actionCompleteData && _this.actionCompleteData.ulElement &&\r\n                    _this.actionCompleteData.ulElement.querySelector('li');\r\n                var ulElement = _this.list.querySelector('ul li');\r\n                if (_this.isFiltering() && _this.itemTemplate && (_this.element.tagName === _this.getNgDirective()) &&\r\n                    (actionList && ulElement && actionList.textContent !== ulElement.textContent) &&\r\n                    _this.element.tagName !== 'EJS-COMBOBOX') {\r\n                    _this.cloneElements();\r\n                }\r\n                if (_this.isFilterLayout()) {\r\n                    removeClass([_this.inputWrapper.container], [dropDownListClasses.inputFocus]);\r\n                    _this.isFilterFocus = true;\r\n                    _this.filterInput.focus();\r\n                    if (_this.inputWrapper.clearButton) {\r\n                        addClass([_this.inputWrapper.clearButton], dropDownListClasses.clearIconHide);\r\n                    }\r\n                }\r\n                _this.activeStateChange();\r\n            },\r\n            targetExitViewport: function () {\r\n                if (!Browser.isDevice) {\r\n                    _this.hidePopup();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    DropDownList.prototype.isEmptyList = function () {\r\n        return !isNullOrUndefined(this.liCollections) && this.liCollections.length === 0;\r\n    };\r\n    DropDownList.prototype.getFocusElement = function () {\r\n        // combo-box used this method\r\n    };\r\n    DropDownList.prototype.isFilterLayout = function () {\r\n        return this.getModuleName() === 'dropdownlist' && this.allowFiltering;\r\n    };\r\n    DropDownList.prototype.scrollHandler = function () {\r\n        if (Browser.isDevice && ((this.getModuleName() === 'dropdownlist' &&\r\n            !this.isFilterLayout()) || (this.getModuleName() === 'combobox' && !this.allowFiltering && this.isDropDownClick))) {\r\n            this.hidePopup();\r\n        }\r\n    };\r\n    DropDownList.prototype.setSearchBoxPosition = function () {\r\n        var searchBoxHeight = this.filterInput.parentElement.getBoundingClientRect().height;\r\n        this.popupObj.element.style.maxHeight = '100%';\r\n        this.popupObj.element.style.width = '100%';\r\n        this.list.style.maxHeight = (window.innerHeight - searchBoxHeight) + 'px';\r\n        this.list.style.height = (window.innerHeight - searchBoxHeight) + 'px';\r\n        var clearElement = this.filterInput.parentElement.querySelector('.' + dropDownListClasses.clearIcon);\r\n        detach(this.filterInput);\r\n        clearElement.parentElement.insertBefore(this.filterInput, clearElement);\r\n    };\r\n    DropDownList.prototype.setPopupPosition = function (border) {\r\n        var offsetValue;\r\n        var popupOffset = border;\r\n        var selectedLI = this.list.querySelector('.' + dropDownListClasses.focus) || this.selectedLI;\r\n        var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\r\n        var lastItem = this.isEmptyList() ? this.list : this.liCollections[this.getItems().length - 1];\r\n        var liHeight = firstItem.getBoundingClientRect().height;\r\n        var listHeight = this.list.offsetHeight / 2;\r\n        var height = isNullOrUndefined(selectedLI) ? firstItem.offsetTop : selectedLI.offsetTop;\r\n        var lastItemOffsetValue = lastItem.offsetTop;\r\n        if (lastItemOffsetValue - listHeight < height && !isNullOrUndefined(this.liCollections) &&\r\n            this.liCollections.length > 0 && !isNullOrUndefined(selectedLI)) {\r\n            var count = this.list.offsetHeight / liHeight;\r\n            var paddingBottom = parseInt(getComputedStyle(this.list).paddingBottom, 10);\r\n            offsetValue = (count - (this.liCollections.length - this.activeIndex)) * liHeight - popupOffset + paddingBottom;\r\n            this.list.scrollTop = selectedLI.offsetTop;\r\n        }\r\n        else if (height > listHeight) {\r\n            offsetValue = listHeight - liHeight / 2;\r\n            this.list.scrollTop = height - listHeight + liHeight / 2;\r\n        }\r\n        else {\r\n            offsetValue = height;\r\n        }\r\n        var inputHeight = this.inputWrapper.container.offsetHeight;\r\n        offsetValue = offsetValue + liHeight + popupOffset - ((liHeight - inputHeight) / 2);\r\n        return -offsetValue;\r\n    };\r\n    DropDownList.prototype.setWidth = function () {\r\n        var width = formatUnit(this.popupWidth);\r\n        if (width.indexOf('%') > -1) {\r\n            var inputWidth = this.inputWrapper.container.offsetWidth * parseFloat(width) / 100;\r\n            width = inputWidth.toString() + 'px';\r\n        }\r\n        if (Browser.isDevice && (!this.allowFiltering && (this.getModuleName() === 'dropdownlist' ||\r\n            (this.isDropDownClick && this.getModuleName() === 'combobox')))) {\r\n            var firstItem = this.isEmptyList() ? this.list : this.liCollections[0];\r\n            width = (parseInt(width, 10) + (parseInt(getComputedStyle(firstItem).textIndent, 10) -\r\n                parseInt(getComputedStyle(this.inputElement).paddingLeft, 10) +\r\n                parseInt(getComputedStyle(this.inputElement.parentElement).borderLeftWidth, 10)) * 2) + 'px';\r\n        }\r\n        return width;\r\n    };\r\n    DropDownList.prototype.scrollBottom = function (isInitial) {\r\n        if (!isNullOrUndefined(this.selectedLI)) {\r\n            var currentOffset = this.list.offsetHeight;\r\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\r\n            var nextOffset = this.list.scrollTop + nextBottom - currentOffset;\r\n            nextOffset = isInitial ? nextOffset + parseInt(getComputedStyle(this.list).paddingTop, 10) * 2 : nextOffset;\r\n            var boxRange = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\r\n            boxRange = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\r\n                boxRange - this.fixedHeaderElement.offsetHeight : boxRange;\r\n            if (this.activeIndex === 0) {\r\n                this.list.scrollTop = 0;\r\n            }\r\n            else if (nextBottom > currentOffset || !(boxRange > 0 && this.list.offsetHeight > boxRange)) {\r\n                this.list.scrollTop = nextOffset;\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.scrollTop = function () {\r\n        if (!isNullOrUndefined(this.selectedLI)) {\r\n            var nextOffset = this.selectedLI.offsetTop - this.list.scrollTop;\r\n            var nextBottom = this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop;\r\n            nextOffset = this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\r\n                nextOffset - this.fixedHeaderElement.offsetHeight : nextOffset;\r\n            var boxRange = (this.selectedLI.offsetTop + this.selectedLI.offsetHeight - this.list.scrollTop);\r\n            if (this.activeIndex === 0) {\r\n                this.list.scrollTop = 0;\r\n            }\r\n            else if (nextOffset < 0) {\r\n                this.list.scrollTop = this.list.scrollTop + nextOffset;\r\n            }\r\n            else if (!(boxRange > 0 && this.list.offsetHeight > boxRange)) {\r\n                this.list.scrollTop = this.selectedLI.offsetTop - (this.fields.groupBy && !isNullOrUndefined(this.fixedHeaderElement) ?\r\n                    this.fixedHeaderElement.offsetHeight : 0);\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.isEditTextBox = function () {\r\n        return false;\r\n    };\r\n    DropDownList.prototype.isFiltering = function () {\r\n        return this.allowFiltering;\r\n    };\r\n    DropDownList.prototype.isPopupButton = function () {\r\n        return true;\r\n    };\r\n    DropDownList.prototype.setScrollPosition = function (e) {\r\n        if (!isNullOrUndefined(e)) {\r\n            switch (e.action) {\r\n                case 'pageDown':\r\n                case 'down':\r\n                case 'end':\r\n                    this.scrollBottom();\r\n                    break;\r\n                default:\r\n                    this.scrollTop();\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            this.scrollBottom(true);\r\n        }\r\n    };\r\n    DropDownList.prototype.clearText = function () {\r\n        this.filterInput.value = this.typedString = '';\r\n        this.searchLists(null);\r\n    };\r\n    DropDownList.prototype.listScroll = function () {\r\n        this.filterInput.blur();\r\n    };\r\n    DropDownList.prototype.setEleWidth = function (width) {\r\n        if (!isNullOrUndefined(width)) {\r\n            if (typeof width === 'number') {\r\n                this.inputWrapper.container.style.width = formatUnit(width);\r\n            }\r\n            else if (typeof width === 'string') {\r\n                this.inputWrapper.container.style.width = (width.match(/px|%|em/)) ? (width) : (formatUnit(width));\r\n            }\r\n        }\r\n    };\r\n    DropDownList.prototype.closePopup = function (delay) {\r\n        var _this = this;\r\n        this.isTyped = false;\r\n        if (!(this.popupObj && document.body.contains(this.popupObj.element) && this.beforePopupOpen)) {\r\n            return;\r\n        }\r\n        EventHandler.remove(document, 'mousedown', this.onDocumentClick);\r\n        this.isActive = false;\r\n        this.filterInputObj = null;\r\n        this.isDropDownClick = false;\r\n        this.preventAutoFill = false;\r\n        var scrollableParentElements = this.popupObj.getScrollableParent(this.inputWrapper.container);\r\n        for (var _i = 0, scrollableParentElements_1 = scrollableParentElements; _i < scrollableParentElements_1.length; _i++) {\r\n            var element = scrollableParentElements_1[_i];\r\n            EventHandler.remove(element, 'scroll', this.scrollHandler);\r\n        }\r\n        if (Browser.isDevice && this.isFilterLayout()) {\r\n            removeClass([document.body, this.popupObj.element], dropDownListClasses.popupFullScreen);\r\n            EventHandler.remove(this.list, 'scroll', this.listScroll);\r\n        }\r\n        if (this.isFilterLayout()) {\r\n            if (!Browser.isDevice) {\r\n                this.searchKeyModule.destroy();\r\n                if (this.clearIconElement) {\r\n                    EventHandler.remove(this.clearIconElement, 'click', this.clearText);\r\n                }\r\n            }\r\n            if (this.backIconElement) {\r\n                EventHandler.remove(this.backIconElement, 'click', this.clickOnBackIcon);\r\n                EventHandler.remove(this.clearIconElement, 'click', this.clearText);\r\n            }\r\n            EventHandler.remove(this.filterInput, 'input', this.onInput);\r\n            EventHandler.remove(this.filterInput, 'keyup', this.onFilterUp);\r\n            EventHandler.remove(this.filterInput, 'keydown', this.onFilterDown);\r\n            EventHandler.remove(this.filterInput, 'blur', this.onBlur);\r\n            EventHandler.remove(this.filterInput, 'paste', this.pasteHandler);\r\n            this.filterInput = null;\r\n        }\r\n        attributes(this.targetElement(), { 'aria-expanded': 'false', 'aria-activedescendant': null });\r\n        this.inputWrapper.container.classList.remove(dropDownListClasses.iconAnimation);\r\n        if (this.isFiltering()) {\r\n            this.actionCompleteData.isUpdated = false;\r\n        }\r\n        this.beforePopupOpen = false;\r\n        var animModel = {\r\n            name: 'FadeOut',\r\n            duration: 100,\r\n            delay: delay ? delay : 0\r\n        };\r\n        var popupInstance = (isBlazor() && this.isServerRendered) ? null : this.popupObj;\r\n        var eventArgs = { popup: popupInstance, cancel: false, animation: animModel };\r\n        this.trigger('close', eventArgs, function (eventArgs) {\r\n            if (!isNullOrUndefined(_this.popupObj) &&\r\n                !isNullOrUndefined(_this.popupObj.element.querySelector('.e-fixed-head'))) {\r\n                var fixedHeader = _this.popupObj.element.querySelector('.e-fixed-head');\r\n                fixedHeader.parentNode.removeChild(fixedHeader);\r\n                _this.fixedHeaderElement = null;\r\n            }\r\n            if (!eventArgs.cancel) {\r\n                if (_this.getModuleName() === 'autocomplete' && !_this.isServerBlazor) {\r\n                    _this.rippleFun();\r\n                }\r\n                if (_this.isPopupOpen) {\r\n                    _this.popupObj.hide(new Animation(eventArgs.animation));\r\n                }\r\n                else {\r\n                    _this.destroyPopup();\r\n                }\r\n            }\r\n        });\r\n    };\r\n    DropDownList.prototype.destroyPopup = function () {\r\n        var popupHolderEle = select('#' + this.element.id + '_popup_holder', document);\r\n        if (this.isServerBlazor && this.serverPopupEle && popupHolderEle) {\r\n            popupHolderEle.appendChild(this.serverPopupEle);\r\n            // tslint:disable-next-line\r\n            this.interopAdaptor.invokeMethodAsync('OnServerClosePopup');\r\n        }\r\n        this.isPopupOpen = false;\r\n        this.isFilterFocus = false;\r\n        this.popupObj.destroy();\r\n        detach(this.popupObj.element);\r\n    };\r\n    DropDownList.prototype.clickOnBackIcon = function () {\r\n        this.hidePopup();\r\n        this.focusIn();\r\n    };\r\n    /**\r\n     * To Initialize the control rendering\r\n     * @private\r\n     */\r\n    // tslint:disable-next-line\r\n    DropDownList.prototype.render = function () {\r\n        if (this.isServerBlazor) {\r\n            this.inputElement = this.element;\r\n            this.inputWrapper = { container: this.element.parentElement };\r\n            this.hiddenElement = this.inputWrapper.container.querySelector('select');\r\n            this.inputWrapper.buttons = [this.inputWrapper.container.querySelector('.e-input-group-icon.e-ddl-icon')];\r\n            if (this.showClearButton) {\r\n                this.inputWrapper.clearButton = this.inputWrapper.container.querySelector('.e-clear-icon');\r\n                Input.wireClearBtnEvents(this.element, this.inputWrapper.clearButton, this.inputWrapper.container);\r\n            }\r\n            if (this.floatLabelType === 'Auto') {\r\n                Input.wireFloatingEvents(this.element);\r\n            }\r\n            Input.bindInitialEvent({\r\n                element: this.element,\r\n                buttons: null, customTag: null,\r\n                floatLabelType: this.floatLabelType,\r\n                properties: this.properties\r\n            });\r\n            this.setFields();\r\n            this.wireEvent();\r\n            this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\r\n            if (!this.enabled) {\r\n                this.targetElement().tabIndex = -1;\r\n            }\r\n            if (this.element.hasAttribute('autofocus')) {\r\n                this.focusIn();\r\n            }\r\n            this.initial = false;\r\n        }\r\n        else {\r\n            if (this.element.tagName === 'INPUT') {\r\n                this.inputElement = this.element;\r\n                if (isNullOrUndefined(this.inputElement.getAttribute('role'))) {\r\n                    this.inputElement.setAttribute('role', 'textbox');\r\n                }\r\n                if (isNullOrUndefined(this.inputElement.getAttribute('type'))) {\r\n                    this.inputElement.setAttribute('type', 'text');\r\n                }\r\n            }\r\n            else {\r\n                this.inputElement = this.createElement('input', { attrs: { role: 'textbox', type: 'text' } });\r\n                if (this.element.tagName !== this.getNgDirective()) {\r\n                    this.element.style.display = 'none';\r\n                }\r\n                this.element.parentElement.insertBefore(this.inputElement, this.element);\r\n                this.preventTabIndex(this.inputElement);\r\n            }\r\n            var updatedCssClassValues = this.cssClass;\r\n            if (!isNullOrUndefined(this.cssClass) && this.cssClass !== '') {\r\n                updatedCssClassValues = (this.cssClass.replace(/\\s+/g, ' ')).trim();\r\n            }\r\n            this.inputWrapper = Input.createInput({\r\n                element: this.inputElement,\r\n                buttons: this.isPopupButton() ? [dropDownListClasses.icon] : null,\r\n                floatLabelType: this.floatLabelType,\r\n                properties: {\r\n                    readonly: this.getModuleName() === 'dropdownlist' ? true : this.readonly,\r\n                    placeholder: this.placeholder,\r\n                    cssClass: updatedCssClassValues,\r\n                    enabled: this.enabled,\r\n                    enableRtl: this.enableRtl,\r\n                    showClearButton: this.showClearButton\r\n                },\r\n            }, this.createElement);\r\n            if (this.element.tagName === this.getNgDirective()) {\r\n                this.element.appendChild(this.inputWrapper.container);\r\n            }\r\n            else {\r\n                this.inputElement.parentElement.insertBefore(this.element, this.inputElement);\r\n            }\r\n            this.hiddenElement = this.createElement('select', {\r\n                attrs: { 'aria-hidden': 'true', 'tabindex': '-1', 'class': dropDownListClasses.hiddenElement }\r\n            });\r\n            prepend([this.hiddenElement], this.inputWrapper.container);\r\n            this.validationAttribute(this.element, this.hiddenElement);\r\n            this.setFields();\r\n            this.inputWrapper.container.style.width = formatUnit(this.width);\r\n            this.inputWrapper.container.classList.add('e-ddl');\r\n            this.wireEvent();\r\n            this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\r\n            this.element.removeAttribute('tabindex');\r\n            var id = this.element.getAttribute('id') ? this.element.getAttribute('id') : getUniqueID('ej2_dropdownlist');\r\n            this.element.id = id;\r\n            this.hiddenElement.id = id + '_hidden';\r\n            this.targetElement().setAttribute('tabindex', this.tabIndex);\r\n            attributes(this.targetElement(), this.getAriaAttributes());\r\n            this.updateDataAttribute(this.htmlAttributes);\r\n            this.setHTMLAttributes();\r\n            if (this.value !== null || this.activeIndex !== null || this.text !== null) {\r\n                this.initValue();\r\n            }\r\n            else if (this.element.tagName === 'SELECT' && this.element.options[0]) {\r\n                var selectElement = this.element;\r\n                this.value = selectElement.options[selectElement.selectedIndex].value;\r\n                this.text = isNullOrUndefined(this.value) ? null : selectElement.options[selectElement.selectedIndex].textContent;\r\n                this.initValue();\r\n            }\r\n            this.preventTabIndex(this.element);\r\n            if (!this.enabled) {\r\n                this.targetElement().tabIndex = -1;\r\n            }\r\n            this.initial = false;\r\n            this.element.style.opacity = '';\r\n            this.inputElement.onselect = function (e) { e.stopImmediatePropagation(); };\r\n            this.inputElement.onchange = function (e) { e.stopImmediatePropagation(); };\r\n            if (this.element.hasAttribute('autofocus')) {\r\n                this.focusIn();\r\n            }\r\n            if (!isNullOrUndefined(this.text)) {\r\n                this.inputElement.setAttribute('value', this.text);\r\n            }\r\n        }\r\n        if (this.element.hasAttribute('data-val')) {\r\n            this.element.setAttribute('data-val', 'false');\r\n        }\r\n        this.renderComplete();\r\n    };\r\n    ;\r\n    DropDownList.prototype.setFooterTemplate = function (popupEle) {\r\n        var compiledString;\r\n        if (this.footer) {\r\n            this.footer.innerHTML = '';\r\n        }\r\n        else {\r\n            this.footer = this.createElement('div');\r\n            addClass([this.footer], dropDownListClasses.footer);\r\n        }\r\n        var footercheck = this.dropdownCompiler(this.footerTemplate);\r\n        if (footercheck) {\r\n            compiledString = compile(select(this.footerTemplate, document).innerHTML.trim());\r\n        }\r\n        else {\r\n            compiledString = compile(this.footerTemplate);\r\n        }\r\n        // tslint:disable-next-line\r\n        var footerCompTemp = compiledString({}, this, 'footerTemplate', this.footerTemplateId, this.isStringTemplate, null, this.footer);\r\n        if (footerCompTemp && footerCompTemp.length > 0) {\r\n            for (var i = 0; i < footerCompTemp.length; i++) {\r\n                this.footer.appendChild(footerCompTemp[i]);\r\n            }\r\n        }\r\n        this.DropDownBaseupdateBlazorTemplates(false, false, false, false, false, false, true);\r\n        append([this.footer], popupEle);\r\n    };\r\n    DropDownList.prototype.setHeaderTemplate = function (popupEle) {\r\n        var compiledString;\r\n        if (this.header) {\r\n            this.header.innerHTML = '';\r\n        }\r\n        else {\r\n            this.header = this.createElement('div');\r\n            addClass([this.header], dropDownListClasses.header);\r\n        }\r\n        var headercheck = this.dropdownCompiler(this.headerTemplate);\r\n        if (headercheck) {\r\n            compiledString = compile(select(this.headerTemplate, document).innerHTML.trim());\r\n        }\r\n        else {\r\n            compiledString = compile(this.headerTemplate);\r\n        }\r\n        // tslint:disable-next-line\r\n        var headerCompTemp = compiledString({}, this, 'headerTemplate', this.headerTemplateId, this.isStringTemplate, null, this.header);\r\n        if (headerCompTemp && headerCompTemp.length) {\r\n            for (var i = 0; i < headerCompTemp.length; i++) {\r\n                this.header.appendChild(headerCompTemp[i]);\r\n            }\r\n        }\r\n        this.DropDownBaseupdateBlazorTemplates(false, false, false, false, false, true, false);\r\n        var contentEle = popupEle.querySelector('div.e-content');\r\n        popupEle.insertBefore(this.header, contentEle);\r\n    };\r\n    DropDownList.prototype.setOldText = function (text) {\r\n        this.text = text;\r\n    };\r\n    DropDownList.prototype.setOldValue = function (value) {\r\n        this.value = value;\r\n    };\r\n    DropDownList.prototype.refreshPopup = function () {\r\n        if (!isNullOrUndefined(this.popupObj) && document.body.contains(this.popupObj.element) &&\r\n            ((this.allowFiltering && !(Browser.isDevice && this.isFilterLayout())) || this.getModuleName() === 'autocomplete')) {\r\n            removeClass([this.popupObj.element], 'e-popup-close');\r\n            this.popupObj.refreshPosition(this.inputWrapper.container);\r\n            this.popupObj.resolveCollision();\r\n        }\r\n    };\r\n    DropDownList.prototype.checkData = function (newProp) {\r\n        if (newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource)) && this.itemTemplate && this.allowFiltering &&\r\n            !(this.isListSearched && (newProp.dataSource instanceof DataManager))) {\r\n            this.list = null;\r\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\r\n        }\r\n        this.isListSearched = false;\r\n        var isChangeValue = Object.keys(newProp).indexOf('value') !== -1 && isNullOrUndefined(newProp.value);\r\n        var isChangeText = Object.keys(newProp).indexOf('text') !== -1 && isNullOrUndefined(newProp.text);\r\n        if (this.getModuleName() !== 'autocomplete' && this.allowFiltering && (isChangeValue || isChangeText)) {\r\n            this.itemData = null;\r\n        }\r\n        if (this.allowFiltering && newProp.dataSource && !isNullOrUndefined(Object.keys(newProp.dataSource))) {\r\n            this.actionCompleteData = { ulElement: null, list: null, isUpdated: false };\r\n        }\r\n    };\r\n    DropDownList.prototype.updateDataSource = function (props) {\r\n        if (this.inputElement.value !== '' || (!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\r\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0)))) {\r\n            this.clearAll(null, props);\r\n        }\r\n        if (!(!isNullOrUndefined(props) && (isNullOrUndefined(props.dataSource)\r\n            || (!(props.dataSource instanceof DataManager) && props.dataSource.length === 0))) || !(props.dataSource === [])) {\r\n            this.typedString = '';\r\n            this.resetList(this.dataSource);\r\n        }\r\n        if (!this.isCustomFilter && !this.isFilterFocus && document.activeElement !== this.filterInput) {\r\n            this.checkCustomValue();\r\n        }\r\n    };\r\n    DropDownList.prototype.checkCustomValue = function () {\r\n        this.itemData = this.getDataByValue(this.value);\r\n        var dataItem = this.getItemData();\r\n        this.setProperties({ 'value': dataItem.value, 'text': dataItem.text });\r\n    };\r\n    DropDownList.prototype.updateInputFields = function () {\r\n        if (this.getModuleName() === 'dropdownlist') {\r\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\r\n        }\r\n    };\r\n    /**\r\n     * Dynamically change the value of properties.\r\n     * @private\r\n     */\r\n    DropDownList.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        if (this.getModuleName() === 'dropdownlist') {\r\n            if (!this.isServerBlazor) {\r\n                this.checkData(newProp);\r\n                this.setUpdateInitial(['fields', 'query', 'dataSource'], newProp);\r\n            }\r\n        }\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'query':\r\n                case 'dataSource': break;\r\n                case 'htmlAttributes':\r\n                    this.setHTMLAttributes();\r\n                    break;\r\n                case 'width':\r\n                    this.setEleWidth(newProp.width);\r\n                    break;\r\n                case 'placeholder':\r\n                    Input.setPlaceholder(newProp.placeholder, this.inputElement);\r\n                    break;\r\n                case 'filterBarPlaceholder':\r\n                    if (this.filterInput) {\r\n                        Input.setPlaceholder(newProp.filterBarPlaceholder, this.filterInput);\r\n                    }\r\n                    break;\r\n                case 'readonly':\r\n                    if (this.getModuleName() !== 'dropdownlist') {\r\n                        Input.setReadonly(newProp.readonly, this.inputElement);\r\n                    }\r\n                    break;\r\n                case 'cssClass':\r\n                    this.setCssClass(newProp.cssClass, oldProp.cssClass);\r\n                    break;\r\n                case 'enableRtl':\r\n                    this.setEnableRtl();\r\n                    break;\r\n                case 'enabled':\r\n                    this.setEnable();\r\n                    break;\r\n                case 'text':\r\n                    if (newProp.text === null) {\r\n                        this.clearAll();\r\n                        break;\r\n                    }\r\n                    if (!this.list) {\r\n                        if (this.dataSource instanceof DataManager) {\r\n                            this.initRemoteRender = true;\r\n                        }\r\n                        this.renderList();\r\n                    }\r\n                    if (!this.initRemoteRender) {\r\n                        var li = this.getElementByText(newProp.text);\r\n                        if (!this.checkValidLi(li)) {\r\n                            if (this.liCollections && this.liCollections.length === 100 &&\r\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\r\n                                this.setSelectionData(newProp.text, oldProp.text, 'text');\r\n                            }\r\n                            else if (!this.isServerBlazor) {\r\n                                this.setOldText(oldProp.text);\r\n                            }\r\n                        }\r\n                        this.updateInputFields();\r\n                    }\r\n                    break;\r\n                case 'value':\r\n                    if (newProp.value === null) {\r\n                        this.clearAll();\r\n                        break;\r\n                    }\r\n                    this.notify('beforeValueChange', { newProp: newProp }); // gird component value type change\r\n                    if (!this.list) {\r\n                        if (this.dataSource instanceof DataManager) {\r\n                            this.initRemoteRender = true;\r\n                        }\r\n                        this.renderList();\r\n                    }\r\n                    if (!this.initRemoteRender) {\r\n                        var item = this.getElementByValue(newProp.value);\r\n                        if (!this.checkValidLi(item)) {\r\n                            if (this.liCollections && this.liCollections.length === 100 &&\r\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\r\n                                this.setSelectionData(newProp.value, oldProp.value, 'value');\r\n                            }\r\n                            else if (!this.isServerBlazor) {\r\n                                this.setOldValue(oldProp.value);\r\n                            }\r\n                        }\r\n                        this.updateInputFields();\r\n                    }\r\n                    break;\r\n                case 'index':\r\n                    if (newProp.index === null) {\r\n                        this.clearAll();\r\n                        break;\r\n                    }\r\n                    if (!this.list) {\r\n                        if (this.dataSource instanceof DataManager) {\r\n                            this.initRemoteRender = true;\r\n                        }\r\n                        this.renderList();\r\n                    }\r\n                    if (!this.initRemoteRender && this.liCollections) {\r\n                        var element = this.liCollections[newProp.index];\r\n                        if (!this.checkValidLi(element)) {\r\n                            if (this.liCollections && this.liCollections.length === 100 &&\r\n                                this.getModuleName() === 'autocomplete' && this.listData.length > 100) {\r\n                                this.setSelectionData(newProp.index, oldProp.index, 'index');\r\n                            }\r\n                            else if (!this.isServerBlazor) {\r\n                                this.index = oldProp.index;\r\n                            }\r\n                        }\r\n                        this.updateInputFields();\r\n                    }\r\n                    break;\r\n                case 'footerTemplate':\r\n                    if (this.popupObj) {\r\n                        this.setFooterTemplate(this.popupObj.element);\r\n                    }\r\n                    break;\r\n                case 'headerTemplate':\r\n                    if (this.popupObj) {\r\n                        this.setHeaderTemplate(this.popupObj.element);\r\n                    }\r\n                    break;\r\n                case 'valueTemplate':\r\n                    if (!isNullOrUndefined(this.itemData) && this.valueTemplate != null) {\r\n                        this.setValueTemplate();\r\n                    }\r\n                    break;\r\n                case 'allowFiltering':\r\n                    if (this.allowFiltering) {\r\n                        this.actionCompleteData = { ulElement: this.ulElement,\r\n                            list: this.listData, isUpdated: true };\r\n                        this.updateSelectElementData(this.allowFiltering);\r\n                    }\r\n                    break;\r\n                case 'floatLabelType':\r\n                    Input.removeFloating(this.inputWrapper);\r\n                    Input.addFloating(this.inputElement, newProp.floatLabelType, this.placeholder, this.createElement);\r\n                    break;\r\n                case 'showClearButton':\r\n                    Input.setClearButton(newProp.showClearButton, this.inputElement, this.inputWrapper, null, this.createElement);\r\n                    this.bindClearEvent();\r\n                    break;\r\n                default:\r\n                    var ddlProps = void 0;\r\n                    ddlProps = this.getPropObject(prop, newProp, oldProp);\r\n                    _super.prototype.onPropertyChanged.call(this, ddlProps.newProperty, ddlProps.oldProperty);\r\n                    break;\r\n            }\r\n        }\r\n        this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\r\n    };\r\n    DropDownList.prototype.checkValidLi = function (element) {\r\n        if (this.isValidLI(element)) {\r\n            this.setSelection(element, null);\r\n            return true;\r\n        }\r\n        return false;\r\n    };\r\n    DropDownList.prototype.setSelectionData = function (newProp, oldProp, prop) {\r\n        var _this = this;\r\n        var li;\r\n        this.updateListValues = function () {\r\n            if (prop === 'text') {\r\n                li = _this.getElementByText(newProp);\r\n                if (!_this.checkValidLi(li)) {\r\n                    _this.setOldText(oldProp);\r\n                }\r\n            }\r\n            else if (prop === 'value') {\r\n                li = _this.getElementByValue(newProp);\r\n                if (!_this.checkValidLi(li)) {\r\n                    _this.setOldValue(oldProp);\r\n                }\r\n            }\r\n            else if (prop === 'index') {\r\n                li = _this.liCollections[newProp];\r\n                if (!_this.checkValidLi(li)) {\r\n                    _this.index = oldProp;\r\n                }\r\n            }\r\n        };\r\n    };\r\n    DropDownList.prototype.setCssClass = function (newClass, oldClass) {\r\n        if (!isNullOrUndefined(oldClass)) {\r\n            oldClass = (oldClass.replace(/\\s+/g, ' ')).trim();\r\n        }\r\n        if (!isNullOrUndefined(newClass)) {\r\n            newClass = (newClass.replace(/\\s+/g, ' ')).trim();\r\n        }\r\n        Input.setCssClass(newClass, [this.inputWrapper.container], oldClass);\r\n        if (this.popupObj) {\r\n            Input.setCssClass(newClass, [this.popupObj.element], oldClass);\r\n        }\r\n    };\r\n    /**\r\n     * Return the module name.\r\n     * @private\r\n     */\r\n    DropDownList.prototype.getModuleName = function () {\r\n        return 'dropdownlist';\r\n    };\r\n    /**\r\n     * Opens the popup that displays the list of items.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.showPopup = function () {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        if (isBlazor() && this.itemTemplate) {\r\n            this.DropDownBaseupdateBlazorTemplates(true, false, false, false);\r\n        }\r\n        if (this.beforePopupOpen) {\r\n            this.refreshPopup();\r\n            return;\r\n        }\r\n        this.beforePopupOpen = true;\r\n        if (this.isFiltering() && !this.isActive && this.actionCompleteData.list && this.actionCompleteData.list[0]) {\r\n            this.isActive = true;\r\n            this.onActionComplete(this.actionCompleteData.ulElement, this.actionCompleteData.list, null, true);\r\n        }\r\n        else if (isNullOrUndefined(this.list) || !isUndefined(this.list) && (this.list.classList.contains(dropDownBaseClasses.noData) ||\r\n            this.list.querySelectorAll('.' + dropDownBaseClasses.li).length <= 0)) {\r\n            this.renderList();\r\n        }\r\n        else if (this.isFiltering() && this.isServerBlazor) {\r\n            this.renderList();\r\n        }\r\n        if (!this.isServerBlazor) {\r\n            this.invokeRenderPopup();\r\n        }\r\n        var popupHolderEle = !this.isFiltering() || select('#' + this.element.id + '_popup_holder', document);\r\n        var isDropdownComp = this.getModuleName() === 'dropdownlist' || !this.isFiltering();\r\n        if (this.isServerBlazor && popupHolderEle && !isNullOrUndefined(this.list) && isDropdownComp) {\r\n            this.invokeRenderPopup();\r\n        }\r\n    };\r\n    DropDownList.prototype.invokeRenderPopup = function () {\r\n        if (Browser.isDevice && this.isFilterLayout()) {\r\n            var proxy_2 = this;\r\n            window.onpopstate = function () {\r\n                proxy_2.hidePopup();\r\n            };\r\n            history.pushState({}, '');\r\n        }\r\n        if (!isNullOrUndefined(this.list.children[0]) || this.list.classList.contains(dropDownBaseClasses.noData)) {\r\n            this.renderPopup();\r\n        }\r\n        attributes(this.targetElement(), { 'aria-activedescendant': this.selectedLI ? this.selectedLI.id : null });\r\n    };\r\n    DropDownList.prototype.clientRenderPopup = function (data, popupEle) {\r\n        if (popupEle) {\r\n            this.serverPopupEle = popupEle;\r\n            this.list = popupEle.querySelector('.e-dropdownbase.e-content') ?\r\n                popupEle.querySelector('.e-dropdownbase.e-content') : this.list;\r\n            this.ulElement = this.list.querySelector('ul');\r\n            if (isNullOrUndefined(this.ulElement) && !this.list.classList.contains(dropDownBaseClasses.noData)) {\r\n                addClass([this.list], [dropDownBaseClasses.noData]);\r\n            }\r\n            this.liCollections = this.ulElement ?\r\n                this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li) : [];\r\n            this.listData = data;\r\n            if (this.getModuleName() === 'autocomplete' && this.liCollections.length > 0) {\r\n                this.renderHightSearch();\r\n            }\r\n            this.initRemoteRender = false;\r\n            if (!this.isPopupOpen) {\r\n                this.serverBlazorUpdateSelection();\r\n            }\r\n            this.unWireListEvents();\r\n            this.wireListEvents();\r\n            if (this.isServerIncrementalSearch && this.searchKeyEvent) {\r\n                this.isServerIncrementalSearch = false;\r\n                this.initial = false;\r\n                this.onServerIncrementalSearch(this.searchKeyEvent);\r\n            }\r\n            if (this.isServerNavigation && this.searchKeyEvent) {\r\n                if (this.searchKeyEvent.action === 'down' || this.searchKeyEvent.action === 'up') {\r\n                    this.isServerNavigation = false;\r\n                    this.updateUpDownAction(this.searchKeyEvent);\r\n                }\r\n                else if (this.searchKeyEvent.action === 'home' || this.searchKeyEvent.action === 'end') {\r\n                    this.isServerNavigation = false;\r\n                    this.updateHomeEndAction(this.searchKeyEvent);\r\n                }\r\n            }\r\n            if (this.beforePopupOpen) {\r\n                this.invokeRenderPopup();\r\n            }\r\n            if (this.getModuleName() !== 'dropdownlist') {\r\n                this.onActionComplete(this.ulElement, this.listData);\r\n            }\r\n        }\r\n        else if (data != null && this.listData !== data) {\r\n            this.listData = data;\r\n            this.initRemoteRender = false;\r\n        }\r\n    };\r\n    DropDownList.prototype.renderHightSearch = function () {\r\n        // update high light search \r\n    };\r\n    DropDownList.prototype.updateclientItemData = function (data) {\r\n        this.listData = data;\r\n    };\r\n    DropDownList.prototype.initValueItemData = function (selectData) {\r\n        this.itemData = selectData;\r\n        this.previousValue = this.value;\r\n        this.initial = false;\r\n    };\r\n    DropDownList.prototype.serverUpdateListElement = function (data, popupEle) {\r\n        this.listData = data;\r\n        if (this.ulElement) {\r\n            this.liCollections = this.ulElement.querySelectorAll('.' + dropDownBaseClasses.li);\r\n        }\r\n    };\r\n    /**\r\n     * Hides the popup if it is in an open state.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.hidePopup = function (e) {\r\n        var isHeader = (this.headerTemplate) ? true : false;\r\n        var isFooter = (this.headerTemplate) ? true : false;\r\n        this.DropDownBaseresetBlazorTemplates(false, false, false, false, false, isHeader, isFooter);\r\n        if (this.isEscapeKey && this.getModuleName() === 'dropdownlist') {\r\n            Input.setValue(this.text, this.inputElement, this.floatLabelType, this.showClearButton);\r\n            this.isEscapeKey = false;\r\n            if (!isNullOrUndefined(this.index)) {\r\n                var element = this.findListElement(this.ulElement, 'li', 'data-value', this.value);\r\n                this.selectedLI = this.liCollections[this.index] || element;\r\n                if (this.selectedLI) {\r\n                    this.updateSelectedItem(this.selectedLI, null, true);\r\n                    if (this.valueTemplate && this.itemData !== null) {\r\n                        this.setValueTemplate();\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                this.resetSelection();\r\n            }\r\n        }\r\n        this.closePopup();\r\n        var dataItem = this.getItemData();\r\n        var isSelectVal = this.isServerBlazor ? !isNullOrUndefined(this.value) : !isNullOrUndefined(this.selectedLI);\r\n        if (this.inputElement && this.inputElement.value.trim() === '' && !this.isInteracted && (this.isSelectCustom ||\r\n            isSelectVal && this.inputElement.value !== dataItem.text)) {\r\n            this.isSelectCustom = false;\r\n            this.clearAll(e);\r\n        }\r\n    };\r\n    /**\r\n     * Sets the focus on the component for interaction.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.focusIn = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        if (this.targetElement().classList.contains(dropDownListClasses.disable)) {\r\n            return;\r\n        }\r\n        var isFocused = false;\r\n        if (this.preventFocus && Browser.isDevice) {\r\n            this.inputWrapper.container.tabIndex = 1;\r\n            this.inputWrapper.container.focus();\r\n            this.preventFocus = false;\r\n            isFocused = true;\r\n        }\r\n        if (!isFocused) {\r\n            this.targetElement().focus();\r\n        }\r\n        addClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\r\n        this.onFocus(e);\r\n    };\r\n    /**\r\n     * Moves the focus from the component if the component is already focused.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.focusOut = function (e) {\r\n        if (!this.enabled) {\r\n            return;\r\n        }\r\n        this.isTyped = true;\r\n        this.hidePopup(e);\r\n        if (this.targetElement()) {\r\n            this.targetElement().blur();\r\n        }\r\n        removeClass([this.inputWrapper.container], [dropDownListClasses.inputFocus]);\r\n    };\r\n    /**\r\n     * Removes the component from the DOM and detaches all its related event handlers. Also it removes the attributes and classes.\r\n     * @method destroy\r\n     * @return {void}.\r\n     */\r\n    DropDownList.prototype.destroy = function () {\r\n        this.isActive = false;\r\n        // tslint:disable-next-line\r\n        if (this.isReact) {\r\n            this.clearTemplate();\r\n        }\r\n        if (!this.isServerBlazor || (this.popupObj && document.body.contains(this.popupObj.element))) {\r\n            this.hidePopup();\r\n        }\r\n        this.unWireEvent();\r\n        if (this.list) {\r\n            this.unWireListEvents();\r\n            if (this.isServerBlazor) {\r\n                if ((this.fields.groupBy) && !this.isGroupChecking) {\r\n                    EventHandler.remove(this.list, 'scroll', this.setFloatingHeader);\r\n                }\r\n            }\r\n        }\r\n        if (!this.isServerBlazor) {\r\n            if (this.element && !this.element.classList.contains('e-' + this.getModuleName())) {\r\n                return;\r\n            }\r\n            if (this.inputElement) {\r\n                var attrArray = ['readonly', 'aria-disabled', 'aria-placeholder',\r\n                    'placeholder', 'aria-owns', 'aria-labelledby', 'aria-haspopup', 'aria-expanded',\r\n                    'aria-activedescendant', 'autocomplete', 'aria-readonly', 'autocorrect',\r\n                    'autocapitalize', 'spellcheck', 'aria-autocomplete', 'aria-live', 'aria-describedby', 'aria-label'];\r\n                for (var i = 0; i < attrArray.length; i++) {\r\n                    this.inputElement.removeAttribute(attrArray[i]);\r\n                }\r\n                this.inputElement.setAttribute('tabindex', this.tabIndex);\r\n                this.inputElement.classList.remove('e-input');\r\n                Input.setValue('', this.inputElement, this.floatLabelType, this.showClearButton);\r\n            }\r\n            this.element.style.display = 'block';\r\n            if (this.inputWrapper.container.parentElement.tagName === this.getNgDirective()) {\r\n                detach(this.inputWrapper.container);\r\n            }\r\n            else {\r\n                this.inputWrapper.container.parentElement.insertBefore(this.element, this.inputWrapper.container);\r\n                detach(this.inputWrapper.container);\r\n            }\r\n            _super.prototype.destroy.call(this);\r\n        }\r\n    };\r\n    ;\r\n    /**\r\n     * Gets all the list items bound on this component.\r\n     * @returns Element[].\r\n     */\r\n    DropDownList.prototype.getItems = function () {\r\n        if (!this.list) {\r\n            if (this.dataSource instanceof DataManager) {\r\n                this.initRemoteRender = true;\r\n            }\r\n            this.renderList();\r\n        }\r\n        return this.ulElement ? _super.prototype.getItems.call(this) : [];\r\n    };\r\n    /**\r\n     * Gets the data Object that matches the given value.\r\n     * @param { string | number } value - Specifies the value of the list item.\r\n     * @returns Object.\r\n     * @blazorType object\r\n     */\r\n    DropDownList.prototype.getDataByValue = function (value) {\r\n        return _super.prototype.getDataByValue.call(this, value);\r\n    };\r\n    /**\r\n     * Allows you to clear the selected values from the component.\r\n     * @returns void.\r\n     */\r\n    DropDownList.prototype.clear = function () {\r\n        this.value = null;\r\n    };\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"cssClass\", void 0);\r\n    __decorate([\r\n        Property('100%')\r\n    ], DropDownList.prototype, \"width\", void 0);\r\n    __decorate([\r\n        Property('300px')\r\n    ], DropDownList.prototype, \"popupHeight\", void 0);\r\n    __decorate([\r\n        Property('100%')\r\n    ], DropDownList.prototype, \"popupWidth\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"placeholder\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"filterBarPlaceholder\", void 0);\r\n    __decorate([\r\n        Property({})\r\n    ], DropDownList.prototype, \"htmlAttributes\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"query\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"valueTemplate\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"headerTemplate\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"footerTemplate\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], DropDownList.prototype, \"allowFiltering\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], DropDownList.prototype, \"readonly\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"text\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"value\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], DropDownList.prototype, \"index\", void 0);\r\n    __decorate([\r\n        Property('Never')\r\n    ], DropDownList.prototype, \"floatLabelType\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], DropDownList.prototype, \"showClearButton\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"filtering\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"change\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"beforeOpen\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"open\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"close\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"blur\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], DropDownList.prototype, \"focus\", void 0);\r\n    DropDownList = __decorate([\r\n        NotifyPropertyChanges\r\n    ], DropDownList);\r\n    return DropDownList;\r\n}(DropDownBase));\r\nexport { DropDownList };\r\n"]},"metadata":{},"sourceType":"module"}