{"ast":null,"code":"import { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, getElement, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\nimport { updateBlazorTemplate, resetBlazorTemplate, isBlazor, IntlBase } from '@syncfusion/ej2-base';\nimport { Query, Deferred } from '@syncfusion/ej2-data';\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\nimport { Dialog } from '@syncfusion/ej2-popups';\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\nimport { Input } from '@syncfusion/ej2-inputs';\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\nimport { timezoneData } from '../timezone/timezone';\nimport { FieldValidator } from './form-validator';\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\nimport * as cls from '../base/css-constant';\nimport * as event from '../base/constant';\nimport * as util from '../base/util';\nvar EVENT_FIELD = 'e-field';\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\nvar HIDE_STYLE_CLASS = 'e-hide';\n/**\r\n * Event editor window\r\n */\n\nvar EventWindow =\n/** @class */\nfunction () {\n  /**\r\n   * Constructor for event window\r\n   */\n  function EventWindow(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.fields = this.parent.eventFields;\n    this.eventWindowTime = {\n      startTime: new Date(),\n      endTime: new Date()\n    };\n    this.fieldValidator = new FieldValidator();\n    this.renderEventWindow();\n  }\n\n  EventWindow.prototype.renderEventWindow = function () {\n    this.element = createElement('div', {\n      id: this.parent.element.id + '_dialog_wrapper'\n    });\n    this.parent.element.appendChild(this.element);\n    var dialogModel = {\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      content: this.getEventWindowContent(),\n      cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\n      enableRtl: this.parent.enableRtl,\n      height: this.parent.isAdaptive ? '100%' : 'auto',\n      minHeight: '300px',\n      isModal: true,\n      showCloseIcon: this.parent.isAdaptive ? false : true,\n      target: document.body,\n      visible: false,\n      width: '500px',\n      beforeOpen: this.onBeforeOpen.bind(this),\n      beforeClose: this.onBeforeClose.bind(this)\n    };\n\n    if (this.parent.isAdaptive) {\n      dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\n      dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\n    } else {\n      dialogModel.buttons = [{\n        buttonModel: {\n          content: this.l10n.getConstant('deleteButton'),\n          cssClass: cls.DELETE_EVENT_CLASS,\n          disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\n        },\n        click: this.eventDelete.bind(this)\n      }, {\n        buttonModel: {\n          content: this.l10n.getConstant('saveButton'),\n          cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\n          isPrimary: true,\n          disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\n        },\n        click: this.eventSave.bind(this)\n      }, {\n        buttonModel: {\n          cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS,\n          content: this.l10n.getConstant('cancelButton')\n        },\n        click: this.dialogClose.bind(this)\n      }];\n      dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\n    }\n\n    this.dialogObject = new Dialog(dialogModel, this.element);\n    this.dialogObject.isStringTemplate = true;\n\n    if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\n      this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\n    }\n\n    addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\n      EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\n    }\n\n    this.applyFormValidation();\n  };\n\n  EventWindow.prototype.updateEditorTemplate = function () {\n    if (this.parent.editorTemplate) {\n      updateBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate', this.parent);\n    }\n  };\n\n  EventWindow.prototype.resetEditorTemplate = function () {\n    if (this.parent.editorTemplate) {\n      resetBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate');\n    }\n  };\n\n  EventWindow.prototype.refresh = function () {\n    this.destroy();\n    this.renderEventWindow();\n  };\n\n  EventWindow.prototype.refreshRecurrenceEditor = function () {\n    if (this.recurrenceEditor) {\n      var recurrenceEditor = this.recurrenceEditor.element;\n      this.recurrenceEditor.destroy();\n      this.createRecurrenceEditor(recurrenceEditor);\n    }\n  };\n\n  EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\n    if (this.parent.editorTemplate) {\n      this.recurrenceEditor = recurrenceEditor;\n    }\n  };\n\n  EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\n    this.parent.currentAction = type;\n    this.parent.removeNewEventElement();\n    this.parent.quickPopup.quickPopupHide(true);\n    this.parent.inlineModule.removeInlineAppointmentElement();\n\n    if (type === 'Add') {\n      var eventObj = {};\n      this.cellClickAction = !isEventData;\n      this.parent.activeCellsData = data;\n      var event_1 = data;\n\n      if (this.cellClickAction) {\n        this.convertToEventData(event_1, eventObj);\n      } else {\n        this.parent.activeCellsData = {\n          startTime: event_1.startTime || event_1[this.fields.startTime],\n          endTime: event_1.endTime || event_1[this.fields.endTime],\n          isAllDay: event_1.isAllDay || event_1[this.fields.isAllDay],\n          element: event_1.element,\n          groupIndex: event_1.groupIndex\n        };\n        eventObj = event_1;\n      }\n\n      data = eventObj;\n    }\n\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\n    }\n\n    if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n    }\n\n    switch (type) {\n      case 'Add':\n        this.onCellDetailsUpdate(data, repeatType);\n        break;\n\n      case 'Save':\n      case 'EditOccurrence':\n      case 'EditSeries':\n      case 'EditFollowingEvents':\n        if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n          addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\n        }\n\n        this.cellClickAction = false;\n        this.onEventDetailsUpdate(data);\n        break;\n    }\n  };\n\n  EventWindow.prototype.setDialogContent = function () {\n    this.dialogObject.content = this.getEventWindowContent();\n    this.dialogObject.dataBind();\n  };\n\n  EventWindow.prototype.onBeforeOpen = function (args) {\n    var _this = this;\n\n    var eventProp = {\n      type: 'Editor',\n      data: this.eventData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n\n    if (this.cellClickAction) {\n      eventProp.duration = this.getSlotDuration();\n    }\n\n    var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n\n    if (saveObj) {\n      saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\n      saveObj.dataBind();\n    }\n\n    var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\n\n    if (deleteObj) {\n      deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\n      deleteObj.dataBind();\n    }\n\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\n      args.cancel = popupArgs.cancel;\n      _this.duration = _this.cellClickAction ? popupArgs.duration : null;\n\n      _this.refreshDateTimePicker(_this.duration);\n\n      if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\n        var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n\n        var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n\n        endObj.value = new Date(startObj.value.getTime() + util.MS_PER_MINUTE * popupArgs.duration);\n        endObj.dataBind();\n      }\n\n      if (!isBlazor() && _this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\n        _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.onBeforeClose = function (args) {\n    var _this = this;\n\n    if (args.isInteracted) {\n      this.isCrudAction = false;\n    }\n\n    var eventProp = {\n      type: 'Editor',\n      data: this.eventCrudData,\n      cancel: false,\n      element: this.element,\n      target: this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element\n    };\n    var callBackPromise = new Deferred();\n    this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\n      if (isBlazor()) {\n        var eventFields = _this.parent.eventFields;\n\n        if (popupArgs.data) {\n          var eventObj = popupArgs.data;\n          eventObj[eventFields.startTime] = _this.parent.getDateTime(eventObj[eventFields.startTime]);\n          eventObj[eventFields.endTime] = _this.parent.getDateTime(eventObj[eventFields.endTime]);\n        }\n\n        if (popupArgs.element) {\n          popupArgs.element = getElement(popupArgs.element);\n        }\n\n        if (popupArgs.target) {\n          popupArgs.target = getElement(popupArgs.target);\n        }\n      }\n\n      args.cancel = popupArgs.cancel;\n\n      if (!popupArgs.cancel) {\n        _this.resetEditorTemplate();\n\n        _this.updateEditorTemplate();\n\n        if (_this.isCrudAction) {\n          args.cancel = _this.processCrudActions(popupArgs.data);\n          _this.isCrudAction = args.cancel;\n        }\n\n        if (!_this.isCrudAction) {\n          _this.resetForm();\n\n          _this.parent.eventBase.focusElement();\n\n          _this.eventCrudData = null;\n        }\n      }\n\n      callBackPromise.resolve(args);\n    });\n    return callBackPromise;\n  };\n\n  EventWindow.prototype.getEventWindowContent = function () {\n    var container = createElement('div', {\n      className: cls.FORM_CONTAINER_CLASS\n    });\n    var form = createElement('form', {\n      id: this.parent.element.id + 'EditForm',\n      className: cls.FORM_CLASS,\n      attrs: {\n        onsubmit: 'return false;'\n      }\n    });\n    this.renderFormElements(form);\n    container.appendChild(form);\n    return container;\n  };\n\n  EventWindow.prototype.renderFormElements = function (form, args) {\n    if (!isNullOrUndefined(this.parent.editorTemplate)) {\n      if (args) {\n        // tslint:disable-next-line:no-any\n        if (!this.parent.isReact) {\n          if (this.recurrenceEditor) {\n            this.recurrenceEditor.destroy();\n            this.recurrenceEditor = null;\n          }\n\n          this.destroyComponents();\n        }\n\n        var formElements = [].slice.call(form.children);\n\n        for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\n          var element = formElements_1[_i];\n          remove(element);\n        }\n      }\n\n      if (!isBlazor() || isBlazor() && args) {\n        var templateId = this.parent.element.id + '_editorTemplate';\n        var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\n        append(tempEle, form);\n        this.parent.renderTemplates();\n        this.updateEditorTemplate();\n      }\n    } else {\n      form.appendChild(this.getDefaultEventWindowContent());\n    }\n  };\n\n  EventWindow.prototype.getDefaultEventWindowContent = function () {\n    var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\n    var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\n    parentDiv.appendChild(titleLocationDiv);\n    titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\n    titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\n    titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\n    titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\n    var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\n    parentDiv.appendChild(startEndDateTimeDiv);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\n    startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\n    startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\n    startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\n    var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\n    parentDiv.appendChild(allDayTimezoneDiv);\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\n    allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\n    var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    parentDiv.appendChild(timezoneParentDiv);\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\n    timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\n    var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\n    parentDiv.appendChild(repeatParentDiv);\n    var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\n    var repeatEditConainer = createElement('span', {\n      className: REPEAT_CONTAINER_CLASS\n    });\n    var button = createElement('button', {\n      className: REPEAT_BUTTON_CLASS,\n      attrs: {\n        type: 'button',\n        'title': this.l10n.getConstant('editRecurrence')\n      }\n    });\n    this.buttonObj = new Button({\n      iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons',\n      cssClass: 'e-medium ' + this.parent.cssClass\n    });\n    repeatEditConainer.appendChild(button);\n    this.buttonObj.appendTo(button);\n    this.buttonObj.isStringTemplate = true;\n    repeatDiv.appendChild(repeatEditConainer);\n    repeatParentDiv.appendChild(repeatDiv);\n\n    if (this.parent.isAdaptive) {\n      EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\n    } else {\n      this.createRecurrenceEditor(parentDiv);\n    }\n\n    if (this.parent.resourceCollection.length > 0) {\n      var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\n\n      for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        resourceParentDiv.appendChild(this.renderResourceDetails(resource));\n      }\n\n      parentDiv.appendChild(resourceParentDiv);\n    }\n\n    var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\n    description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\n    description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\n    parentDiv.appendChild(description);\n    var submit = createElement('button', {\n      attrs: {\n        type: 'hidden',\n        title: 'submit',\n        style: 'display:none'\n      }\n    });\n    parentDiv.appendChild(submit);\n    return parentDiv;\n  };\n\n  EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\n    var recurrenceEditor = this.createDivElement();\n    parentDiv.appendChild(recurrenceEditor);\n    this.recurrenceEditor = this.renderRecurrenceEditor();\n    this.recurrenceEditor.appendTo(recurrenceEditor);\n    this.updateMinMaxDateToEditor();\n  };\n\n  EventWindow.prototype.createDivElement = function (className) {\n    return createElement('div', {\n      className: className\n    });\n  };\n\n  EventWindow.prototype.createInputElement = function (className, fieldName, type) {\n    return createElement(type || 'input', {\n      className: className,\n      attrs: {\n        type: 'text',\n        name: fieldName,\n        value: '',\n        id: fieldName,\n        title: this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1)) === '' ? fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\n      }\n    });\n  };\n\n  EventWindow.prototype.getSlotDuration = function () {\n    return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n  };\n\n  EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\n    var dateTimeDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    dateTimeDiv.appendChild(dateTimeInput);\n    var dateTimePicker = new DateTimePicker({\n      change: changeEvent,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      calendarMode: this.parent.calendarMode,\n      min: this.parent.minDate,\n      max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\n      cssClass: this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      floatLabelType: 'Always',\n      format: (isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.getFormat('timeFormats'),\n      placeholder: this.getFieldLabel(value),\n      step: this.getSlotDuration(),\n      width: '100%'\n    });\n    dateTimePicker.isStringTemplate = true;\n    dateTimePicker.appendTo(dateTimeInput);\n    return dateTimeDiv;\n  };\n\n  EventWindow.prototype.refreshDateTimePicker = function (duration) {\n    var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\n    var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\n      var element = startEndElement_1[_i];\n      var instance = element.ej2_instances[0];\n      instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\n      instance.step = duration || this.getSlotDuration();\n      instance.dataBind();\n    }\n  };\n\n  EventWindow.prototype.onTimeChange = function () {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n\n    if (startObj.element.parentElement.classList.contains('e-input-focus')) {\n      var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n      var duration = 0;\n\n      if (this.cellClickAction) {\n        duration = util.MS_PER_MINUTE * this.duration;\n        this.eventWindowTime.startTime = startObj.value;\n      } else {\n        duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\n      }\n\n      var endDate = isNullOrUndefined(startObj.value) ? null : new Date(startObj.value.getTime() + duration);\n\n      if (this.cellClickAction) {\n        this.eventWindowTime.endTime = endDate;\n      }\n\n      endObj.value = endDate;\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\n    }\n  };\n\n  EventWindow.prototype.renderResourceDetails = function (resourceData) {\n    var fieldName = resourceData.field;\n    var value = 'e-' + fieldName;\n    var labelValue = resourceData.title;\n    var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\n    var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    resourceDiv.appendChild(resourceInput);\n    var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' + resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\n\n    if (resourceData.allowMultiple) {\n      var listObj = new MultiSelect({\n        cssClass: this.parent.cssClass || '',\n        dataSource: resourceData.dataSource,\n        change: this.onMultiselectResourceChange.bind(this),\n        itemTemplate: resourceTemplate,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        mode: 'Box'\n      });\n      listObj.appendTo(resourceInput);\n      listObj.isStringTemplate = true;\n    } else {\n      var drowDownList = new DropDownList({\n        cssClass: this.parent.cssClass || '',\n        change: this.onDropdownResourceChange.bind(this),\n        dataSource: resourceData.dataSource,\n        enableRtl: this.parent.enableRtl,\n        fields: {\n          text: resourceData.textField,\n          value: resourceData.idField\n        },\n        htmlAttributes: {\n          'title': labelValue,\n          'name': fieldName\n        },\n        floatLabelType: 'Always',\n        placeholder: labelValue,\n        popupHeight: '230px',\n        popupWidth: '447px',\n        itemTemplate: resourceTemplate\n      });\n      drowDownList.appendTo(resourceInput);\n      drowDownList.isStringTemplate = true;\n    }\n\n    return resourceDiv;\n  };\n\n  EventWindow.prototype.renderDropDown = function (value) {\n    var fieldName = this.getFieldName(value);\n    var timezoneDiv = this.createDivElement(value + '-container');\n    var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    timezoneDiv.appendChild(timezoneInput);\n    var drowDownList = new DropDownList({\n      allowFiltering: true,\n      change: this.onTimezoneChange.bind(this),\n      cssClass: this.parent.cssClass || '',\n      dataSource: timezoneData,\n      enableRtl: this.parent.enableRtl,\n      fields: {\n        text: 'Text',\n        value: 'Value'\n      },\n      filterBarPlaceholder: 'Search Timezone',\n      filtering: function (e) {\n        var query = new Query();\n        query = e.text !== '' ? query.where('Text', 'contains', e.text, true) : query;\n        e.updateData(timezoneData, query);\n      },\n      htmlAttributes: {\n        'title': this.getFieldLabel(value),\n        'name': fieldName\n      },\n      floatLabelType: 'Always',\n      placeholder: this.getFieldLabel(value),\n      popupHeight: '230px'\n    });\n    drowDownList.appendTo(timezoneInput);\n    drowDownList.isStringTemplate = true;\n    return timezoneDiv;\n  };\n\n  EventWindow.prototype.onMultiselectResourceChange = function (args) {\n    if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\n      return;\n    }\n\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\n        var resObject = this.createInstance(i);\n        var datasource = [];\n\n        var _loop_1 = function (j) {\n          var resourceModel = resourceCollection[i + 1];\n          var filter = resourceModel.dataSource.filter(function (data) {\n            return data[resourceModel.groupIDField] === args.value[j];\n          })[0];\n          var groupId = filter[resourceCollection[i + 1].groupIDField];\n          var filterRes = this_1.filterDatasource(i, groupId);\n          datasource = datasource.concat(filterRes);\n        };\n\n        var this_1 = this;\n\n        for (var j = 0; j < args.value.length; j++) {\n          _loop_1(j);\n        }\n\n        resObject.dataSource = datasource;\n        resObject.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.createInstance = function (index) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    var resObject = this.element.querySelector('.e-' + resourceData.field).ej2_instances[0];\n    return resObject;\n  };\n\n  EventWindow.prototype.onDropdownResourceChange = function (args) {\n    if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\n      return;\n    }\n\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n    var resourceCollection = this.parent.resourceBase.resourceCollection;\n\n    for (var i = 0; i < resourceCollection.length; i++) {\n      if (i < resourceCollection.length - 1 && resourceCollection[i].field === fieldName) {\n        var resObj = this.createInstance(i);\n        var groupId = args.itemData[resourceCollection[i].idField];\n        resObj.dataSource = this.filterDatasource(i, groupId);\n        resObj.dataBind();\n        var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\n        resObj.value = resourceCollection[i + 1].allowMultiple ? [resValue] : resValue;\n        resObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.filterDatasource = function (index, groupId) {\n    var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\n    var filter = resourceData.dataSource.filter(function (data) {\n      return data[resourceData.groupIDField] === groupId;\n    });\n    return filter;\n  };\n\n  EventWindow.prototype.onTimezoneChange = function (args) {\n    var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\n\n    if (fieldName === this.parent.eventFields.startTimezone) {\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      endTimezoneObj.value = startTimezoneObj.value;\n      endTimezoneObj.dataBind();\n    }\n  };\n\n  EventWindow.prototype.renderCheckBox = function (value) {\n    var checkBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\n    checkBoxDiv.appendChild(checkBoxInput);\n    var checkBox = new CheckBox({\n      change: this.onChange.bind(this),\n      cssClass: value + ' ' + this.parent.cssClass,\n      enableRtl: this.parent.enableRtl,\n      label: this.getFieldLabel(value)\n    });\n    checkBox.appendTo(checkBoxInput);\n    checkBox.isStringTemplate = true;\n    checkBoxInput.setAttribute('name', fieldName);\n\n    if (fieldName === 'Repeat') {\n      this.repeatStatus = checkBox;\n    }\n\n    return checkBoxDiv;\n  };\n\n  EventWindow.prototype.renderTextBox = function (value) {\n    var textBoxDiv = this.createDivElement(value + '-container');\n    var fieldName = this.getFieldName(value);\n    var elementType = value === cls.DESCRIPTION_CLASS ? 'textarea' : 'input';\n    var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\n    textBoxDiv.appendChild(textBoxInput);\n    Input.createInput({\n      element: textBoxInput,\n      floatLabelType: 'Always',\n      properties: {\n        enableRtl: this.parent.enableRtl,\n        placeholder: this.getFieldLabel(value)\n      }\n    });\n    return textBoxDiv;\n  };\n\n  EventWindow.prototype.getFieldName = function (name) {\n    var fieldName = '';\n\n    switch (name) {\n      case cls.SUBJECT_CLASS:\n        fieldName = this.fields.subject;\n        break;\n\n      case cls.LOCATION_CLASS:\n        fieldName = this.fields.location;\n        break;\n\n      case cls.EVENT_WINDOW_START_CLASS:\n        fieldName = this.fields.startTime;\n        break;\n\n      case cls.EVENT_WINDOW_END_CLASS:\n        fieldName = this.fields.endTime;\n        break;\n\n      case cls.DESCRIPTION_CLASS:\n        fieldName = this.fields.description;\n        break;\n\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        fieldName = this.fields.isAllDay;\n        break;\n\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        fieldName = this.fields.startTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        fieldName = this.fields.endTimezone;\n        break;\n\n      case cls.TIME_ZONE_CLASS:\n        fieldName = 'Timezone';\n        break;\n\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        fieldName = 'Repeat';\n        break;\n    }\n\n    return fieldName;\n  };\n\n  EventWindow.prototype.getFieldLabel = function (fieldName) {\n    var labelText = '';\n\n    switch (fieldName) {\n      case cls.SUBJECT_CLASS:\n        labelText = this.parent.editorTitles.subject;\n        break;\n\n      case cls.LOCATION_CLASS:\n        labelText = this.parent.editorTitles.location;\n        break;\n\n      case cls.DESCRIPTION_CLASS:\n        labelText = this.parent.editorTitles.description;\n        break;\n\n      case cls.EVENT_WINDOW_START_CLASS:\n        labelText = this.parent.editorTitles.startTime;\n        break;\n\n      case cls.EVENT_WINDOW_END_CLASS:\n        labelText = this.parent.editorTitles.endTime;\n        break;\n\n      case cls.EVENT_WINDOW_START_TZ_CLASS:\n        labelText = this.parent.editorTitles.startTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_END_TZ_CLASS:\n        labelText = this.parent.editorTitles.endTimezone;\n        break;\n\n      case cls.EVENT_WINDOW_REPEAT_CLASS:\n        labelText = this.parent.editorTitles.recurrenceRule;\n        break;\n\n      case cls.EVENT_WINDOW_ALL_DAY_CLASS:\n        labelText = this.parent.editorTitles.isAllDay;\n        break;\n\n      case cls.TIME_ZONE_CLASS:\n        labelText = this.l10n.getConstant('timezone');\n        break;\n    }\n\n    return labelText;\n  };\n\n  EventWindow.prototype.onChange = function (args) {\n    var target = args.event.target;\n\n    if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\n      this.onAllDayChange(args.checked);\n    } else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\n      this.timezoneChangeStyle(args.checked);\n    } else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\n      this.onRepeatChange(args.checked);\n    }\n  };\n\n  EventWindow.prototype.renderRepeatDialog = function () {\n    var element = createElement('div');\n    this.repeatDialogObject = new Dialog({\n      header: this.l10n.getConstant('recurrence'),\n      visible: false,\n      content: '<div class=\"e-rec-editor\"></div>',\n      closeOnEscape: true,\n      width: '90%',\n      buttons: [{\n        click: this.repeatSaveDialog.bind(this),\n        buttonModel: {\n          content: this.l10n.getConstant('save'),\n          cssClass: 'e-save',\n          isPrimary: true\n        }\n      }, {\n        click: this.repeatCancelDialog.bind(this),\n        buttonModel: {\n          cssClass: 'e-cancel',\n          content: this.l10n.getConstant('cancel')\n        }\n      }],\n      target: this.element,\n      animationSettings: {\n        effect: 'Zoom'\n      },\n      enableRtl: this.parent.enableRtl,\n      isModal: true,\n      cssClass: REPEAT_DIALOG_CLASS,\n      open: this.repeatOpenDialog.bind(this)\n    });\n    this.element.appendChild(element);\n    this.repeatDialogObject.appendTo(element);\n    this.repeatDialogObject.isStringTemplate = true;\n    this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\n  };\n\n  EventWindow.prototype.loadRecurrenceEditor = function () {\n    this.repeatDialogObject.show();\n\n    if (this.recurrenceEditor && this.repeatRule) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n    }\n  };\n\n  EventWindow.prototype.onRepeatChange = function (state) {\n    if (state) {\n      if (!this.repeatDialogObject) {\n        this.renderRepeatDialog();\n      }\n\n      this.recurrenceEditor.setProperties({\n        startDate: this.repeatStartDate,\n        selectedType: 0\n      });\n      this.loadRecurrenceEditor();\n    } else {\n      if (this.repeatDialogObject) {\n        this.repeatDialogObject.hide();\n      }\n\n      this.repeatRule = '';\n\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\n        this.updateRepeatLabel(this.repeatRule);\n      }\n\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.repeatSaveDialog = function () {\n    this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\n    var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n    if (this.recurrenceEditor.getRecurrenceRule()) {\n      removeClass([element], HIDE_STYLE_CLASS);\n    } else {\n      addClass([element], HIDE_STYLE_CLASS);\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n\n    this.updateRepeatLabel(this.repeatRule);\n    this.closeRepeatDialog();\n  };\n\n  EventWindow.prototype.closeRepeatDialog = function () {\n    this.repeatDialogObject.hide();\n  };\n\n  EventWindow.prototype.repeatCancelDialog = function () {\n    this.closeRepeatDialog();\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\n    }\n\n    if (!this.repeatTempRule) {\n      this.repeatStatus.setProperties({\n        checked: false\n      });\n    }\n  };\n\n  EventWindow.prototype.repeatOpenDialog = function () {\n    this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\n  };\n\n  EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\n    if (!this.parent.eventSettings.allowAdding) {\n      return;\n    }\n\n    this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\n    this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\n    eventObj.Timezone = false;\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\n      eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\n      eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\n      eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n\n    if (deleteButton) {\n      addClass([deleteButton], cls.DISABLE_CLASS);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime],\n        selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ? this.recurrenceEditor.selectedType : 0\n      });\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n      addClass([element], HIDE_STYLE_CLASS);\n      this.updateRepeatLabel(this.repeatRule);\n    } else {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      this.disableButton(saveButton, false);\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\n    if (cellsData.subject) {\n      eventObj[this.fields.subject] = cellsData.subject;\n    }\n\n    eventObj[this.fields.startTime] = cellsData.startTime;\n    eventObj[this.fields.endTime] = cellsData.endTime;\n    eventObj[this.fields.isAllDay] = cellsData.isAllDay;\n\n    if (cellsData.RecurrenceRule) {\n      eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\n    }\n\n    if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\n      this.parent.resourceBase.setResourceValues(eventObj);\n    }\n  };\n\n  EventWindow.prototype.applyFormValidation = function () {\n    var getValidationRule = function (rules) {\n      return rules && Object.keys(rules).length > 0 ? rules : undefined;\n    };\n\n    var form = this.element.querySelector('.' + cls.FORM_CLASS);\n    var rules = {};\n    rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\n    rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\n    rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\n    rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\n    rules[this.parent.eventSettings.fields.description.name] = getValidationRule(this.parent.eventSettings.fields.description.validation);\n    this.fieldValidator.renderFormValidator(form, rules, this.element);\n  };\n\n  EventWindow.prototype.showDetails = function (eventData) {\n    var eventObj = extend({}, eventData, null, true);\n\n    if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\n      this.trimAllDay(eventObj);\n    }\n\n    this.eventData = eventObj;\n    var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n    var keyNames = Object.keys(eventObj);\n\n    for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\n      var curElement = formelement_1[_i];\n      var columnName = curElement.name || this.getColumnName(curElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        if (keyNames.indexOf(columnName) !== -1) {\n          this.setValueToElement(curElement, eventObj[columnName]);\n        } else {\n          this.setDefaultValueToElement(curElement);\n        }\n      }\n    }\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      this.onAllDayChange(eventObj[this.fields.isAllDay]);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n\n      if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\n        timezoneObj.checked = true;\n        timezoneObj.dataBind();\n      }\n\n      this.timezoneChangeStyle(timezoneObj.checked);\n      delete eventObj.Timezone;\n    }\n  };\n\n  EventWindow.prototype.getColumnName = function (element) {\n    var attrName = element.getAttribute('data-name') || '';\n\n    if (attrName === '') {\n      var isDropDowns = false;\n      var fieldSelector = '';\n\n      if (element.classList.contains('e-dropdownlist')) {\n        fieldSelector = 'e-ddl';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-multiselect')) {\n        fieldSelector = 'e-multiselect';\n        isDropDowns = true;\n      } else if (element.classList.contains('e-datetimepicker')) {\n        fieldSelector = 'e-datetimepicker';\n      } else if (element.classList.contains('e-datepicker')) {\n        fieldSelector = 'e-datepicker';\n      } else if (element.classList.contains('e-checkbox')) {\n        fieldSelector = 'e-checkbox';\n      }\n\n      var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\n      var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\n\n      if (control) {\n        var attrEle = control.querySelector('[name]');\n\n        if (attrEle) {\n          attrName = attrEle.name;\n        }\n      }\n    }\n\n    return attrName;\n  };\n\n  EventWindow.prototype.onAllDayChange = function (allDayStatus) {\n    var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\n    var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\n    var timezoneDiv = this.element.querySelector('.e-time-zone-container');\n    var format;\n\n    if (allDayStatus) {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') : this.parent.dateFormat;\n      addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      addClass([timezoneDiv], cls.DISABLE_CLASS);\n\n      if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\n        removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    } else {\n      format = isNullOrUndefined(this.parent.dateFormat) ? this.getFormat('dateFormats') + ' ' + this.getFormat('timeFormats') : this.parent.dateFormat + ' ' + this.getFormat('timeFormats');\n      removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\n      removeClass([timezoneDiv], cls.DISABLE_CLASS);\n\n      if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\n        addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\n      }\n\n      startObj.format = endObj.format = format;\n    }\n\n    if (this.cellClickAction) {\n      this.updateDateTime(allDayStatus, startObj, endObj);\n    }\n\n    startObj.dataBind();\n    endObj.dataBind();\n\n    if (!isNullOrUndefined(this.recurrenceEditor)) {\n      this.recurrenceEditor.updateRuleUntilDate(startObj.value);\n    }\n  };\n\n  EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\n    var startDate;\n    var endDate;\n\n    if (allDayStatus) {\n      startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\n        endDate = +this.eventWindowTime.startTime > temp ? this.eventWindowTime.endTime : new Date(temp);\n      } else {\n        endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\n      }\n    } else {\n      var start = this.parent.activeCellsData.startTime;\n      startDate = new Date(this.eventWindowTime.startTime.getTime());\n      startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\n\n      if (this.parent.activeCellsData.isAllDay) {\n        var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\n        startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\n      } else {\n        endDate = new Date(startDate.getTime());\n        endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\n      }\n    }\n\n    this.eventWindowTime = {\n      startTime: new Date(startDate.getTime()),\n      endTime: new Date(endDate.getTime())\n    };\n    startObj.value = startDate;\n    endObj.value = endDate;\n    startObj.dataBind();\n    endObj.dataBind();\n  };\n\n  EventWindow.prototype.getFormat = function (formatType) {\n    if (isBlazor()) {\n      if (formatType === 'dateFormats') {\n        return IntlBase.compareBlazorDateFormats({\n          skeleton: 'd'\n        }, this.parent.locale).format;\n      }\n\n      return IntlBase.compareBlazorDateFormats({\n        skeleton: 't'\n      }, this.parent.locale).format;\n    }\n\n    var format;\n\n    if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n      format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\n    } else {\n      format = getValue( // tslint:disable-next-line:max-line-length\n      'main.' + '' + this.parent.locale + '.dates.calendars.' + this.parent.getCalendarMode() + '.' + formatType + '.short', cldrData);\n    }\n\n    return format;\n  };\n\n  EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\n    if (!this.parent.eventSettings.allowEditing) {\n      return;\n    }\n\n    if (!this.parent.isAdaptive) {\n      removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\n    }\n\n    this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\n    this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      eventObj = extend({}, eventObj, null, true);\n      var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\n      var timezoneValue = void 0;\n\n      if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\n        timezoneValue = true;\n        this.parent.eventBase.timezoneConvert(eventObj);\n      } else {\n        timezoneValue = false;\n      }\n\n      eventObj.Timezone = timezoneValue;\n      timezoneObj.checked = timezoneValue;\n      timezoneObj.dataBind();\n    }\n\n    this.showDetails(eventObj);\n\n    if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\n      this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n    } else if (!this.parent.isAdaptive && this.recurrenceEditor) {\n      this.recurrenceEditor.setProperties({\n        startDate: eventObj[this.fields.startTime]\n      });\n      this.recurrenceEditor.setRecurrenceRule('');\n    }\n\n    this.repeatStartDate = eventObj[this.fields.startTime];\n    this.repeatRule = '';\n\n    if (eventObj[this.fields.recurrenceRule]) {\n      if (this.recurrenceEditor) {\n        this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\n      }\n\n      this.repeatRule = eventObj[this.fields.recurrenceRule];\n    }\n\n    if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\n      var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\n\n      if (eventObj[this.fields.recurrenceRule]) {\n        removeClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: true\n        });\n      } else {\n        addClass([element], HIDE_STYLE_CLASS);\n        this.repeatStatus.setProperties({\n          checked: false\n        });\n      }\n\n      this.updateRepeatLabel(this.repeatRule);\n    }\n\n    var isDisable = this.parent.readonly || eventObj[this.fields.isReadonly];\n\n    if (!this.parent.isAdaptive) {\n      var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\n      var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\n      this.disableButton(saveButton, isDisable);\n      this.disableButton(deleteButton, isDisable);\n    } else {\n      var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\n\n      if (saveIcon) {\n        if (isDisable) {\n          addClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        } else {\n          removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\n        }\n      }\n    }\n\n    this.dialogObject.show();\n  };\n\n  EventWindow.prototype.disableButton = function (element, value) {\n    if (element) {\n      element.ej2_instances[0].disabled = value;\n    }\n  };\n\n  EventWindow.prototype.renderRecurrenceEditor = function () {\n    return new RecurrenceEditor({\n      calendarMode: this.parent.calendarMode,\n      cssClass: this.parent.cssClass,\n      dateFormat: this.parent.dateFormat,\n      enableRtl: this.parent.enableRtl,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      locale: this.parent.locale\n    });\n  };\n\n  EventWindow.prototype.updateMinMaxDateToEditor = function () {\n    var startDate = this.element.querySelector('.e-start');\n    var endDate = this.element.querySelector('.e-end');\n\n    if (startDate && endDate) {\n      var startObj = startDate.ej2_instances[0];\n      var endObj = endDate.ej2_instances[0];\n      startObj.min = this.parent.minDate;\n      startObj.max = this.parent.maxDate;\n      endObj.min = this.parent.minDate;\n      endObj.max = this.parent.maxDate;\n      startObj.dataBind();\n      endObj.dataBind();\n    }\n\n    if (this.recurrenceEditor) {\n      var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\n\n      if (untilDate) {\n        var untilObj = untilDate.ej2_instances[0];\n        untilObj.min = this.parent.minDate;\n        untilObj.max = this.parent.maxDate;\n        untilObj.dataBind();\n      }\n    }\n  };\n\n  EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    var data = repeatRule ? this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule) : this.l10n.getConstant('repeat');\n    this.repeatStatus.setProperties({\n      label: data\n    });\n  };\n\n  EventWindow.prototype.dialogClose = function () {\n    this.isCrudAction = false;\n    this.parent.activeEventData = {\n      event: undefined,\n      element: undefined\n    };\n    this.parent.currentAction = null;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.resetForm = function () {\n    this.fieldValidator.destroyToolTip();\n    this.resetFormFields();\n\n    if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\n      this.recurrenceEditor.resetFields();\n    }\n  };\n\n  EventWindow.prototype.timezoneChangeStyle = function (value) {\n    var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\n    var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\n\n    if (value) {\n      addClass([timezoneDiv], cls.ENABLE_CLASS);\n      var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\n      var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\n      var timezone = startTimezoneObj.dataSource;\n\n      if (!startTimezoneObj.value || !this.parent.timezone) {\n        var found = timezone.some(function (tz) {\n          return tz.Value === localTimezoneName;\n        });\n\n        if (!found) {\n          timezone.push({\n            Value: localTimezoneName,\n            Text: localTimezoneName\n          });\n          startTimezoneObj.dataSource = timezone;\n          endTimezoneObj.dataSource = timezone;\n          startTimezoneObj.dataBind();\n          endTimezoneObj.dataBind();\n        }\n      }\n\n      startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\n      startTimezoneObj.dataBind();\n      endTimezoneObj.dataBind();\n    } else {\n      removeClass([timezoneDiv], cls.ENABLE_CLASS);\n    }\n  };\n\n  EventWindow.prototype.resetFormFields = function () {\n    var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\n      var currentElement = formElement_1[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        this.setDefaultValueToElement(currentElement);\n      }\n    }\n  };\n\n  EventWindow.prototype.eventSave = function (alert) {\n    var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\n\n    if (formElement && formElement.classList.contains('e-formvalidator') && !formElement.ej2_instances[0].validate()) {\n      return;\n    }\n\n    var dataCollection = this.getEventDataFromEditor();\n\n    if (this.processEventValidation(dataCollection.tempData, alert)) {\n      return;\n    }\n\n    this.eventCrudData = dataCollection.eventData;\n    this.isCrudAction = true;\n    this.dialogObject.hide();\n  };\n\n  EventWindow.prototype.getEventDataFromEditor = function () {\n    var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\n\n    if (!eventObj.Timezone) {\n      eventObj[this.fields.startTimezone] = null;\n      eventObj[this.fields.endTimezone] = null;\n    }\n\n    delete eventObj.Timezone;\n    delete eventObj.Repeat;\n    this.setDefaultValueToObject(eventObj);\n    eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\n    var tempObj = extend({}, eventObj, null, true);\n\n    if (eventObj[this.fields.isAllDay]) {\n      eventObj[this.fields.startTime] = isNullOrUndefined(eventObj[this.fields.startTime]) ? null : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\n      eventObj[this.fields.endTime] = isNullOrUndefined(eventObj[this.fields.endTime]) ? null : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\n    }\n\n    return {\n      eventData: eventObj,\n      tempData: tempObj\n    };\n  };\n\n  EventWindow.prototype.processEventValidation = function (eventObj, alert) {\n    var alertType;\n\n    if (isNullOrUndefined(this.parent.editorTemplate)) {\n      if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('invalidDateError');\n        return true;\n      }\n\n      if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\n        this.parent.quickPopup.openValidationError('startEndError');\n        return true;\n      }\n    }\n\n    if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\n      alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\n      var isShowAlert = true;\n\n      if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\n        isShowAlert = false;\n      }\n\n      if (!isNullOrUndefined(alertType) && isShowAlert && (!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern' || this.parent.enableRecurrenceValidation)) {\n        this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.processCrudActions = function (eventObj) {\n    var _this = this;\n\n    this.parent.uiStateValues.isBlock = false;\n    var resourceData = this.getResourceData(eventObj);\n    var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 || this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit && !isNullOrUndefined(resourceData);\n    var eventId = this.getEventIdFromForm();\n\n    if (!isNullOrUndefined(eventId)) {\n      var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\n      var editedData = this.parent.eventsData.filter(function (data) {\n        return data[_this.fields.id] === eveId_1;\n      })[0];\n\n      if (isNullOrUndefined(editedData)) {\n        editedData = this.parent.blockData.filter(function (data) {\n          return data[_this.fields.id] === eveId_1;\n        })[0];\n      }\n\n      eventObj = extend({}, editedData, eventObj);\n\n      if (eventObj[this.fields.isReadonly]) {\n        return false;\n      }\n\n      var currentAction = void 0;\n\n      if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\n        currentAction = this.parent.currentAction;\n        eventObj.Guid = this.parent.activeEventData.event.Guid;\n\n        if (this.parent.currentAction === 'EditOccurrence') {\n          if (!eventObj[this.fields.recurrenceID]) {\n            eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n            eventObj.Guid = this.parent.activeEventData.event.Guid;\n          } else {\n            eveId_1 = eventObj[this.fields.recurrenceID];\n            currentAction = null;\n          }\n\n          if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\n            this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n            return true;\n          }\n        }\n\n        if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\n          eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\n        } else if (this.parent.currentAction === 'EditFollowingEvents') {\n          eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n          eventObj[this.fields.followingID] = editedData[this.fields.id];\n        }\n      }\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, 'Save', currentAction);\n      } else {\n        this.parent.saveEvent(eventObj, currentAction);\n      }\n    } else {\n      this.parent.currentAction = 'Add';\n\n      if (isResourceEventExpand) {\n        this.resourceSaveEvent(eventObj, this.parent.currentAction);\n      } else {\n        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\n        this.parent.addEvent(eventObj);\n      }\n    }\n\n    return this.parent.uiStateValues.isBlock;\n  };\n\n  EventWindow.prototype.getResourceData = function (eventObj) {\n    var resourceData = null;\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection) && this.parent.resourceBase.resourceCollection.length > 0) {\n      var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n      resourceData = eventObj[lastResouceData.field];\n    }\n\n    return resourceData;\n  };\n\n  EventWindow.prototype.getObjectFromFormData = function (className) {\n    var formElement = this.getFormElements(className);\n    var eventObj = {};\n\n    for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\n      var currentElement = formElement_2[_i];\n      var columnName = currentElement.name || this.getColumnName(currentElement);\n\n      if (!isNullOrUndefined(columnName) && columnName !== '') {\n        eventObj[columnName] = this.getValueFromElement(currentElement);\n      }\n    }\n\n    return eventObj;\n  };\n\n  EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\n    if (!isNullOrUndefined(eventObj[this.fields.subject])) {\n      eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default || this.l10n.getConstant('addTitle');\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.location])) {\n      eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\n    }\n\n    if (!isNullOrUndefined(eventObj[this.fields.description])) {\n      eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\n    }\n  };\n\n  EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\n    var alertMessage;\n    var recEditor = this.recurrenceEditor;\n    var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\n\n    if (alert !== this.l10n.getConstant('ok')) {\n      var activeEvent = this.parent.activeEventData.event;\n      var excludedEvents = [];\n\n      if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents') && !isNullOrUndefined(activeEvent)) {\n        var eventStartTime = activeEvent[this.parent.eventFields.startTime];\n        var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\n\n        if (seriesEvents.length > 0) {\n          excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\n        } else {\n          var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\n          excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\n        }\n\n        if (this.parent.currentAction === 'EditSeries' && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\n          excludedEvents.push(this.eventData);\n        }\n      }\n\n      if (excludedEvents.length > 0) {\n        alertMessage = 'seriesChangeAlert';\n      }\n\n      if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' && this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\n        alertMessage = 'wrongPattern';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        switch (recEditor.value.split(';')[0].split('=')[1]) {\n          case 'DAILY':\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= interval * 24) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'WEEKLY':\n            var types = recEditor.value.split(';')[1].split('=')[1].split(',');\n            var obj = {\n              'SU': 0,\n              'MO': 1,\n              'TU': 2,\n              'WE': 3,\n              'TH': 4,\n              'FR': 5,\n              'SA': 6\n            };\n            var temp = [];\n            var tempDiff = [];\n\n            for (var index = 0; index < types.length * (interval + 1); index++) {\n              temp[index] = types.length > index ? obj[types[index]] : temp[index - types.length] + 7 * interval;\n            }\n\n            var tempvalue = temp.sort(function (a, b) {\n              return a - b;\n            });\n\n            for (var index = 1; index < tempvalue.length; index++) {\n              tempDiff.push(tempvalue[index] - tempvalue[index - 1]);\n            }\n\n            if ((endDate.getTime() - startDate.getTime()) / (1000 * 3600) >= Math.min.apply(Math, tempDiff) * 24 || isNullOrUndefined(interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'MONTHLY':\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n\n          case 'YEARLY':\n            if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\n              alertMessage = 'createError';\n            }\n\n            break;\n        }\n      }\n    } else {\n      if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\n        alertMessage = 'createError';\n      }\n\n      if (isNullOrUndefined(alertMessage)) {\n        this.parent.quickPopup.quickDialog.hide();\n      }\n    }\n\n    return alertMessage;\n  };\n\n  EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\n    var recIndex;\n\n    for (var index = 0; index < recColl.length; index++) {\n      if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\n        recIndex = index;\n        break;\n      }\n    }\n\n    return recIndex;\n  };\n\n  EventWindow.prototype.trimAllDay = function (data) {\n    if (data[this.fields.isAllDay]) {\n      var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\n      data[this.fields.endTime] = +data[this.fields.startTime] > temp ? data[this.fields.endTime] : new Date(temp);\n    }\n  };\n\n  EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\n    var _this = this;\n\n    if (editData === void 0) {\n      editData = this.eventData;\n    }\n\n    var recurColl = this.parent.getOccurrencesByID(eventId);\n    var excludedDatas = this.parent.eventsData.filter(function (data) {\n      return data[_this.fields.recurrenceID] === eventId;\n    });\n    excludedDatas.map(function (data) {\n      return recurColl.push(extend({}, data));\n    });\n    currentData = extend({}, currentData);\n    this.trimAllDay(currentData);\n\n    for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\n      var data = recurColl_1[_i];\n      this.trimAllDay(data);\n    }\n\n    this.parent.eventBase.sortByTime(recurColl);\n    var index = this.getRecurrenceIndex(recurColl, editData);\n\n    if (isNullOrUndefined(index)) {\n      return false;\n    }\n\n    if (index === 0) {\n      if (!isNullOrUndefined(recurColl[index + 1])) {\n        return !(new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) > new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0));\n      }\n\n      return false;\n    } else {\n      if (index === recurColl.length - 1) {\n        if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) < new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0))) {\n          return true;\n        }\n      } else if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) < new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0) && new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) > new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0))) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\n    var _this = this;\n\n    var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\n    var resourceData = eventObj[lastResouceData.field];\n    resourceData = resourceData instanceof Array ? resourceData : [resourceData];\n    var lastlevel = this.parent.resourceBase.lastResourceLevel;\n    var eventList = [];\n\n    var _loop_2 = function (i) {\n      var events = extend({}, eventObj, null, true);\n      events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\n      var temp = [];\n\n      var addValues = function () {\n        if (action === 'Save' && i === resourceData.length - 1) {\n          if (temp.length > 0) {\n            temp[0][_this.fields.id] = eventObj[_this.fields.id];\n\n            for (var k = 1; k < temp.length; k++) {\n              temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n              eventList.push(temp[k]);\n\n              _this.parent.saveEvent(temp[0], currentAction);\n            }\n          } else {\n            events[_this.fields.id] = eventObj[_this.fields.id];\n\n            _this.parent.saveEvent(events, currentAction);\n          }\n        } else {\n          if (temp.length > 0) {\n            for (var j = 0; j < temp.length; j++) {\n              temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\n              eventList.push(temp[j]);\n            }\n          } else {\n            events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\n            eventList.push(events);\n          }\n        }\n      };\n\n      if (this_2.parent.activeViewOptions.group.byGroupID && !isNullOrUndefined(lastlevel)) {\n        var lastResource = lastResouceData.dataSource;\n        var resCol = this_2.parent.resourceCollection;\n        var index = void 0;\n\n        if (resCol.length > 1) {\n          index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i], events, resCol);\n        } else {\n          index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i]);\n        }\n\n        if (index < 0) {\n          return {\n            value: void 0\n          };\n        }\n\n        var groupId_1 = lastResource[index][lastResouceData.groupIDField];\n        var filter = lastlevel.filter(function (obj) {\n          return obj.resourceData[lastResouceData.idField] === resourceData[i];\n        }).filter(function (obj) {\n          return obj.resourceData[lastResouceData.groupIDField] === groupId_1;\n        })[0];\n        var groupOrder = filter.groupOrder;\n\n        for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\n          var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\n          events[field] = groupOrder[index_1] instanceof Array ? groupOrder[index_1][0] : groupOrder[index_1];\n        }\n\n        addValues();\n      } else {\n        for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\n          var field = this_2.parent.resourceBase.resourceCollection[index].field;\n\n          if (events[field] instanceof Array && events[field].length > 1) {\n            for (var k = 0; k < events[field].length; k++) {\n              var event_3 = extend({}, events, null, true);\n              event_3[field] = eventObj[field][k];\n              event_3[lastResouceData.field] = resourceData[i];\n              temp.push(event_3);\n            }\n          } else {\n            if (temp.length === 0) {\n              events[field] = eventObj[field] instanceof Array ? eventObj[field][0] : eventObj[field];\n              events[lastResouceData.field] = resourceData[i];\n            } else {\n              for (var l = 0; l < temp.length; l++) {\n                temp[l][field] = eventObj[field] instanceof Array ? eventObj[field][0] : eventObj[field];\n              }\n            }\n          }\n        }\n\n        events[lastResouceData.field] = resourceData[i];\n        addValues();\n      }\n    };\n\n    var this_2 = this;\n\n    for (var i = 0; i < resourceData.length; i++) {\n      var state_1 = _loop_2(i);\n\n      if (typeof state_1 === \"object\") return state_1.value;\n    }\n\n    if (eventList.length > 0) {\n      for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\n        var event_4 = eventList_1[_i];\n        event_4[this.fields.recurrenceException] = null;\n        event_4[this.fields.recurrenceID] = null;\n      }\n\n      this.parent.addEvent(eventList);\n    }\n  };\n\n  EventWindow.prototype.getEventIdFromForm = function () {\n    return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\n  };\n\n  EventWindow.prototype.getFormElements = function (className) {\n    var elements = [];\n\n    if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\n      elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\n    } else {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\n    }\n\n    if (!isBlazor()) {\n      return elements;\n    }\n\n    var validElements = [];\n\n    for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n      var element = elements_1[_i];\n\n      if (element.classList.contains('e-control')) {\n        validElements.push(element);\n      } else if (element.querySelector('.e-control')) {\n        validElements.push(element.querySelector('.e-control'));\n      } else {\n        validElements.push(element);\n      }\n    }\n\n    return validElements;\n  };\n\n  EventWindow.prototype.getValueFromElement = function (element) {\n    var value;\n\n    if (element.classList.contains('e-datepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-datetimepicker')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-dropdownlist')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-multiselect')) {\n      value = element.ej2_instances[0].value;\n    } else if (element.classList.contains('e-checkbox')) {\n      value = element.ej2_instances[0].checked;\n    } else {\n      if (element.type === 'checkbox') {\n        value = element.checked;\n      } else {\n        value = SanitizeHtmlHelper.sanitize(element.value);\n      }\n    }\n\n    return value;\n  };\n\n  EventWindow.prototype.setValueToElement = function (element, value) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n\n      if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\n        this.eventWindowTime.startTime = new Date('' + value);\n      } else {\n        this.eventWindowTime.endTime = new Date('' + value);\n      }\n\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = value;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.value = value instanceof Array ? value : [value];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = value;\n      instance.dataBind();\n    } else {\n      if (element.type !== 'checkbox') {\n        element.value = value || '';\n      } else {\n        element.checked = value;\n      }\n    }\n  };\n\n  EventWindow.prototype.setDefaultValueToElement = function (element) {\n    if (element.classList.contains('e-datepicker')) {\n      var instance = element.ej2_instances[0];\n      instance.value = this.parent.getCurrentTime();\n      instance.dataBind();\n    } else if (element.classList.contains('e-datetimepicker')) {\n      var instance = element.ej2_instances[0];\n      var dateValue = this.parent.getCurrentTime();\n      this.eventWindowTime = {\n        startTime: dateValue,\n        endTime: dateValue\n      };\n      instance.value = dateValue;\n      instance.dataBind();\n    } else if (element.classList.contains('e-dropdownlist')) {\n      var instance = element.ej2_instances[0];\n      instance.value = null;\n      instance.dataBind();\n    } else if (element.classList.contains('e-multiselect')) {\n      var instance = element.ej2_instances[0];\n      instance.value = [];\n      instance.dataBind();\n    } else if (element.classList.contains('e-checkbox')) {\n      var instance = element.ej2_instances[0];\n      instance.checked = false;\n      instance.dataBind();\n    } else {\n      if (element.type === 'checkbox') {\n        element.checked = false;\n      } else {\n        element.value = '';\n      }\n    }\n  };\n\n  EventWindow.prototype.getInstance = function (className) {\n    var element = this.element.querySelector('.' + className);\n    return element ? element.ej2_instances[0] : null;\n  };\n\n  EventWindow.prototype.eventDelete = function () {\n    switch (this.parent.currentAction) {\n      case 'EditOccurrence':\n        var fields = this.parent.eventFields;\n\n        if (!isNullOrUndefined(this.parent.activeEventData.event[fields.recurrenceRule])) {\n          this.parent.currentAction = 'DeleteOccurrence';\n        } else {\n          this.parent.currentAction = 'Delete';\n        }\n\n        break;\n\n      case 'EditSeries':\n        this.parent.currentAction = 'DeleteSeries';\n        break;\n\n      case 'Save':\n        this.parent.currentAction = 'Delete';\n        break;\n    }\n\n    this.isCrudAction = false;\n    this.dialogObject.hide();\n    this.parent.quickPopup.openDeleteAlert();\n  };\n\n  EventWindow.prototype.getRecurrenceEditorInstance = function () {\n    if (this.parent.isAdaptive && !this.repeatDialogObject) {\n      this.renderRepeatDialog();\n    }\n\n    return this.recurrenceEditor;\n  };\n\n  EventWindow.prototype.destroyComponents = function () {\n    var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\n\n    for (var _i = 0, formelement_2 = formelement; _i < formelement_2.length; _i++) {\n      var element = formelement_2[_i];\n      var instance = void 0;\n\n      if (element.classList.contains('e-datetimepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-datepicker')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-checkbox')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-dropdownlist')) {\n        instance = element.ej2_instances;\n      } else if (element.classList.contains('e-multiselect')) {\n        instance = element.ej2_instances;\n      }\n\n      if (instance && instance[0]) {\n        instance[0].destroy();\n      }\n    }\n\n    if (this.buttonObj) {\n      this.buttonObj.destroy();\n    }\n  };\n  /**\r\n   * To destroy the event window.\r\n   * @return {void}\r\n   * @private\r\n   */\n\n\n  EventWindow.prototype.destroy = function () {\n    if (!this.parent.isDestroyed) {\n      this.resetEditorTemplate();\n      this.updateEditorTemplate();\n      this.parent.resetTemplates(['editorTemplate']);\n    }\n\n    if (this.recurrenceEditor) {\n      this.recurrenceEditor.destroy();\n    }\n\n    this.destroyComponents();\n    this.fieldValidator.destroy();\n\n    if (this.repeatDialogObject) {\n      this.repeatDialogObject.destroy();\n      remove(this.repeatDialogObject.element);\n    }\n\n    if (this.dialogObject) {\n      this.dialogObject.destroy();\n      this.dialogObject = null;\n    }\n\n    if (this.element) {\n      remove(this.element);\n      this.element = null;\n    }\n  };\n\n  return EventWindow;\n}();\n\nexport { EventWindow };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-schedule/src/schedule/popups/event-window.js"],"names":["createElement","isNullOrUndefined","addClass","remove","EventHandler","extend","append","cldrData","removeClass","getValue","getDefaultDateObject","closest","getElement","SanitizeHtmlHelper","updateBlazorTemplate","resetBlazorTemplate","isBlazor","IntlBase","Query","Deferred","CheckBox","Button","Dialog","DropDownList","MultiSelect","Input","DateTimePicker","timezoneData","FieldValidator","RecurrenceEditor","cls","event","util","EVENT_FIELD","REPEAT_CONTAINER_CLASS","REPEAT_BUTTON_ICON_CLASS","REPEAT_BUTTON_CLASS","REPEAT_DIALOG_CLASS","HIDE_STYLE_CLASS","EventWindow","parent","l10n","localeObj","fields","eventFields","eventWindowTime","startTime","Date","endTime","fieldValidator","renderEventWindow","prototype","element","id","appendChild","dialogModel","animationSettings","effect","content","getEventWindowContent","cssClass","EVENT_WINDOW_DIALOG_CLASS","enableRtl","height","isAdaptive","minHeight","isModal","showCloseIcon","target","document","body","visible","width","beforeOpen","onBeforeOpen","bind","beforeClose","onBeforeClose","DEVICE_CLASS","header","getConstant","buttons","buttonModel","DELETE_EVENT_CLASS","disabled","eventSettings","allowDeleting","readonly","click","eventDelete","EVENT_WINDOW_SAVE_BUTTON_CLASS","isPrimary","allowAdding","eventSave","EVENT_WINDOW_CANCEL_BUTTON_CLASS","dialogClose","dialogObject","isStringTemplate","querySelector","setAttribute","parentElement","add","EVENT_WINDOW_BACK_ICON_CLASS","EVENT_WINDOW_SAVE_ICON_CLASS","applyFormValidation","updateEditorTemplate","editorTemplate","resetEditorTemplate","refresh","destroy","refreshRecurrenceEditor","recurrenceEditor","createRecurrenceEditor","setRecurrenceEditor","openEditor","data","type","isEventData","repeatType","currentAction","removeNewEventElement","quickPopup","quickPopupHide","inlineModule","removeInlineAppointmentElement","eventObj","cellClickAction","activeCellsData","event_1","convertToEventData","isAllDay","groupIndex","renderFormElements","DISABLE_CLASS","firstDayOfWeek","activeViewOptions","onCellDetailsUpdate","onEventDetailsUpdate","setDialogContent","dataBind","args","_this","eventProp","eventData","cancel","activeEventData","duration","getSlotDuration","saveObj","getInstance","allowEditing","deleteObj","callBackPromise","trigger","popupOpen","popupArgs","refreshDateTimePicker","startObj","EVENT_WINDOW_START_CLASS","endObj","EVENT_WINDOW_END_CLASS","value","getTime","MS_PER_MINUTE","resolve","isInteracted","isCrudAction","eventCrudData","popupClose","getDateTime","processCrudActions","resetForm","eventBase","focusElement","container","className","FORM_CONTAINER_CLASS","form","FORM_CLASS","attrs","onsubmit","isReact","destroyComponents","formElements","slice","call","children","_i","formElements_1","length","templateId","tempEle","getEditorTemplate","renderTemplates","getDefaultEventWindowContent","parentDiv","createDivElement","EVENT_WINDOW_DIALOG_PARENT_CLASS","titleLocationDiv","EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS","renderTextBox","SUBJECT_CLASS","editorTitles","subject","LOCATION_CLASS","location","startEndDateTimeDiv","EVENT_WINDOW_START_END_DIV_CLASS","renderDateTimePicker","onTimeChange","allDayTimezoneDiv","EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS","renderCheckBox","EVENT_WINDOW_ALL_DAY_CLASS","TIME_ZONE_CLASS","timezoneParentDiv","EVENT_WINDOW_TIME_ZONE_DIV_CLASS","renderDropDown","EVENT_WINDOW_START_TZ_CLASS","EVENT_WINDOW_END_TZ_CLASS","repeatParentDiv","EVENT_WINDOW_REPEAT_DIV_CLASS","repeatDiv","EVENT_WINDOW_REPEAT_CLASS","repeatEditConainer","button","buttonObj","iconCss","appendTo","loadRecurrenceEditor","resourceCollection","resourceParentDiv","EVENT_WINDOW_RESOURCES_DIV_CLASS","_a","resourceBase","resource","renderResourceDetails","description","DESCRIPTION_CLASS","submit","title","style","renderRecurrenceEditor","updateMinMaxDateToEditor","createInputElement","fieldName","name","charAt","toLowerCase","timeScale","interval","slotCount","changeEvent","dateTimeDiv","getFieldName","dateTimeInput","dateTimePicker","change","calendarMode","min","minDate","max","maxDate","setHours","locale","floatLabelType","format","dateFormat","getFormat","placeholder","getFieldLabel","step","elementSelector","startEndElement","querySelectorAll","startEndElement_1","instance","ej2_instances","classList","contains","endDate","updateRuleUntilDate","resourceData","field","labelValue","resourceDiv","resourceInput","resourceTemplate","colorField","textField","allowMultiple","listObj","dataSource","onMultiselectResourceChange","itemTemplate","text","idField","htmlAttributes","popupHeight","popupWidth","mode","drowDownList","onDropdownResourceChange","timezoneDiv","timezoneInput","allowFiltering","onTimezoneChange","filterBarPlaceholder","filtering","e","query","where","updateData","group","byGroupID","getAttribute","getColumnName","i","resObject","createInstance","datasource","_loop_1","j","resourceModel","filter","groupIDField","groupId","filterRes","this_1","filterDatasource","concat","index","resObj","itemData","resValue","startTimezone","startTimezoneObj","endTimezoneObj","checkBoxDiv","checkBoxInput","checkBox","onChange","label","repeatStatus","textBoxDiv","elementType","textBoxInput","createInput","properties","endTimezone","labelText","recurrenceRule","onAllDayChange","checked","timezoneChangeStyle","onRepeatChange","renderRepeatDialog","repeatDialogObject","closeOnEscape","repeatSaveDialog","repeatCancelDialog","open","repeatOpenDialog","show","repeatRule","setRecurrenceRule","state","setProperties","startDate","repeatStartDate","selectedType","hide","updateRepeatLabel","getRecurrenceRule","closeRepeatDialog","repeatTempRule","removeAttribute","EVENT_WINDOW_TITLE_TEXT_CLASS","innerHTML","Timezone","default","showDetails","deleteButton","saveButton","disableButton","cellsData","RecurrenceRule","resources","setResourceValues","getValidationRule","rules","Object","keys","undefined","validation","renderFormValidator","getHours","getMinutes","trimAllDay","formelement","getFormElements","keyNames","formelement_1","curElement","columnName","indexOf","setValueToElement","setDefaultValueToElement","timezoneObj","attrName","isDropDowns","fieldSelector","classSelector","control","attrEle","allDayStatus","EVENT_WINDOW_ICON_DISABLE_CLASS","ENABLE_CLASS","updateDateTime","resetTime","temp","addDays","start","getSeconds","startHour","getStartEndTime","workHours","setMilliseconds","formatType","compareBlazorDateFormats","skeleton","getCalendarMode","toString","timezoneValue","timezoneConvert","isDisable","isReadonly","saveIcon","ICON_DISABLE_CLASS","untilDate","untilObj","getRuleSummary","destroyToolTip","resetFormFields","isDestroyed","resetFields","localTimezoneName","tzModule","getLocalTimezoneName","timezone","found","some","tz","Value","push","Text","formElement","formElement_1","currentElement","alert","validate","dataCollection","getEventDataFromEditor","processEventValidation","tempData","getObjectFromFormData","Repeat","setDefaultValueToObject","tempObj","alertType","openValidationError","recurrenceValidation","isShowAlert","uiStateValues","isIgnoreOccurrence","enableRecurrenceValidation","openRecurrenceValidationAlert","isBlock","getResourceData","isResourceEventExpand","allowGroupEdit","eventId","getEventIdFromForm","eveId_1","getEventIDType","parseInt","editedData","eventsData","blockData","Guid","recurrenceID","getEventMaxID","editOccurrenceValidation","followingID","resourceSaveEvent","saveEvent","addEvent","lastResouceData","formElement_2","getValueFromElement","alertMessage","recEditor","activeEvent","excludedEvents","eventStartTime","seriesEvents","getSeriesEvents","getEditedOccurrences","event_2","getEventById","recurrenceException","split","types","obj","tempDiff","tempvalue","sort","a","b","Math","apply","setMonth","getMonth","setFullYear","getFullYear","quickDialog","getRecurrenceIndex","recColl","recIndex","valueOf","currentData","editData","recurColl","getOccurrencesByID","excludedDatas","map","recurColl_1","sortByTime","action","Array","lastlevel","lastResourceLevel","eventList","_loop_2","events","this_2","addValues","k","lastResource","resCol","findIndexInData","groupId_1","groupOrder","index_1","event_3","l","state_1","eventList_1","event_4","elements","validElements","elements_1","sanitize","getCurrentTime","dateValue","openDeleteAlert","getRecurrenceEditorInstance","formelement_2","resetTemplates"],"mappings":"AAAA,SAASA,aAAT,EAAwBC,iBAAxB,EAA2CC,QAA3C,EAAqDC,MAArD,EAA6DC,YAA7D,EAA2EC,MAA3E,EAAmFC,MAAnF,QAAiG,sBAAjG;AACA,SAASC,QAAT,EAAmBC,WAAnB,EAAgCC,QAAhC,EAA0CC,oBAA1C,EAAgEC,OAAhE,EAAyEC,UAAzE,EAAqFC,kBAArF,QAA+G,sBAA/G;AACA,SAASC,oBAAT,EAA+BC,mBAA/B,EAAoDC,QAApD,EAA8DC,QAA9D,QAA8E,sBAA9E;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,sBAAhC;AACA,SAASC,QAAT,EAAmBC,MAAnB,QAAiC,yBAAjC;AACA,SAASC,MAAT,QAAuB,wBAAvB;AACA,SAASC,YAAT,EAAuBC,WAAvB,QAA0C,2BAA1C;AACA,SAASC,KAAT,QAAsB,wBAAtB;AACA,SAASC,cAAT,QAA+B,2BAA/B;AACA,SAASC,YAAT,QAA6B,sBAA7B;AACA,SAASC,cAAT,QAA+B,kBAA/B;AACA,SAASC,gBAAT,QAAiC,2CAAjC;AACA,OAAO,KAAKC,GAAZ,MAAqB,sBAArB;AACA,OAAO,KAAKC,KAAZ,MAAuB,kBAAvB;AACA,OAAO,KAAKC,IAAZ,MAAsB,cAAtB;AACA,IAAIC,WAAW,GAAG,SAAlB;AACA,IAAIC,sBAAsB,GAAG,wBAA7B;AACA,IAAIC,wBAAwB,GAAG,mBAA/B;AACA,IAAIC,mBAAmB,GAAG,0BAA1B;AACA,IAAIC,mBAAmB,GAAG,qBAA1B;AACA,IAAIC,gBAAgB,GAAG,QAAvB;AACA;AACA;AACA;;AACA,IAAIC,WAAW;AAAG;AAAe,YAAY;AACzC;AACJ;AACA;AACI,WAASA,WAAT,CAAqBC,MAArB,EAA6B;AACzB,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKC,IAAL,GAAY,KAAKD,MAAL,CAAYE,SAAxB;AACA,SAAKC,MAAL,GAAc,KAAKH,MAAL,CAAYI,WAA1B;AACA,SAAKC,eAAL,GAAuB;AAAEC,MAAAA,SAAS,EAAE,IAAIC,IAAJ,EAAb;AAAyBC,MAAAA,OAAO,EAAE,IAAID,IAAJ;AAAlC,KAAvB;AACA,SAAKE,cAAL,GAAsB,IAAIrB,cAAJ,EAAtB;AACA,SAAKsB,iBAAL;AACH;;AACDX,EAAAA,WAAW,CAACY,SAAZ,CAAsBD,iBAAtB,GAA0C,YAAY;AAClD,SAAKE,OAAL,GAAepD,aAAa,CAAC,KAAD,EAAQ;AAAEqD,MAAAA,EAAE,EAAE,KAAKb,MAAL,CAAYY,OAAZ,CAAoBC,EAApB,GAAyB;AAA/B,KAAR,CAA5B;AACA,SAAKb,MAAL,CAAYY,OAAZ,CAAoBE,WAApB,CAAgC,KAAKF,OAArC;AACA,QAAIG,WAAW,GAAG;AACdC,MAAAA,iBAAiB,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OADL;AAEdC,MAAAA,OAAO,EAAE,KAAKC,qBAAL,EAFK;AAGdC,MAAAA,QAAQ,EAAE9B,GAAG,CAAC+B,yBAHA;AAIdC,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAJT;AAKdC,MAAAA,MAAM,EAAE,KAAKvB,MAAL,CAAYwB,UAAZ,GAAyB,MAAzB,GAAkC,MAL5B;AAMdC,MAAAA,SAAS,EAAE,OANG;AAOdC,MAAAA,OAAO,EAAE,IAPK;AAQdC,MAAAA,aAAa,EAAE,KAAK3B,MAAL,CAAYwB,UAAZ,GAAyB,KAAzB,GAAiC,IARlC;AASdI,MAAAA,MAAM,EAAEC,QAAQ,CAACC,IATH;AAUdC,MAAAA,OAAO,EAAE,KAVK;AAWdC,MAAAA,KAAK,EAAE,OAXO;AAYdC,MAAAA,UAAU,EAAE,KAAKC,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAZE;AAadC,MAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB;AAbC,KAAlB;;AAeA,QAAI,KAAKnC,MAAL,CAAYwB,UAAhB,EAA4B;AACxBT,MAAAA,WAAW,CAACK,QAAZ,GAAuB9B,GAAG,CAAC+B,yBAAJ,GAAgC,GAAhC,GAAsC/B,GAAG,CAACgD,YAAjE;AACAvB,MAAAA,WAAW,CAACwB,MAAZ,GAAqB,kGACjB,KAAKtC,IAAL,CAAUuC,WAAV,CAAsB,UAAtB,CADiB,GACmB,qDADxC;AAEH,KAJD,MAKK;AACDzB,MAAAA,WAAW,CAAC0B,OAAZ,GAAsB,CAAC;AACfC,QAAAA,WAAW,EAAE;AACTxB,UAAAA,OAAO,EAAE,KAAKjB,IAAL,CAAUuC,WAAV,CAAsB,cAAtB,CADA;AACuCpB,UAAAA,QAAQ,EAAE9B,GAAG,CAACqD,kBADrD;AAETC,UAAAA,QAAQ,EAAE,CAAC,KAAK5C,MAAL,CAAY6C,aAAZ,CAA0BC,aAA3B,IAA4C,KAAK9C,MAAL,CAAY+C;AAFzD,SADE;AAKfC,QAAAA,KAAK,EAAE,KAAKC,WAAL,CAAiBd,IAAjB,CAAsB,IAAtB;AALQ,OAAD,EAMf;AACCO,QAAAA,WAAW,EAAE;AACTxB,UAAAA,OAAO,EAAE,KAAKjB,IAAL,CAAUuC,WAAV,CAAsB,YAAtB,CADA;AACqCpB,UAAAA,QAAQ,EAAE,eAAe9B,GAAG,CAAC4D,8BADlE;AAETC,UAAAA,SAAS,EAAE,IAFF;AAEQP,UAAAA,QAAQ,EAAE,CAAC,KAAK5C,MAAL,CAAY6C,aAAZ,CAA0BO,WAA3B,IAA0C,KAAKpD,MAAL,CAAY+C;AAFxE,SADd;AAKCC,QAAAA,KAAK,EAAE,KAAKK,SAAL,CAAelB,IAAf,CAAoB,IAApB;AALR,OANe,EAYf;AACCO,QAAAA,WAAW,EAAE;AAAEtB,UAAAA,QAAQ,EAAE9B,GAAG,CAACgE,gCAAhB;AAAkDpC,UAAAA,OAAO,EAAE,KAAKjB,IAAL,CAAUuC,WAAV,CAAsB,cAAtB;AAA3D,SADd;AAECQ,QAAAA,KAAK,EAAE,KAAKO,WAAL,CAAiBpB,IAAjB,CAAsB,IAAtB;AAFR,OAZe,CAAtB;AAgBApB,MAAAA,WAAW,CAACwB,MAAZ,GAAqB,+BAA+B,KAAKtC,IAAL,CAAUuC,WAAV,CAAsB,UAAtB,CAA/B,GAAmE,QAAxF;AACH;;AACD,SAAKgB,YAAL,GAAoB,IAAI1E,MAAJ,CAAWiC,WAAX,EAAwB,KAAKH,OAA7B,CAApB;AACA,SAAK4C,YAAL,CAAkBC,gBAAlB,GAAqC,IAArC;;AACA,QAAI,KAAKD,YAAL,CAAkB5C,OAAlB,CAA0B8C,aAA1B,CAAwC,sBAAxC,CAAJ,EAAqE;AACjE,WAAKF,YAAL,CAAkB5C,OAAlB,CAA0B8C,aAA1B,CAAwC,sBAAxC,EAAgEC,YAAhE,CAA6E,OAA7E,EAAsF,KAAK1D,IAAL,CAAUuC,WAAV,CAAsB,OAAtB,CAAtF;AACH;;AACD9E,IAAAA,QAAQ,CAAC,CAAC,KAAKkD,OAAL,CAAagD,aAAd,CAAD,EAA+BtE,GAAG,CAAC+B,yBAAJ,GAAgC,YAA/D,CAAR;;AACA,QAAI,KAAKrB,MAAL,CAAYwB,UAAhB,EAA4B;AACxB5D,MAAAA,YAAY,CAACiG,GAAb,CAAiB,KAAKjD,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACwE,4BAArC,CAAjB,EAAqF,OAArF,EAA8F,KAAKP,WAAnG,EAAgH,IAAhH;AACA3F,MAAAA,YAAY,CAACiG,GAAb,CAAiB,KAAKjD,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACyE,4BAArC,CAAjB,EAAqF,OAArF,EAA8F,KAAKV,SAAnG,EAA8G,IAA9G;AACH;;AACD,SAAKW,mBAAL;AACH,GArDD;;AAsDAjE,EAAAA,WAAW,CAACY,SAAZ,CAAsBsD,oBAAtB,GAA6C,YAAY;AACrD,QAAI,KAAKjE,MAAL,CAAYkE,cAAhB,EAAgC;AAC5B5F,MAAAA,oBAAoB,CAAC,KAAK0B,MAAL,CAAYY,OAAZ,CAAoBC,EAApB,GAAyB,iBAA1B,EAA6C,gBAA7C,EAA+D,KAAKb,MAApE,CAApB;AACH;AACJ,GAJD;;AAKAD,EAAAA,WAAW,CAACY,SAAZ,CAAsBwD,mBAAtB,GAA4C,YAAY;AACpD,QAAI,KAAKnE,MAAL,CAAYkE,cAAhB,EAAgC;AAC5B3F,MAAAA,mBAAmB,CAAC,KAAKyB,MAAL,CAAYY,OAAZ,CAAoBC,EAApB,GAAyB,iBAA1B,EAA6C,gBAA7C,CAAnB;AACH;AACJ,GAJD;;AAKAd,EAAAA,WAAW,CAACY,SAAZ,CAAsByD,OAAtB,GAAgC,YAAY;AACxC,SAAKC,OAAL;AACA,SAAK3D,iBAAL;AACH,GAHD;;AAIAX,EAAAA,WAAW,CAACY,SAAZ,CAAsB2D,uBAAtB,GAAgD,YAAY;AACxD,QAAI,KAAKC,gBAAT,EAA2B;AACvB,UAAIA,gBAAgB,GAAG,KAAKA,gBAAL,CAAsB3D,OAA7C;AACA,WAAK2D,gBAAL,CAAsBF,OAAtB;AACA,WAAKG,sBAAL,CAA4BD,gBAA5B;AACH;AACJ,GAND;;AAOAxE,EAAAA,WAAW,CAACY,SAAZ,CAAsB8D,mBAAtB,GAA4C,UAAUF,gBAAV,EAA4B;AACpE,QAAI,KAAKvE,MAAL,CAAYkE,cAAhB,EAAgC;AAC5B,WAAKK,gBAAL,GAAwBA,gBAAxB;AACH;AACJ,GAJD;;AAKAxE,EAAAA,WAAW,CAACY,SAAZ,CAAsB+D,UAAtB,GAAmC,UAAUC,IAAV,EAAgBC,IAAhB,EAAsBC,WAAtB,EAAmCC,UAAnC,EAA+C;AAC9E,SAAK9E,MAAL,CAAY+E,aAAZ,GAA4BH,IAA5B;AACA,SAAK5E,MAAL,CAAYgF,qBAAZ;AACA,SAAKhF,MAAL,CAAYiF,UAAZ,CAAuBC,cAAvB,CAAsC,IAAtC;AACA,SAAKlF,MAAL,CAAYmF,YAAZ,CAAyBC,8BAAzB;;AACA,QAAIR,IAAI,KAAK,KAAb,EAAoB;AAChB,UAAIS,QAAQ,GAAG,EAAf;AACA,WAAKC,eAAL,GAAuB,CAACT,WAAxB;AACA,WAAK7E,MAAL,CAAYuF,eAAZ,GAA8BZ,IAA9B;AACA,UAAIa,OAAO,GAAGb,IAAd;;AACA,UAAI,KAAKW,eAAT,EAA0B;AACtB,aAAKG,kBAAL,CAAwBD,OAAxB,EAAiCH,QAAjC;AACH,OAFD,MAGK;AACD,aAAKrF,MAAL,CAAYuF,eAAZ,GAA8B;AAC1BjF,UAAAA,SAAS,EAAGkF,OAAO,CAAClF,SAAR,IAAqBkF,OAAO,CAAC,KAAKrF,MAAL,CAAYG,SAAb,CADd;AAE1BE,UAAAA,OAAO,EAAGgF,OAAO,CAAChF,OAAR,IAAmBgF,OAAO,CAAC,KAAKrF,MAAL,CAAYK,OAAb,CAFV;AAG1BkF,UAAAA,QAAQ,EAAGF,OAAO,CAACE,QAAR,IAAoBF,OAAO,CAAC,KAAKrF,MAAL,CAAYuF,QAAb,CAHZ;AAI1B9E,UAAAA,OAAO,EAAE4E,OAAO,CAAC5E,OAJS;AAK1B+E,UAAAA,UAAU,EAAEH,OAAO,CAACG;AALM,SAA9B;AAOAN,QAAAA,QAAQ,GAAGG,OAAX;AACH;;AACDb,MAAAA,IAAI,GAAGU,QAAP;AACH;;AACD,QAAI,CAAC5H,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAAtB,EAAoD;AAChD,WAAK0B,kBAAL,CAAwB,KAAKhF,OAAL,CAAa8C,aAAb,CAA2B,kBAA3B,CAAxB,EAAwEiB,IAAxE;AACH;;AACD,QAAI,CAAC,KAAK3E,MAAL,CAAYwB,UAAb,IAA2B/D,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAAhD,EAA8E;AAC1ElG,MAAAA,WAAW,CAAC,CAAC,KAAKwF,YAAL,CAAkB5C,OAAlB,CAA0B8C,aAA1B,CAAwC,qBAAxC,CAAD,CAAD,EAAmEpE,GAAG,CAACuG,aAAvE,CAAX;AACH;;AACD,QAAI,KAAKtB,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBuB,cAAtB,GAAuC,KAAK9F,MAAL,CAAY+F,iBAAZ,CAA8BD,cAArE;AACH;;AACD,YAAQlB,IAAR;AACI,WAAK,KAAL;AACI,aAAKoB,mBAAL,CAAyBrB,IAAzB,EAA+BG,UAA/B;AACA;;AACJ,WAAK,MAAL;AACA,WAAK,gBAAL;AACA,WAAK,YAAL;AACA,WAAK,qBAAL;AACI,YAAIF,IAAI,KAAK,gBAAT,IAA6B,CAAC,KAAK5E,MAAL,CAAYwB,UAA1C,IAAwD/D,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAA7E,EAA2G;AACvGxG,UAAAA,QAAQ,CAAC,CAAC,KAAK8F,YAAL,CAAkB5C,OAAlB,CAA0B8C,aAA1B,CAAwC,qBAAxC,CAAD,CAAD,EAAmEpE,GAAG,CAACuG,aAAvE,CAAR;AACH;;AACD,aAAKP,eAAL,GAAuB,KAAvB;AACA,aAAKW,oBAAL,CAA0BtB,IAA1B;AACA;AAbR;AAeH,GAjDD;;AAkDA5E,EAAAA,WAAW,CAACY,SAAZ,CAAsBuF,gBAAtB,GAAyC,YAAY;AACjD,SAAK1C,YAAL,CAAkBtC,OAAlB,GAA4B,KAAKC,qBAAL,EAA5B;AACA,SAAKqC,YAAL,CAAkB2C,QAAlB;AACH,GAHD;;AAIApG,EAAAA,WAAW,CAACY,SAAZ,CAAsBuB,YAAtB,GAAqC,UAAUkE,IAAV,EAAgB;AACjD,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAIC,SAAS,GAAG;AACZ1B,MAAAA,IAAI,EAAE,QADM;AAEZD,MAAAA,IAAI,EAAE,KAAK4B,SAFC;AAGZC,MAAAA,MAAM,EAAE,KAHI;AAIZ5F,MAAAA,OAAO,EAAE,KAAKA,OAJF;AAKZgB,MAAAA,MAAM,EAAG,KAAK0D,eAAL,GAAuB,KAAKtF,MAAL,CAAYuF,eAAZ,CAA4B3E,OAAnD,GAA6D,KAAKZ,MAAL,CAAYyG,eAAZ,CAA4B7F;AALtF,KAAhB;;AAOA,QAAI,KAAK0E,eAAT,EAA0B;AACtBgB,MAAAA,SAAS,CAACI,QAAV,GAAqB,KAAKC,eAAL,EAArB;AACH;;AACD,QAAIC,OAAO,GAAG,KAAKC,WAAL,CAAiBvH,GAAG,CAAC4D,8BAArB,CAAd;;AACA,QAAI0D,OAAJ,EAAa;AACTA,MAAAA,OAAO,CAAChE,QAAR,GAAmB,EAAE,KAAK0C,eAAL,GAAuB,KAAKtF,MAAL,CAAY6C,aAAZ,CAA0BO,WAAjD,GAA+D,KAAKpD,MAAL,CAAY6C,aAAZ,CAA0BiE,YAA3F,CAAnB;AACAF,MAAAA,OAAO,CAACT,QAAR;AACH;;AACD,QAAIY,SAAS,GAAG,KAAKF,WAAL,CAAiBvH,GAAG,CAACqD,kBAArB,CAAhB;;AACA,QAAIoE,SAAJ,EAAe;AACXA,MAAAA,SAAS,CAACnE,QAAV,GAAqB,CAAC,KAAK5C,MAAL,CAAY6C,aAAZ,CAA0BC,aAAhD;AACAiE,MAAAA,SAAS,CAACZ,QAAV;AACH;;AACD,QAAIa,eAAe,GAAG,IAAIrI,QAAJ,EAAtB;AACA,SAAKqB,MAAL,CAAYiH,OAAZ,CAAoB1H,KAAK,CAAC2H,SAA1B,EAAqCZ,SAArC,EAAgD,UAAUa,SAAV,EAAqB;AACjEf,MAAAA,IAAI,CAACI,MAAL,GAAcW,SAAS,CAACX,MAAxB;AACAH,MAAAA,KAAK,CAACK,QAAN,GAAiBL,KAAK,CAACf,eAAN,GAAwB6B,SAAS,CAACT,QAAlC,GAA6C,IAA9D;;AACAL,MAAAA,KAAK,CAACe,qBAAN,CAA4Bf,KAAK,CAACK,QAAlC;;AACA,UAAIL,KAAK,CAACf,eAAN,IAAyB6B,SAAS,CAACT,QAAV,KAAuBL,KAAK,CAACM,eAAN,EAAhD,IAA2ElJ,iBAAiB,CAAC4I,KAAK,CAACrG,MAAN,CAAakE,cAAd,CAAhG,EAA+H;AAC3H,YAAImD,QAAQ,GAAGhB,KAAK,CAACQ,WAAN,CAAkBvH,GAAG,CAACgI,wBAAtB,CAAf;;AACA,YAAIC,MAAM,GAAGlB,KAAK,CAACQ,WAAN,CAAkBvH,GAAG,CAACkI,sBAAtB,CAAb;;AACAD,QAAAA,MAAM,CAACE,KAAP,GAAe,IAAIlH,IAAJ,CAAS8G,QAAQ,CAACI,KAAT,CAAeC,OAAf,KAA4BlI,IAAI,CAACmI,aAAL,GAAqBR,SAAS,CAACT,QAApE,CAAf;AACAa,QAAAA,MAAM,CAACpB,QAAP;AACH;;AACD,UAAI,CAAC3H,QAAQ,EAAT,IAAe6H,KAAK,CAACrG,MAAN,CAAakE,cAA5B,IAA8CmC,KAAK,CAACzF,OAAN,CAAc8C,aAAd,CAA4B,qBAA5B,CAA9C,IAAoG,CAAC2C,KAAK,CAAC9B,gBAA/G,EAAiI;AAC7H8B,QAAAA,KAAK,CAAC9B,gBAAN,GAAyB8B,KAAK,CAACQ,WAAN,CAAkB,oBAAlB,CAAzB;AACH;;AACDG,MAAAA,eAAe,CAACY,OAAhB,CAAwBxB,IAAxB;AACH,KAdD;AAeA,WAAOY,eAAP;AACH,GAvCD;;AAwCAjH,EAAAA,WAAW,CAACY,SAAZ,CAAsB0B,aAAtB,GAAsC,UAAU+D,IAAV,EAAgB;AAClD,QAAIC,KAAK,GAAG,IAAZ;;AACA,QAAID,IAAI,CAACyB,YAAT,EAAuB;AACnB,WAAKC,YAAL,GAAoB,KAApB;AACH;;AACD,QAAIxB,SAAS,GAAG;AACZ1B,MAAAA,IAAI,EAAE,QADM;AAEZD,MAAAA,IAAI,EAAE,KAAKoD,aAFC;AAGZvB,MAAAA,MAAM,EAAE,KAHI;AAIZ5F,MAAAA,OAAO,EAAE,KAAKA,OAJF;AAKZgB,MAAAA,MAAM,EAAG,KAAK0D,eAAL,GAAuB,KAAKtF,MAAL,CAAYuF,eAAZ,CAA4B3E,OAAnD,GAA6D,KAAKZ,MAAL,CAAYyG,eAAZ,CAA4B7F;AALtF,KAAhB;AAOA,QAAIoG,eAAe,GAAG,IAAIrI,QAAJ,EAAtB;AACA,SAAKqB,MAAL,CAAYiH,OAAZ,CAAoB1H,KAAK,CAACyI,UAA1B,EAAsC1B,SAAtC,EAAiD,UAAUa,SAAV,EAAqB;AAClE,UAAI3I,QAAQ,EAAZ,EAAgB;AACZ,YAAI4B,WAAW,GAAGiG,KAAK,CAACrG,MAAN,CAAaI,WAA/B;;AACA,YAAI+G,SAAS,CAACxC,IAAd,EAAoB;AAChB,cAAIU,QAAQ,GAAG8B,SAAS,CAACxC,IAAzB;AACAU,UAAAA,QAAQ,CAACjF,WAAW,CAACE,SAAb,CAAR,GAAkC+F,KAAK,CAACrG,MAAN,CAAaiI,WAAb,CAAyB5C,QAAQ,CAACjF,WAAW,CAACE,SAAb,CAAjC,CAAlC;AACA+E,UAAAA,QAAQ,CAACjF,WAAW,CAACI,OAAb,CAAR,GAAgC6F,KAAK,CAACrG,MAAN,CAAaiI,WAAb,CAAyB5C,QAAQ,CAACjF,WAAW,CAACI,OAAb,CAAjC,CAAhC;AACH;;AACD,YAAI2G,SAAS,CAACvG,OAAd,EAAuB;AACnBuG,UAAAA,SAAS,CAACvG,OAAV,GAAoBxC,UAAU,CAAC+I,SAAS,CAACvG,OAAX,CAA9B;AACH;;AACD,YAAIuG,SAAS,CAACvF,MAAd,EAAsB;AAClBuF,UAAAA,SAAS,CAACvF,MAAV,GAAmBxD,UAAU,CAAC+I,SAAS,CAACvF,MAAX,CAA7B;AACH;AACJ;;AACDwE,MAAAA,IAAI,CAACI,MAAL,GAAcW,SAAS,CAACX,MAAxB;;AACA,UAAI,CAACW,SAAS,CAACX,MAAf,EAAuB;AACnBH,QAAAA,KAAK,CAAClC,mBAAN;;AACAkC,QAAAA,KAAK,CAACpC,oBAAN;;AACA,YAAIoC,KAAK,CAACyB,YAAV,EAAwB;AACpB1B,UAAAA,IAAI,CAACI,MAAL,GAAcH,KAAK,CAAC6B,kBAAN,CAAyBf,SAAS,CAACxC,IAAnC,CAAd;AACA0B,UAAAA,KAAK,CAACyB,YAAN,GAAqB1B,IAAI,CAACI,MAA1B;AACH;;AACD,YAAI,CAACH,KAAK,CAACyB,YAAX,EAAyB;AACrBzB,UAAAA,KAAK,CAAC8B,SAAN;;AACA9B,UAAAA,KAAK,CAACrG,MAAN,CAAaoI,SAAb,CAAuBC,YAAvB;;AACAhC,UAAAA,KAAK,CAAC0B,aAAN,GAAsB,IAAtB;AACH;AACJ;;AACDf,MAAAA,eAAe,CAACY,OAAhB,CAAwBxB,IAAxB;AACH,KA9BD;AA+BA,WAAOY,eAAP;AACH,GA7CD;;AA8CAjH,EAAAA,WAAW,CAACY,SAAZ,CAAsBQ,qBAAtB,GAA8C,YAAY;AACtD,QAAImH,SAAS,GAAG9K,aAAa,CAAC,KAAD,EAAQ;AAAE+K,MAAAA,SAAS,EAAEjJ,GAAG,CAACkJ;AAAjB,KAAR,CAA7B;AACA,QAAIC,IAAI,GAAGjL,aAAa,CAAC,MAAD,EAAS;AAC7BqD,MAAAA,EAAE,EAAE,KAAKb,MAAL,CAAYY,OAAZ,CAAoBC,EAApB,GAAyB,UADA;AAE7B0H,MAAAA,SAAS,EAAEjJ,GAAG,CAACoJ,UAFc;AAG7BC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAE;AAAZ;AAHsB,KAAT,CAAxB;AAKA,SAAKhD,kBAAL,CAAwB6C,IAAxB;AACAH,IAAAA,SAAS,CAACxH,WAAV,CAAsB2H,IAAtB;AACA,WAAOH,SAAP;AACH,GAVD;;AAWAvI,EAAAA,WAAW,CAACY,SAAZ,CAAsBiF,kBAAtB,GAA2C,UAAU6C,IAAV,EAAgBrC,IAAhB,EAAsB;AAC7D,QAAI,CAAC3I,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAAtB,EAAoD;AAChD,UAAIkC,IAAJ,EAAU;AACN;AACA,YAAI,CAAC,KAAKpG,MAAL,CAAY6I,OAAjB,EAA0B;AACtB,cAAI,KAAKtE,gBAAT,EAA2B;AACvB,iBAAKA,gBAAL,CAAsBF,OAAtB;AACA,iBAAKE,gBAAL,GAAwB,IAAxB;AACH;;AACD,eAAKuE,iBAAL;AACH;;AACD,YAAIC,YAAY,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcR,IAAI,CAACS,QAAnB,CAAnB;;AACA,aAAK,IAAIC,EAAE,GAAG,CAAT,EAAYC,cAAc,GAAGL,YAAlC,EAAgDI,EAAE,GAAGC,cAAc,CAACC,MAApE,EAA4EF,EAAE,EAA9E,EAAkF;AAC9E,cAAIvI,OAAO,GAAGwI,cAAc,CAACD,EAAD,CAA5B;AACAxL,UAAAA,MAAM,CAACiD,OAAD,CAAN;AACH;AACJ;;AACD,UAAI,CAACpC,QAAQ,EAAT,IAAgBA,QAAQ,MAAM4H,IAAlC,EAAyC;AACrC,YAAIkD,UAAU,GAAG,KAAKtJ,MAAL,CAAYY,OAAZ,CAAoBC,EAApB,GAAyB,iBAA1C;AACA,YAAI0I,OAAO,GAAG,GAAGP,KAAH,CAASC,IAAT,CAAc,KAAKjJ,MAAL,CAAYwJ,iBAAZ,GAAgCpD,IAAI,IAAI,EAAxC,EAA4C,KAAKpG,MAAjD,EAAyD,gBAAzD,EAA2EsJ,UAA3E,EAAuF,KAAvF,CAAd,CAAd;AACAxL,QAAAA,MAAM,CAACyL,OAAD,EAAUd,IAAV,CAAN;AACA,aAAKzI,MAAL,CAAYyJ,eAAZ;AACA,aAAKxF,oBAAL;AACH;AACJ,KAvBD,MAwBK;AACDwE,MAAAA,IAAI,CAAC3H,WAAL,CAAiB,KAAK4I,4BAAL,EAAjB;AACH;AACJ,GA5BD;;AA6BA3J,EAAAA,WAAW,CAACY,SAAZ,CAAsB+I,4BAAtB,GAAqD,YAAY;AAC7D,QAAIC,SAAS,GAAG,KAAKC,gBAAL,CAAsBtK,GAAG,CAACuK,gCAA1B,CAAhB;AACA,QAAIC,gBAAgB,GAAG,KAAKF,gBAAL,CAAsBtK,GAAG,CAACyK,qCAA1B,CAAvB;AACAJ,IAAAA,SAAS,CAAC7I,WAAV,CAAsBgJ,gBAAtB;AACAA,IAAAA,gBAAgB,CAAChJ,WAAjB,CAA6B,KAAKkJ,aAAL,CAAmB1K,GAAG,CAAC2K,aAAvB,CAA7B;AACAH,IAAAA,gBAAgB,CAACpG,aAAjB,CAA+B,MAAMpE,GAAG,CAAC2K,aAAzC,EAAwDtG,YAAxD,CAAqE,OAArE,EAA8E,KAAK3D,MAAL,CAAYkK,YAAZ,CAAyBC,OAAvG;AACAL,IAAAA,gBAAgB,CAAChJ,WAAjB,CAA6B,KAAKkJ,aAAL,CAAmB1K,GAAG,CAAC8K,cAAvB,CAA7B;AACAN,IAAAA,gBAAgB,CAACpG,aAAjB,CAA+B,MAAMpE,GAAG,CAAC8K,cAAzC,EAAyDzG,YAAzD,CAAsE,OAAtE,EAA+E,KAAK3D,MAAL,CAAYkK,YAAZ,CAAyBG,QAAxG;AACA,QAAIC,mBAAmB,GAAG,KAAKV,gBAAL,CAAsBtK,GAAG,CAACiL,gCAA1B,CAA1B;AACAZ,IAAAA,SAAS,CAAC7I,WAAV,CAAsBwJ,mBAAtB;AACAA,IAAAA,mBAAmB,CAACxJ,WAApB,CAAgC,KAAK0J,oBAAL,CAA0BlL,GAAG,CAACgI,wBAA9B,EAAwD,KAAKmD,YAAL,CAAkBtI,IAAlB,CAAuB,IAAvB,CAAxD,CAAhC;AACAmI,IAAAA,mBAAmB,CAAC5G,aAApB,CAAkC,MAAMpE,GAAG,CAACgI,wBAA5C,EAAsE3D,YAAtE,CAAmF,OAAnF,EAA4F,KAAK3D,MAAL,CAAYkK,YAAZ,CAAyB5J,SAArH;AACAgK,IAAAA,mBAAmB,CAACxJ,WAApB,CAAgC,KAAK0J,oBAAL,CAA0BlL,GAAG,CAACkI,sBAA9B,CAAhC;AACA8C,IAAAA,mBAAmB,CAAC5G,aAApB,CAAkC,MAAMpE,GAAG,CAACkI,sBAA5C,EAAoE7D,YAApE,CAAiF,OAAjF,EAA0F,KAAK3D,MAAL,CAAYkK,YAAZ,CAAyB1J,OAAnH;AACA,QAAIkK,iBAAiB,GAAG,KAAKd,gBAAL,CAAsBtK,GAAG,CAACqL,gCAA1B,CAAxB;AACAhB,IAAAA,SAAS,CAAC7I,WAAV,CAAsB4J,iBAAtB;AACAA,IAAAA,iBAAiB,CAAC5J,WAAlB,CAA8B,KAAK8J,cAAL,CAAoBtL,GAAG,CAACuL,0BAAxB,CAA9B;AACAH,IAAAA,iBAAiB,CAAC5J,WAAlB,CAA8B,KAAK8J,cAAL,CAAoBtL,GAAG,CAACwL,eAAxB,CAA9B;AACA,QAAIC,iBAAiB,GAAG,KAAKnB,gBAAL,CAAsBtK,GAAG,CAAC0L,gCAA1B,CAAxB;AACArB,IAAAA,SAAS,CAAC7I,WAAV,CAAsBiK,iBAAtB;AACAA,IAAAA,iBAAiB,CAACjK,WAAlB,CAA8B,KAAKmK,cAAL,CAAoB3L,GAAG,CAAC4L,2BAAxB,CAA9B;AACAH,IAAAA,iBAAiB,CAACjK,WAAlB,CAA8B,KAAKmK,cAAL,CAAoB3L,GAAG,CAAC6L,yBAAxB,CAA9B;AACA,QAAIC,eAAe,GAAG,KAAKxB,gBAAL,CAAsBtK,GAAG,CAAC+L,6BAA1B,CAAtB;AACA1B,IAAAA,SAAS,CAAC7I,WAAV,CAAsBsK,eAAtB;AACA,QAAIE,SAAS,GAAG,KAAKV,cAAL,CAAoBtL,GAAG,CAACiM,yBAAxB,CAAhB;AACA,QAAIC,kBAAkB,GAAGhO,aAAa,CAAC,MAAD,EAAS;AAAE+K,MAAAA,SAAS,EAAE7I;AAAb,KAAT,CAAtC;AACA,QAAI+L,MAAM,GAAGjO,aAAa,CAAC,QAAD,EAAW;AACjC+K,MAAAA,SAAS,EAAE3I,mBADsB;AAEjC+I,MAAAA,KAAK,EAAE;AAAE/D,QAAAA,IAAI,EAAE,QAAR;AAAkB,iBAAS,KAAK3E,IAAL,CAAUuC,WAAV,CAAsB,gBAAtB;AAA3B;AAF0B,KAAX,CAA1B;AAIA,SAAKkJ,SAAL,GAAiB,IAAI7M,MAAJ,CAAW;AAAE8M,MAAAA,OAAO,EAAEhM,wBAAwB,GAAG,UAAtC;AAAkDyB,MAAAA,QAAQ,EAAE,cAAc,KAAKpB,MAAL,CAAYoB;AAAtF,KAAX,CAAjB;AACAoK,IAAAA,kBAAkB,CAAC1K,WAAnB,CAA+B2K,MAA/B;AACA,SAAKC,SAAL,CAAeE,QAAf,CAAwBH,MAAxB;AACA,SAAKC,SAAL,CAAejI,gBAAf,GAAkC,IAAlC;AACA6H,IAAAA,SAAS,CAACxK,WAAV,CAAsB0K,kBAAtB;AACAJ,IAAAA,eAAe,CAACtK,WAAhB,CAA4BwK,SAA5B;;AACA,QAAI,KAAKtL,MAAL,CAAYwB,UAAhB,EAA4B;AACxB5D,MAAAA,YAAY,CAACiG,GAAb,CAAiB4H,MAAjB,EAAyB,OAAzB,EAAkC,KAAKI,oBAAvC,EAA6D,IAA7D;AACH,KAFD,MAGK;AACD,WAAKrH,sBAAL,CAA4BmF,SAA5B;AACH;;AACD,QAAI,KAAK3J,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CAA5C,EAA+C;AAC3C,UAAI0C,iBAAiB,GAAG,KAAKnC,gBAAL,CAAsBtK,GAAG,CAAC0M,gCAA1B,CAAxB;;AACA,WAAK,IAAI7C,EAAE,GAAG,CAAT,EAAY8C,EAAE,GAAG,KAAKjM,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAA/C,EAAmE3C,EAAE,GAAG8C,EAAE,CAAC5C,MAA3E,EAAmFF,EAAE,EAArF,EAAyF;AACrF,YAAIgD,QAAQ,GAAGF,EAAE,CAAC9C,EAAD,CAAjB;AACA4C,QAAAA,iBAAiB,CAACjL,WAAlB,CAA8B,KAAKsL,qBAAL,CAA2BD,QAA3B,CAA9B;AACH;;AACDxC,MAAAA,SAAS,CAAC7I,WAAV,CAAsBiL,iBAAtB;AACH;;AACD,QAAIM,WAAW,GAAG,KAAKzC,gBAAL,CAAsBtK,GAAG,CAACgN,iBAAJ,GAAwB,MAA9C,CAAlB;AACAD,IAAAA,WAAW,CAACvL,WAAZ,CAAwB,KAAKkJ,aAAL,CAAmB1K,GAAG,CAACgN,iBAAvB,CAAxB;AACAD,IAAAA,WAAW,CAAC3I,aAAZ,CAA0B,MAAMpE,GAAG,CAACgN,iBAApC,EAAuD3I,YAAvD,CAAoE,OAApE,EAA6E,KAAK3D,MAAL,CAAYkK,YAAZ,CAAyBmC,WAAtG;AACA1C,IAAAA,SAAS,CAAC7I,WAAV,CAAsBuL,WAAtB;AACA,QAAIE,MAAM,GAAG/O,aAAa,CAAC,QAAD,EAAW;AAAEmL,MAAAA,KAAK,EAAE;AAAE/D,QAAAA,IAAI,EAAE,QAAR;AAAkB4H,QAAAA,KAAK,EAAE,QAAzB;AAAmCC,QAAAA,KAAK,EAAE;AAA1C;AAAT,KAAX,CAA1B;AACA9C,IAAAA,SAAS,CAAC7I,WAAV,CAAsByL,MAAtB;AACA,WAAO5C,SAAP;AACH,GAzDD;;AA0DA5J,EAAAA,WAAW,CAACY,SAAZ,CAAsB6D,sBAAtB,GAA+C,UAAUmF,SAAV,EAAqB;AAChE,QAAIpF,gBAAgB,GAAG,KAAKqF,gBAAL,EAAvB;AACAD,IAAAA,SAAS,CAAC7I,WAAV,CAAsByD,gBAAtB;AACA,SAAKA,gBAAL,GAAwB,KAAKmI,sBAAL,EAAxB;AACA,SAAKnI,gBAAL,CAAsBqH,QAAtB,CAA+BrH,gBAA/B;AACA,SAAKoI,wBAAL;AACH,GAND;;AAOA5M,EAAAA,WAAW,CAACY,SAAZ,CAAsBiJ,gBAAtB,GAAyC,UAAUrB,SAAV,EAAqB;AAC1D,WAAO/K,aAAa,CAAC,KAAD,EAAQ;AAAE+K,MAAAA,SAAS,EAAEA;AAAb,KAAR,CAApB;AACH,GAFD;;AAGAxI,EAAAA,WAAW,CAACY,SAAZ,CAAsBiM,kBAAtB,GAA2C,UAAUrE,SAAV,EAAqBsE,SAArB,EAAgCjI,IAAhC,EAAsC;AAC7E,WAAOpH,aAAa,CAACoH,IAAI,IAAI,OAAT,EAAkB;AAClC2D,MAAAA,SAAS,EAAEA,SADuB;AACZI,MAAAA,KAAK,EAAE;AACzB/D,QAAAA,IAAI,EAAE,MADmB;AACXkI,QAAAA,IAAI,EAAED,SADK;AACMpF,QAAAA,KAAK,EAAE,EADb;AACiB5G,QAAAA,EAAE,EAAEgM,SADrB;AAEzBL,QAAAA,KAAK,EAAI,KAAKvM,IAAL,CAAUuC,WAAV,CAAsBqK,SAAS,CAACE,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,KAAoCH,SAAS,CAAC7D,KAAV,CAAgB,CAAhB,CAA1D,CAAD,KAAoF,EAArF,GACH6D,SADG,GACS,KAAK5M,IAAL,CAAUuC,WAAV,CAAsBqK,SAAS,CAACE,MAAV,CAAiB,CAAjB,EAAoBC,WAApB,KAAoCH,SAAS,CAAC7D,KAAV,CAAgB,CAAhB,CAA1D;AAHS;AADK,KAAlB,CAApB;AAOH,GARD;;AASAjJ,EAAAA,WAAW,CAACY,SAAZ,CAAsBgG,eAAtB,GAAwC,YAAY;AAChD,WAAO,KAAK3G,MAAL,CAAY+F,iBAAZ,CAA8BkH,SAA9B,CAAwCC,QAAxC,GAAmD,KAAKlN,MAAL,CAAY+F,iBAAZ,CAA8BkH,SAA9B,CAAwCE,SAAlG;AACH,GAFD;;AAGApN,EAAAA,WAAW,CAACY,SAAZ,CAAsB6J,oBAAtB,GAA6C,UAAU/C,KAAV,EAAiB2F,WAAjB,EAA8B;AACvE,QAAIC,WAAW,GAAG,KAAKzD,gBAAL,CAAsBnC,KAAK,GAAG,YAA9B,CAAlB;AACA,QAAIoF,SAAS,GAAG,KAAKS,YAAL,CAAkB7F,KAAlB,CAAhB;AACA,QAAI8F,aAAa,GAAG,KAAKX,kBAAL,CAAwBnF,KAAK,GAAG,GAAR,GAAchI,WAAtC,EAAmDoN,SAAnD,CAApB;AACAQ,IAAAA,WAAW,CAACvM,WAAZ,CAAwByM,aAAxB;AACA,QAAIC,cAAc,GAAG,IAAItO,cAAJ,CAAmB;AACpCuO,MAAAA,MAAM,EAAEL,WAD4B;AAEpCtH,MAAAA,cAAc,EAAE,KAAK9F,MAAL,CAAY+F,iBAAZ,CAA8BD,cAFV;AAGpC4H,MAAAA,YAAY,EAAE,KAAK1N,MAAL,CAAY0N,YAHU;AAIpCC,MAAAA,GAAG,EAAE,KAAK3N,MAAL,CAAY4N,OAJmB;AAKpCC,MAAAA,GAAG,EAAE,IAAItN,IAAJ,CAAS,IAAIA,IAAJ,CAAS,CAAC,KAAKP,MAAL,CAAY8N,OAAtB,EAA+BC,QAA/B,CAAwC,EAAxC,EAA4C,EAA5C,EAAgD,EAAhD,CAAT,CAL+B;AAMpC3M,MAAAA,QAAQ,EAAE,KAAKpB,MAAL,CAAYoB,QANc;AAOpCE,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAPa;AAQpC0M,MAAAA,MAAM,EAAE,KAAKhO,MAAL,CAAYgO,MARgB;AASpCC,MAAAA,cAAc,EAAE,QAToB;AAUpCC,MAAAA,MAAM,EAAE,CAACzQ,iBAAiB,CAAC,KAAKuC,MAAL,CAAYmO,UAAb,CAAjB,GACL,KAAKC,SAAL,CAAe,aAAf,CADK,GAC2B,KAAKpO,MAAL,CAAYmO,UADxC,IACsD,GADtD,GAC4D,KAAKC,SAAL,CAAe,aAAf,CAXhC;AAYpCC,MAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB,CAZuB;AAapC8G,MAAAA,IAAI,EAAE,KAAK5H,eAAL,EAb8B;AAcpC3E,MAAAA,KAAK,EAAE;AAd6B,KAAnB,CAArB;AAgBAwL,IAAAA,cAAc,CAAC/J,gBAAf,GAAkC,IAAlC;AACA+J,IAAAA,cAAc,CAAC5B,QAAf,CAAwB2B,aAAxB;AACA,WAAOF,WAAP;AACH,GAxBD;;AAyBAtN,EAAAA,WAAW,CAACY,SAAZ,CAAsByG,qBAAtB,GAA8C,UAAUV,QAAV,EAAoB;AAC9D,QAAI8H,eAAe,GAAG,MAAMlP,GAAG,CAACgI,wBAAV,GAAqC,IAArC,GAA4ChI,GAAG,CAACkI,sBAAtE;AACA,QAAIiH,eAAe,GAAG,GAAGzF,KAAH,CAASC,IAAT,CAAc,KAAKrI,OAAL,CAAa8N,gBAAb,CAA8BF,eAA9B,CAAd,CAAtB;;AACA,SAAK,IAAIrF,EAAE,GAAG,CAAT,EAAYwF,iBAAiB,GAAGF,eAArC,EAAsDtF,EAAE,GAAGwF,iBAAiB,CAACtF,MAA7E,EAAqFF,EAAE,EAAvF,EAA2F;AACvF,UAAIvI,OAAO,GAAG+N,iBAAiB,CAACxF,EAAD,CAA/B;AACA,UAAIyF,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAAC9I,cAAT,GAA0B,KAAK9F,MAAL,CAAY+F,iBAAZ,CAA8BD,cAAxD;AACA8I,MAAAA,QAAQ,CAACL,IAAT,GAAgB7H,QAAQ,IAAI,KAAKC,eAAL,EAA5B;AACAiI,MAAAA,QAAQ,CAACzI,QAAT;AACH;AACJ,GAVD;;AAWApG,EAAAA,WAAW,CAACY,SAAZ,CAAsB8J,YAAtB,GAAqC,YAAY;AAC7C,QAAIpD,QAAQ,GAAG,KAAKR,WAAL,CAAiBvH,GAAG,CAACgI,wBAArB,CAAf;;AACA,QAAID,QAAQ,CAACzG,OAAT,CAAiBgD,aAAjB,CAA+BkL,SAA/B,CAAyCC,QAAzC,CAAkD,eAAlD,CAAJ,EAAwE;AACpE,UAAIxH,MAAM,GAAG,KAAKV,WAAL,CAAiBvH,GAAG,CAACkI,sBAArB,CAAb;AACA,UAAId,QAAQ,GAAG,CAAf;;AACA,UAAI,KAAKpB,eAAT,EAA0B;AACtBoB,QAAAA,QAAQ,GAAGlH,IAAI,CAACmI,aAAL,GAAqB,KAAKjB,QAArC;AACA,aAAKrG,eAAL,CAAqBC,SAArB,GAAiC+G,QAAQ,CAACI,KAA1C;AACH,OAHD,MAIK;AACDf,QAAAA,QAAQ,GAAG,KAAKH,SAAL,CAAe,KAAKpG,MAAL,CAAYK,OAA3B,EAAoCkH,OAApC,KAAgD,KAAKnB,SAAL,CAAe,KAAKpG,MAAL,CAAYG,SAA3B,EAAsCoH,OAAtC,EAA3D;AACH;;AACD,UAAIsH,OAAO,GAAIvR,iBAAiB,CAAC4J,QAAQ,CAACI,KAAV,CAAlB,GAAsC,IAAtC,GAA6C,IAAIlH,IAAJ,CAAS8G,QAAQ,CAACI,KAAT,CAAeC,OAAf,KAA2BhB,QAApC,CAA3D;;AACA,UAAI,KAAKpB,eAAT,EAA0B;AACtB,aAAKjF,eAAL,CAAqBG,OAArB,GAA+BwO,OAA/B;AACH;;AACDzH,MAAAA,MAAM,CAACE,KAAP,GAAeuH,OAAf;AACAzH,MAAAA,MAAM,CAACpB,QAAP;AACH;;AACD,QAAI,KAAK5B,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsB0K,mBAAtB,CAA0C,KAAK5O,eAAL,CAAqBC,SAA/D;AACH;AACJ,GAtBD;;AAuBAP,EAAAA,WAAW,CAACY,SAAZ,CAAsByL,qBAAtB,GAA8C,UAAU8C,YAAV,EAAwB;AAClE,QAAIrC,SAAS,GAAGqC,YAAY,CAACC,KAA7B;AACA,QAAI1H,KAAK,GAAG,OAAOoF,SAAnB;AACA,QAAIuC,UAAU,GAAGF,YAAY,CAAC1C,KAA9B;AACA,QAAI6C,WAAW,GAAG,KAAKzF,gBAAL,CAAsBnC,KAAK,GAAG,YAAR,GAAuB,GAAvB,GAA6B,aAAnD,CAAlB;AACA,QAAI6H,aAAa,GAAG,KAAK1C,kBAAL,CAAwBnF,KAAK,GAAG,GAAR,GAAchI,WAAtC,EAAmDoN,SAAnD,CAApB;AACAwC,IAAAA,WAAW,CAACvO,WAAZ,CAAwBwO,aAAxB;AACA,QAAIC,gBAAgB,GAAG,8FACnBL,YAAY,CAACM,UADM,GACO,0CADP,GACoDN,YAAY,CAACO,SADjE,GAC6E,eADpG;;AAEA,QAAIP,YAAY,CAACQ,aAAjB,EAAgC;AAC5B,UAAIC,OAAO,GAAG,IAAI3Q,WAAJ,CAAgB;AAC1BoC,QAAAA,QAAQ,EAAE,KAAKpB,MAAL,CAAYoB,QAAZ,IAAwB,EADR;AAE1BwO,QAAAA,UAAU,EAAEV,YAAY,CAACU,UAFC;AAG1BnC,QAAAA,MAAM,EAAE,KAAKoC,2BAAL,CAAiC1N,IAAjC,CAAsC,IAAtC,CAHkB;AAI1B2N,QAAAA,YAAY,EAAEP,gBAJY;AAK1BpP,QAAAA,MAAM,EAAE;AACJ4P,UAAAA,IAAI,EAAEb,YAAY,CAACO,SADf;AAEJhI,UAAAA,KAAK,EAAEyH,YAAY,CAACc;AAFhB,SALkB;AAS1BC,QAAAA,cAAc,EAAE;AAAE,mBAASb,UAAX;AAAuB,kBAAQvC;AAA/B,SATU;AAU1BoB,QAAAA,cAAc,EAAE,QAVU;AAW1BI,QAAAA,WAAW,EAAEe,UAXa;AAY1Bc,QAAAA,WAAW,EAAE,OAZa;AAa1BC,QAAAA,UAAU,EAAE,OAbc;AAc1BC,QAAAA,IAAI,EAAE;AAdoB,OAAhB,CAAd;AAgBAT,MAAAA,OAAO,CAAC/D,QAAR,CAAiB0D,aAAjB;AACAK,MAAAA,OAAO,CAAClM,gBAAR,GAA2B,IAA3B;AACH,KAnBD,MAoBK;AACD,UAAI4M,YAAY,GAAG,IAAItR,YAAJ,CAAiB;AAChCqC,QAAAA,QAAQ,EAAE,KAAKpB,MAAL,CAAYoB,QAAZ,IAAwB,EADF;AAEhCqM,QAAAA,MAAM,EAAE,KAAK6C,wBAAL,CAA8BnO,IAA9B,CAAmC,IAAnC,CAFwB;AAGhCyN,QAAAA,UAAU,EAAEV,YAAY,CAACU,UAHO;AAIhCtO,QAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAJS;AAKhCnB,QAAAA,MAAM,EAAE;AACJ4P,UAAAA,IAAI,EAAEb,YAAY,CAACO,SADf;AAEJhI,UAAAA,KAAK,EAAEyH,YAAY,CAACc;AAFhB,SALwB;AAShCC,QAAAA,cAAc,EAAE;AAAE,mBAASb,UAAX;AAAuB,kBAAQvC;AAA/B,SATgB;AAUhCoB,QAAAA,cAAc,EAAE,QAVgB;AAWhCI,QAAAA,WAAW,EAAEe,UAXmB;AAYhCc,QAAAA,WAAW,EAAE,OAZmB;AAahCC,QAAAA,UAAU,EAAE,OAboB;AAchCL,QAAAA,YAAY,EAAEP;AAdkB,OAAjB,CAAnB;AAgBAc,MAAAA,YAAY,CAACzE,QAAb,CAAsB0D,aAAtB;AACAe,MAAAA,YAAY,CAAC5M,gBAAb,GAAgC,IAAhC;AACH;;AACD,WAAO4L,WAAP;AACH,GAlDD;;AAmDAtP,EAAAA,WAAW,CAACY,SAAZ,CAAsBsK,cAAtB,GAAuC,UAAUxD,KAAV,EAAiB;AACpD,QAAIoF,SAAS,GAAG,KAAKS,YAAL,CAAkB7F,KAAlB,CAAhB;AACA,QAAI8I,WAAW,GAAG,KAAK3G,gBAAL,CAAsBnC,KAAK,GAAG,YAA9B,CAAlB;AACA,QAAI+I,aAAa,GAAG,KAAK5D,kBAAL,CAAwBnF,KAAK,GAAG,GAAR,GAAchI,WAAtC,EAAmDoN,SAAnD,CAApB;AACA0D,IAAAA,WAAW,CAACzP,WAAZ,CAAwB0P,aAAxB;AACA,QAAIH,YAAY,GAAG,IAAItR,YAAJ,CAAiB;AAChC0R,MAAAA,cAAc,EAAE,IADgB;AAEhChD,MAAAA,MAAM,EAAE,KAAKiD,gBAAL,CAAsBvO,IAAtB,CAA2B,IAA3B,CAFwB;AAGhCf,MAAAA,QAAQ,EAAE,KAAKpB,MAAL,CAAYoB,QAAZ,IAAwB,EAHF;AAIhCwO,MAAAA,UAAU,EAAEzQ,YAJoB;AAKhCmC,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SALS;AAMhCnB,MAAAA,MAAM,EAAE;AAAE4P,QAAAA,IAAI,EAAE,MAAR;AAAgBtI,QAAAA,KAAK,EAAE;AAAvB,OANwB;AAOhCkJ,MAAAA,oBAAoB,EAAE,iBAPU;AAQhCC,MAAAA,SAAS,EAAE,UAAUC,CAAV,EAAa;AACpB,YAAIC,KAAK,GAAG,IAAIpS,KAAJ,EAAZ;AACAoS,QAAAA,KAAK,GAAID,CAAC,CAACd,IAAF,KAAW,EAAZ,GAAkBe,KAAK,CAACC,KAAN,CAAY,MAAZ,EAAoB,UAApB,EAAgCF,CAAC,CAACd,IAAlC,EAAwC,IAAxC,CAAlB,GAAkEe,KAA1E;AACAD,QAAAA,CAAC,CAACG,UAAF,CAAa7R,YAAb,EAA2B2R,KAA3B;AACH,OAZ+B;AAahCb,MAAAA,cAAc,EAAE;AAAE,iBAAS,KAAK3B,aAAL,CAAmB7G,KAAnB,CAAX;AAAsC,gBAAQoF;AAA9C,OAbgB;AAchCoB,MAAAA,cAAc,EAAE,QAdgB;AAehCI,MAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB,CAfmB;AAgBhCyI,MAAAA,WAAW,EAAE;AAhBmB,KAAjB,CAAnB;AAkBAG,IAAAA,YAAY,CAACzE,QAAb,CAAsB4E,aAAtB;AACAH,IAAAA,YAAY,CAAC5M,gBAAb,GAAgC,IAAhC;AACA,WAAO8M,WAAP;AACH,GA1BD;;AA2BAxQ,EAAAA,WAAW,CAACY,SAAZ,CAAsBkP,2BAAtB,GAAoD,UAAUzJ,IAAV,EAAgB;AAChE,QAAI,CAACA,IAAI,CAACqB,KAAN,IAAe,CAAC,KAAKzH,MAAL,CAAY+F,iBAAZ,CAA8BkL,KAA9B,CAAoCC,SAApD,IAAiE,KAAKlR,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,IAAyC,CAA9G,EAAiH;AAC7G;AACH;;AACD,QAAIyC,kBAAkB,GAAG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAlD;AACA,QAAIe,SAAS,GAAGzG,IAAI,CAACxF,OAAL,CAAauQ,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBhL,IAAI,CAACxF,OAAxB,CAArD;;AACA,SAAK,IAAIyQ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvF,kBAAkB,CAACzC,MAAvC,EAA+CgI,CAAC,EAAhD,EAAoD;AAChD,UAAIvF,kBAAkB,CAACuF,CAAD,CAAlB,CAAsBlC,KAAtB,KAAgCtC,SAAhC,IAA6CwE,CAAC,GAAGvF,kBAAkB,CAACzC,MAAnB,GAA4B,CAAjF,EAAoF;AAChF,YAAIiI,SAAS,GAAG,KAAKC,cAAL,CAAoBF,CAApB,CAAhB;AACA,YAAIG,UAAU,GAAG,EAAjB;;AACA,YAAIC,OAAO,GAAG,UAAUC,CAAV,EAAa;AACvB,cAAIC,aAAa,GAAG7F,kBAAkB,CAACuF,CAAC,GAAG,CAAL,CAAtC;AACA,cAAIO,MAAM,GAAGD,aAAa,CAAC/B,UAAd,CAAyBgC,MAAzB,CAAgC,UAAUjN,IAAV,EAAgB;AACzD,mBAAOA,IAAI,CAACgN,aAAa,CAACE,YAAf,CAAJ,KAAqCzL,IAAI,CAACqB,KAAL,CAAWiK,CAAX,CAA5C;AACH,WAFY,EAEV,CAFU,CAAb;AAGA,cAAII,OAAO,GAAGF,MAAM,CAAC9F,kBAAkB,CAACuF,CAAC,GAAG,CAAL,CAAlB,CAA0BQ,YAA3B,CAApB;AACA,cAAIE,SAAS,GAAGC,MAAM,CAACC,gBAAP,CAAwBZ,CAAxB,EAA2BS,OAA3B,CAAhB;AACAN,UAAAA,UAAU,GAAGA,UAAU,CAACU,MAAX,CAAkBH,SAAlB,CAAb;AACH,SARD;;AASA,YAAIC,MAAM,GAAG,IAAb;;AACA,aAAK,IAAIN,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGtL,IAAI,CAACqB,KAAL,CAAW4B,MAA/B,EAAuCqI,CAAC,EAAxC,EAA4C;AACxCD,UAAAA,OAAO,CAACC,CAAD,CAAP;AACH;;AACDJ,QAAAA,SAAS,CAAC1B,UAAV,GAAuB4B,UAAvB;AACAF,QAAAA,SAAS,CAACnL,QAAV;AACH;AACJ;AACJ,GA3BD;;AA4BApG,EAAAA,WAAW,CAACY,SAAZ,CAAsB4Q,cAAtB,GAAuC,UAAUY,KAAV,EAAiB;AACpD,QAAIjD,YAAY,GAAG,KAAKlP,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CqG,KAAK,GAAG,CAApD,CAAnB;AACA,QAAIb,SAAS,GAAG,KAAK1Q,OAAL,CAAa8C,aAAb,CAA2B,QAAQwL,YAAY,CAACC,KAAhD,EACZN,aADY,CACE,CADF,CAAhB;AAEA,WAAOyC,SAAP;AACH,GALD;;AAMAvR,EAAAA,WAAW,CAACY,SAAZ,CAAsB2P,wBAAtB,GAAiD,UAAUlK,IAAV,EAAgB;AAC7D,QAAI,CAACA,IAAI,CAACqB,KAAN,IAAe,KAAKzH,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,IAAyC,CAAxD,IAA6D,CAAC,KAAKrJ,MAAL,CAAY+F,iBAAZ,CAA8BkL,KAA9B,CAAoCC,SAAtG,EAAiH;AAC7G;AACH;;AACD,QAAIrE,SAAS,GAAGzG,IAAI,CAACxF,OAAL,CAAauQ,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBhL,IAAI,CAACxF,OAAxB,CAArD;AACA,QAAIkL,kBAAkB,GAAG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAlD;;AACA,SAAK,IAAIuF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvF,kBAAkB,CAACzC,MAAvC,EAA+CgI,CAAC,EAAhD,EAAoD;AAChD,UAAKA,CAAC,GAAGvF,kBAAkB,CAACzC,MAAnB,GAA4B,CAAjC,IAAuCyC,kBAAkB,CAACuF,CAAD,CAAlB,CAAsBlC,KAAtB,KAAgCtC,SAA3E,EAAsF;AAClF,YAAIuF,MAAM,GAAG,KAAKb,cAAL,CAAoBF,CAApB,CAAb;AACA,YAAIS,OAAO,GAAG1L,IAAI,CAACiM,QAAL,CAAcvG,kBAAkB,CAACuF,CAAD,CAAlB,CAAsBrB,OAApC,CAAd;AACAoC,QAAAA,MAAM,CAACxC,UAAP,GAAoB,KAAKqC,gBAAL,CAAsBZ,CAAtB,EAAyBS,OAAzB,CAApB;AACAM,QAAAA,MAAM,CAACjM,QAAP;AACA,YAAImM,QAAQ,GAAGF,MAAM,CAACxC,UAAP,CAAkB,CAAlB,EAAqB9D,kBAAkB,CAACuF,CAAC,GAAG,CAAL,CAAlB,CAA0BrB,OAA/C,CAAf;AACAoC,QAAAA,MAAM,CAAC3K,KAAP,GAAgBqE,kBAAkB,CAACuF,CAAC,GAAG,CAAL,CAAlB,CAA0B3B,aAA3B,GAA4C,CAAC4C,QAAD,CAA5C,GAAyDA,QAAxE;AACAF,QAAAA,MAAM,CAACjM,QAAP;AACH;AACJ;AACJ,GAjBD;;AAkBApG,EAAAA,WAAW,CAACY,SAAZ,CAAsBsR,gBAAtB,GAAyC,UAAUE,KAAV,EAAiBL,OAAjB,EAA0B;AAC/D,QAAI5C,YAAY,GAAG,KAAKlP,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CqG,KAAK,GAAG,CAApD,CAAnB;AACA,QAAIP,MAAM,GAAG1C,YAAY,CAACU,UAAb,CAAwBgC,MAAxB,CAA+B,UAAUjN,IAAV,EAAgB;AACxD,aAAOA,IAAI,CAACuK,YAAY,CAAC2C,YAAd,CAAJ,KAAoCC,OAA3C;AACH,KAFY,CAAb;AAGA,WAAOF,MAAP;AACH,GAND;;AAOA7R,EAAAA,WAAW,CAACY,SAAZ,CAAsB+P,gBAAtB,GAAyC,UAAUtK,IAAV,EAAgB;AACrD,QAAIyG,SAAS,GAAGzG,IAAI,CAACxF,OAAL,CAAauQ,YAAb,CAA0B,MAA1B,KAAqC,KAAKC,aAAL,CAAmBhL,IAAI,CAACxF,OAAxB,CAArD;;AACA,QAAIiM,SAAS,KAAK,KAAK7M,MAAL,CAAYI,WAAZ,CAAwBmS,aAA1C,EAAyD;AACrD,UAAIC,gBAAgB,GAAG,KAAK3L,WAAL,CAAiBvH,GAAG,CAAC4L,2BAArB,CAAvB;AACA,UAAIuH,cAAc,GAAG,KAAK5L,WAAL,CAAiBvH,GAAG,CAAC6L,yBAArB,CAArB;AACAsH,MAAAA,cAAc,CAAChL,KAAf,GAAuB+K,gBAAgB,CAAC/K,KAAxC;AACAgL,MAAAA,cAAc,CAACtM,QAAf;AACH;AACJ,GARD;;AASApG,EAAAA,WAAW,CAACY,SAAZ,CAAsBiK,cAAtB,GAAuC,UAAUnD,KAAV,EAAiB;AACpD,QAAIiL,WAAW,GAAG,KAAK9I,gBAAL,CAAsBnC,KAAK,GAAG,YAA9B,CAAlB;AACA,QAAIoF,SAAS,GAAG,KAAKS,YAAL,CAAkB7F,KAAlB,CAAhB;AACA,QAAIkL,aAAa,GAAG,KAAK/F,kBAAL,CAAwBnF,KAAK,GAAG,GAAR,GAAchI,WAAtC,EAAmDoN,SAAnD,CAApB;AACA6F,IAAAA,WAAW,CAAC5R,WAAZ,CAAwB6R,aAAxB;AACA,QAAIC,QAAQ,GAAG,IAAIhU,QAAJ,CAAa;AACxB6O,MAAAA,MAAM,EAAE,KAAKoF,QAAL,CAAc1Q,IAAd,CAAmB,IAAnB,CADgB;AAExBf,MAAAA,QAAQ,EAAEqG,KAAK,GAAG,GAAR,GAAc,KAAKzH,MAAL,CAAYoB,QAFZ;AAGxBE,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAHC;AAIxBwR,MAAAA,KAAK,EAAE,KAAKxE,aAAL,CAAmB7G,KAAnB;AAJiB,KAAb,CAAf;AAMAmL,IAAAA,QAAQ,CAAChH,QAAT,CAAkB+G,aAAlB;AACAC,IAAAA,QAAQ,CAACnP,gBAAT,GAA4B,IAA5B;AACAkP,IAAAA,aAAa,CAAChP,YAAd,CAA2B,MAA3B,EAAmCkJ,SAAnC;;AACA,QAAIA,SAAS,KAAK,QAAlB,EAA4B;AACxB,WAAKkG,YAAL,GAAoBH,QAApB;AACH;;AACD,WAAOF,WAAP;AACH,GAlBD;;AAmBA3S,EAAAA,WAAW,CAACY,SAAZ,CAAsBqJ,aAAtB,GAAsC,UAAUvC,KAAV,EAAiB;AACnD,QAAIuL,UAAU,GAAG,KAAKpJ,gBAAL,CAAsBnC,KAAK,GAAG,YAA9B,CAAjB;AACA,QAAIoF,SAAS,GAAG,KAAKS,YAAL,CAAkB7F,KAAlB,CAAhB;AACA,QAAIwL,WAAW,GAAIxL,KAAK,KAAKnI,GAAG,CAACgN,iBAAf,GAAoC,UAApC,GAAiD,OAAnE;AACA,QAAI4G,YAAY,GAAG,KAAKtG,kBAAL,CAAwBnF,KAAK,GAAG,GAAR,GAAchI,WAAtC,EAAmDoN,SAAnD,EAA8DoG,WAA9D,CAAnB;AACAD,IAAAA,UAAU,CAAClS,WAAX,CAAuBoS,YAAvB;AACAjU,IAAAA,KAAK,CAACkU,WAAN,CAAkB;AACdvS,MAAAA,OAAO,EAAEsS,YADK;AAEdjF,MAAAA,cAAc,EAAE,QAFF;AAGdmF,MAAAA,UAAU,EAAE;AACR9R,QAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SADf;AAER+M,QAAAA,WAAW,EAAE,KAAKC,aAAL,CAAmB7G,KAAnB;AAFL;AAHE,KAAlB;AAQA,WAAOuL,UAAP;AACH,GAfD;;AAgBAjT,EAAAA,WAAW,CAACY,SAAZ,CAAsB2M,YAAtB,GAAqC,UAAUR,IAAV,EAAgB;AACjD,QAAID,SAAS,GAAG,EAAhB;;AACA,YAAQC,IAAR;AACI,WAAKxN,GAAG,CAAC2K,aAAT;AACI4C,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYgK,OAAxB;AACA;;AACJ,WAAK7K,GAAG,CAAC8K,cAAT;AACIyC,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYkK,QAAxB;AACA;;AACJ,WAAK/K,GAAG,CAACgI,wBAAT;AACIuF,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYG,SAAxB;AACA;;AACJ,WAAKhB,GAAG,CAACkI,sBAAT;AACIqF,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYK,OAAxB;AACA;;AACJ,WAAKlB,GAAG,CAACgN,iBAAT;AACIO,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYkM,WAAxB;AACA;;AACJ,WAAK/M,GAAG,CAACuL,0BAAT;AACIgC,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYuF,QAAxB;AACA;;AACJ,WAAKpG,GAAG,CAAC4L,2BAAT;AACI2B,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYoS,aAAxB;AACA;;AACJ,WAAKjT,GAAG,CAAC6L,yBAAT;AACI0B,QAAAA,SAAS,GAAG,KAAK1M,MAAL,CAAYkT,WAAxB;AACA;;AACJ,WAAK/T,GAAG,CAACwL,eAAT;AACI+B,QAAAA,SAAS,GAAG,UAAZ;AACA;;AACJ,WAAKvN,GAAG,CAACiM,yBAAT;AACIsB,QAAAA,SAAS,GAAG,QAAZ;AACA;AA9BR;;AAgCA,WAAOA,SAAP;AACH,GAnCD;;AAoCA9M,EAAAA,WAAW,CAACY,SAAZ,CAAsB2N,aAAtB,GAAsC,UAAUzB,SAAV,EAAqB;AACvD,QAAIyG,SAAS,GAAG,EAAhB;;AACA,YAAQzG,SAAR;AACI,WAAKvN,GAAG,CAAC2K,aAAT;AACIqJ,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBC,OAArC;AACA;;AACJ,WAAK7K,GAAG,CAAC8K,cAAT;AACIkJ,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBG,QAArC;AACA;;AACJ,WAAK/K,GAAG,CAACgN,iBAAT;AACIgH,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBmC,WAArC;AACA;;AACJ,WAAK/M,GAAG,CAACgI,wBAAT;AACIgM,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyB5J,SAArC;AACA;;AACJ,WAAKhB,GAAG,CAACkI,sBAAT;AACI8L,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyB1J,OAArC;AACA;;AACJ,WAAKlB,GAAG,CAAC4L,2BAAT;AACIoI,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBqI,aAArC;AACA;;AACJ,WAAKjT,GAAG,CAAC6L,yBAAT;AACImI,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBmJ,WAArC;AACA;;AACJ,WAAK/T,GAAG,CAACiM,yBAAT;AACI+H,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBqJ,cAArC;AACA;;AACJ,WAAKjU,GAAG,CAACuL,0BAAT;AACIyI,QAAAA,SAAS,GAAG,KAAKtT,MAAL,CAAYkK,YAAZ,CAAyBxE,QAArC;AACA;;AACJ,WAAKpG,GAAG,CAACwL,eAAT;AACIwI,QAAAA,SAAS,GAAG,KAAKrT,IAAL,CAAUuC,WAAV,CAAsB,UAAtB,CAAZ;AACA;AA9BR;;AAgCA,WAAO8Q,SAAP;AACH,GAnCD;;AAoCAvT,EAAAA,WAAW,CAACY,SAAZ,CAAsBkS,QAAtB,GAAiC,UAAUzM,IAAV,EAAgB;AAC7C,QAAIxE,MAAM,GAAIwE,IAAI,CAAC7G,KAAL,CAAWqC,MAAzB;;AACA,QAAIA,MAAM,CAACkN,SAAP,CAAiBC,QAAjB,CAA0BzP,GAAG,CAACuL,0BAA9B,CAAJ,EAA+D;AAC3D,WAAK2I,cAAL,CAAoBpN,IAAI,CAACqN,OAAzB;AACH,KAFD,MAGK,IAAI7R,MAAM,CAACkN,SAAP,CAAiBC,QAAjB,CAA0BzP,GAAG,CAACwL,eAA9B,CAAJ,EAAoD;AACrD,WAAK4I,mBAAL,CAAyBtN,IAAI,CAACqN,OAA9B;AACH,KAFI,MAGA,IAAI7R,MAAM,CAACkN,SAAP,CAAiBC,QAAjB,CAA0BzP,GAAG,CAACiM,yBAA9B,CAAJ,EAA8D;AAC/D,WAAKoI,cAAL,CAAoBvN,IAAI,CAACqN,OAAzB;AACH;AACJ,GAXD;;AAYA1T,EAAAA,WAAW,CAACY,SAAZ,CAAsBiT,kBAAtB,GAA2C,YAAY;AACnD,QAAIhT,OAAO,GAAGpD,aAAa,CAAC,KAAD,CAA3B;AACA,SAAKqW,kBAAL,GAA0B,IAAI/U,MAAJ,CAAW;AACjCyD,MAAAA,MAAM,EAAE,KAAKtC,IAAL,CAAUuC,WAAV,CAAsB,YAAtB,CADyB;AAEjCT,MAAAA,OAAO,EAAE,KAFwB;AAGjCb,MAAAA,OAAO,EAAE,kCAHwB;AAIjC4S,MAAAA,aAAa,EAAE,IAJkB;AAKjC9R,MAAAA,KAAK,EAAE,KAL0B;AAMjCS,MAAAA,OAAO,EAAE,CAAC;AACFO,QAAAA,KAAK,EAAE,KAAK+Q,gBAAL,CAAsB5R,IAAtB,CAA2B,IAA3B,CADL;AAEFO,QAAAA,WAAW,EAAE;AAAExB,UAAAA,OAAO,EAAE,KAAKjB,IAAL,CAAUuC,WAAV,CAAsB,MAAtB,CAAX;AAA0CpB,UAAAA,QAAQ,EAAE,QAApD;AAA8D+B,UAAAA,SAAS,EAAE;AAAzE;AAFX,OAAD,EAIL;AAAEH,QAAAA,KAAK,EAAE,KAAKgR,kBAAL,CAAwB7R,IAAxB,CAA6B,IAA7B,CAAT;AAA6CO,QAAAA,WAAW,EAAE;AAAEtB,UAAAA,QAAQ,EAAE,UAAZ;AAAwBF,UAAAA,OAAO,EAAE,KAAKjB,IAAL,CAAUuC,WAAV,CAAsB,QAAtB;AAAjC;AAA1D,OAJK,CANwB;AAWjCZ,MAAAA,MAAM,EAAE,KAAKhB,OAXoB;AAYjCI,MAAAA,iBAAiB,EAAE;AAAEC,QAAAA,MAAM,EAAE;AAAV,OAZc;AAajCK,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAbU;AAcjCI,MAAAA,OAAO,EAAE,IAdwB;AAejCN,MAAAA,QAAQ,EAAEvB,mBAfuB;AAgBjCoU,MAAAA,IAAI,EAAE,KAAKC,gBAAL,CAAsB/R,IAAtB,CAA2B,IAA3B;AAhB2B,KAAX,CAA1B;AAkBA,SAAKvB,OAAL,CAAaE,WAAb,CAAyBF,OAAzB;AACA,SAAKiT,kBAAL,CAAwBjI,QAAxB,CAAiChL,OAAjC;AACA,SAAKiT,kBAAL,CAAwBpQ,gBAAxB,GAA2C,IAA3C;AACA,SAAKe,sBAAL,CAA4B,KAAKqP,kBAAL,CAAwBjT,OAAxB,CAAgC8C,aAAhC,CAA8C,eAA9C,CAA5B;AACH,GAxBD;;AAyBA3D,EAAAA,WAAW,CAACY,SAAZ,CAAsBkL,oBAAtB,GAA6C,YAAY;AACrD,SAAKgI,kBAAL,CAAwBM,IAAxB;;AACA,QAAI,KAAK5P,gBAAL,IAAyB,KAAK6P,UAAlC,EAA8C;AAC1C,WAAK7P,gBAAL,CAAsB8P,iBAAtB,CAAwC,KAAKD,UAA7C;AACH;AACJ,GALD;;AAMArU,EAAAA,WAAW,CAACY,SAAZ,CAAsBgT,cAAtB,GAAuC,UAAUW,KAAV,EAAiB;AACpD,QAAIA,KAAJ,EAAW;AACP,UAAI,CAAC,KAAKT,kBAAV,EAA8B;AAC1B,aAAKD,kBAAL;AACH;;AACD,WAAKrP,gBAAL,CAAsBgQ,aAAtB,CAAoC;AAAEC,QAAAA,SAAS,EAAE,KAAKC,eAAlB;AAAmCC,QAAAA,YAAY,EAAE;AAAjD,OAApC;AACA,WAAK7I,oBAAL;AACH,KAND,MAOK;AACD,UAAI,KAAKgI,kBAAT,EAA6B;AACzB,aAAKA,kBAAL,CAAwBc,IAAxB;AACH;;AACD,WAAKP,UAAL,GAAkB,EAAlB;;AACA,UAAI,KAAK7P,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsB8P,iBAAtB,CAAwC,KAAKD,UAA7C;AACA,aAAKQ,iBAAL,CAAuB,KAAKR,UAA5B;AACH;;AACD,UAAIxT,OAAO,GAAG,KAAKA,OAAL,CAAa8C,aAAb,CAA2B,MAAMhE,sBAAjC,CAAd;AACAhC,MAAAA,QAAQ,CAAC,CAACkD,OAAD,CAAD,EAAYd,gBAAZ,CAAR;AACH;AACJ,GApBD;;AAqBAC,EAAAA,WAAW,CAACY,SAAZ,CAAsBoT,gBAAtB,GAAyC,YAAY;AACjD,SAAKK,UAAL,GAAkB,KAAK7P,gBAAL,CAAsBsQ,iBAAtB,EAAlB;AACA,QAAIjU,OAAO,GAAG,KAAKA,OAAL,CAAa8C,aAAb,CAA2B,MAAMhE,sBAAjC,CAAd;;AACA,QAAI,KAAK6E,gBAAL,CAAsBsQ,iBAAtB,EAAJ,EAA+C;AAC3C7W,MAAAA,WAAW,CAAC,CAAC4C,OAAD,CAAD,EAAYd,gBAAZ,CAAX;AACH,KAFD,MAGK;AACDpC,MAAAA,QAAQ,CAAC,CAACkD,OAAD,CAAD,EAAYd,gBAAZ,CAAR;AACA,WAAKiT,YAAL,CAAkBwB,aAAlB,CAAgC;AAAEd,QAAAA,OAAO,EAAE;AAAX,OAAhC;AACH;;AACD,SAAKmB,iBAAL,CAAuB,KAAKR,UAA5B;AACA,SAAKU,iBAAL;AACH,GAZD;;AAaA/U,EAAAA,WAAW,CAACY,SAAZ,CAAsBmU,iBAAtB,GAA0C,YAAY;AAClD,SAAKjB,kBAAL,CAAwBc,IAAxB;AACH,GAFD;;AAGA5U,EAAAA,WAAW,CAACY,SAAZ,CAAsBqT,kBAAtB,GAA2C,YAAY;AACnD,SAAKc,iBAAL;;AACA,QAAI,KAAKvQ,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsB8P,iBAAtB,CAAwC,KAAKU,cAA7C;AACH;;AACD,QAAI,CAAC,KAAKA,cAAV,EAA0B;AACtB,WAAKhC,YAAL,CAAkBwB,aAAlB,CAAgC;AAAEd,QAAAA,OAAO,EAAE;AAAX,OAAhC;AACH;AACJ,GARD;;AASA1T,EAAAA,WAAW,CAACY,SAAZ,CAAsBuT,gBAAtB,GAAyC,YAAY;AACjD,SAAKa,cAAL,GAAsB,KAAKxQ,gBAAL,CAAsBsQ,iBAAtB,EAAtB;AACH,GAFD;;AAGA9U,EAAAA,WAAW,CAACY,SAAZ,CAAsBqF,mBAAtB,GAA4C,UAAUX,QAAV,EAAoBP,UAApB,EAAgC;AACxE,QAAI,CAAC,KAAK9E,MAAL,CAAY6C,aAAZ,CAA0BO,WAA/B,EAA4C;AACxC;AACH;;AACD,SAAKxC,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACoJ,UAArC,EAAiDsM,eAAjD,CAAiE,SAAjE;AACA,SAAKpU,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC2V,6BAArC,EAAoEC,SAApE,GAAgF,KAAKjV,IAAL,CAAUuC,WAAV,CAAsB,UAAtB,CAAhF;AACA6C,IAAAA,QAAQ,CAAC8P,QAAT,GAAoB,KAApB;AACA,SAAKV,eAAL,GAAuBpP,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAA/B;AACA,SAAK8T,UAAL,GAAkB,EAAlB;;AACA,QAAI,CAAC3W,iBAAiB,CAAC,KAAKuC,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCgK,OAAjC,CAAyCiL,OAA1C,CAAtB,EAA0E;AACtE/P,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYgK,OAAb,CAAR,GAAgC,KAAKnK,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCgK,OAAjC,CAAyCiL,OAAzE;AACH;;AACD,QAAI,CAAC3X,iBAAiB,CAAC,KAAKuC,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkK,QAAjC,CAA0C+K,OAA3C,CAAtB,EAA2E;AACvE/P,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkK,QAAb,CAAR,GAAiC,KAAKrK,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkK,QAAjC,CAA0C+K,OAA3E;AACH;;AACD,QAAI,CAAC3X,iBAAiB,CAAC,KAAKuC,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkM,WAAjC,CAA6C+I,OAA9C,CAAtB,EAA8E;AAC1E/P,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkM,WAAb,CAAR,GAAoC,KAAKrM,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkM,WAAjC,CAA6C+I,OAAjF;AACH;;AACD,SAAKC,WAAL,CAAiBhQ,QAAjB;;AACA,QAAIA,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAR,IAAwC,KAAKhP,gBAAjD,EAAmE;AAC/D,WAAKA,gBAAL,CAAsB8P,iBAAtB,CAAwChP,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAhD,EAA8ElO,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAtF;AACA,WAAK8T,UAAL,GAAkB/O,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAA1B;AACH;;AACD,QAAI+B,YAAY,GAAG,KAAK1U,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACqD,kBAArC,CAAnB;;AACA,QAAI2S,YAAJ,EAAkB;AACd5X,MAAAA,QAAQ,CAAC,CAAC4X,YAAD,CAAD,EAAiBhW,GAAG,CAACuG,aAArB,CAAR;AACH;;AACD,QAAI,KAAKtB,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBgQ,aAAtB,CAAoC;AAChCC,QAAAA,SAAS,EAAEnP,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CADa;AAEhCoU,QAAAA,YAAY,EAAE,CAACjX,iBAAiB,CAACqH,UAAD,CAAlB,GAAiCA,UAAjC,GAA8C,CAACrH,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAT,CAAlB,GACxD,KAAKhP,gBAAL,CAAsBmQ,YADkC,GACnB;AAHT,OAApC;AAKH;;AACD,QAAI,KAAK1U,MAAL,CAAYwB,UAAZ,IAA0B/D,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAA/C,EAA6E;AACzE,UAAItD,OAAO,GAAG,KAAKA,OAAL,CAAa8C,aAAb,CAA2B,MAAMhE,sBAAjC,CAAd;AACAhC,MAAAA,QAAQ,CAAC,CAACkD,OAAD,CAAD,EAAYd,gBAAZ,CAAR;AACA,WAAK8U,iBAAL,CAAuB,KAAKR,UAA5B;AACH,KAJD,MAKK;AACD,UAAImB,UAAU,GAAG,KAAK3U,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC4D,8BAArC,CAAjB;AACA,WAAKsS,aAAL,CAAmBD,UAAnB,EAA+B,KAA/B;AACH;;AACD,SAAK/R,YAAL,CAAkB2Q,IAAlB;AACH,GA5CD;;AA6CApU,EAAAA,WAAW,CAACY,SAAZ,CAAsB8E,kBAAtB,GAA2C,UAAUgQ,SAAV,EAAqBpQ,QAArB,EAA+B;AACtE,QAAIoQ,SAAS,CAACtL,OAAd,EAAuB;AACnB9E,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYgK,OAAb,CAAR,GAAgCsL,SAAS,CAACtL,OAA1C;AACH;;AACD9E,IAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAR,GAAkCmV,SAAS,CAACnV,SAA5C;AACA+E,IAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAR,GAAgCiV,SAAS,CAACjV,OAA1C;AACA6E,IAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYuF,QAAb,CAAR,GAAiC+P,SAAS,CAAC/P,QAA3C;;AACA,QAAI+P,SAAS,CAACC,cAAd,EAA8B;AAC1BrQ,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAR,GAAuCkC,SAAS,CAACC,cAAjD;AACH;;AACD,QAAI,KAAK1V,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CAAxC,IAA6C,KAAKrJ,MAAL,CAAY+F,iBAAZ,CAA8BkL,KAA9B,CAAoC0E,SAApC,CAA8CtM,MAA9C,GAAuD,CAAxG,EAA2G;AACvG,WAAKrJ,MAAL,CAAYkM,YAAZ,CAAyB0J,iBAAzB,CAA2CvQ,QAA3C;AACH;AACJ,GAbD;;AAcAtF,EAAAA,WAAW,CAACY,SAAZ,CAAsBqD,mBAAtB,GAA4C,YAAY;AACpD,QAAI6R,iBAAiB,GAAG,UAAUC,KAAV,EAAiB;AAAE,aAAQA,KAAK,IAAIC,MAAM,CAACC,IAAP,CAAYF,KAAZ,EAAmBzM,MAAnB,GAA4B,CAAtC,GAA2CyM,KAA3C,GAAmDG,SAA1D;AAAsE,KAAjH;;AACA,QAAIxN,IAAI,GAAG,KAAK7H,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACoJ,UAArC,CAAX;AACA,QAAIoN,KAAK,GAAG,EAAZ;AACAA,IAAAA,KAAK,CAAC,KAAK9V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCgK,OAAjC,CAAyC2C,IAA1C,CAAL,GAAuD+I,iBAAiB,CAAC,KAAK7V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCgK,OAAjC,CAAyC+L,UAA1C,CAAxE;AACAJ,IAAAA,KAAK,CAAC,KAAK9V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkK,QAAjC,CAA0CyC,IAA3C,CAAL,GAAwD+I,iBAAiB,CAAC,KAAK7V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkK,QAAjC,CAA0C6L,UAA3C,CAAzE;AACAJ,IAAAA,KAAK,CAAC,KAAK9V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCG,SAAjC,CAA2CwM,IAA5C,CAAL,GAAyD+I,iBAAiB,CAAC,KAAK7V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCG,SAAjC,CAA2C4V,UAA5C,CAA1E;AACAJ,IAAAA,KAAK,CAAC,KAAK9V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCK,OAAjC,CAAyCsM,IAA1C,CAAL,GAAuD+I,iBAAiB,CAAC,KAAK7V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCK,OAAjC,CAAyC0V,UAA1C,CAAxE;AACAJ,IAAAA,KAAK,CAAC,KAAK9V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkM,WAAjC,CAA6CS,IAA9C,CAAL,GACI+I,iBAAiB,CAAC,KAAK7V,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkM,WAAjC,CAA6C6J,UAA9C,CADrB;AAEA,SAAKzV,cAAL,CAAoB0V,mBAApB,CAAwC1N,IAAxC,EAA8CqN,KAA9C,EAAqD,KAAKlV,OAA1D;AACH,GAXD;;AAYAb,EAAAA,WAAW,CAACY,SAAZ,CAAsB0U,WAAtB,GAAoC,UAAU9O,SAAV,EAAqB;AACrD,QAAIlB,QAAQ,GAAGxH,MAAM,CAAC,EAAD,EAAK0I,SAAL,EAAgB,IAAhB,EAAsB,IAAtB,CAArB;;AACA,QAAIlB,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAR,CAA8B4V,QAA9B,OAA6C,CAA7C,IAAkD/Q,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAR,CAA8B6V,UAA9B,OAA+C,CAArG,EAAwG;AACpG,WAAKC,UAAL,CAAgBjR,QAAhB;AACH;;AACD,SAAKkB,SAAL,GAAiBlB,QAAjB;AACA,QAAIkR,WAAW,GAAG,KAAKC,eAAL,CAAqBlX,GAAG,CAAC+B,yBAAzB,CAAlB;AACA,QAAIoV,QAAQ,GAAGV,MAAM,CAACC,IAAP,CAAY3Q,QAAZ,CAAf;;AACA,SAAK,IAAI8D,EAAE,GAAG,CAAT,EAAYuN,aAAa,GAAGH,WAAjC,EAA8CpN,EAAE,GAAGuN,aAAa,CAACrN,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;AAC3E,UAAIwN,UAAU,GAAGD,aAAa,CAACvN,EAAD,CAA9B;AACA,UAAIyN,UAAU,GAAGD,UAAU,CAAC7J,IAAX,IAAmB,KAAKsE,aAAL,CAAmBuF,UAAnB,CAApC;;AACA,UAAI,CAAClZ,iBAAiB,CAACmZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;AACrD,YAAIH,QAAQ,CAACI,OAAT,CAAiBD,UAAjB,MAAiC,CAAC,CAAtC,EAAyC;AACrC,eAAKE,iBAAL,CAAuBH,UAAvB,EAAmCtR,QAAQ,CAACuR,UAAD,CAA3C;AACH,SAFD,MAGK;AACD,eAAKG,wBAAL,CAA8BJ,UAA9B;AACH;AACJ;AACJ;;AACD,QAAIlZ,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAArB,EAAmD;AAC/C,WAAKsP,cAAL,CAAoBnO,QAAQ,CAAC,KAAKlF,MAAL,CAAYuF,QAAb,CAA5B;AACA,UAAIsR,WAAW,GAAG,KAAKnQ,WAAL,CAAiBvH,GAAG,CAACwL,eAAJ,GAAsB,GAAtB,GAA4BrL,WAA7C,CAAlB;;AACA,UAAI,EAAEhC,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYoS,aAAb,CAAT,CAAjB,IAA0D9U,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYkT,WAAb,CAAT,CAA7E,CAAJ,EAAuH;AACnH2D,QAAAA,WAAW,CAACvD,OAAZ,GAAsB,IAAtB;AACAuD,QAAAA,WAAW,CAAC7Q,QAAZ;AACH;;AACD,WAAKuN,mBAAL,CAAyBsD,WAAW,CAACvD,OAArC;AACA,aAAOpO,QAAQ,CAAC8P,QAAhB;AACH;AACJ,GA9BD;;AA+BApV,EAAAA,WAAW,CAACY,SAAZ,CAAsByQ,aAAtB,GAAsC,UAAUxQ,OAAV,EAAmB;AACrD,QAAIqW,QAAQ,GAAGrW,OAAO,CAACuQ,YAAR,CAAqB,WAArB,KAAqC,EAApD;;AACA,QAAI8F,QAAQ,KAAK,EAAjB,EAAqB;AACjB,UAAIC,WAAW,GAAG,KAAlB;AACA,UAAIC,aAAa,GAAG,EAApB;;AACA,UAAIvW,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;AAC9CoI,QAAAA,aAAa,GAAG,OAAhB;AACAD,QAAAA,WAAW,GAAG,IAAd;AACH,OAHD,MAIK,IAAItW,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;AAClDoI,QAAAA,aAAa,GAAG,eAAhB;AACAD,QAAAA,WAAW,GAAG,IAAd;AACH,OAHI,MAIA,IAAItW,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;AACrDoI,QAAAA,aAAa,GAAG,kBAAhB;AACH,OAFI,MAGA,IAAIvW,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;AACjDoI,QAAAA,aAAa,GAAG,cAAhB;AACH,OAFI,MAGA,IAAIvW,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;AAC/CoI,QAAAA,aAAa,GAAG,YAAhB;AACH;;AACD,UAAIC,aAAa,GAAGF,WAAW,GAAG,MAAMC,aAAN,GAAsB,kBAAzB,GAA8C,MAAMA,aAAnF;AACA,UAAIE,OAAO,GAAGlZ,OAAO,CAACyC,OAAD,EAAUwW,aAAV,CAAP,IAAmCxW,OAAO,CAAC8C,aAAR,CAAsB,MAAMyT,aAA5B,CAAjD;;AACA,UAAIE,OAAJ,EAAa;AACT,YAAIC,OAAO,GAAGD,OAAO,CAAC3T,aAAR,CAAsB,QAAtB,CAAd;;AACA,YAAI4T,OAAJ,EAAa;AACTL,UAAAA,QAAQ,GAAGK,OAAO,CAACxK,IAAnB;AACH;AACJ;AACJ;;AACD,WAAOmK,QAAP;AACH,GAhCD;;AAiCAlX,EAAAA,WAAW,CAACY,SAAZ,CAAsB6S,cAAtB,GAAuC,UAAU+D,YAAV,EAAwB;AAC3D,QAAIlQ,QAAQ,GAAG,KAAKR,WAAL,CAAiBvH,GAAG,CAACgI,wBAArB,CAAf;AACA,QAAIC,MAAM,GAAG,KAAKV,WAAL,CAAiBvH,GAAG,CAACkI,sBAArB,CAAb;AACA,QAAI+I,WAAW,GAAG,KAAK3P,OAAL,CAAa8C,aAAb,CAA2B,wBAA3B,CAAlB;AACA,QAAIwK,MAAJ;;AACA,QAAIqJ,YAAJ,EAAkB;AACdrJ,MAAAA,MAAM,GAAIzQ,iBAAiB,CAAC,KAAKuC,MAAL,CAAYmO,UAAb,CAAlB,GAA8C,KAAKC,SAAL,CAAe,aAAf,CAA9C,GAA8E,KAAKpO,MAAL,CAAYmO,UAAnG;AACAzQ,MAAAA,QAAQ,CAAC,KAAKkD,OAAL,CAAa8N,gBAAb,CAA8B,cAA9B,CAAD,EAAgDpP,GAAG,CAACkY,+BAApD,CAAR;AACA9Z,MAAAA,QAAQ,CAAC,CAAC6S,WAAD,CAAD,EAAgBjR,GAAG,CAACuG,aAApB,CAAR;;AACA,UAAI,KAAKjF,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC0L,gCAArC,CAAJ,EAA4E;AACxEhN,QAAAA,WAAW,CAAC,CAAC,KAAK4C,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC0L,gCAArC,CAAD,CAAD,EAA2E1L,GAAG,CAACmY,YAA/E,CAAX;AACH;;AACDpQ,MAAAA,QAAQ,CAAC6G,MAAT,GAAkB3G,MAAM,CAAC2G,MAAP,GAAgBA,MAAlC;AACH,KARD,MASK;AACDA,MAAAA,MAAM,GAAIzQ,iBAAiB,CAAC,KAAKuC,MAAL,CAAYmO,UAAb,CAAlB,GAA8C,KAAKC,SAAL,CAAe,aAAf,IAAgC,GAAhC,GAAsC,KAAKA,SAAL,CAAe,aAAf,CAApF,GACL,KAAKpO,MAAL,CAAYmO,UAAZ,GAAyB,GAAzB,GAA+B,KAAKC,SAAL,CAAe,aAAf,CADnC;AAEApQ,MAAAA,WAAW,CAAC,KAAK4C,OAAL,CAAa8N,gBAAb,CAA8B,cAA9B,CAAD,EAAgDpP,GAAG,CAACkY,+BAApD,CAAX;AACAxZ,MAAAA,WAAW,CAAC,CAACuS,WAAD,CAAD,EAAgBjR,GAAG,CAACuG,aAApB,CAAX;;AACA,UAAI,KAAKjF,OAAL,CAAa8C,aAAb,CAA2B,kCAA3B,EAA+D+P,OAAnE,EAA4E;AACxE/V,QAAAA,QAAQ,CAAC,CAAC,KAAKkD,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC0L,gCAArC,CAAD,CAAD,EAA2E1L,GAAG,CAACmY,YAA/E,CAAR;AACH;;AACDpQ,MAAAA,QAAQ,CAAC6G,MAAT,GAAkB3G,MAAM,CAAC2G,MAAP,GAAgBA,MAAlC;AACH;;AACD,QAAI,KAAK5I,eAAT,EAA0B;AACtB,WAAKoS,cAAL,CAAoBH,YAApB,EAAkClQ,QAAlC,EAA4CE,MAA5C;AACH;;AACDF,IAAAA,QAAQ,CAAClB,QAAT;AACAoB,IAAAA,MAAM,CAACpB,QAAP;;AACA,QAAI,CAAC1I,iBAAiB,CAAC,KAAK8G,gBAAN,CAAtB,EAA+C;AAC3C,WAAKA,gBAAL,CAAsB0K,mBAAtB,CAA0C5H,QAAQ,CAACI,KAAnD;AACH;AACJ,GAhCD;;AAiCA1H,EAAAA,WAAW,CAACY,SAAZ,CAAsB+W,cAAtB,GAAuC,UAAUH,YAAV,EAAwBlQ,QAAxB,EAAkCE,MAAlC,EAA0C;AAC7E,QAAIiN,SAAJ;AACA,QAAIxF,OAAJ;;AACA,QAAIuI,YAAJ,EAAkB;AACd/C,MAAAA,SAAS,GAAGhV,IAAI,CAACmY,SAAL,CAAe,IAAIpX,IAAJ,CAAS,KAAKF,eAAL,CAAqBC,SAArB,CAA+BoH,OAA/B,EAAT,CAAf,CAAZ;;AACA,UAAI,KAAK1H,MAAL,CAAYuF,eAAZ,CAA4BG,QAAhC,EAA0C;AACtC,YAAIkS,IAAI,GAAGpY,IAAI,CAACqY,OAAL,CAAa,IAAItX,IAAJ,CAAS,KAAKF,eAAL,CAAqBG,OAArB,CAA6BkH,OAA7B,EAAT,CAAb,EAA+D,CAAC,CAAhE,EAAmEA,OAAnE,EAAX;AACAsH,QAAAA,OAAO,GAAI,CAAC,KAAK3O,eAAL,CAAqBC,SAAtB,GAAkCsX,IAAnC,GAA2C,KAAKvX,eAAL,CAAqBG,OAAhE,GAA0E,IAAID,IAAJ,CAASqX,IAAT,CAApF;AACH,OAHD,MAIK;AACD5I,QAAAA,OAAO,GAAGxP,IAAI,CAACmY,SAAL,CAAe,IAAIpX,IAAJ,CAAS,KAAKF,eAAL,CAAqBG,OAArB,CAA6BkH,OAA7B,EAAT,CAAf,CAAV;AACH;AACJ,KATD,MAUK;AACD,UAAIoQ,KAAK,GAAG,KAAK9X,MAAL,CAAYuF,eAAZ,CAA4BjF,SAAxC;AACAkU,MAAAA,SAAS,GAAG,IAAIjU,IAAJ,CAAS,KAAKF,eAAL,CAAqBC,SAArB,CAA+BoH,OAA/B,EAAT,CAAZ;AACA8M,MAAAA,SAAS,CAACzG,QAAV,CAAmB+J,KAAK,CAAC1B,QAAN,EAAnB,EAAqC0B,KAAK,CAACzB,UAAN,EAArC,EAAyDyB,KAAK,CAACC,UAAN,EAAzD;;AACA,UAAI,KAAK/X,MAAL,CAAYuF,eAAZ,CAA4BG,QAAhC,EAA0C;AACtC,YAAIsS,SAAS,GAAG,KAAKhY,MAAL,CAAYiY,eAAZ,CAA4B,KAAKjY,MAAL,CAAYkY,SAAZ,CAAsBJ,KAAlD,CAAhB;AACAtD,QAAAA,SAAS,CAACzG,QAAV,CAAmBiK,SAAS,CAAC5B,QAAV,EAAnB,EAAyC4B,SAAS,CAAC3B,UAAV,EAAzC,EAAiE2B,SAAS,CAACD,UAAV,EAAjE;AACA/I,QAAAA,OAAO,GAAG,IAAIzO,IAAJ,CAASiU,SAAS,CAAC9M,OAAV,EAAT,CAAV;AACAsH,QAAAA,OAAO,CAACmJ,eAAR,CAAwB3Y,IAAI,CAACmI,aAAL,GAAqB,KAAKhB,eAAL,EAA7C;AACH,OALD,MAMK;AACDqI,QAAAA,OAAO,GAAG,IAAIzO,IAAJ,CAASiU,SAAS,CAAC9M,OAAV,EAAT,CAAV;AACAsH,QAAAA,OAAO,CAACmJ,eAAR,CAAwB,KAAKnY,MAAL,CAAYuF,eAAZ,CAA4B/E,OAA5B,CAAoCkH,OAApC,KAAgD,KAAK1H,MAAL,CAAYuF,eAAZ,CAA4BjF,SAA5B,CAAsCoH,OAAtC,EAAxE;AACH;AACJ;;AACD,SAAKrH,eAAL,GAAuB;AAAEC,MAAAA,SAAS,EAAE,IAAIC,IAAJ,CAASiU,SAAS,CAAC9M,OAAV,EAAT,CAAb;AAA4ClH,MAAAA,OAAO,EAAE,IAAID,IAAJ,CAASyO,OAAO,CAACtH,OAAR,EAAT;AAArD,KAAvB;AACAL,IAAAA,QAAQ,CAACI,KAAT,GAAiB+M,SAAjB;AACAjN,IAAAA,MAAM,CAACE,KAAP,GAAeuH,OAAf;AACA3H,IAAAA,QAAQ,CAAClB,QAAT;AACAoB,IAAAA,MAAM,CAACpB,QAAP;AACH,GAjCD;;AAkCApG,EAAAA,WAAW,CAACY,SAAZ,CAAsByN,SAAtB,GAAkC,UAAUgK,UAAV,EAAsB;AACpD,QAAI5Z,QAAQ,EAAZ,EAAgB;AACZ,UAAI4Z,UAAU,KAAK,aAAnB,EAAkC;AAC9B,eAAO3Z,QAAQ,CAAC4Z,wBAAT,CAAkC;AAAEC,UAAAA,QAAQ,EAAE;AAAZ,SAAlC,EAAqD,KAAKtY,MAAL,CAAYgO,MAAjE,EAAyEE,MAAhF;AACH;;AACD,aAAOzP,QAAQ,CAAC4Z,wBAAT,CAAkC;AAAEC,QAAAA,QAAQ,EAAE;AAAZ,OAAlC,EAAqD,KAAKtY,MAAL,CAAYgO,MAAjE,EAAyEE,MAAhF;AACH;;AACD,QAAIA,MAAJ;;AACA,QAAI,KAAKlO,MAAL,CAAYgO,MAAZ,KAAuB,IAAvB,IAA+B,KAAKhO,MAAL,CAAYgO,MAAZ,KAAuB,OAA1D,EAAmE;AAC/DE,MAAAA,MAAM,GAAGjQ,QAAQ,CAACma,UAAU,GAAG,QAAd,EAAwBla,oBAAoB,CAAC,KAAK8B,MAAL,CAAYuY,eAAZ,EAAD,CAA5C,CAAjB;AACH,KAFD,MAGK;AACDrK,MAAAA,MAAM,GAAGjQ,QAAQ,EACjB;AACA,gBAAU,EAAV,GAAe,KAAK+B,MAAL,CAAYgO,MAA3B,GAAoC,mBAApC,GAA0D,KAAKhO,MAAL,CAAYuY,eAAZ,EAA1D,GAA0F,GAA1F,GAAgGH,UAAhG,GAA6G,QAF5F,EAEsGra,QAFtG,CAAjB;AAGH;;AACD,WAAOmQ,MAAP;AACH,GAjBD;;AAkBAnO,EAAAA,WAAW,CAACY,SAAZ,CAAsBsF,oBAAtB,GAA6C,UAAUZ,QAAV,EAAoB;AAC7D,QAAI,CAAC,KAAKrF,MAAL,CAAY6C,aAAZ,CAA0BiE,YAA/B,EAA6C;AACzC;AACH;;AACD,QAAI,CAAC,KAAK9G,MAAL,CAAYwB,UAAjB,EAA6B;AACzBxD,MAAAA,WAAW,CAAC,CAAC,KAAK4C,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACqD,kBAArC,CAAD,CAAD,EAA6DrD,GAAG,CAACuG,aAAjE,CAAX;AACH;;AACD,SAAKjF,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC2V,6BAArC,EAAoEC,SAApE,GAAgF,KAAKjV,IAAL,CAAUuC,WAAV,CAAsB,WAAtB,CAAhF;AACA,SAAK5B,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACoJ,UAArC,EAAiD/E,YAAjD,CAA8D,SAA9D,EAAyE0B,QAAQ,CAAC,KAAKlF,MAAL,CAAYU,EAAb,CAAR,CAAyB2X,QAAzB,EAAzE;;AACA,QAAI/a,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAArB,EAAmD;AAC/CmB,MAAAA,QAAQ,GAAGxH,MAAM,CAAC,EAAD,EAAKwH,QAAL,EAAe,IAAf,EAAqB,IAArB,CAAjB;AACA,UAAI2R,WAAW,GAAG,KAAKnQ,WAAL,CAAiBvH,GAAG,CAACwL,eAAJ,GAAsB,GAAtB,GAA4BrL,WAA7C,CAAlB;AACA,UAAIgZ,aAAa,GAAG,KAAK,CAAzB;;AACA,UAAIpT,QAAQ,CAAC,KAAKlF,MAAL,CAAYoS,aAAb,CAAR,IAAuClN,QAAQ,CAAC,KAAKlF,MAAL,CAAYkT,WAAb,CAAnD,EAA8E;AAC1EoF,QAAAA,aAAa,GAAG,IAAhB;AACA,aAAKzY,MAAL,CAAYoI,SAAZ,CAAsBsQ,eAAtB,CAAsCrT,QAAtC;AACH,OAHD,MAIK;AACDoT,QAAAA,aAAa,GAAG,KAAhB;AACH;;AACDpT,MAAAA,QAAQ,CAAC8P,QAAT,GAAoBsD,aAApB;AACAzB,MAAAA,WAAW,CAACvD,OAAZ,GAAsBgF,aAAtB;AACAzB,MAAAA,WAAW,CAAC7Q,QAAZ;AACH;;AACD,SAAKkP,WAAL,CAAiBhQ,QAAjB;;AACA,QAAIA,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAR,IAAwC,KAAKhP,gBAAjD,EAAmE;AAC/D,WAAKA,gBAAL,CAAsB8P,iBAAtB,CAAwChP,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAhD,EAA8ElO,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAtF;AACH,KAFD,MAGK,IAAI,CAAC,KAAKN,MAAL,CAAYwB,UAAb,IAA2B,KAAK+C,gBAApC,EAAsD;AACvD,WAAKA,gBAAL,CAAsBgQ,aAAtB,CAAoC;AAAEC,QAAAA,SAAS,EAAEnP,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb;AAArB,OAApC;AACA,WAAKiE,gBAAL,CAAsB8P,iBAAtB,CAAwC,EAAxC;AACH;;AACD,SAAKI,eAAL,GAAuBpP,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAA/B;AACA,SAAK8T,UAAL,GAAkB,EAAlB;;AACA,QAAI/O,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAZ,EAA0C;AACtC,UAAI,KAAKhP,gBAAT,EAA2B;AACvB,aAAKA,gBAAL,CAAsB8P,iBAAtB,CAAwChP,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAhD,EAA8ElO,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAtF;AACH;;AACD,WAAK8T,UAAL,GAAkB/O,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAA1B;AACH;;AACD,QAAI,KAAKvT,MAAL,CAAYwB,UAAZ,IAA0B/D,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAA/C,EAA6E;AACzE,UAAItD,OAAO,GAAG,KAAKA,OAAL,CAAa8C,aAAb,CAA2B,MAAMhE,sBAAjC,CAAd;;AACA,UAAI2F,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAZ,EAA0C;AACtCvV,QAAAA,WAAW,CAAC,CAAC4C,OAAD,CAAD,EAAYd,gBAAZ,CAAX;AACA,aAAKiT,YAAL,CAAkBwB,aAAlB,CAAgC;AAAEd,UAAAA,OAAO,EAAE;AAAX,SAAhC;AACH,OAHD,MAIK;AACD/V,QAAAA,QAAQ,CAAC,CAACkD,OAAD,CAAD,EAAYd,gBAAZ,CAAR;AACA,aAAKiT,YAAL,CAAkBwB,aAAlB,CAAgC;AAAEd,UAAAA,OAAO,EAAE;AAAX,SAAhC;AACH;;AACD,WAAKmB,iBAAL,CAAuB,KAAKR,UAA5B;AACH;;AACD,QAAIuE,SAAS,GAAI,KAAK3Y,MAAL,CAAY+C,QAAZ,IAAwBsC,QAAQ,CAAC,KAAKlF,MAAL,CAAYyY,UAAb,CAAjD;;AACA,QAAI,CAAC,KAAK5Y,MAAL,CAAYwB,UAAjB,EAA6B;AACzB,UAAI+T,UAAU,GAAG,KAAK3U,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC4D,8BAArC,CAAjB;AACA,UAAIoS,YAAY,GAAG,KAAK1U,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACqD,kBAArC,CAAnB;AACA,WAAK6S,aAAL,CAAmBD,UAAnB,EAA+BoD,SAA/B;AACA,WAAKnD,aAAL,CAAmBF,YAAnB,EAAiCqD,SAAjC;AACH,KALD,MAMK;AACD,UAAIE,QAAQ,GAAG,KAAKjY,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACyE,4BAArC,CAAf;;AACA,UAAI8U,QAAJ,EAAc;AACV,YAAIF,SAAJ,EAAe;AACXjb,UAAAA,QAAQ,CAAC,CAACmb,QAAD,CAAD,EAAavZ,GAAG,CAACwZ,kBAAjB,CAAR;AACH,SAFD,MAGK;AACD9a,UAAAA,WAAW,CAAC,CAAC6a,QAAD,CAAD,EAAavZ,GAAG,CAACwZ,kBAAjB,CAAX;AACH;AACJ;AACJ;;AACD,SAAKtV,YAAL,CAAkB2Q,IAAlB;AACH,GAvED;;AAwEApU,EAAAA,WAAW,CAACY,SAAZ,CAAsB6U,aAAtB,GAAsC,UAAU5U,OAAV,EAAmB6G,KAAnB,EAA0B;AAC5D,QAAI7G,OAAJ,EAAa;AACTA,MAAAA,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyBjM,QAAzB,GAAoC6E,KAApC;AACH;AACJ,GAJD;;AAKA1H,EAAAA,WAAW,CAACY,SAAZ,CAAsB+L,sBAAtB,GAA+C,YAAY;AACvD,WAAO,IAAIrN,gBAAJ,CAAqB;AACxBqO,MAAAA,YAAY,EAAE,KAAK1N,MAAL,CAAY0N,YADF;AAExBtM,MAAAA,QAAQ,EAAE,KAAKpB,MAAL,CAAYoB,QAFE;AAGxB+M,MAAAA,UAAU,EAAE,KAAKnO,MAAL,CAAYmO,UAHA;AAIxB7M,MAAAA,SAAS,EAAE,KAAKtB,MAAL,CAAYsB,SAJC;AAKxBwE,MAAAA,cAAc,EAAE,KAAK9F,MAAL,CAAY+F,iBAAZ,CAA8BD,cALtB;AAMxBkI,MAAAA,MAAM,EAAE,KAAKhO,MAAL,CAAYgO;AANI,KAArB,CAAP;AAQH,GATD;;AAUAjO,EAAAA,WAAW,CAACY,SAAZ,CAAsBgM,wBAAtB,GAAiD,YAAY;AACzD,QAAI6H,SAAS,GAAG,KAAK5T,OAAL,CAAa8C,aAAb,CAA2B,UAA3B,CAAhB;AACA,QAAIsL,OAAO,GAAG,KAAKpO,OAAL,CAAa8C,aAAb,CAA2B,QAA3B,CAAd;;AACA,QAAI8Q,SAAS,IAAIxF,OAAjB,EAA0B;AACtB,UAAI3H,QAAQ,GAAGmN,SAAS,CAAC3F,aAAV,CAAwB,CAAxB,CAAf;AACA,UAAItH,MAAM,GAAGyH,OAAO,CAACH,aAAR,CAAsB,CAAtB,CAAb;AACAxH,MAAAA,QAAQ,CAACsG,GAAT,GAAe,KAAK3N,MAAL,CAAY4N,OAA3B;AACAvG,MAAAA,QAAQ,CAACwG,GAAT,GAAe,KAAK7N,MAAL,CAAY8N,OAA3B;AACAvG,MAAAA,MAAM,CAACoG,GAAP,GAAa,KAAK3N,MAAL,CAAY4N,OAAzB;AACArG,MAAAA,MAAM,CAACsG,GAAP,GAAa,KAAK7N,MAAL,CAAY8N,OAAzB;AACAzG,MAAAA,QAAQ,CAAClB,QAAT;AACAoB,MAAAA,MAAM,CAACpB,QAAP;AACH;;AACD,QAAI,KAAK5B,gBAAT,EAA2B;AACvB,UAAIwU,SAAS,GAAG,KAAKxU,gBAAL,CAAsB3D,OAAtB,CAA8B8C,aAA9B,CAA4C,eAA5C,CAAhB;;AACA,UAAIqV,SAAJ,EAAe;AACX,YAAIC,QAAQ,GAAGD,SAAS,CAAClK,aAAV,CAAwB,CAAxB,CAAf;AACAmK,QAAAA,QAAQ,CAACrL,GAAT,GAAe,KAAK3N,MAAL,CAAY4N,OAA3B;AACAoL,QAAAA,QAAQ,CAACnL,GAAT,GAAe,KAAK7N,MAAL,CAAY8N,OAA3B;AACAkL,QAAAA,QAAQ,CAAC7S,QAAT;AACH;AACJ;AACJ,GAtBD;;AAuBApG,EAAAA,WAAW,CAACY,SAAZ,CAAsBiU,iBAAtB,GAA0C,UAAUR,UAAV,EAAsB;AAC5D,QAAI,KAAKpU,MAAL,CAAYwB,UAAZ,IAA0B,CAAC,KAAKqS,kBAApC,EAAwD;AACpD,WAAKD,kBAAL;AACH;;AACD,QAAIjP,IAAI,GAAGyP,UAAU,GAChB,KAAKnU,IAAL,CAAUuC,WAAV,CAAsB,SAAtB,IAAmC,GAAnC,GAAyC,KAAK+B,gBAAL,CAAsB0U,cAAtB,CAAqC7E,UAArC,CADzB,GAC6E,KAAKnU,IAAL,CAAUuC,WAAV,CAAsB,QAAtB,CADlG;AAEA,SAAKuQ,YAAL,CAAkBwB,aAAlB,CAAgC;AAAEzB,MAAAA,KAAK,EAAEnO;AAAT,KAAhC;AACH,GAPD;;AAQA5E,EAAAA,WAAW,CAACY,SAAZ,CAAsB4C,WAAtB,GAAoC,YAAY;AAC5C,SAAKuE,YAAL,GAAoB,KAApB;AACA,SAAK9H,MAAL,CAAYyG,eAAZ,GAA8B;AAAElH,MAAAA,KAAK,EAAE0W,SAAT;AAAoBrV,MAAAA,OAAO,EAAEqV;AAA7B,KAA9B;AACA,SAAKjW,MAAL,CAAY+E,aAAZ,GAA4B,IAA5B;AACA,SAAKvB,YAAL,CAAkBmR,IAAlB;AACH,GALD;;AAMA5U,EAAAA,WAAW,CAACY,SAAZ,CAAsBwH,SAAtB,GAAkC,YAAY;AAC1C,SAAK1H,cAAL,CAAoByY,cAApB;AACA,SAAKC,eAAL;;AACA,QAAI,CAAC,KAAKnZ,MAAL,CAAYwB,UAAb,IAA2B,KAAK+C,gBAAhC,IAAoD,CAAC,KAAKA,gBAAL,CAAsB6U,WAA/E,EAA4F;AACxF,WAAK7U,gBAAL,CAAsB8U,WAAtB;AACH;AACJ,GAND;;AAOAtZ,EAAAA,WAAW,CAACY,SAAZ,CAAsB+S,mBAAtB,GAA4C,UAAUjM,KAAV,EAAiB;AACzD,QAAI8I,WAAW,GAAG,KAAK3P,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAAC0L,gCAArC,CAAlB;AACA,QAAIsO,iBAAiB,GAAG,KAAKtZ,MAAL,CAAYuZ,QAAZ,CAAqBC,oBAArB,EAAxB;;AACA,QAAI/R,KAAJ,EAAW;AACP/J,MAAAA,QAAQ,CAAC,CAAC6S,WAAD,CAAD,EAAgBjR,GAAG,CAACmY,YAApB,CAAR;AACA,UAAIjF,gBAAgB,GAAG,KAAK3L,WAAL,CAAiBvH,GAAG,CAAC4L,2BAArB,CAAvB;AACA,UAAIuH,cAAc,GAAG,KAAK5L,WAAL,CAAiBvH,GAAG,CAAC6L,yBAArB,CAArB;AACA,UAAIsO,QAAQ,GAAGjH,gBAAgB,CAAC5C,UAAhC;;AACA,UAAI,CAAC4C,gBAAgB,CAAC/K,KAAlB,IAA2B,CAAC,KAAKzH,MAAL,CAAYyZ,QAA5C,EAAsD;AAClD,YAAIC,KAAK,GAAGD,QAAQ,CAACE,IAAT,CAAc,UAAUC,EAAV,EAAc;AAAE,iBAAOA,EAAE,CAACC,KAAH,KAAaP,iBAApB;AAAwC,SAAtE,CAAZ;;AACA,YAAI,CAACI,KAAL,EAAY;AACRD,UAAAA,QAAQ,CAACK,IAAT,CAAc;AAAED,YAAAA,KAAK,EAAEP,iBAAT;AAA4BS,YAAAA,IAAI,EAAET;AAAlC,WAAd;AACA9G,UAAAA,gBAAgB,CAAC5C,UAAjB,GAA8B6J,QAA9B;AACAhH,UAAAA,cAAc,CAAC7C,UAAf,GAA4B6J,QAA5B;AACAjH,UAAAA,gBAAgB,CAACrM,QAAjB;AACAsM,UAAAA,cAAc,CAACtM,QAAf;AACH;AACJ;;AACDqM,MAAAA,gBAAgB,CAAC/K,KAAjB,GAAyB+K,gBAAgB,CAAC/K,KAAjB,IAA0B,KAAKzH,MAAL,CAAYyZ,QAAtC,IAAkDH,iBAA3E;AACA7G,MAAAA,cAAc,CAAChL,KAAf,GAAuBgL,cAAc,CAAChL,KAAf,IAAwB,KAAKzH,MAAL,CAAYyZ,QAApC,IAAgDH,iBAAvE;AACA9G,MAAAA,gBAAgB,CAACrM,QAAjB;AACAsM,MAAAA,cAAc,CAACtM,QAAf;AACH,KAnBD,MAoBK;AACDnI,MAAAA,WAAW,CAAC,CAACuS,WAAD,CAAD,EAAgBjR,GAAG,CAACmY,YAApB,CAAX;AACH;AACJ,GA1BD;;AA2BA1X,EAAAA,WAAW,CAACY,SAAZ,CAAsBwY,eAAtB,GAAwC,YAAY;AAChD,QAAIa,WAAW,GAAG,KAAKxD,eAAL,CAAqBlX,GAAG,CAAC+B,yBAAzB,CAAlB;;AACA,SAAK,IAAI8H,EAAE,GAAG,CAAT,EAAY8Q,aAAa,GAAGD,WAAjC,EAA8C7Q,EAAE,GAAG8Q,aAAa,CAAC5Q,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;AAC3E,UAAI+Q,cAAc,GAAGD,aAAa,CAAC9Q,EAAD,CAAlC;AACA,UAAIyN,UAAU,GAAGsD,cAAc,CAACpN,IAAf,IAAuB,KAAKsE,aAAL,CAAmB8I,cAAnB,CAAxC;;AACA,UAAI,CAACzc,iBAAiB,CAACmZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;AACrD,aAAKG,wBAAL,CAA8BmD,cAA9B;AACH;AACJ;AACJ,GATD;;AAUAna,EAAAA,WAAW,CAACY,SAAZ,CAAsB0C,SAAtB,GAAkC,UAAU8W,KAAV,EAAiB;AAC/C,QAAIH,WAAW,GAAG,KAAKpZ,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACoJ,UAArC,CAAlB;;AACA,QAAIsR,WAAW,IAAIA,WAAW,CAAClL,SAAZ,CAAsBC,QAAtB,CAA+B,iBAA/B,CAAf,IACA,CAACiL,WAAW,CAACnL,aAAZ,CAA0B,CAA1B,EAA6BuL,QAA7B,EADL,EAC8C;AAC1C;AACH;;AACD,QAAIC,cAAc,GAAG,KAAKC,sBAAL,EAArB;;AACA,QAAI,KAAKC,sBAAL,CAA4BF,cAAc,CAACG,QAA3C,EAAqDL,KAArD,CAAJ,EAAiE;AAC7D;AACH;;AACD,SAAKpS,aAAL,GAAqBsS,cAAc,CAAC9T,SAApC;AACA,SAAKuB,YAAL,GAAoB,IAApB;AACA,SAAKtE,YAAL,CAAkBmR,IAAlB;AACH,GAbD;;AAcA5U,EAAAA,WAAW,CAACY,SAAZ,CAAsB2Z,sBAAtB,GAA+C,YAAY;AACvD,QAAIjV,QAAQ,GAAGxH,MAAM,CAAC,EAAD,EAAK,KAAK4c,qBAAL,CAA2Bnb,GAAG,CAAC+B,yBAA/B,CAAL,CAArB;;AACA,QAAI,CAACgE,QAAQ,CAAC8P,QAAd,EAAwB;AACpB9P,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYoS,aAAb,CAAR,GAAsC,IAAtC;AACAlN,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkT,WAAb,CAAR,GAAoC,IAApC;AACH;;AACD,WAAOhO,QAAQ,CAAC8P,QAAhB;AACA,WAAO9P,QAAQ,CAACqV,MAAhB;AACA,SAAKC,uBAAL,CAA6BtV,QAA7B;AACAA,IAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYoT,cAAb,CAAR,GAAuC,KAAKhP,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBsQ,iBAAtB,MAA6C,IAArE,GAA4EoB,SAAnH;AACA,QAAI2E,OAAO,GAAG/c,MAAM,CAAC,EAAD,EAAKwH,QAAL,EAAe,IAAf,EAAqB,IAArB,CAApB;;AACA,QAAIA,QAAQ,CAAC,KAAKlF,MAAL,CAAYuF,QAAb,CAAZ,EAAoC;AAChCL,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAR,GAAmC7C,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAT,CAAlB,GAAuD,IAAvD,GAC5Bd,IAAI,CAACmY,SAAL,CAAe,IAAIpX,IAAJ,CAAS8E,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAR,CAAgCoH,OAAhC,EAAT,CAAf,CADN;AAEArC,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAR,GAAiC/C,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAT,CAAlB,GAAqD,IAArD,GAC1BhB,IAAI,CAACqY,OAAL,CAAarY,IAAI,CAACmY,SAAL,CAAe,IAAIpX,IAAJ,CAAS8E,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAR,CAA8BkH,OAA9B,EAAT,CAAf,CAAb,EAAgF,CAAhF,CADN;AAEH;;AACD,WAAO;AAAEnB,MAAAA,SAAS,EAAElB,QAAb;AAAuBmV,MAAAA,QAAQ,EAAEI;AAAjC,KAAP;AACH,GAlBD;;AAmBA7a,EAAAA,WAAW,CAACY,SAAZ,CAAsB4Z,sBAAtB,GAA+C,UAAUlV,QAAV,EAAoB8U,KAApB,EAA2B;AACtE,QAAIU,SAAJ;;AACA,QAAIpd,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkE,cAAb,CAArB,EAAmD;AAC/C,UAAI,CAACmB,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAT,IAAoC,CAAC+E,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAjD,EAAwE;AACpE,aAAKR,MAAL,CAAYiF,UAAZ,CAAuB6V,mBAAvB,CAA2C,kBAA3C;AACA,eAAO,IAAP;AACH;;AACD,UAAIzV,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAR,GAAkC+E,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAA9C,EAAqE;AACjE,aAAKR,MAAL,CAAYiF,UAAZ,CAAuB6V,mBAAvB,CAA2C,eAA3C;AACA,eAAO,IAAP;AACH;AACJ;;AACD,QAAI,KAAKvW,gBAAL,IAAyB,KAAKA,gBAAL,CAAsBkD,KAA/C,IAAwD,KAAKlD,gBAAL,CAAsBkD,KAAtB,KAAgC,EAA5F,EAAgG;AAC5FoT,MAAAA,SAAS,GAAG,KAAKE,oBAAL,CAA0B1V,QAAQ,CAAC,KAAKlF,MAAL,CAAYG,SAAb,CAAlC,EAA2D+E,QAAQ,CAAC,KAAKlF,MAAL,CAAYK,OAAb,CAAnE,EAA0F2Z,KAA1F,CAAZ;AACA,UAAIa,WAAW,GAAG,IAAlB;;AACA,UAAIH,SAAS,KAAK,mBAAd,IAAqC,KAAK7a,MAAL,CAAYib,aAAZ,CAA0BC,kBAAnE,EAAuF;AACnFF,QAAAA,WAAW,GAAG,KAAd;AACH;;AACD,UAAI,CAACvd,iBAAiB,CAACod,SAAD,CAAlB,IAAiCG,WAAjC,KACK,CAAC,KAAKhb,MAAL,CAAYmb,0BAAb,IAA2CN,SAAS,KAAK,cAA1D,IAA6E,KAAK7a,MAAL,CAAYmb,0BAD7F,CAAJ,EAC8H;AAC1H,aAAKnb,MAAL,CAAYiF,UAAZ,CAAuBmW,6BAAvB,CAAqDP,SAArD;AACA,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAzBD;;AA0BA9a,EAAAA,WAAW,CAACY,SAAZ,CAAsBuH,kBAAtB,GAA2C,UAAU7C,QAAV,EAAoB;AAC3D,QAAIgB,KAAK,GAAG,IAAZ;;AACA,SAAKrG,MAAL,CAAYib,aAAZ,CAA0BI,OAA1B,GAAoC,KAApC;AACA,QAAInM,YAAY,GAAG,KAAKoM,eAAL,CAAqBjW,QAArB,CAAnB;AACA,QAAIkW,qBAAqB,GAAG,CAAC,KAAKvb,MAAL,CAAY+F,iBAAZ,CAA8BkL,KAA9B,CAAoC0E,SAApC,CAA8CtM,MAA9C,GAAuD,CAAvD,IACzB,KAAKrJ,MAAL,CAAY8L,kBAAZ,CAA+BzC,MAA/B,GAAwC,CADhB,KACsB,CAAC,KAAKrJ,MAAL,CAAY+F,iBAAZ,CAA8BkL,KAA9B,CAAoCuK,cAD3D,IAErB,CAAC/d,iBAAiB,CAACyR,YAAD,CAFzB;AAGA,QAAIuM,OAAO,GAAG,KAAKC,kBAAL,EAAd;;AACA,QAAI,CAACje,iBAAiB,CAACge,OAAD,CAAtB,EAAiC;AAC7B,UAAIE,OAAO,GAAG,KAAK3b,MAAL,CAAYoI,SAAZ,CAAsBwT,cAAtB,OAA2C,QAA3C,GAAsDH,OAAtD,GAAgEI,QAAQ,CAACJ,OAAD,EAAU,EAAV,CAAtF;AACA,UAAIK,UAAU,GAAG,KAAK9b,MAAL,CAAY+b,UAAZ,CAAuBnK,MAAvB,CAA8B,UAAUjN,IAAV,EAAgB;AAC3D,eAAOA,IAAI,CAAC0B,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAJ,KAA0B8a,OAAjC;AACH,OAFgB,EAEd,CAFc,CAAjB;;AAGA,UAAIle,iBAAiB,CAACqe,UAAD,CAArB,EAAmC;AAC/BA,QAAAA,UAAU,GAAG,KAAK9b,MAAL,CAAYgc,SAAZ,CAAsBpK,MAAtB,CAA6B,UAAUjN,IAAV,EAAgB;AACtD,iBAAOA,IAAI,CAAC0B,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAJ,KAA0B8a,OAAjC;AACH,SAFY,EAEV,CAFU,CAAb;AAGH;;AACDtW,MAAAA,QAAQ,GAAGxH,MAAM,CAAC,EAAD,EAAKie,UAAL,EAAiBzW,QAAjB,CAAjB;;AACA,UAAIA,QAAQ,CAAC,KAAKlF,MAAL,CAAYyY,UAAb,CAAZ,EAAsC;AAClC,eAAO,KAAP;AACH;;AACD,UAAI7T,aAAa,GAAG,KAAK,CAAzB;;AACA,UAAI,CAACtH,iBAAiB,CAACqe,UAAU,CAAC,KAAK3b,MAAL,CAAYoT,cAAb,CAAX,CAAtB,EAAgE;AAC5DxO,QAAAA,aAAa,GAAG,KAAK/E,MAAL,CAAY+E,aAA5B;AACAM,QAAAA,QAAQ,CAAC4W,IAAT,GAAgB,KAAKjc,MAAL,CAAYyG,eAAZ,CAA4BlH,KAA5B,CAAkC0c,IAAlD;;AACA,YAAI,KAAKjc,MAAL,CAAY+E,aAAZ,KAA8B,gBAAlC,EAAoD;AAChD,cAAI,CAACM,QAAQ,CAAC,KAAKlF,MAAL,CAAY+b,YAAb,CAAb,EAAyC;AACrC7W,YAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYU,EAAb,CAAR,GAA2B,KAAKb,MAAL,CAAYoI,SAAZ,CAAsB+T,aAAtB,EAA3B;AACA9W,YAAAA,QAAQ,CAAC4W,IAAT,GAAgB,KAAKjc,MAAL,CAAYyG,eAAZ,CAA4BlH,KAA5B,CAAkC0c,IAAlD;AACH,WAHD,MAIK;AACDN,YAAAA,OAAO,GAAGtW,QAAQ,CAAC,KAAKlF,MAAL,CAAY+b,YAAb,CAAlB;AACAnX,YAAAA,aAAa,GAAG,IAAhB;AACH;;AACD,cAAI,KAAK/E,MAAL,CAAYmb,0BAAZ,IAA0C,KAAKiB,wBAAL,CAA8BT,OAA9B,EAAuCtW,QAAvC,CAA9C,EAAgG;AAC5F,iBAAKrF,MAAL,CAAYiF,UAAZ,CAAuBmW,6BAAvB,CAAqD,cAArD;AACA,mBAAO,IAAP;AACH;AACJ;;AACD,YAAI,KAAKpb,MAAL,CAAY+E,aAAZ,KAA8B,YAA9B,IAA8CM,QAAQ,CAAC,KAAKlF,MAAL,CAAYU,EAAb,CAAR,KAA6Bib,UAAU,CAAC,KAAK3b,MAAL,CAAYU,EAAb,CAAzF,EAA2G;AACvGwE,UAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAY+b,YAAb,CAAR,GAAqCJ,UAAU,CAAC,KAAK3b,MAAL,CAAYU,EAAb,CAA/C;AACH,SAFD,MAGK,IAAI,KAAKb,MAAL,CAAY+E,aAAZ,KAA8B,qBAAlC,EAAyD;AAC1DM,UAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYU,EAAb,CAAR,GAA2B,KAAKb,MAAL,CAAYoI,SAAZ,CAAsB+T,aAAtB,EAA3B;AACA9W,UAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkc,WAAb,CAAR,GAAoCP,UAAU,CAAC,KAAK3b,MAAL,CAAYU,EAAb,CAA9C;AACH;AACJ;;AACD,UAAI0a,qBAAJ,EAA2B;AACvB,aAAKe,iBAAL,CAAuBjX,QAAvB,EAAiC,MAAjC,EAAyCN,aAAzC;AACH,OAFD,MAGK;AACD,aAAK/E,MAAL,CAAYuc,SAAZ,CAAsBlX,QAAtB,EAAgCN,aAAhC;AACH;AACJ,KA9CD,MA+CK;AACD,WAAK/E,MAAL,CAAY+E,aAAZ,GAA4B,KAA5B;;AACA,UAAIwW,qBAAJ,EAA2B;AACvB,aAAKe,iBAAL,CAAuBjX,QAAvB,EAAiC,KAAKrF,MAAL,CAAY+E,aAA7C;AACH,OAFD,MAGK;AACDM,QAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYU,EAAb,CAAR,GAA2B,KAAKb,MAAL,CAAYoI,SAAZ,CAAsB+T,aAAtB,EAA3B;AACA,aAAKnc,MAAL,CAAYwc,QAAZ,CAAqBnX,QAArB;AACH;AACJ;;AACD,WAAO,KAAKrF,MAAL,CAAYib,aAAZ,CAA0BI,OAAjC;AACH,GAlED;;AAmEAtb,EAAAA,WAAW,CAACY,SAAZ,CAAsB2a,eAAtB,GAAwC,UAAUjW,QAAV,EAAoB;AACxD,QAAI6J,YAAY,GAAG,IAAnB;;AACA,QAAI,CAACzR,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkM,YAAb,CAAlB,IAAgD,CAACzO,iBAAiB,CAAC,KAAKuC,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAA1B,CAAlE,IACG,KAAK9L,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4CzC,MAA5C,GAAqD,CAD5D,EAC+D;AAC3D,UAAIoT,eAAe,GAAG,KAAKzc,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4C9C,KAA5C,CAAkD,CAAC,CAAnD,EAAsD,CAAtD,CAAtB;AACAkG,MAAAA,YAAY,GAAG7J,QAAQ,CAACoX,eAAe,CAACtN,KAAjB,CAAvB;AACH;;AACD,WAAOD,YAAP;AACH,GARD;;AASAnP,EAAAA,WAAW,CAACY,SAAZ,CAAsB8Z,qBAAtB,GAA8C,UAAUlS,SAAV,EAAqB;AAC/D,QAAIyR,WAAW,GAAG,KAAKxD,eAAL,CAAqBjO,SAArB,CAAlB;AACA,QAAIlD,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAI8D,EAAE,GAAG,CAAT,EAAYuT,aAAa,GAAG1C,WAAjC,EAA8C7Q,EAAE,GAAGuT,aAAa,CAACrT,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;AAC3E,UAAI+Q,cAAc,GAAGwC,aAAa,CAACvT,EAAD,CAAlC;AACA,UAAIyN,UAAU,GAAGsD,cAAc,CAACpN,IAAf,IAAuB,KAAKsE,aAAL,CAAmB8I,cAAnB,CAAxC;;AACA,UAAI,CAACzc,iBAAiB,CAACmZ,UAAD,CAAlB,IAAkCA,UAAU,KAAK,EAArD,EAAyD;AACrDvR,QAAAA,QAAQ,CAACuR,UAAD,CAAR,GAAuB,KAAK+F,mBAAL,CAAyBzC,cAAzB,CAAvB;AACH;AACJ;;AACD,WAAO7U,QAAP;AACH,GAXD;;AAYAtF,EAAAA,WAAW,CAACY,SAAZ,CAAsBga,uBAAtB,GAAgD,UAAUtV,QAAV,EAAoB;AAChE,QAAI,CAAC5H,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYgK,OAAb,CAAT,CAAtB,EAAuD;AACnD9E,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYgK,OAAb,CAAR,GAAgC9E,QAAQ,CAAC,KAAKlF,MAAL,CAAYgK,OAAb,CAAR,IAAiC,KAAKnK,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCgK,OAAjC,CAAyCiL,OAA1E,IACzB,KAAKnV,IAAL,CAAUuC,WAAV,CAAsB,UAAtB,CADP;AAEH;;AACD,QAAI,CAAC/E,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYkK,QAAb,CAAT,CAAtB,EAAwD;AACpDhF,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkK,QAAb,CAAR,GAAiChF,QAAQ,CAAC,KAAKlF,MAAL,CAAYkK,QAAb,CAAR,IAAkC,KAAKrK,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkK,QAAjC,CAA0C+K,OAA7G;AACH;;AACD,QAAI,CAAC3X,iBAAiB,CAAC4H,QAAQ,CAAC,KAAKlF,MAAL,CAAYkM,WAAb,CAAT,CAAtB,EAA2D;AACvDhH,MAAAA,QAAQ,CAAC,KAAKlF,MAAL,CAAYkM,WAAb,CAAR,GAAoChH,QAAQ,CAAC,KAAKlF,MAAL,CAAYkM,WAAb,CAAR,IAAqC,KAAKrM,MAAL,CAAY6C,aAAZ,CAA0B1C,MAA1B,CAAiCkM,WAAjC,CAA6C+I,OAAtH;AACH;AACJ,GAXD;;AAYArV,EAAAA,WAAW,CAACY,SAAZ,CAAsBoa,oBAAtB,GAA6C,UAAUvG,SAAV,EAAqBxF,OAArB,EAA8BmL,KAA9B,EAAqC;AAC9E,QAAIyC,YAAJ;AACA,QAAIC,SAAS,GAAG,KAAKtY,gBAArB;AACA,QAAI2I,QAAQ,GAAG,KAAKrG,WAAL,CAAiB,oCAAjB,EAAuDY,KAAtE;;AACA,QAAI0S,KAAK,KAAK,KAAKla,IAAL,CAAUuC,WAAV,CAAsB,IAAtB,CAAd,EAA2C;AACvC,UAAIsa,WAAW,GAAG,KAAK9c,MAAL,CAAYyG,eAAZ,CAA4BlH,KAA9C;AACA,UAAIwd,cAAc,GAAG,EAArB;;AACA,UAAI,CAAC,KAAK/c,MAAL,CAAY+E,aAAZ,KAA8B,YAA9B,IAA8C,KAAK/E,MAAL,CAAY+E,aAAZ,KAA8B,qBAA7E,KACG,CAACtH,iBAAiB,CAACqf,WAAD,CADzB,EACwC;AACpC,YAAIE,cAAc,GAAGF,WAAW,CAAC,KAAK9c,MAAL,CAAYI,WAAZ,CAAwBE,SAAzB,CAAhC;AACA,YAAI2c,YAAY,GAAG,KAAKjd,MAAL,CAAYoI,SAAZ,CAAsB8U,eAAtB,CAAsC,KAAK3W,SAA3C,EAAsDyW,cAAtD,CAAnB;;AACA,YAAIC,YAAY,CAAC5T,MAAb,GAAsB,CAA1B,EAA6B;AACzB0T,UAAAA,cAAc,GAAG,KAAK/c,MAAL,CAAYoI,SAAZ,CAAsB+U,oBAAtB,CAA2CF,YAA3C,EAAyDD,cAAzD,CAAjB;AACH,SAFD,MAGK;AACD,cAAII,OAAO,GAAG,KAAKpd,MAAL,CAAYoI,SAAZ,CAAsBiV,YAAtB,CAAmCP,WAAW,CAAC,KAAK9c,MAAL,CAAYI,WAAZ,CAAwBS,EAAzB,CAA9C,CAAd;AACAkc,UAAAA,cAAc,GAAG,KAAK/c,MAAL,CAAYoI,SAAZ,CAAsB+U,oBAAtB,CAA2C,CAACC,OAAD,CAA3C,EAAsDJ,cAAtD,CAAjB;AACH;;AACD,YAAI,KAAKhd,MAAL,CAAY+E,aAAZ,KAA8B,YAA9B,IACG,CAACtH,iBAAiB,CAAC,KAAK8I,SAAL,CAAe,KAAKvG,MAAL,CAAYI,WAAZ,CAAwBkd,mBAAvC,CAAD,CADzB,EACwF;AACpFP,UAAAA,cAAc,CAACjD,IAAf,CAAoB,KAAKvT,SAAzB;AACH;AACJ;;AACD,UAAIwW,cAAc,CAAC1T,MAAf,GAAwB,CAA5B,EAA+B;AAC3BuT,QAAAA,YAAY,GAAG,mBAAf;AACH;;AACD,UAAI,KAAK/V,WAAL,CAAiB,sCAAjB,EAAyDY,KAAzD,KAAmE,OAAnE,IACA,KAAKZ,WAAL,CAAiB,6BAAjB,EAAgDY,KAAhD,GAAwD+M,SAD5D,EACuE;AACnEoI,QAAAA,YAAY,GAAG,cAAf;AACH;;AACD,UAAInf,iBAAiB,CAACmf,YAAD,CAArB,EAAqC;AACjC,gBAAQC,SAAS,CAACpV,KAAV,CAAgB8V,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,CAAR;AACI,eAAK,OAAL;AACI,gBAAM,CAACvO,OAAO,CAACtH,OAAR,KAAoB8M,SAAS,CAAC9M,OAAV,EAArB,KAA6C,OAAO,IAApD,CAAD,IAAgEwF,QAAQ,GAAG,EAAhF,EAAsF;AAClF0P,cAAAA,YAAY,GAAG,aAAf;AACH;;AACD;;AACJ,eAAK,QAAL;AACI,gBAAIY,KAAK,GAAGX,SAAS,CAACpV,KAAV,CAAgB8V,KAAhB,CAAsB,GAAtB,EAA2B,CAA3B,EAA8BA,KAA9B,CAAoC,GAApC,EAAyC,CAAzC,EAA4CA,KAA5C,CAAkD,GAAlD,CAAZ;AACA,gBAAIE,GAAG,GAAG;AAAE,oBAAM,CAAR;AAAW,oBAAM,CAAjB;AAAoB,oBAAM,CAA1B;AAA6B,oBAAM,CAAnC;AAAsC,oBAAM,CAA5C;AAA+C,oBAAM,CAArD;AAAwD,oBAAM;AAA9D,aAAV;AACA,gBAAI7F,IAAI,GAAG,EAAX;AACA,gBAAI8F,QAAQ,GAAG,EAAf;;AACA,iBAAK,IAAIvL,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGqL,KAAK,CAACnU,MAAN,IAAgB6D,QAAQ,GAAG,CAA3B,CAA5B,EAA2DiF,KAAK,EAAhE,EAAoE;AAChEyF,cAAAA,IAAI,CAACzF,KAAD,CAAJ,GAAeqL,KAAK,CAACnU,MAAN,GAAe8I,KAAhB,GAAyBsL,GAAG,CAACD,KAAK,CAACrL,KAAD,CAAN,CAA5B,GAA6CyF,IAAI,CAACzF,KAAK,GAAGqL,KAAK,CAACnU,MAAf,CAAJ,GAA8B,IAAI6D,QAA7F;AACH;;AACD,gBAAIyQ,SAAS,GAAG/F,IAAI,CAACgG,IAAL,CAAU,UAAUC,CAAV,EAAaC,CAAb,EAAgB;AAAE,qBAAOD,CAAC,GAAGC,CAAX;AAAe,aAA3C,CAAhB;;AACA,iBAAK,IAAI3L,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGwL,SAAS,CAACtU,MAAtC,EAA8C8I,KAAK,EAAnD,EAAuD;AACnDuL,cAAAA,QAAQ,CAAC5D,IAAT,CAAc6D,SAAS,CAACxL,KAAD,CAAT,GAAmBwL,SAAS,CAACxL,KAAK,GAAG,CAAT,CAA1C;AACH;;AACD,gBAAM,CAACnD,OAAO,CAACtH,OAAR,KAAoB8M,SAAS,CAAC9M,OAAV,EAArB,KAA6C,OAAO,IAApD,CAAD,IAA+DqW,IAAI,CAACpQ,GAAL,CAASqQ,KAAT,CAAeD,IAAf,EAAqBL,QAArB,IAAiC,EAAjG,IACGjgB,iBAAiB,CAACyP,QAAD,CADxB,EACoC;AAChC0P,cAAAA,YAAY,GAAG,aAAf;AACH;;AACD;;AACJ,eAAK,SAAL;AACI,gBAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAInH,IAAJ,CAAS,CAACiU,SAAV,EAAqByJ,QAArB,CAA8BzJ,SAAS,CAAC0J,QAAV,KAAuBhR,QAArD,CAAzB,EAAyF;AACrF0P,cAAAA,YAAY,GAAG,aAAf;AACH;;AACD;;AACJ,eAAK,QAAL;AACI,gBAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAInH,IAAJ,CAAS,CAACiU,SAAV,EAAqB2J,WAArB,CAAiC3J,SAAS,CAAC4J,WAAV,KAA0BlR,QAA3D,CAAzB,EAA+F;AAC3F0P,cAAAA,YAAY,GAAG,aAAf;AACH;;AACD;AAhCR;AAkCH;AACJ,KA9DD,MA+DK;AACD,UAAI5N,OAAO,CAACtH,OAAR,MAAqB,IAAInH,IAAJ,CAAS,CAACiU,SAAV,EAAqByJ,QAArB,CAA8BzJ,SAAS,CAAC0J,QAAV,KAAuBhR,QAArD,CAAzB,EAAyF;AACrF0P,QAAAA,YAAY,GAAG,aAAf;AACH;;AACD,UAAInf,iBAAiB,CAACmf,YAAD,CAArB,EAAqC;AACjC,aAAK5c,MAAL,CAAYiF,UAAZ,CAAuBoZ,WAAvB,CAAmC1J,IAAnC;AACH;AACJ;;AACD,WAAOiI,YAAP;AACH,GA5ED;;AA6EA7c,EAAAA,WAAW,CAACY,SAAZ,CAAsB2d,kBAAtB,GAA2C,UAAUC,OAAV,EAAmBhf,KAAnB,EAA0B;AACjE,QAAIif,QAAJ;;AACA,SAAK,IAAIrM,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGoM,OAAO,CAAClV,MAApC,EAA4C8I,KAAK,EAAjD,EAAqD;AACjD,UAAI5S,KAAK,CAAC,KAAKY,MAAL,CAAYG,SAAb,CAAL,CAA6Bme,OAA7B,OAA2CF,OAAO,CAACpM,KAAD,CAAP,CAAe,KAAKhS,MAAL,CAAYG,SAA3B,EAAsCme,OAAtC,EAA/C,EAAgG;AAC5FD,QAAAA,QAAQ,GAAGrM,KAAX;AACA;AACH;AACJ;;AACD,WAAOqM,QAAP;AACH,GATD;;AAUAze,EAAAA,WAAW,CAACY,SAAZ,CAAsB2V,UAAtB,GAAmC,UAAU3R,IAAV,EAAgB;AAC/C,QAAIA,IAAI,CAAC,KAAKxE,MAAL,CAAYuF,QAAb,CAAR,EAAgC;AAC5B,UAAIkS,IAAI,GAAGpY,IAAI,CAACqY,OAAL,CAAa,IAAItX,IAAJ,CAAS,CAACoE,IAAI,CAAC,KAAKxE,MAAL,CAAYK,OAAb,CAAd,CAAb,EAAmD,CAAC,CAApD,EAAuDkH,OAAvD,EAAX;AACA/C,MAAAA,IAAI,CAAC,KAAKxE,MAAL,CAAYK,OAAb,CAAJ,GAA6B,CAACmE,IAAI,CAAC,KAAKxE,MAAL,CAAYG,SAAb,CAAL,GAA+BsX,IAAhC,GAAwCjT,IAAI,CAAC,KAAKxE,MAAL,CAAYK,OAAb,CAA5C,GAAoE,IAAID,IAAJ,CAASqX,IAAT,CAAhG;AACH;AACJ,GALD;;AAMA7X,EAAAA,WAAW,CAACY,SAAZ,CAAsByb,wBAAtB,GAAiD,UAAUX,OAAV,EAAmBiD,WAAnB,EAAgCC,QAAhC,EAA0C;AACvF,QAAItY,KAAK,GAAG,IAAZ;;AACA,QAAIsY,QAAQ,KAAK,KAAK,CAAtB,EAAyB;AACrBA,MAAAA,QAAQ,GAAG,KAAKpY,SAAhB;AACH;;AACD,QAAIqY,SAAS,GAAG,KAAK5e,MAAL,CAAY6e,kBAAZ,CAA+BpD,OAA/B,CAAhB;AACA,QAAIqD,aAAa,GAAG,KAAK9e,MAAL,CAAY+b,UAAZ,CAAuBnK,MAAvB,CAA8B,UAAUjN,IAAV,EAAgB;AAC9D,aAAOA,IAAI,CAAC0B,KAAK,CAAClG,MAAN,CAAa+b,YAAd,CAAJ,KAAoCT,OAA3C;AACH,KAFmB,CAApB;AAGAqD,IAAAA,aAAa,CAACC,GAAd,CAAkB,UAAUpa,IAAV,EAAgB;AAAE,aAAOia,SAAS,CAAC9E,IAAV,CAAejc,MAAM,CAAC,EAAD,EAAK8G,IAAL,CAArB,CAAP;AAA0C,KAA9E;AACA+Z,IAAAA,WAAW,GAAG7gB,MAAM,CAAC,EAAD,EAAK6gB,WAAL,CAApB;AACA,SAAKpI,UAAL,CAAgBoI,WAAhB;;AACA,SAAK,IAAIvV,EAAE,GAAG,CAAT,EAAY6V,WAAW,GAAGJ,SAA/B,EAA0CzV,EAAE,GAAG6V,WAAW,CAAC3V,MAA3D,EAAmEF,EAAE,EAArE,EAAyE;AACrE,UAAIxE,IAAI,GAAGqa,WAAW,CAAC7V,EAAD,CAAtB;AACA,WAAKmN,UAAL,CAAgB3R,IAAhB;AACH;;AACD,SAAK3E,MAAL,CAAYoI,SAAZ,CAAsB6W,UAAtB,CAAiCL,SAAjC;AACA,QAAIzM,KAAK,GAAG,KAAKmM,kBAAL,CAAwBM,SAAxB,EAAmCD,QAAnC,CAAZ;;AACA,QAAIlhB,iBAAiB,CAAC0U,KAAD,CAArB,EAA8B;AAC1B,aAAO,KAAP;AACH;;AACD,QAAIA,KAAK,KAAK,CAAd,EAAiB;AACb,UAAI,CAAC1U,iBAAiB,CAACmhB,SAAS,CAACzM,KAAK,GAAG,CAAT,CAAV,CAAtB,EAA8C;AAC1C,eAAQ,EAAE,IAAI5R,IAAJ,CAAS,CAACqe,SAAS,CAACzM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKhS,MAAL,CAAYG,SAAjC,CAAV,EAAuDyN,QAAvD,CAAgE,CAAhE,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,CAAzE,IACN,IAAIxN,IAAJ,CAAS,CAACme,WAAW,CAAC,KAAKve,MAAL,CAAYK,OAAb,CAArB,EAA4CuN,QAA5C,CAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,CADI,CAAR;AAEH;;AACD,aAAO,KAAP;AACH,KAND,MAOK;AACD,UAAIoE,KAAK,KAAKyM,SAAS,CAACvV,MAAV,GAAmB,CAAjC,EAAoC;AAChC,YAAI,EAAE,IAAI9I,IAAJ,CAAS,CAACqe,SAAS,CAACzM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKhS,MAAL,CAAYK,OAAjC,CAAV,EAAqDuN,QAArD,CAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,IACF,IAAIxN,IAAJ,CAAS,CAACme,WAAW,CAAC,KAAKve,MAAL,CAAYG,SAAb,CAArB,EAA8CyN,QAA9C,CAAuD,CAAvD,EAA0D,CAA1D,EAA6D,CAA7D,EAAgE,CAAhE,CADA,CAAJ,EACyE;AACrE,iBAAO,IAAP;AACH;AACJ,OALD,MAMK,IAAI,EAAG,IAAIxN,IAAJ,CAAS,CAACqe,SAAS,CAACzM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKhS,MAAL,CAAYK,OAAjC,CAAV,EAAqDuN,QAArD,CAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,IACR,IAAIxN,IAAJ,CAAS,CAACme,WAAW,CAAC,KAAKve,MAAL,CAAYG,SAAb,CAArB,EAA8CyN,QAA9C,CAAuD,CAAvD,EAA0D,CAA1D,EAA6D,CAA7D,EAAgE,CAAhE,CADO,IAEN,IAAIxN,IAAJ,CAAS,CAACqe,SAAS,CAACzM,KAAK,GAAG,CAAT,CAAT,CAAqB,KAAKhS,MAAL,CAAYG,SAAjC,CAAV,EAAuDyN,QAAvD,CAAgE,CAAhE,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,CAAzE,IACG,IAAIxN,IAAJ,CAAS,CAACme,WAAW,CAAC,KAAKve,MAAL,CAAYK,OAAb,CAArB,EAA4CuN,QAA5C,CAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,CAHC,CAAJ,EAGuE;AACxE,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GA3CD;;AA4CAhO,EAAAA,WAAW,CAACY,SAAZ,CAAsB2b,iBAAtB,GAA0C,UAAUjX,QAAV,EAAoB6Z,MAApB,EAA4Bna,aAA5B,EAA2C;AACjF,QAAIsB,KAAK,GAAG,IAAZ;;AACA,QAAIoW,eAAe,GAAG,KAAKzc,MAAL,CAAYkM,YAAZ,CAAyBJ,kBAAzB,CAA4C9C,KAA5C,CAAkD,CAAC,CAAnD,EAAsD,CAAtD,CAAtB;AACA,QAAIkG,YAAY,GAAG7J,QAAQ,CAACoX,eAAe,CAACtN,KAAjB,CAA3B;AACAD,IAAAA,YAAY,GAAIA,YAAY,YAAYiQ,KAAzB,GAAkCjQ,YAAlC,GAAiD,CAACA,YAAD,CAAhE;AACA,QAAIkQ,SAAS,GAAG,KAAKpf,MAAL,CAAYkM,YAAZ,CAAyBmT,iBAAzC;AACA,QAAIC,SAAS,GAAG,EAAhB;;AACA,QAAIC,OAAO,GAAG,UAAUlO,CAAV,EAAa;AACvB,UAAImO,MAAM,GAAG3hB,MAAM,CAAC,EAAD,EAAKwH,QAAL,EAAe,IAAf,EAAqB,IAArB,CAAnB;AACAma,MAAAA,MAAM,CAACC,MAAM,CAACtf,MAAP,CAAcU,EAAf,CAAN,GAA2B4e,MAAM,CAACzf,MAAP,CAAcoI,SAAd,CAAwB+T,aAAxB,EAA3B;AACA,UAAIvE,IAAI,GAAG,EAAX;;AACA,UAAI8H,SAAS,GAAG,YAAY;AACxB,YAAIR,MAAM,KAAK,MAAX,IAAqB7N,CAAC,KAAKnC,YAAY,CAAC7F,MAAb,GAAsB,CAArD,EAAwD;AACpD,cAAIuO,IAAI,CAACvO,MAAL,GAAc,CAAlB,EAAqB;AACjBuO,YAAAA,IAAI,CAAC,CAAD,CAAJ,CAAQvR,KAAK,CAAClG,MAAN,CAAaU,EAArB,IAA2BwE,QAAQ,CAACgB,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAnC;;AACA,iBAAK,IAAI8e,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG/H,IAAI,CAACvO,MAAzB,EAAiCsW,CAAC,EAAlC,EAAsC;AAClC/H,cAAAA,IAAI,CAAC+H,CAAD,CAAJ,CAAQtZ,KAAK,CAAClG,MAAN,CAAaU,EAArB,IAA2BwF,KAAK,CAACrG,MAAN,CAAaoI,SAAb,CAAuB+T,aAAvB,CAAqC9K,CAArC,CAA3B;AACAiO,cAAAA,SAAS,CAACxF,IAAV,CAAelC,IAAI,CAAC+H,CAAD,CAAnB;;AACAtZ,cAAAA,KAAK,CAACrG,MAAN,CAAauc,SAAb,CAAuB3E,IAAI,CAAC,CAAD,CAA3B,EAAgC7S,aAAhC;AACH;AACJ,WAPD,MAQK;AACDya,YAAAA,MAAM,CAACnZ,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAN,GAA0BwE,QAAQ,CAACgB,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAlC;;AACAwF,YAAAA,KAAK,CAACrG,MAAN,CAAauc,SAAb,CAAuBiD,MAAvB,EAA+Bza,aAA/B;AACH;AACJ,SAbD,MAcK;AACD,cAAI6S,IAAI,CAACvO,MAAL,GAAc,CAAlB,EAAqB;AACjB,iBAAK,IAAIqI,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkG,IAAI,CAACvO,MAAzB,EAAiCqI,CAAC,EAAlC,EAAsC;AAClCkG,cAAAA,IAAI,CAAClG,CAAD,CAAJ,CAAQrL,KAAK,CAAClG,MAAN,CAAaU,EAArB,IAA2BwF,KAAK,CAACrG,MAAN,CAAaoI,SAAb,CAAuB+T,aAAvB,CAAqCzK,CAArC,CAA3B;AACA4N,cAAAA,SAAS,CAACxF,IAAV,CAAelC,IAAI,CAAClG,CAAD,CAAnB;AACH;AACJ,WALD,MAMK;AACD8N,YAAAA,MAAM,CAACnZ,KAAK,CAAClG,MAAN,CAAaU,EAAd,CAAN,GAA0BwF,KAAK,CAACrG,MAAN,CAAaoI,SAAb,CAAuB+T,aAAvB,CAAqC9K,CAArC,CAA1B;AACAiO,YAAAA,SAAS,CAACxF,IAAV,CAAe0F,MAAf;AACH;AACJ;AACJ,OA3BD;;AA4BA,UAAIC,MAAM,CAACzf,MAAP,CAAc+F,iBAAd,CAAgCkL,KAAhC,CAAsCC,SAAtC,IAAoD,CAACzT,iBAAiB,CAAC2hB,SAAD,CAA1E,EAAwF;AACpF,YAAIQ,YAAY,GAAGnD,eAAe,CAAC7M,UAAnC;AACA,YAAIiQ,MAAM,GAAGJ,MAAM,CAACzf,MAAP,CAAc8L,kBAA3B;AACA,YAAIqG,KAAK,GAAG,KAAK,CAAjB;;AACA,YAAI0N,MAAM,CAACxW,MAAP,GAAgB,CAApB,EAAuB;AACnB8I,UAAAA,KAAK,GACD3S,IAAI,CAACsgB,eAAL,CAAqBF,YAArB,EAAmCnD,eAAe,CAACzM,OAAnD,EAA4Dd,YAAY,CAACmC,CAAD,CAAxE,EAA6EmO,MAA7E,EAAqFK,MAArF,CADJ;AAEH,SAHD,MAIK;AACD1N,UAAAA,KAAK,GAAG3S,IAAI,CAACsgB,eAAL,CAAqBF,YAArB,EAAmCnD,eAAe,CAACzM,OAAnD,EAA4Dd,YAAY,CAACmC,CAAD,CAAxE,CAAR;AACH;;AACD,YAAIc,KAAK,GAAG,CAAZ,EAAe;AACX,iBAAO;AAAE1K,YAAAA,KAAK,EAAE,KAAK;AAAd,WAAP;AACH;;AACD,YAAIsY,SAAS,GAAGH,YAAY,CAACzN,KAAD,CAAZ,CAAoBsK,eAAe,CAAC5K,YAApC,CAAhB;AACA,YAAID,MAAM,GAAGwN,SAAS,CAACxN,MAAV,CAAiB,UAAU6L,GAAV,EAAe;AAAE,iBAAOA,GAAG,CAACvO,YAAJ,CAAiBuN,eAAe,CAACzM,OAAjC,MAA8Cd,YAAY,CAACmC,CAAD,CAAjE;AAAuE,SAAzG,EACTO,MADS,CACF,UAAU6L,GAAV,EAAe;AAAE,iBAAOA,GAAG,CAACvO,YAAJ,CAAiBuN,eAAe,CAAC5K,YAAjC,MAAmDkO,SAA1D;AAAsE,SADrF,EACuF,CADvF,CAAb;AAEA,YAAIC,UAAU,GAAGpO,MAAM,CAACoO,UAAxB;;AACA,aAAK,IAAIC,OAAO,GAAG,CAAnB,EAAsBA,OAAO,GAAGR,MAAM,CAACzf,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CzC,MAA9E,EAAsF4W,OAAO,EAA7F,EAAiG;AAC7F,cAAI9Q,KAAK,GAAGsQ,MAAM,CAACzf,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CmU,OAA9C,EAAuD9Q,KAAnE;AACAqQ,UAAAA,MAAM,CAACrQ,KAAD,CAAN,GAAiB6Q,UAAU,CAACC,OAAD,CAAV,YAA+Bd,KAAhC,GAAyCa,UAAU,CAACC,OAAD,CAAV,CAAoB,CAApB,CAAzC,GAAkED,UAAU,CAACC,OAAD,CAA5F;AACH;;AACDP,QAAAA,SAAS;AACZ,OAvBD,MAwBK;AACD,aAAK,IAAIvN,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGsN,MAAM,CAACzf,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CzC,MAA9C,GAAuD,CAAnF,EAAsF8I,KAAK,EAA3F,EAA+F;AAC3F,cAAIhD,KAAK,GAAGsQ,MAAM,CAACzf,MAAP,CAAckM,YAAd,CAA2BJ,kBAA3B,CAA8CqG,KAA9C,EAAqDhD,KAAjE;;AACA,cAAIqQ,MAAM,CAACrQ,KAAD,CAAN,YAAyBgQ,KAAzB,IAAkCK,MAAM,CAACrQ,KAAD,CAAN,CAAc9F,MAAd,GAAuB,CAA7D,EAAgE;AAC5D,iBAAK,IAAIsW,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAAM,CAACrQ,KAAD,CAAN,CAAc9F,MAAlC,EAA0CsW,CAAC,EAA3C,EAA+C;AAC3C,kBAAIO,OAAO,GAAGriB,MAAM,CAAC,EAAD,EAAK2hB,MAAL,EAAa,IAAb,EAAmB,IAAnB,CAApB;AACAU,cAAAA,OAAO,CAAC/Q,KAAD,CAAP,GAAiB9J,QAAQ,CAAC8J,KAAD,CAAR,CAAgBwQ,CAAhB,CAAjB;AACAO,cAAAA,OAAO,CAACzD,eAAe,CAACtN,KAAjB,CAAP,GAAiCD,YAAY,CAACmC,CAAD,CAA7C;AACAuG,cAAAA,IAAI,CAACkC,IAAL,CAAUoG,OAAV;AACH;AACJ,WAPD,MAQK;AACD,gBAAItI,IAAI,CAACvO,MAAL,KAAgB,CAApB,EAAuB;AACnBmW,cAAAA,MAAM,CAACrQ,KAAD,CAAN,GAAiB9J,QAAQ,CAAC8J,KAAD,CAAR,YAA2BgQ,KAA5B,GACZ9Z,QAAQ,CAAC8J,KAAD,CAAR,CAAgB,CAAhB,CADY,GACS9J,QAAQ,CAAC8J,KAAD,CADjC;AAEAqQ,cAAAA,MAAM,CAAC/C,eAAe,CAACtN,KAAjB,CAAN,GAAgCD,YAAY,CAACmC,CAAD,CAA5C;AACH,aAJD,MAKK;AACD,mBAAK,IAAI8O,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGvI,IAAI,CAACvO,MAAzB,EAAiC8W,CAAC,EAAlC,EAAsC;AAClCvI,gBAAAA,IAAI,CAACuI,CAAD,CAAJ,CAAQhR,KAAR,IAAkB9J,QAAQ,CAAC8J,KAAD,CAAR,YAA2BgQ,KAA5B,GACb9Z,QAAQ,CAAC8J,KAAD,CAAR,CAAgB,CAAhB,CADa,GACQ9J,QAAQ,CAAC8J,KAAD,CADjC;AAEH;AACJ;AACJ;AACJ;;AACDqQ,QAAAA,MAAM,CAAC/C,eAAe,CAACtN,KAAjB,CAAN,GAAgCD,YAAY,CAACmC,CAAD,CAA5C;AACAqO,QAAAA,SAAS;AACZ;AACJ,KApFD;;AAqFA,QAAID,MAAM,GAAG,IAAb;;AACA,SAAK,IAAIpO,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnC,YAAY,CAAC7F,MAAjC,EAAyCgI,CAAC,EAA1C,EAA8C;AAC1C,UAAI+O,OAAO,GAAGb,OAAO,CAAClO,CAAD,CAArB;;AACA,UAAI,OAAO+O,OAAP,KAAmB,QAAvB,EACI,OAAOA,OAAO,CAAC3Y,KAAf;AACP;;AACD,QAAI6X,SAAS,CAACjW,MAAV,GAAmB,CAAvB,EAA0B;AACtB,WAAK,IAAIF,EAAE,GAAG,CAAT,EAAYkX,WAAW,GAAGf,SAA/B,EAA0CnW,EAAE,GAAGkX,WAAW,CAAChX,MAA3D,EAAmEF,EAAE,EAArE,EAAyE;AACrE,YAAImX,OAAO,GAAGD,WAAW,CAAClX,EAAD,CAAzB;AACAmX,QAAAA,OAAO,CAAC,KAAKngB,MAAL,CAAYmd,mBAAb,CAAP,GAA2C,IAA3C;AACAgD,QAAAA,OAAO,CAAC,KAAKngB,MAAL,CAAY+b,YAAb,CAAP,GAAoC,IAApC;AACH;;AACD,WAAKlc,MAAL,CAAYwc,QAAZ,CAAqB8C,SAArB;AACH;AACJ,GA1GD;;AA2GAvf,EAAAA,WAAW,CAACY,SAAZ,CAAsB+a,kBAAtB,GAA2C,YAAY;AACnD,WAAO,KAAK9a,OAAL,CAAa8C,aAAb,CAA2B,MAAMpE,GAAG,CAACoJ,UAArC,EAAiDyI,YAAjD,CAA8D,SAA9D,CAAP;AACH,GAFD;;AAGApR,EAAAA,WAAW,CAACY,SAAZ,CAAsB6V,eAAtB,GAAwC,UAAUjO,SAAV,EAAqB;AACzD,QAAIgY,QAAQ,GAAG,EAAf;;AACA,QAAIhY,SAAS,KAAKjJ,GAAG,CAAC+B,yBAAtB,EAAiD;AAC7Ckf,MAAAA,QAAQ,GAAG,GAAGvX,KAAH,CAASC,IAAT,CAAc,KAAKrI,OAAL,CAAa8N,gBAAb,CAA8B,MAAMjP,WAApC,CAAd,CAAX;AACH,KAFD,MAGK;AACD8gB,MAAAA,QAAQ,GAAG,GAAGvX,KAAH,CAASC,IAAT,CAAc,KAAKjJ,MAAL,CAAYY,OAAZ,CAAoB8N,gBAApB,CAAqC,MAAMnG,SAAN,GAAkB,IAAlB,GAAyB9I,WAA9D,CAAd,CAAX;AACH;;AACD,QAAI,CAACjB,QAAQ,EAAb,EAAiB;AACb,aAAO+hB,QAAP;AACH;;AACD,QAAIC,aAAa,GAAG,EAApB;;AACA,SAAK,IAAIrX,EAAE,GAAG,CAAT,EAAYsX,UAAU,GAAGF,QAA9B,EAAwCpX,EAAE,GAAGsX,UAAU,CAACpX,MAAxD,EAAgEF,EAAE,EAAlE,EAAsE;AAClE,UAAIvI,OAAO,GAAG6f,UAAU,CAACtX,EAAD,CAAxB;;AACA,UAAIvI,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,WAA3B,CAAJ,EAA6C;AACzCyR,QAAAA,aAAa,CAAC1G,IAAd,CAAmBlZ,OAAnB;AACH,OAFD,MAGK,IAAIA,OAAO,CAAC8C,aAAR,CAAsB,YAAtB,CAAJ,EAAyC;AAC1C8c,QAAAA,aAAa,CAAC1G,IAAd,CAAmBlZ,OAAO,CAAC8C,aAAR,CAAsB,YAAtB,CAAnB;AACH,OAFI,MAGA;AACD8c,QAAAA,aAAa,CAAC1G,IAAd,CAAmBlZ,OAAnB;AACH;AACJ;;AACD,WAAO4f,aAAP;AACH,GAzBD;;AA0BAzgB,EAAAA,WAAW,CAACY,SAAZ,CAAsBgc,mBAAtB,GAA4C,UAAU/b,OAAV,EAAmB;AAC3D,QAAI6G,KAAJ;;AACA,QAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;AAC5CtH,MAAAA,KAAK,GAAG7G,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;AACH,KAFD,MAGK,IAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;AACrDtH,MAAAA,KAAK,GAAG7G,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;AACH,KAFI,MAGA,IAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;AACnDtH,MAAAA,KAAK,GAAG7G,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;AACH,KAFI,MAGA,IAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;AAClDtH,MAAAA,KAAK,GAAG7G,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyBpH,KAAjC;AACH,KAFI,MAGA,IAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;AAC/CtH,MAAAA,KAAK,GAAG7G,OAAO,CAACiO,aAAR,CAAsB,CAAtB,EAAyB4E,OAAjC;AACH,KAFI,MAGA;AACD,UAAI7S,OAAO,CAACgE,IAAR,KAAiB,UAArB,EAAiC;AAC7B6C,QAAAA,KAAK,GAAG7G,OAAO,CAAC6S,OAAhB;AACH,OAFD,MAGK;AACDhM,QAAAA,KAAK,GAAGpJ,kBAAkB,CAACqiB,QAAnB,CAA4B9f,OAAO,CAAC6G,KAApC,CAAR;AACH;AACJ;;AACD,WAAOA,KAAP;AACH,GA1BD;;AA2BA1H,EAAAA,WAAW,CAACY,SAAZ,CAAsBmW,iBAAtB,GAA0C,UAAUlW,OAAV,EAAmB6G,KAAnB,EAA0B;AAChE,QAAI7G,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;AAC5C,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJD,MAKK,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;AACrD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;;AACA,UAAID,QAAQ,CAAChO,OAAT,CAAiBkO,SAAjB,CAA2BC,QAA3B,CAAoCzP,GAAG,CAACgI,wBAAxC,CAAJ,EAAuE;AACnE,aAAKjH,eAAL,CAAqBC,SAArB,GAAiC,IAAIC,IAAJ,CAAS,KAAKkH,KAAd,CAAjC;AACH,OAFD,MAGK;AACD,aAAKpH,eAAL,CAAqBG,OAArB,GAA+B,IAAID,IAAJ,CAAS,KAAKkH,KAAd,CAA/B;AACH;;AACDmH,MAAAA,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAVI,MAWA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;AACnD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiBA,KAAjB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJI,MAKA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;AAClD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiB,EAAjB;AACAmH,MAAAA,QAAQ,CAACnH,KAAT,GAAmBA,KAAK,YAAY0X,KAAlB,GAA2B1X,KAA3B,GAAmC,CAACA,KAAD,CAArD;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KALI,MAMA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;AAC/C,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAAC6E,OAAT,GAAmBhM,KAAnB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJI,MAKA;AACD,UAAIvF,OAAO,CAACgE,IAAR,KAAiB,UAArB,EAAiC;AAC7BhE,QAAAA,OAAO,CAAC6G,KAAR,GAAgBA,KAAK,IAAI,EAAzB;AACH,OAFD,MAGK;AACD7G,QAAAA,OAAO,CAAC6S,OAAR,GAAkBhM,KAAlB;AACH;AACJ;AACJ,GAzCD;;AA0CA1H,EAAAA,WAAW,CAACY,SAAZ,CAAsBoW,wBAAtB,GAAiD,UAAUnW,OAAV,EAAmB;AAChE,QAAIA,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;AAC5C,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiB,KAAKzH,MAAL,CAAY2gB,cAAZ,EAAjB;AACA/R,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJD,MAKK,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;AACrD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACA,UAAI+R,SAAS,GAAG,KAAK5gB,MAAL,CAAY2gB,cAAZ,EAAhB;AACA,WAAKtgB,eAAL,GAAuB;AAAEC,QAAAA,SAAS,EAAEsgB,SAAb;AAAwBpgB,QAAAA,OAAO,EAAEogB;AAAjC,OAAvB;AACAhS,MAAAA,QAAQ,CAACnH,KAAT,GAAiBmZ,SAAjB;AACAhS,MAAAA,QAAQ,CAACzI,QAAT;AACH,KANI,MAOA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;AACnD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiB,IAAjB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJI,MAKA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;AAClD,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAACnH,KAAT,GAAiB,EAAjB;AACAmH,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJI,MAKA,IAAIvF,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;AAC/C,UAAIH,QAAQ,GAAGhO,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAf;AACAD,MAAAA,QAAQ,CAAC6E,OAAT,GAAmB,KAAnB;AACA7E,MAAAA,QAAQ,CAACzI,QAAT;AACH,KAJI,MAKA;AACD,UAAIvF,OAAO,CAACgE,IAAR,KAAiB,UAArB,EAAiC;AAC7BhE,QAAAA,OAAO,CAAC6S,OAAR,GAAkB,KAAlB;AACH,OAFD,MAGK;AACD7S,QAAAA,OAAO,CAAC6G,KAAR,GAAgB,EAAhB;AACH;AACJ;AACJ,GApCD;;AAqCA1H,EAAAA,WAAW,CAACY,SAAZ,CAAsBkG,WAAtB,GAAoC,UAAU0B,SAAV,EAAqB;AACrD,QAAI3H,OAAO,GAAG,KAAKA,OAAL,CAAa8C,aAAb,CAA2B,MAAM6E,SAAjC,CAAd;AACA,WAAO3H,OAAO,GAAGA,OAAO,CAACiO,aAAR,CAAsB,CAAtB,CAAH,GAA8B,IAA5C;AACH,GAHD;;AAIA9O,EAAAA,WAAW,CAACY,SAAZ,CAAsBsC,WAAtB,GAAoC,YAAY;AAC5C,YAAQ,KAAKjD,MAAL,CAAY+E,aAApB;AACI,WAAK,gBAAL;AACI,YAAI5E,MAAM,GAAG,KAAKH,MAAL,CAAYI,WAAzB;;AACA,YAAI,CAAC3C,iBAAiB,CAAC,KAAKuC,MAAL,CAAYyG,eAAZ,CAA4BlH,KAA5B,CAAkCY,MAAM,CAACoT,cAAzC,CAAD,CAAtB,EAAkF;AAC9E,eAAKvT,MAAL,CAAY+E,aAAZ,GAA4B,kBAA5B;AACH,SAFD,MAGK;AACD,eAAK/E,MAAL,CAAY+E,aAAZ,GAA4B,QAA5B;AACH;;AACD;;AACJ,WAAK,YAAL;AACI,aAAK/E,MAAL,CAAY+E,aAAZ,GAA4B,cAA5B;AACA;;AACJ,WAAK,MAAL;AACI,aAAK/E,MAAL,CAAY+E,aAAZ,GAA4B,QAA5B;AACA;AAfR;;AAiBA,SAAK+C,YAAL,GAAoB,KAApB;AACA,SAAKtE,YAAL,CAAkBmR,IAAlB;AACA,SAAK3U,MAAL,CAAYiF,UAAZ,CAAuB4b,eAAvB;AACH,GArBD;;AAsBA9gB,EAAAA,WAAW,CAACY,SAAZ,CAAsBmgB,2BAAtB,GAAoD,YAAY;AAC5D,QAAI,KAAK9gB,MAAL,CAAYwB,UAAZ,IAA0B,CAAC,KAAKqS,kBAApC,EAAwD;AACpD,WAAKD,kBAAL;AACH;;AACD,WAAO,KAAKrP,gBAAZ;AACH,GALD;;AAMAxE,EAAAA,WAAW,CAACY,SAAZ,CAAsBmI,iBAAtB,GAA0C,YAAY;AAClD,QAAIyN,WAAW,GAAG,KAAKC,eAAL,CAAqBlX,GAAG,CAAC+B,yBAAzB,CAAlB;;AACA,SAAK,IAAI8H,EAAE,GAAG,CAAT,EAAY4X,aAAa,GAAGxK,WAAjC,EAA8CpN,EAAE,GAAG4X,aAAa,CAAC1X,MAAjE,EAAyEF,EAAE,EAA3E,EAA+E;AAC3E,UAAIvI,OAAO,GAAGmgB,aAAa,CAAC5X,EAAD,CAA3B;AACA,UAAIyF,QAAQ,GAAG,KAAK,CAApB;;AACA,UAAIhO,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,kBAA3B,CAAJ,EAAoD;AAChDH,QAAAA,QAAQ,GAAGhO,OAAO,CAACiO,aAAnB;AACH,OAFD,MAGK,IAAIjO,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,cAA3B,CAAJ,EAAgD;AACjDH,QAAAA,QAAQ,GAAGhO,OAAO,CAACiO,aAAnB;AACH,OAFI,MAGA,IAAIjO,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,YAA3B,CAAJ,EAA8C;AAC/CH,QAAAA,QAAQ,GAAGhO,OAAO,CAACiO,aAAnB;AACH,OAFI,MAGA,IAAIjO,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,gBAA3B,CAAJ,EAAkD;AACnDH,QAAAA,QAAQ,GAAGhO,OAAO,CAACiO,aAAnB;AACH,OAFI,MAGA,IAAIjO,OAAO,CAACkO,SAAR,CAAkBC,QAAlB,CAA2B,eAA3B,CAAJ,EAAiD;AAClDH,QAAAA,QAAQ,GAAGhO,OAAO,CAACiO,aAAnB;AACH;;AACD,UAAID,QAAQ,IAAIA,QAAQ,CAAC,CAAD,CAAxB,EAA6B;AACzBA,QAAAA,QAAQ,CAAC,CAAD,CAAR,CAAYvK,OAAZ;AACH;AACJ;;AACD,QAAI,KAAKqH,SAAT,EAAoB;AAChB,WAAKA,SAAL,CAAerH,OAAf;AACH;AACJ,GA3BD;AA4BA;AACJ;AACA;AACA;AACA;;;AACItE,EAAAA,WAAW,CAACY,SAAZ,CAAsB0D,OAAtB,GAAgC,YAAY;AACxC,QAAI,CAAC,KAAKrE,MAAL,CAAYoZ,WAAjB,EAA8B;AAC1B,WAAKjV,mBAAL;AACA,WAAKF,oBAAL;AACA,WAAKjE,MAAL,CAAYghB,cAAZ,CAA2B,CAAC,gBAAD,CAA3B;AACH;;AACD,QAAI,KAAKzc,gBAAT,EAA2B;AACvB,WAAKA,gBAAL,CAAsBF,OAAtB;AACH;;AACD,SAAKyE,iBAAL;AACA,SAAKrI,cAAL,CAAoB4D,OAApB;;AACA,QAAI,KAAKwP,kBAAT,EAA6B;AACzB,WAAKA,kBAAL,CAAwBxP,OAAxB;AACA1G,MAAAA,MAAM,CAAC,KAAKkW,kBAAL,CAAwBjT,OAAzB,CAAN;AACH;;AACD,QAAI,KAAK4C,YAAT,EAAuB;AACnB,WAAKA,YAAL,CAAkBa,OAAlB;AACA,WAAKb,YAAL,GAAoB,IAApB;AACH;;AACD,QAAI,KAAK5C,OAAT,EAAkB;AACdjD,MAAAA,MAAM,CAAC,KAAKiD,OAAN,CAAN;AACA,WAAKA,OAAL,GAAe,IAAf;AACH;AACJ,GAvBD;;AAwBA,SAAOb,WAAP;AACH,CA5uDgC,EAAjC;;AA6uDA,SAASA,WAAT","sourcesContent":["import { createElement, isNullOrUndefined, addClass, remove, EventHandler, extend, append } from '@syncfusion/ej2-base';\r\nimport { cldrData, removeClass, getValue, getDefaultDateObject, closest, getElement, SanitizeHtmlHelper } from '@syncfusion/ej2-base';\r\nimport { updateBlazorTemplate, resetBlazorTemplate, isBlazor, IntlBase } from '@syncfusion/ej2-base';\r\nimport { Query, Deferred } from '@syncfusion/ej2-data';\r\nimport { CheckBox, Button } from '@syncfusion/ej2-buttons';\r\nimport { Dialog } from '@syncfusion/ej2-popups';\r\nimport { DropDownList, MultiSelect } from '@syncfusion/ej2-dropdowns';\r\nimport { Input } from '@syncfusion/ej2-inputs';\r\nimport { DateTimePicker } from '@syncfusion/ej2-calendars';\r\nimport { timezoneData } from '../timezone/timezone';\r\nimport { FieldValidator } from './form-validator';\r\nimport { RecurrenceEditor } from '../../recurrence-editor/recurrence-editor';\r\nimport * as cls from '../base/css-constant';\r\nimport * as event from '../base/constant';\r\nimport * as util from '../base/util';\r\nvar EVENT_FIELD = 'e-field';\r\nvar REPEAT_CONTAINER_CLASS = 'e-recurrence-container';\r\nvar REPEAT_BUTTON_ICON_CLASS = 'e-recurrence-edit';\r\nvar REPEAT_BUTTON_CLASS = 'e-recurrence-edit-button';\r\nvar REPEAT_DIALOG_CLASS = 'e-recurrence-dialog';\r\nvar HIDE_STYLE_CLASS = 'e-hide';\r\n/**\r\n * Event editor window\r\n */\r\nvar EventWindow = /** @class */ (function () {\r\n    /**\r\n     * Constructor for event window\r\n     */\r\n    function EventWindow(parent) {\r\n        this.parent = parent;\r\n        this.l10n = this.parent.localeObj;\r\n        this.fields = this.parent.eventFields;\r\n        this.eventWindowTime = { startTime: new Date(), endTime: new Date() };\r\n        this.fieldValidator = new FieldValidator();\r\n        this.renderEventWindow();\r\n    }\r\n    EventWindow.prototype.renderEventWindow = function () {\r\n        this.element = createElement('div', { id: this.parent.element.id + '_dialog_wrapper' });\r\n        this.parent.element.appendChild(this.element);\r\n        var dialogModel = {\r\n            animationSettings: { effect: 'Zoom' },\r\n            content: this.getEventWindowContent(),\r\n            cssClass: cls.EVENT_WINDOW_DIALOG_CLASS,\r\n            enableRtl: this.parent.enableRtl,\r\n            height: this.parent.isAdaptive ? '100%' : 'auto',\r\n            minHeight: '300px',\r\n            isModal: true,\r\n            showCloseIcon: this.parent.isAdaptive ? false : true,\r\n            target: document.body,\r\n            visible: false,\r\n            width: '500px',\r\n            beforeOpen: this.onBeforeOpen.bind(this),\r\n            beforeClose: this.onBeforeClose.bind(this)\r\n        };\r\n        if (this.parent.isAdaptive) {\r\n            dialogModel.cssClass = cls.EVENT_WINDOW_DIALOG_CLASS + ' ' + cls.DEVICE_CLASS;\r\n            dialogModel.header = '<div class=\"e-title-header\"><div class=\"e-back-icon e-icons\"></div><div class=\"e-title-text\">' +\r\n                this.l10n.getConstant('newEvent') + '</div><div class=\"e-save-icon e-icons\"></div></div>';\r\n        }\r\n        else {\r\n            dialogModel.buttons = [{\r\n                    buttonModel: {\r\n                        content: this.l10n.getConstant('deleteButton'), cssClass: cls.DELETE_EVENT_CLASS,\r\n                        disabled: !this.parent.eventSettings.allowDeleting || this.parent.readonly\r\n                    },\r\n                    click: this.eventDelete.bind(this)\r\n                }, {\r\n                    buttonModel: {\r\n                        content: this.l10n.getConstant('saveButton'), cssClass: 'e-primary ' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS,\r\n                        isPrimary: true, disabled: !this.parent.eventSettings.allowAdding || this.parent.readonly\r\n                    },\r\n                    click: this.eventSave.bind(this)\r\n                }, {\r\n                    buttonModel: { cssClass: cls.EVENT_WINDOW_CANCEL_BUTTON_CLASS, content: this.l10n.getConstant('cancelButton') },\r\n                    click: this.dialogClose.bind(this)\r\n                }];\r\n            dialogModel.header = '<div class=\"e-title-text\">' + this.l10n.getConstant('newEvent') + '</div>';\r\n        }\r\n        this.dialogObject = new Dialog(dialogModel, this.element);\r\n        this.dialogObject.isStringTemplate = true;\r\n        if (this.dialogObject.element.querySelector('.e-dlg-closeicon-btn')) {\r\n            this.dialogObject.element.querySelector('.e-dlg-closeicon-btn').setAttribute('title', this.l10n.getConstant('close'));\r\n        }\r\n        addClass([this.element.parentElement], cls.EVENT_WINDOW_DIALOG_CLASS + '-container');\r\n        if (this.parent.isAdaptive) {\r\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_BACK_ICON_CLASS), 'click', this.dialogClose, this);\r\n            EventHandler.add(this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS), 'click', this.eventSave, this);\r\n        }\r\n        this.applyFormValidation();\r\n    };\r\n    EventWindow.prototype.updateEditorTemplate = function () {\r\n        if (this.parent.editorTemplate) {\r\n            updateBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate', this.parent);\r\n        }\r\n    };\r\n    EventWindow.prototype.resetEditorTemplate = function () {\r\n        if (this.parent.editorTemplate) {\r\n            resetBlazorTemplate(this.parent.element.id + '_editorTemplate', 'EditorTemplate');\r\n        }\r\n    };\r\n    EventWindow.prototype.refresh = function () {\r\n        this.destroy();\r\n        this.renderEventWindow();\r\n    };\r\n    EventWindow.prototype.refreshRecurrenceEditor = function () {\r\n        if (this.recurrenceEditor) {\r\n            var recurrenceEditor = this.recurrenceEditor.element;\r\n            this.recurrenceEditor.destroy();\r\n            this.createRecurrenceEditor(recurrenceEditor);\r\n        }\r\n    };\r\n    EventWindow.prototype.setRecurrenceEditor = function (recurrenceEditor) {\r\n        if (this.parent.editorTemplate) {\r\n            this.recurrenceEditor = recurrenceEditor;\r\n        }\r\n    };\r\n    EventWindow.prototype.openEditor = function (data, type, isEventData, repeatType) {\r\n        this.parent.currentAction = type;\r\n        this.parent.removeNewEventElement();\r\n        this.parent.quickPopup.quickPopupHide(true);\r\n        this.parent.inlineModule.removeInlineAppointmentElement();\r\n        if (type === 'Add') {\r\n            var eventObj = {};\r\n            this.cellClickAction = !isEventData;\r\n            this.parent.activeCellsData = data;\r\n            var event_1 = data;\r\n            if (this.cellClickAction) {\r\n                this.convertToEventData(event_1, eventObj);\r\n            }\r\n            else {\r\n                this.parent.activeCellsData = {\r\n                    startTime: (event_1.startTime || event_1[this.fields.startTime]),\r\n                    endTime: (event_1.endTime || event_1[this.fields.endTime]),\r\n                    isAllDay: (event_1.isAllDay || event_1[this.fields.isAllDay]),\r\n                    element: event_1.element,\r\n                    groupIndex: event_1.groupIndex\r\n                };\r\n                eventObj = event_1;\r\n            }\r\n            data = eventObj;\r\n        }\r\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\r\n            this.renderFormElements(this.element.querySelector('.e-schedule-form'), data);\r\n        }\r\n        if (!this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\r\n            removeClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\r\n        }\r\n        if (this.recurrenceEditor) {\r\n            this.recurrenceEditor.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\r\n        }\r\n        switch (type) {\r\n            case 'Add':\r\n                this.onCellDetailsUpdate(data, repeatType);\r\n                break;\r\n            case 'Save':\r\n            case 'EditOccurrence':\r\n            case 'EditSeries':\r\n            case 'EditFollowingEvents':\r\n                if (type === 'EditOccurrence' && !this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\r\n                    addClass([this.dialogObject.element.querySelector('.e-recurrenceeditor')], cls.DISABLE_CLASS);\r\n                }\r\n                this.cellClickAction = false;\r\n                this.onEventDetailsUpdate(data);\r\n                break;\r\n        }\r\n    };\r\n    EventWindow.prototype.setDialogContent = function () {\r\n        this.dialogObject.content = this.getEventWindowContent();\r\n        this.dialogObject.dataBind();\r\n    };\r\n    EventWindow.prototype.onBeforeOpen = function (args) {\r\n        var _this = this;\r\n        var eventProp = {\r\n            type: 'Editor',\r\n            data: this.eventData,\r\n            cancel: false,\r\n            element: this.element,\r\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\r\n        };\r\n        if (this.cellClickAction) {\r\n            eventProp.duration = this.getSlotDuration();\r\n        }\r\n        var saveObj = this.getInstance(cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\r\n        if (saveObj) {\r\n            saveObj.disabled = !(this.cellClickAction ? this.parent.eventSettings.allowAdding : this.parent.eventSettings.allowEditing);\r\n            saveObj.dataBind();\r\n        }\r\n        var deleteObj = this.getInstance(cls.DELETE_EVENT_CLASS);\r\n        if (deleteObj) {\r\n            deleteObj.disabled = !this.parent.eventSettings.allowDeleting;\r\n            deleteObj.dataBind();\r\n        }\r\n        var callBackPromise = new Deferred();\r\n        this.parent.trigger(event.popupOpen, eventProp, function (popupArgs) {\r\n            args.cancel = popupArgs.cancel;\r\n            _this.duration = _this.cellClickAction ? popupArgs.duration : null;\r\n            _this.refreshDateTimePicker(_this.duration);\r\n            if (_this.cellClickAction && popupArgs.duration !== _this.getSlotDuration() && isNullOrUndefined(_this.parent.editorTemplate)) {\r\n                var startObj = _this.getInstance(cls.EVENT_WINDOW_START_CLASS);\r\n                var endObj = _this.getInstance(cls.EVENT_WINDOW_END_CLASS);\r\n                endObj.value = new Date(startObj.value.getTime() + (util.MS_PER_MINUTE * popupArgs.duration));\r\n                endObj.dataBind();\r\n            }\r\n            if (!isBlazor() && _this.parent.editorTemplate && _this.element.querySelector('.e-recurrenceeditor') && !_this.recurrenceEditor) {\r\n                _this.recurrenceEditor = _this.getInstance('e-recurrenceeditor');\r\n            }\r\n            callBackPromise.resolve(args);\r\n        });\r\n        return callBackPromise;\r\n    };\r\n    EventWindow.prototype.onBeforeClose = function (args) {\r\n        var _this = this;\r\n        if (args.isInteracted) {\r\n            this.isCrudAction = false;\r\n        }\r\n        var eventProp = {\r\n            type: 'Editor',\r\n            data: this.eventCrudData,\r\n            cancel: false,\r\n            element: this.element,\r\n            target: (this.cellClickAction ? this.parent.activeCellsData.element : this.parent.activeEventData.element)\r\n        };\r\n        var callBackPromise = new Deferred();\r\n        this.parent.trigger(event.popupClose, eventProp, function (popupArgs) {\r\n            if (isBlazor()) {\r\n                var eventFields = _this.parent.eventFields;\r\n                if (popupArgs.data) {\r\n                    var eventObj = popupArgs.data;\r\n                    eventObj[eventFields.startTime] = _this.parent.getDateTime(eventObj[eventFields.startTime]);\r\n                    eventObj[eventFields.endTime] = _this.parent.getDateTime(eventObj[eventFields.endTime]);\r\n                }\r\n                if (popupArgs.element) {\r\n                    popupArgs.element = getElement(popupArgs.element);\r\n                }\r\n                if (popupArgs.target) {\r\n                    popupArgs.target = getElement(popupArgs.target);\r\n                }\r\n            }\r\n            args.cancel = popupArgs.cancel;\r\n            if (!popupArgs.cancel) {\r\n                _this.resetEditorTemplate();\r\n                _this.updateEditorTemplate();\r\n                if (_this.isCrudAction) {\r\n                    args.cancel = _this.processCrudActions(popupArgs.data);\r\n                    _this.isCrudAction = args.cancel;\r\n                }\r\n                if (!_this.isCrudAction) {\r\n                    _this.resetForm();\r\n                    _this.parent.eventBase.focusElement();\r\n                    _this.eventCrudData = null;\r\n                }\r\n            }\r\n            callBackPromise.resolve(args);\r\n        });\r\n        return callBackPromise;\r\n    };\r\n    EventWindow.prototype.getEventWindowContent = function () {\r\n        var container = createElement('div', { className: cls.FORM_CONTAINER_CLASS });\r\n        var form = createElement('form', {\r\n            id: this.parent.element.id + 'EditForm',\r\n            className: cls.FORM_CLASS,\r\n            attrs: { onsubmit: 'return false;' }\r\n        });\r\n        this.renderFormElements(form);\r\n        container.appendChild(form);\r\n        return container;\r\n    };\r\n    EventWindow.prototype.renderFormElements = function (form, args) {\r\n        if (!isNullOrUndefined(this.parent.editorTemplate)) {\r\n            if (args) {\r\n                // tslint:disable-next-line:no-any\r\n                if (!this.parent.isReact) {\r\n                    if (this.recurrenceEditor) {\r\n                        this.recurrenceEditor.destroy();\r\n                        this.recurrenceEditor = null;\r\n                    }\r\n                    this.destroyComponents();\r\n                }\r\n                var formElements = [].slice.call(form.children);\r\n                for (var _i = 0, formElements_1 = formElements; _i < formElements_1.length; _i++) {\r\n                    var element = formElements_1[_i];\r\n                    remove(element);\r\n                }\r\n            }\r\n            if (!isBlazor() || (isBlazor() && args)) {\r\n                var templateId = this.parent.element.id + '_editorTemplate';\r\n                var tempEle = [].slice.call(this.parent.getEditorTemplate()(args || {}, this.parent, 'editorTemplate', templateId, false));\r\n                append(tempEle, form);\r\n                this.parent.renderTemplates();\r\n                this.updateEditorTemplate();\r\n            }\r\n        }\r\n        else {\r\n            form.appendChild(this.getDefaultEventWindowContent());\r\n        }\r\n    };\r\n    EventWindow.prototype.getDefaultEventWindowContent = function () {\r\n        var parentDiv = this.createDivElement(cls.EVENT_WINDOW_DIALOG_PARENT_CLASS);\r\n        var titleLocationDiv = this.createDivElement(cls.EVENT_WINDOW_TITLE_LOCATION_DIV_CLASS);\r\n        parentDiv.appendChild(titleLocationDiv);\r\n        titleLocationDiv.appendChild(this.renderTextBox(cls.SUBJECT_CLASS));\r\n        titleLocationDiv.querySelector('.' + cls.SUBJECT_CLASS).setAttribute('title', this.parent.editorTitles.subject);\r\n        titleLocationDiv.appendChild(this.renderTextBox(cls.LOCATION_CLASS));\r\n        titleLocationDiv.querySelector('.' + cls.LOCATION_CLASS).setAttribute('title', this.parent.editorTitles.location);\r\n        var startEndDateTimeDiv = this.createDivElement(cls.EVENT_WINDOW_START_END_DIV_CLASS);\r\n        parentDiv.appendChild(startEndDateTimeDiv);\r\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_START_CLASS, this.onTimeChange.bind(this)));\r\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_START_CLASS).setAttribute('title', this.parent.editorTitles.startTime);\r\n        startEndDateTimeDiv.appendChild(this.renderDateTimePicker(cls.EVENT_WINDOW_END_CLASS));\r\n        startEndDateTimeDiv.querySelector('.' + cls.EVENT_WINDOW_END_CLASS).setAttribute('title', this.parent.editorTitles.endTime);\r\n        var allDayTimezoneDiv = this.createDivElement(cls.EVENT_WINDOW_ALLDAY_TZ_DIV_CLASS);\r\n        parentDiv.appendChild(allDayTimezoneDiv);\r\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.EVENT_WINDOW_ALL_DAY_CLASS));\r\n        allDayTimezoneDiv.appendChild(this.renderCheckBox(cls.TIME_ZONE_CLASS));\r\n        var timezoneParentDiv = this.createDivElement(cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\r\n        parentDiv.appendChild(timezoneParentDiv);\r\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_START_TZ_CLASS));\r\n        timezoneParentDiv.appendChild(this.renderDropDown(cls.EVENT_WINDOW_END_TZ_CLASS));\r\n        var repeatParentDiv = this.createDivElement(cls.EVENT_WINDOW_REPEAT_DIV_CLASS);\r\n        parentDiv.appendChild(repeatParentDiv);\r\n        var repeatDiv = this.renderCheckBox(cls.EVENT_WINDOW_REPEAT_CLASS);\r\n        var repeatEditConainer = createElement('span', { className: REPEAT_CONTAINER_CLASS });\r\n        var button = createElement('button', {\r\n            className: REPEAT_BUTTON_CLASS,\r\n            attrs: { type: 'button', 'title': this.l10n.getConstant('editRecurrence') }\r\n        });\r\n        this.buttonObj = new Button({ iconCss: REPEAT_BUTTON_ICON_CLASS + ' e-icons', cssClass: 'e-medium ' + this.parent.cssClass });\r\n        repeatEditConainer.appendChild(button);\r\n        this.buttonObj.appendTo(button);\r\n        this.buttonObj.isStringTemplate = true;\r\n        repeatDiv.appendChild(repeatEditConainer);\r\n        repeatParentDiv.appendChild(repeatDiv);\r\n        if (this.parent.isAdaptive) {\r\n            EventHandler.add(button, 'click', this.loadRecurrenceEditor, this);\r\n        }\r\n        else {\r\n            this.createRecurrenceEditor(parentDiv);\r\n        }\r\n        if (this.parent.resourceCollection.length > 0) {\r\n            var resourceParentDiv = this.createDivElement(cls.EVENT_WINDOW_RESOURCES_DIV_CLASS);\r\n            for (var _i = 0, _a = this.parent.resourceBase.resourceCollection; _i < _a.length; _i++) {\r\n                var resource = _a[_i];\r\n                resourceParentDiv.appendChild(this.renderResourceDetails(resource));\r\n            }\r\n            parentDiv.appendChild(resourceParentDiv);\r\n        }\r\n        var description = this.createDivElement(cls.DESCRIPTION_CLASS + '-row');\r\n        description.appendChild(this.renderTextBox(cls.DESCRIPTION_CLASS));\r\n        description.querySelector('.' + cls.DESCRIPTION_CLASS).setAttribute('title', this.parent.editorTitles.description);\r\n        parentDiv.appendChild(description);\r\n        var submit = createElement('button', { attrs: { type: 'hidden', title: 'submit', style: 'display:none' } });\r\n        parentDiv.appendChild(submit);\r\n        return parentDiv;\r\n    };\r\n    EventWindow.prototype.createRecurrenceEditor = function (parentDiv) {\r\n        var recurrenceEditor = this.createDivElement();\r\n        parentDiv.appendChild(recurrenceEditor);\r\n        this.recurrenceEditor = this.renderRecurrenceEditor();\r\n        this.recurrenceEditor.appendTo(recurrenceEditor);\r\n        this.updateMinMaxDateToEditor();\r\n    };\r\n    EventWindow.prototype.createDivElement = function (className) {\r\n        return createElement('div', { className: className });\r\n    };\r\n    EventWindow.prototype.createInputElement = function (className, fieldName, type) {\r\n        return createElement(type || 'input', {\r\n            className: className, attrs: {\r\n                type: 'text', name: fieldName, value: '', id: fieldName,\r\n                title: ((this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))) === '') ?\r\n                    fieldName : this.l10n.getConstant(fieldName.charAt(0).toLowerCase() + fieldName.slice(1))\r\n            }\r\n        });\r\n    };\r\n    EventWindow.prototype.getSlotDuration = function () {\r\n        return this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\r\n    };\r\n    EventWindow.prototype.renderDateTimePicker = function (value, changeEvent) {\r\n        var dateTimeDiv = this.createDivElement(value + '-container');\r\n        var fieldName = this.getFieldName(value);\r\n        var dateTimeInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\r\n        dateTimeDiv.appendChild(dateTimeInput);\r\n        var dateTimePicker = new DateTimePicker({\r\n            change: changeEvent,\r\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\r\n            calendarMode: this.parent.calendarMode,\r\n            min: this.parent.minDate,\r\n            max: new Date(new Date(+this.parent.maxDate).setHours(23, 59, 59)),\r\n            cssClass: this.parent.cssClass,\r\n            enableRtl: this.parent.enableRtl,\r\n            locale: this.parent.locale,\r\n            floatLabelType: 'Always',\r\n            format: (isNullOrUndefined(this.parent.dateFormat) ?\r\n                this.getFormat('dateFormats') : this.parent.dateFormat) + ' ' + this.getFormat('timeFormats'),\r\n            placeholder: this.getFieldLabel(value),\r\n            step: this.getSlotDuration(),\r\n            width: '100%'\r\n        });\r\n        dateTimePicker.isStringTemplate = true;\r\n        dateTimePicker.appendTo(dateTimeInput);\r\n        return dateTimeDiv;\r\n    };\r\n    EventWindow.prototype.refreshDateTimePicker = function (duration) {\r\n        var elementSelector = '.' + cls.EVENT_WINDOW_START_CLASS + ',.' + cls.EVENT_WINDOW_END_CLASS;\r\n        var startEndElement = [].slice.call(this.element.querySelectorAll(elementSelector));\r\n        for (var _i = 0, startEndElement_1 = startEndElement; _i < startEndElement_1.length; _i++) {\r\n            var element = startEndElement_1[_i];\r\n            var instance = element.ej2_instances[0];\r\n            instance.firstDayOfWeek = this.parent.activeViewOptions.firstDayOfWeek;\r\n            instance.step = duration || this.getSlotDuration();\r\n            instance.dataBind();\r\n        }\r\n    };\r\n    EventWindow.prototype.onTimeChange = function () {\r\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\r\n        if (startObj.element.parentElement.classList.contains('e-input-focus')) {\r\n            var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\r\n            var duration = 0;\r\n            if (this.cellClickAction) {\r\n                duration = util.MS_PER_MINUTE * this.duration;\r\n                this.eventWindowTime.startTime = startObj.value;\r\n            }\r\n            else {\r\n                duration = this.eventData[this.fields.endTime].getTime() - this.eventData[this.fields.startTime].getTime();\r\n            }\r\n            var endDate = (isNullOrUndefined(startObj.value)) ? null : new Date(startObj.value.getTime() + duration);\r\n            if (this.cellClickAction) {\r\n                this.eventWindowTime.endTime = endDate;\r\n            }\r\n            endObj.value = endDate;\r\n            endObj.dataBind();\r\n        }\r\n        if (this.recurrenceEditor) {\r\n            this.recurrenceEditor.updateRuleUntilDate(this.eventWindowTime.startTime);\r\n        }\r\n    };\r\n    EventWindow.prototype.renderResourceDetails = function (resourceData) {\r\n        var fieldName = resourceData.field;\r\n        var value = 'e-' + fieldName;\r\n        var labelValue = resourceData.title;\r\n        var resourceDiv = this.createDivElement(value + '-container' + ' ' + 'e-resources');\r\n        var resourceInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\r\n        resourceDiv.appendChild(resourceInput);\r\n        var resourceTemplate = '<div class=\"e-resource-template\"><div class=\"e-resource-color\" style=\"background-color:${' +\r\n            resourceData.colorField + '}\"></div><div class=\"e-resource-text\">${' + resourceData.textField + '}</div></div>';\r\n        if (resourceData.allowMultiple) {\r\n            var listObj = new MultiSelect({\r\n                cssClass: this.parent.cssClass || '',\r\n                dataSource: resourceData.dataSource,\r\n                change: this.onMultiselectResourceChange.bind(this),\r\n                itemTemplate: resourceTemplate,\r\n                fields: {\r\n                    text: resourceData.textField,\r\n                    value: resourceData.idField\r\n                },\r\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\r\n                floatLabelType: 'Always',\r\n                placeholder: labelValue,\r\n                popupHeight: '230px',\r\n                popupWidth: '447px',\r\n                mode: 'Box'\r\n            });\r\n            listObj.appendTo(resourceInput);\r\n            listObj.isStringTemplate = true;\r\n        }\r\n        else {\r\n            var drowDownList = new DropDownList({\r\n                cssClass: this.parent.cssClass || '',\r\n                change: this.onDropdownResourceChange.bind(this),\r\n                dataSource: resourceData.dataSource,\r\n                enableRtl: this.parent.enableRtl,\r\n                fields: {\r\n                    text: resourceData.textField,\r\n                    value: resourceData.idField\r\n                },\r\n                htmlAttributes: { 'title': labelValue, 'name': fieldName },\r\n                floatLabelType: 'Always',\r\n                placeholder: labelValue,\r\n                popupHeight: '230px',\r\n                popupWidth: '447px',\r\n                itemTemplate: resourceTemplate\r\n            });\r\n            drowDownList.appendTo(resourceInput);\r\n            drowDownList.isStringTemplate = true;\r\n        }\r\n        return resourceDiv;\r\n    };\r\n    EventWindow.prototype.renderDropDown = function (value) {\r\n        var fieldName = this.getFieldName(value);\r\n        var timezoneDiv = this.createDivElement(value + '-container');\r\n        var timezoneInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\r\n        timezoneDiv.appendChild(timezoneInput);\r\n        var drowDownList = new DropDownList({\r\n            allowFiltering: true,\r\n            change: this.onTimezoneChange.bind(this),\r\n            cssClass: this.parent.cssClass || '',\r\n            dataSource: timezoneData,\r\n            enableRtl: this.parent.enableRtl,\r\n            fields: { text: 'Text', value: 'Value' },\r\n            filterBarPlaceholder: 'Search Timezone',\r\n            filtering: function (e) {\r\n                var query = new Query();\r\n                query = (e.text !== '') ? query.where('Text', 'contains', e.text, true) : query;\r\n                e.updateData(timezoneData, query);\r\n            },\r\n            htmlAttributes: { 'title': this.getFieldLabel(value), 'name': fieldName },\r\n            floatLabelType: 'Always',\r\n            placeholder: this.getFieldLabel(value),\r\n            popupHeight: '230px',\r\n        });\r\n        drowDownList.appendTo(timezoneInput);\r\n        drowDownList.isStringTemplate = true;\r\n        return timezoneDiv;\r\n    };\r\n    EventWindow.prototype.onMultiselectResourceChange = function (args) {\r\n        if (!args.value || !this.parent.activeViewOptions.group.byGroupID || this.parent.resourceCollection.length <= 1) {\r\n            return;\r\n        }\r\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\r\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\r\n        for (var i = 0; i < resourceCollection.length; i++) {\r\n            if (resourceCollection[i].field === fieldName && i < resourceCollection.length - 1) {\r\n                var resObject = this.createInstance(i);\r\n                var datasource = [];\r\n                var _loop_1 = function (j) {\r\n                    var resourceModel = resourceCollection[i + 1];\r\n                    var filter = resourceModel.dataSource.filter(function (data) {\r\n                        return data[resourceModel.groupIDField] === args.value[j];\r\n                    })[0];\r\n                    var groupId = filter[resourceCollection[i + 1].groupIDField];\r\n                    var filterRes = this_1.filterDatasource(i, groupId);\r\n                    datasource = datasource.concat(filterRes);\r\n                };\r\n                var this_1 = this;\r\n                for (var j = 0; j < args.value.length; j++) {\r\n                    _loop_1(j);\r\n                }\r\n                resObject.dataSource = datasource;\r\n                resObject.dataBind();\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.createInstance = function (index) {\r\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\r\n        var resObject = this.element.querySelector('.e-' + resourceData.field).\r\n            ej2_instances[0];\r\n        return resObject;\r\n    };\r\n    EventWindow.prototype.onDropdownResourceChange = function (args) {\r\n        if (!args.value || this.parent.resourceCollection.length <= 1 || !this.parent.activeViewOptions.group.byGroupID) {\r\n            return;\r\n        }\r\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\r\n        var resourceCollection = this.parent.resourceBase.resourceCollection;\r\n        for (var i = 0; i < resourceCollection.length; i++) {\r\n            if ((i < resourceCollection.length - 1) && resourceCollection[i].field === fieldName) {\r\n                var resObj = this.createInstance(i);\r\n                var groupId = args.itemData[resourceCollection[i].idField];\r\n                resObj.dataSource = this.filterDatasource(i, groupId);\r\n                resObj.dataBind();\r\n                var resValue = resObj.dataSource[0][resourceCollection[i + 1].idField];\r\n                resObj.value = (resourceCollection[i + 1].allowMultiple) ? [resValue] : resValue;\r\n                resObj.dataBind();\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.filterDatasource = function (index, groupId) {\r\n        var resourceData = this.parent.resourceBase.resourceCollection[index + 1];\r\n        var filter = resourceData.dataSource.filter(function (data) {\r\n            return data[resourceData.groupIDField] === groupId;\r\n        });\r\n        return filter;\r\n    };\r\n    EventWindow.prototype.onTimezoneChange = function (args) {\r\n        var fieldName = args.element.getAttribute('name') || this.getColumnName(args.element);\r\n        if (fieldName === this.parent.eventFields.startTimezone) {\r\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\r\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\r\n            endTimezoneObj.value = startTimezoneObj.value;\r\n            endTimezoneObj.dataBind();\r\n        }\r\n    };\r\n    EventWindow.prototype.renderCheckBox = function (value) {\r\n        var checkBoxDiv = this.createDivElement(value + '-container');\r\n        var fieldName = this.getFieldName(value);\r\n        var checkBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName);\r\n        checkBoxDiv.appendChild(checkBoxInput);\r\n        var checkBox = new CheckBox({\r\n            change: this.onChange.bind(this),\r\n            cssClass: value + ' ' + this.parent.cssClass,\r\n            enableRtl: this.parent.enableRtl,\r\n            label: this.getFieldLabel(value)\r\n        });\r\n        checkBox.appendTo(checkBoxInput);\r\n        checkBox.isStringTemplate = true;\r\n        checkBoxInput.setAttribute('name', fieldName);\r\n        if (fieldName === 'Repeat') {\r\n            this.repeatStatus = checkBox;\r\n        }\r\n        return checkBoxDiv;\r\n    };\r\n    EventWindow.prototype.renderTextBox = function (value) {\r\n        var textBoxDiv = this.createDivElement(value + '-container');\r\n        var fieldName = this.getFieldName(value);\r\n        var elementType = (value === cls.DESCRIPTION_CLASS) ? 'textarea' : 'input';\r\n        var textBoxInput = this.createInputElement(value + ' ' + EVENT_FIELD, fieldName, elementType);\r\n        textBoxDiv.appendChild(textBoxInput);\r\n        Input.createInput({\r\n            element: textBoxInput,\r\n            floatLabelType: 'Always',\r\n            properties: {\r\n                enableRtl: this.parent.enableRtl,\r\n                placeholder: this.getFieldLabel(value)\r\n            }\r\n        });\r\n        return textBoxDiv;\r\n    };\r\n    EventWindow.prototype.getFieldName = function (name) {\r\n        var fieldName = '';\r\n        switch (name) {\r\n            case cls.SUBJECT_CLASS:\r\n                fieldName = this.fields.subject;\r\n                break;\r\n            case cls.LOCATION_CLASS:\r\n                fieldName = this.fields.location;\r\n                break;\r\n            case cls.EVENT_WINDOW_START_CLASS:\r\n                fieldName = this.fields.startTime;\r\n                break;\r\n            case cls.EVENT_WINDOW_END_CLASS:\r\n                fieldName = this.fields.endTime;\r\n                break;\r\n            case cls.DESCRIPTION_CLASS:\r\n                fieldName = this.fields.description;\r\n                break;\r\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\r\n                fieldName = this.fields.isAllDay;\r\n                break;\r\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\r\n                fieldName = this.fields.startTimezone;\r\n                break;\r\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\r\n                fieldName = this.fields.endTimezone;\r\n                break;\r\n            case cls.TIME_ZONE_CLASS:\r\n                fieldName = 'Timezone';\r\n                break;\r\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\r\n                fieldName = 'Repeat';\r\n                break;\r\n        }\r\n        return fieldName;\r\n    };\r\n    EventWindow.prototype.getFieldLabel = function (fieldName) {\r\n        var labelText = '';\r\n        switch (fieldName) {\r\n            case cls.SUBJECT_CLASS:\r\n                labelText = this.parent.editorTitles.subject;\r\n                break;\r\n            case cls.LOCATION_CLASS:\r\n                labelText = this.parent.editorTitles.location;\r\n                break;\r\n            case cls.DESCRIPTION_CLASS:\r\n                labelText = this.parent.editorTitles.description;\r\n                break;\r\n            case cls.EVENT_WINDOW_START_CLASS:\r\n                labelText = this.parent.editorTitles.startTime;\r\n                break;\r\n            case cls.EVENT_WINDOW_END_CLASS:\r\n                labelText = this.parent.editorTitles.endTime;\r\n                break;\r\n            case cls.EVENT_WINDOW_START_TZ_CLASS:\r\n                labelText = this.parent.editorTitles.startTimezone;\r\n                break;\r\n            case cls.EVENT_WINDOW_END_TZ_CLASS:\r\n                labelText = this.parent.editorTitles.endTimezone;\r\n                break;\r\n            case cls.EVENT_WINDOW_REPEAT_CLASS:\r\n                labelText = this.parent.editorTitles.recurrenceRule;\r\n                break;\r\n            case cls.EVENT_WINDOW_ALL_DAY_CLASS:\r\n                labelText = this.parent.editorTitles.isAllDay;\r\n                break;\r\n            case cls.TIME_ZONE_CLASS:\r\n                labelText = this.l10n.getConstant('timezone');\r\n                break;\r\n        }\r\n        return labelText;\r\n    };\r\n    EventWindow.prototype.onChange = function (args) {\r\n        var target = (args.event.target);\r\n        if (target.classList.contains(cls.EVENT_WINDOW_ALL_DAY_CLASS)) {\r\n            this.onAllDayChange(args.checked);\r\n        }\r\n        else if (target.classList.contains(cls.TIME_ZONE_CLASS)) {\r\n            this.timezoneChangeStyle(args.checked);\r\n        }\r\n        else if (target.classList.contains(cls.EVENT_WINDOW_REPEAT_CLASS)) {\r\n            this.onRepeatChange(args.checked);\r\n        }\r\n    };\r\n    EventWindow.prototype.renderRepeatDialog = function () {\r\n        var element = createElement('div');\r\n        this.repeatDialogObject = new Dialog({\r\n            header: this.l10n.getConstant('recurrence'),\r\n            visible: false,\r\n            content: '<div class=\"e-rec-editor\"></div>',\r\n            closeOnEscape: true,\r\n            width: '90%',\r\n            buttons: [{\r\n                    click: this.repeatSaveDialog.bind(this),\r\n                    buttonModel: { content: this.l10n.getConstant('save'), cssClass: 'e-save', isPrimary: true }\r\n                },\r\n                { click: this.repeatCancelDialog.bind(this), buttonModel: { cssClass: 'e-cancel', content: this.l10n.getConstant('cancel') } }],\r\n            target: this.element,\r\n            animationSettings: { effect: 'Zoom' },\r\n            enableRtl: this.parent.enableRtl,\r\n            isModal: true,\r\n            cssClass: REPEAT_DIALOG_CLASS,\r\n            open: this.repeatOpenDialog.bind(this)\r\n        });\r\n        this.element.appendChild(element);\r\n        this.repeatDialogObject.appendTo(element);\r\n        this.repeatDialogObject.isStringTemplate = true;\r\n        this.createRecurrenceEditor(this.repeatDialogObject.element.querySelector('.e-rec-editor'));\r\n    };\r\n    EventWindow.prototype.loadRecurrenceEditor = function () {\r\n        this.repeatDialogObject.show();\r\n        if (this.recurrenceEditor && this.repeatRule) {\r\n            this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\r\n        }\r\n    };\r\n    EventWindow.prototype.onRepeatChange = function (state) {\r\n        if (state) {\r\n            if (!this.repeatDialogObject) {\r\n                this.renderRepeatDialog();\r\n            }\r\n            this.recurrenceEditor.setProperties({ startDate: this.repeatStartDate, selectedType: 0 });\r\n            this.loadRecurrenceEditor();\r\n        }\r\n        else {\r\n            if (this.repeatDialogObject) {\r\n                this.repeatDialogObject.hide();\r\n            }\r\n            this.repeatRule = '';\r\n            if (this.recurrenceEditor) {\r\n                this.recurrenceEditor.setRecurrenceRule(this.repeatRule);\r\n                this.updateRepeatLabel(this.repeatRule);\r\n            }\r\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\r\n            addClass([element], HIDE_STYLE_CLASS);\r\n        }\r\n    };\r\n    EventWindow.prototype.repeatSaveDialog = function () {\r\n        this.repeatRule = this.recurrenceEditor.getRecurrenceRule();\r\n        var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\r\n        if (this.recurrenceEditor.getRecurrenceRule()) {\r\n            removeClass([element], HIDE_STYLE_CLASS);\r\n        }\r\n        else {\r\n            addClass([element], HIDE_STYLE_CLASS);\r\n            this.repeatStatus.setProperties({ checked: false });\r\n        }\r\n        this.updateRepeatLabel(this.repeatRule);\r\n        this.closeRepeatDialog();\r\n    };\r\n    EventWindow.prototype.closeRepeatDialog = function () {\r\n        this.repeatDialogObject.hide();\r\n    };\r\n    EventWindow.prototype.repeatCancelDialog = function () {\r\n        this.closeRepeatDialog();\r\n        if (this.recurrenceEditor) {\r\n            this.recurrenceEditor.setRecurrenceRule(this.repeatTempRule);\r\n        }\r\n        if (!this.repeatTempRule) {\r\n            this.repeatStatus.setProperties({ checked: false });\r\n        }\r\n    };\r\n    EventWindow.prototype.repeatOpenDialog = function () {\r\n        this.repeatTempRule = this.recurrenceEditor.getRecurrenceRule();\r\n    };\r\n    EventWindow.prototype.onCellDetailsUpdate = function (eventObj, repeatType) {\r\n        if (!this.parent.eventSettings.allowAdding) {\r\n            return;\r\n        }\r\n        this.element.querySelector('.' + cls.FORM_CLASS).removeAttribute('data-id');\r\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('newEvent');\r\n        eventObj.Timezone = false;\r\n        this.repeatStartDate = eventObj[this.fields.startTime];\r\n        this.repeatRule = '';\r\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.subject.default)) {\r\n            eventObj[this.fields.subject] = this.parent.eventSettings.fields.subject.default;\r\n        }\r\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.location.default)) {\r\n            eventObj[this.fields.location] = this.parent.eventSettings.fields.location.default;\r\n        }\r\n        if (!isNullOrUndefined(this.parent.eventSettings.fields.description.default)) {\r\n            eventObj[this.fields.description] = this.parent.eventSettings.fields.description.default;\r\n        }\r\n        this.showDetails(eventObj);\r\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\r\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\r\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\r\n        }\r\n        var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\r\n        if (deleteButton) {\r\n            addClass([deleteButton], cls.DISABLE_CLASS);\r\n        }\r\n        if (this.recurrenceEditor) {\r\n            this.recurrenceEditor.setProperties({\r\n                startDate: eventObj[this.fields.startTime],\r\n                selectedType: !isNullOrUndefined(repeatType) ? repeatType : !isNullOrUndefined(eventObj[this.fields.recurrenceRule]) ?\r\n                    this.recurrenceEditor.selectedType : 0\r\n            });\r\n        }\r\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\r\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\r\n            addClass([element], HIDE_STYLE_CLASS);\r\n            this.updateRepeatLabel(this.repeatRule);\r\n        }\r\n        else {\r\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\r\n            this.disableButton(saveButton, false);\r\n        }\r\n        this.dialogObject.show();\r\n    };\r\n    EventWindow.prototype.convertToEventData = function (cellsData, eventObj) {\r\n        if (cellsData.subject) {\r\n            eventObj[this.fields.subject] = cellsData.subject;\r\n        }\r\n        eventObj[this.fields.startTime] = cellsData.startTime;\r\n        eventObj[this.fields.endTime] = cellsData.endTime;\r\n        eventObj[this.fields.isAllDay] = cellsData.isAllDay;\r\n        if (cellsData.RecurrenceRule) {\r\n            eventObj[this.fields.recurrenceRule] = cellsData.RecurrenceRule;\r\n        }\r\n        if (this.parent.resourceCollection.length > 0 || this.parent.activeViewOptions.group.resources.length > 0) {\r\n            this.parent.resourceBase.setResourceValues(eventObj);\r\n        }\r\n    };\r\n    EventWindow.prototype.applyFormValidation = function () {\r\n        var getValidationRule = function (rules) { return (rules && Object.keys(rules).length > 0) ? rules : undefined; };\r\n        var form = this.element.querySelector('.' + cls.FORM_CLASS);\r\n        var rules = {};\r\n        rules[this.parent.eventSettings.fields.subject.name] = getValidationRule(this.parent.eventSettings.fields.subject.validation);\r\n        rules[this.parent.eventSettings.fields.location.name] = getValidationRule(this.parent.eventSettings.fields.location.validation);\r\n        rules[this.parent.eventSettings.fields.startTime.name] = getValidationRule(this.parent.eventSettings.fields.startTime.validation);\r\n        rules[this.parent.eventSettings.fields.endTime.name] = getValidationRule(this.parent.eventSettings.fields.endTime.validation);\r\n        rules[this.parent.eventSettings.fields.description.name] =\r\n            getValidationRule(this.parent.eventSettings.fields.description.validation);\r\n        this.fieldValidator.renderFormValidator(form, rules, this.element);\r\n    };\r\n    EventWindow.prototype.showDetails = function (eventData) {\r\n        var eventObj = extend({}, eventData, null, true);\r\n        if (eventObj[this.fields.endTime].getHours() === 0 && eventObj[this.fields.endTime].getMinutes() === 0) {\r\n            this.trimAllDay(eventObj);\r\n        }\r\n        this.eventData = eventObj;\r\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\r\n        var keyNames = Object.keys(eventObj);\r\n        for (var _i = 0, formelement_1 = formelement; _i < formelement_1.length; _i++) {\r\n            var curElement = formelement_1[_i];\r\n            var columnName = curElement.name || this.getColumnName(curElement);\r\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\r\n                if (keyNames.indexOf(columnName) !== -1) {\r\n                    this.setValueToElement(curElement, eventObj[columnName]);\r\n                }\r\n                else {\r\n                    this.setDefaultValueToElement(curElement);\r\n                }\r\n            }\r\n        }\r\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\r\n            this.onAllDayChange(eventObj[this.fields.isAllDay]);\r\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\r\n            if (!(isNullOrUndefined(eventObj[this.fields.startTimezone]) && isNullOrUndefined(eventObj[this.fields.endTimezone]))) {\r\n                timezoneObj.checked = true;\r\n                timezoneObj.dataBind();\r\n            }\r\n            this.timezoneChangeStyle(timezoneObj.checked);\r\n            delete eventObj.Timezone;\r\n        }\r\n    };\r\n    EventWindow.prototype.getColumnName = function (element) {\r\n        var attrName = element.getAttribute('data-name') || '';\r\n        if (attrName === '') {\r\n            var isDropDowns = false;\r\n            var fieldSelector = '';\r\n            if (element.classList.contains('e-dropdownlist')) {\r\n                fieldSelector = 'e-ddl';\r\n                isDropDowns = true;\r\n            }\r\n            else if (element.classList.contains('e-multiselect')) {\r\n                fieldSelector = 'e-multiselect';\r\n                isDropDowns = true;\r\n            }\r\n            else if (element.classList.contains('e-datetimepicker')) {\r\n                fieldSelector = 'e-datetimepicker';\r\n            }\r\n            else if (element.classList.contains('e-datepicker')) {\r\n                fieldSelector = 'e-datepicker';\r\n            }\r\n            else if (element.classList.contains('e-checkbox')) {\r\n                fieldSelector = 'e-checkbox';\r\n            }\r\n            var classSelector = isDropDowns ? \".\" + fieldSelector + \":not(.e-control)\" : \".\" + fieldSelector;\r\n            var control = closest(element, classSelector) || element.querySelector(\".\" + fieldSelector);\r\n            if (control) {\r\n                var attrEle = control.querySelector('[name]');\r\n                if (attrEle) {\r\n                    attrName = attrEle.name;\r\n                }\r\n            }\r\n        }\r\n        return attrName;\r\n    };\r\n    EventWindow.prototype.onAllDayChange = function (allDayStatus) {\r\n        var startObj = this.getInstance(cls.EVENT_WINDOW_START_CLASS);\r\n        var endObj = this.getInstance(cls.EVENT_WINDOW_END_CLASS);\r\n        var timezoneDiv = this.element.querySelector('.e-time-zone-container');\r\n        var format;\r\n        if (allDayStatus) {\r\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') : this.parent.dateFormat;\r\n            addClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\r\n            addClass([timezoneDiv], cls.DISABLE_CLASS);\r\n            if (this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)) {\r\n                removeClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\r\n            }\r\n            startObj.format = endObj.format = format;\r\n        }\r\n        else {\r\n            format = (isNullOrUndefined(this.parent.dateFormat)) ? this.getFormat('dateFormats') + ' ' + this.getFormat('timeFormats') :\r\n                this.parent.dateFormat + ' ' + this.getFormat('timeFormats');\r\n            removeClass(this.element.querySelectorAll('.e-time-icon'), cls.EVENT_WINDOW_ICON_DISABLE_CLASS);\r\n            removeClass([timezoneDiv], cls.DISABLE_CLASS);\r\n            if (this.element.querySelector('.e-checkbox-wrapper .e-time-zone').checked) {\r\n                addClass([this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS)], cls.ENABLE_CLASS);\r\n            }\r\n            startObj.format = endObj.format = format;\r\n        }\r\n        if (this.cellClickAction) {\r\n            this.updateDateTime(allDayStatus, startObj, endObj);\r\n        }\r\n        startObj.dataBind();\r\n        endObj.dataBind();\r\n        if (!isNullOrUndefined(this.recurrenceEditor)) {\r\n            this.recurrenceEditor.updateRuleUntilDate(startObj.value);\r\n        }\r\n    };\r\n    EventWindow.prototype.updateDateTime = function (allDayStatus, startObj, endObj) {\r\n        var startDate;\r\n        var endDate;\r\n        if (allDayStatus) {\r\n            startDate = util.resetTime(new Date(this.eventWindowTime.startTime.getTime()));\r\n            if (this.parent.activeCellsData.isAllDay) {\r\n                var temp = util.addDays(new Date(this.eventWindowTime.endTime.getTime()), -1).getTime();\r\n                endDate = (+this.eventWindowTime.startTime > temp) ? this.eventWindowTime.endTime : new Date(temp);\r\n            }\r\n            else {\r\n                endDate = util.resetTime(new Date(this.eventWindowTime.endTime.getTime()));\r\n            }\r\n        }\r\n        else {\r\n            var start = this.parent.activeCellsData.startTime;\r\n            startDate = new Date(this.eventWindowTime.startTime.getTime());\r\n            startDate.setHours(start.getHours(), start.getMinutes(), start.getSeconds());\r\n            if (this.parent.activeCellsData.isAllDay) {\r\n                var startHour = this.parent.getStartEndTime(this.parent.workHours.start);\r\n                startDate.setHours(startHour.getHours(), startHour.getMinutes(), startHour.getSeconds());\r\n                endDate = new Date(startDate.getTime());\r\n                endDate.setMilliseconds(util.MS_PER_MINUTE * this.getSlotDuration());\r\n            }\r\n            else {\r\n                endDate = new Date(startDate.getTime());\r\n                endDate.setMilliseconds(this.parent.activeCellsData.endTime.getTime() - this.parent.activeCellsData.startTime.getTime());\r\n            }\r\n        }\r\n        this.eventWindowTime = { startTime: new Date(startDate.getTime()), endTime: new Date(endDate.getTime()) };\r\n        startObj.value = startDate;\r\n        endObj.value = endDate;\r\n        startObj.dataBind();\r\n        endObj.dataBind();\r\n    };\r\n    EventWindow.prototype.getFormat = function (formatType) {\r\n        if (isBlazor()) {\r\n            if (formatType === 'dateFormats') {\r\n                return IntlBase.compareBlazorDateFormats({ skeleton: 'd' }, this.parent.locale).format;\r\n            }\r\n            return IntlBase.compareBlazorDateFormats({ skeleton: 't' }, this.parent.locale).format;\r\n        }\r\n        var format;\r\n        if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\r\n            format = getValue(formatType + '.short', getDefaultDateObject(this.parent.getCalendarMode()));\r\n        }\r\n        else {\r\n            format = getValue(\r\n            // tslint:disable-next-line:max-line-length\r\n            'main.' + '' + this.parent.locale + '.dates.calendars.' + this.parent.getCalendarMode() + '.' + formatType + '.short', cldrData);\r\n        }\r\n        return format;\r\n    };\r\n    EventWindow.prototype.onEventDetailsUpdate = function (eventObj) {\r\n        if (!this.parent.eventSettings.allowEditing) {\r\n            return;\r\n        }\r\n        if (!this.parent.isAdaptive) {\r\n            removeClass([this.element.querySelector('.' + cls.DELETE_EVENT_CLASS)], cls.DISABLE_CLASS);\r\n        }\r\n        this.element.querySelector('.' + cls.EVENT_WINDOW_TITLE_TEXT_CLASS).innerHTML = this.l10n.getConstant('editEvent');\r\n        this.element.querySelector('.' + cls.FORM_CLASS).setAttribute('data-id', eventObj[this.fields.id].toString());\r\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\r\n            eventObj = extend({}, eventObj, null, true);\r\n            var timezoneObj = this.getInstance(cls.TIME_ZONE_CLASS + '.' + EVENT_FIELD);\r\n            var timezoneValue = void 0;\r\n            if (eventObj[this.fields.startTimezone] || eventObj[this.fields.endTimezone]) {\r\n                timezoneValue = true;\r\n                this.parent.eventBase.timezoneConvert(eventObj);\r\n            }\r\n            else {\r\n                timezoneValue = false;\r\n            }\r\n            eventObj.Timezone = timezoneValue;\r\n            timezoneObj.checked = timezoneValue;\r\n            timezoneObj.dataBind();\r\n        }\r\n        this.showDetails(eventObj);\r\n        if (eventObj[this.fields.recurrenceRule] && this.recurrenceEditor) {\r\n            this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\r\n        }\r\n        else if (!this.parent.isAdaptive && this.recurrenceEditor) {\r\n            this.recurrenceEditor.setProperties({ startDate: eventObj[this.fields.startTime] });\r\n            this.recurrenceEditor.setRecurrenceRule('');\r\n        }\r\n        this.repeatStartDate = eventObj[this.fields.startTime];\r\n        this.repeatRule = '';\r\n        if (eventObj[this.fields.recurrenceRule]) {\r\n            if (this.recurrenceEditor) {\r\n                this.recurrenceEditor.setRecurrenceRule(eventObj[this.fields.recurrenceRule], eventObj[this.fields.startTime]);\r\n            }\r\n            this.repeatRule = eventObj[this.fields.recurrenceRule];\r\n        }\r\n        if (this.parent.isAdaptive && isNullOrUndefined(this.parent.editorTemplate)) {\r\n            var element = this.element.querySelector('.' + REPEAT_CONTAINER_CLASS);\r\n            if (eventObj[this.fields.recurrenceRule]) {\r\n                removeClass([element], HIDE_STYLE_CLASS);\r\n                this.repeatStatus.setProperties({ checked: true });\r\n            }\r\n            else {\r\n                addClass([element], HIDE_STYLE_CLASS);\r\n                this.repeatStatus.setProperties({ checked: false });\r\n            }\r\n            this.updateRepeatLabel(this.repeatRule);\r\n        }\r\n        var isDisable = (this.parent.readonly || eventObj[this.fields.isReadonly]);\r\n        if (!this.parent.isAdaptive) {\r\n            var saveButton = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_BUTTON_CLASS);\r\n            var deleteButton = this.element.querySelector('.' + cls.DELETE_EVENT_CLASS);\r\n            this.disableButton(saveButton, isDisable);\r\n            this.disableButton(deleteButton, isDisable);\r\n        }\r\n        else {\r\n            var saveIcon = this.element.querySelector('.' + cls.EVENT_WINDOW_SAVE_ICON_CLASS);\r\n            if (saveIcon) {\r\n                if (isDisable) {\r\n                    addClass([saveIcon], cls.ICON_DISABLE_CLASS);\r\n                }\r\n                else {\r\n                    removeClass([saveIcon], cls.ICON_DISABLE_CLASS);\r\n                }\r\n            }\r\n        }\r\n        this.dialogObject.show();\r\n    };\r\n    EventWindow.prototype.disableButton = function (element, value) {\r\n        if (element) {\r\n            element.ej2_instances[0].disabled = value;\r\n        }\r\n    };\r\n    EventWindow.prototype.renderRecurrenceEditor = function () {\r\n        return new RecurrenceEditor({\r\n            calendarMode: this.parent.calendarMode,\r\n            cssClass: this.parent.cssClass,\r\n            dateFormat: this.parent.dateFormat,\r\n            enableRtl: this.parent.enableRtl,\r\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\r\n            locale: this.parent.locale\r\n        });\r\n    };\r\n    EventWindow.prototype.updateMinMaxDateToEditor = function () {\r\n        var startDate = this.element.querySelector('.e-start');\r\n        var endDate = this.element.querySelector('.e-end');\r\n        if (startDate && endDate) {\r\n            var startObj = startDate.ej2_instances[0];\r\n            var endObj = endDate.ej2_instances[0];\r\n            startObj.min = this.parent.minDate;\r\n            startObj.max = this.parent.maxDate;\r\n            endObj.min = this.parent.minDate;\r\n            endObj.max = this.parent.maxDate;\r\n            startObj.dataBind();\r\n            endObj.dataBind();\r\n        }\r\n        if (this.recurrenceEditor) {\r\n            var untilDate = this.recurrenceEditor.element.querySelector('.e-until-date');\r\n            if (untilDate) {\r\n                var untilObj = untilDate.ej2_instances[0];\r\n                untilObj.min = this.parent.minDate;\r\n                untilObj.max = this.parent.maxDate;\r\n                untilObj.dataBind();\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.updateRepeatLabel = function (repeatRule) {\r\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\r\n            this.renderRepeatDialog();\r\n        }\r\n        var data = repeatRule ?\r\n            (this.l10n.getConstant('repeats') + ' ' + this.recurrenceEditor.getRuleSummary(repeatRule)) : this.l10n.getConstant('repeat');\r\n        this.repeatStatus.setProperties({ label: data });\r\n    };\r\n    EventWindow.prototype.dialogClose = function () {\r\n        this.isCrudAction = false;\r\n        this.parent.activeEventData = { event: undefined, element: undefined };\r\n        this.parent.currentAction = null;\r\n        this.dialogObject.hide();\r\n    };\r\n    EventWindow.prototype.resetForm = function () {\r\n        this.fieldValidator.destroyToolTip();\r\n        this.resetFormFields();\r\n        if (!this.parent.isAdaptive && this.recurrenceEditor && !this.recurrenceEditor.isDestroyed) {\r\n            this.recurrenceEditor.resetFields();\r\n        }\r\n    };\r\n    EventWindow.prototype.timezoneChangeStyle = function (value) {\r\n        var timezoneDiv = this.element.querySelector('.' + cls.EVENT_WINDOW_TIME_ZONE_DIV_CLASS);\r\n        var localTimezoneName = this.parent.tzModule.getLocalTimezoneName();\r\n        if (value) {\r\n            addClass([timezoneDiv], cls.ENABLE_CLASS);\r\n            var startTimezoneObj = this.getInstance(cls.EVENT_WINDOW_START_TZ_CLASS);\r\n            var endTimezoneObj = this.getInstance(cls.EVENT_WINDOW_END_TZ_CLASS);\r\n            var timezone = startTimezoneObj.dataSource;\r\n            if (!startTimezoneObj.value || !this.parent.timezone) {\r\n                var found = timezone.some(function (tz) { return tz.Value === localTimezoneName; });\r\n                if (!found) {\r\n                    timezone.push({ Value: localTimezoneName, Text: localTimezoneName });\r\n                    startTimezoneObj.dataSource = timezone;\r\n                    endTimezoneObj.dataSource = timezone;\r\n                    startTimezoneObj.dataBind();\r\n                    endTimezoneObj.dataBind();\r\n                }\r\n            }\r\n            startTimezoneObj.value = startTimezoneObj.value || this.parent.timezone || localTimezoneName;\r\n            endTimezoneObj.value = endTimezoneObj.value || this.parent.timezone || localTimezoneName;\r\n            startTimezoneObj.dataBind();\r\n            endTimezoneObj.dataBind();\r\n        }\r\n        else {\r\n            removeClass([timezoneDiv], cls.ENABLE_CLASS);\r\n        }\r\n    };\r\n    EventWindow.prototype.resetFormFields = function () {\r\n        var formElement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\r\n        for (var _i = 0, formElement_1 = formElement; _i < formElement_1.length; _i++) {\r\n            var currentElement = formElement_1[_i];\r\n            var columnName = currentElement.name || this.getColumnName(currentElement);\r\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\r\n                this.setDefaultValueToElement(currentElement);\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.eventSave = function (alert) {\r\n        var formElement = this.element.querySelector('.' + cls.FORM_CLASS);\r\n        if (formElement && formElement.classList.contains('e-formvalidator') &&\r\n            !formElement.ej2_instances[0].validate()) {\r\n            return;\r\n        }\r\n        var dataCollection = this.getEventDataFromEditor();\r\n        if (this.processEventValidation(dataCollection.tempData, alert)) {\r\n            return;\r\n        }\r\n        this.eventCrudData = dataCollection.eventData;\r\n        this.isCrudAction = true;\r\n        this.dialogObject.hide();\r\n    };\r\n    EventWindow.prototype.getEventDataFromEditor = function () {\r\n        var eventObj = extend({}, this.getObjectFromFormData(cls.EVENT_WINDOW_DIALOG_CLASS));\r\n        if (!eventObj.Timezone) {\r\n            eventObj[this.fields.startTimezone] = null;\r\n            eventObj[this.fields.endTimezone] = null;\r\n        }\r\n        delete eventObj.Timezone;\r\n        delete eventObj.Repeat;\r\n        this.setDefaultValueToObject(eventObj);\r\n        eventObj[this.fields.recurrenceRule] = this.recurrenceEditor ? this.recurrenceEditor.getRecurrenceRule() || null : undefined;\r\n        var tempObj = extend({}, eventObj, null, true);\r\n        if (eventObj[this.fields.isAllDay]) {\r\n            eventObj[this.fields.startTime] = (isNullOrUndefined(eventObj[this.fields.startTime])) ? null\r\n                : util.resetTime(new Date(eventObj[this.fields.startTime].getTime()));\r\n            eventObj[this.fields.endTime] = (isNullOrUndefined(eventObj[this.fields.endTime])) ? null\r\n                : util.addDays(util.resetTime(new Date(eventObj[this.fields.endTime].getTime())), 1);\r\n        }\r\n        return { eventData: eventObj, tempData: tempObj };\r\n    };\r\n    EventWindow.prototype.processEventValidation = function (eventObj, alert) {\r\n        var alertType;\r\n        if (isNullOrUndefined(this.parent.editorTemplate)) {\r\n            if (!eventObj[this.fields.startTime] || !eventObj[this.fields.endTime]) {\r\n                this.parent.quickPopup.openValidationError('invalidDateError');\r\n                return true;\r\n            }\r\n            if (eventObj[this.fields.startTime] > eventObj[this.fields.endTime]) {\r\n                this.parent.quickPopup.openValidationError('startEndError');\r\n                return true;\r\n            }\r\n        }\r\n        if (this.recurrenceEditor && this.recurrenceEditor.value && this.recurrenceEditor.value !== '') {\r\n            alertType = this.recurrenceValidation(eventObj[this.fields.startTime], eventObj[this.fields.endTime], alert);\r\n            var isShowAlert = true;\r\n            if (alertType === 'seriesChangeAlert' && this.parent.uiStateValues.isIgnoreOccurrence) {\r\n                isShowAlert = false;\r\n            }\r\n            if (!isNullOrUndefined(alertType) && isShowAlert\r\n                && ((!this.parent.enableRecurrenceValidation && alertType === 'wrongPattern') || this.parent.enableRecurrenceValidation)) {\r\n                this.parent.quickPopup.openRecurrenceValidationAlert(alertType);\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    EventWindow.prototype.processCrudActions = function (eventObj) {\r\n        var _this = this;\r\n        this.parent.uiStateValues.isBlock = false;\r\n        var resourceData = this.getResourceData(eventObj);\r\n        var isResourceEventExpand = (this.parent.activeViewOptions.group.resources.length > 0 ||\r\n            this.parent.resourceCollection.length > 0) && !this.parent.activeViewOptions.group.allowGroupEdit\r\n            && !isNullOrUndefined(resourceData);\r\n        var eventId = this.getEventIdFromForm();\r\n        if (!isNullOrUndefined(eventId)) {\r\n            var eveId_1 = this.parent.eventBase.getEventIDType() === 'string' ? eventId : parseInt(eventId, 10);\r\n            var editedData = this.parent.eventsData.filter(function (data) {\r\n                return data[_this.fields.id] === eveId_1;\r\n            })[0];\r\n            if (isNullOrUndefined(editedData)) {\r\n                editedData = this.parent.blockData.filter(function (data) {\r\n                    return data[_this.fields.id] === eveId_1;\r\n                })[0];\r\n            }\r\n            eventObj = extend({}, editedData, eventObj);\r\n            if (eventObj[this.fields.isReadonly]) {\r\n                return false;\r\n            }\r\n            var currentAction = void 0;\r\n            if (!isNullOrUndefined(editedData[this.fields.recurrenceRule])) {\r\n                currentAction = this.parent.currentAction;\r\n                eventObj.Guid = this.parent.activeEventData.event.Guid;\r\n                if (this.parent.currentAction === 'EditOccurrence') {\r\n                    if (!eventObj[this.fields.recurrenceID]) {\r\n                        eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\r\n                        eventObj.Guid = this.parent.activeEventData.event.Guid;\r\n                    }\r\n                    else {\r\n                        eveId_1 = eventObj[this.fields.recurrenceID];\r\n                        currentAction = null;\r\n                    }\r\n                    if (this.parent.enableRecurrenceValidation && this.editOccurrenceValidation(eveId_1, eventObj)) {\r\n                        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\r\n                        return true;\r\n                    }\r\n                }\r\n                if (this.parent.currentAction === 'EditSeries' || eventObj[this.fields.id] !== editedData[this.fields.id]) {\r\n                    eventObj[this.fields.recurrenceID] = editedData[this.fields.id];\r\n                }\r\n                else if (this.parent.currentAction === 'EditFollowingEvents') {\r\n                    eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\r\n                    eventObj[this.fields.followingID] = editedData[this.fields.id];\r\n                }\r\n            }\r\n            if (isResourceEventExpand) {\r\n                this.resourceSaveEvent(eventObj, 'Save', currentAction);\r\n            }\r\n            else {\r\n                this.parent.saveEvent(eventObj, currentAction);\r\n            }\r\n        }\r\n        else {\r\n            this.parent.currentAction = 'Add';\r\n            if (isResourceEventExpand) {\r\n                this.resourceSaveEvent(eventObj, this.parent.currentAction);\r\n            }\r\n            else {\r\n                eventObj[this.fields.id] = this.parent.eventBase.getEventMaxID();\r\n                this.parent.addEvent(eventObj);\r\n            }\r\n        }\r\n        return this.parent.uiStateValues.isBlock;\r\n    };\r\n    EventWindow.prototype.getResourceData = function (eventObj) {\r\n        var resourceData = null;\r\n        if (!isNullOrUndefined(this.parent.resourceBase) && !isNullOrUndefined(this.parent.resourceBase.resourceCollection)\r\n            && this.parent.resourceBase.resourceCollection.length > 0) {\r\n            var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\r\n            resourceData = eventObj[lastResouceData.field];\r\n        }\r\n        return resourceData;\r\n    };\r\n    EventWindow.prototype.getObjectFromFormData = function (className) {\r\n        var formElement = this.getFormElements(className);\r\n        var eventObj = {};\r\n        for (var _i = 0, formElement_2 = formElement; _i < formElement_2.length; _i++) {\r\n            var currentElement = formElement_2[_i];\r\n            var columnName = currentElement.name || this.getColumnName(currentElement);\r\n            if (!isNullOrUndefined(columnName) && columnName !== '') {\r\n                eventObj[columnName] = this.getValueFromElement(currentElement);\r\n            }\r\n        }\r\n        return eventObj;\r\n    };\r\n    EventWindow.prototype.setDefaultValueToObject = function (eventObj) {\r\n        if (!isNullOrUndefined(eventObj[this.fields.subject])) {\r\n            eventObj[this.fields.subject] = eventObj[this.fields.subject] || this.parent.eventSettings.fields.subject.default\r\n                || this.l10n.getConstant('addTitle');\r\n        }\r\n        if (!isNullOrUndefined(eventObj[this.fields.location])) {\r\n            eventObj[this.fields.location] = eventObj[this.fields.location] || this.parent.eventSettings.fields.location.default;\r\n        }\r\n        if (!isNullOrUndefined(eventObj[this.fields.description])) {\r\n            eventObj[this.fields.description] = eventObj[this.fields.description] || this.parent.eventSettings.fields.description.default;\r\n        }\r\n    };\r\n    EventWindow.prototype.recurrenceValidation = function (startDate, endDate, alert) {\r\n        var alertMessage;\r\n        var recEditor = this.recurrenceEditor;\r\n        var interval = this.getInstance('e-repeat-interval.e-numerictextbox').value;\r\n        if (alert !== this.l10n.getConstant('ok')) {\r\n            var activeEvent = this.parent.activeEventData.event;\r\n            var excludedEvents = [];\r\n            if ((this.parent.currentAction === 'EditSeries' || this.parent.currentAction === 'EditFollowingEvents')\r\n                && !isNullOrUndefined(activeEvent)) {\r\n                var eventStartTime = activeEvent[this.parent.eventFields.startTime];\r\n                var seriesEvents = this.parent.eventBase.getSeriesEvents(this.eventData, eventStartTime);\r\n                if (seriesEvents.length > 0) {\r\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences(seriesEvents, eventStartTime);\r\n                }\r\n                else {\r\n                    var event_2 = this.parent.eventBase.getEventById(activeEvent[this.parent.eventFields.id]);\r\n                    excludedEvents = this.parent.eventBase.getEditedOccurrences([event_2], eventStartTime);\r\n                }\r\n                if (this.parent.currentAction === 'EditSeries'\r\n                    && !isNullOrUndefined(this.eventData[this.parent.eventFields.recurrenceException])) {\r\n                    excludedEvents.push(this.eventData);\r\n                }\r\n            }\r\n            if (excludedEvents.length > 0) {\r\n                alertMessage = 'seriesChangeAlert';\r\n            }\r\n            if (this.getInstance('e-end-on-left .e-ddl .e-dropdownlist').value === 'until' &&\r\n                this.getInstance('e-end-on-date .e-datepicker').value < startDate) {\r\n                alertMessage = 'wrongPattern';\r\n            }\r\n            if (isNullOrUndefined(alertMessage)) {\r\n                switch (recEditor.value.split(';')[0].split('=')[1]) {\r\n                    case 'DAILY':\r\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= (interval * 24))) {\r\n                            alertMessage = 'createError';\r\n                        }\r\n                        break;\r\n                    case 'WEEKLY':\r\n                        var types = recEditor.value.split(';')[1].split('=')[1].split(',');\r\n                        var obj = { 'SU': 0, 'MO': 1, 'TU': 2, 'WE': 3, 'TH': 4, 'FR': 5, 'SA': 6 };\r\n                        var temp = [];\r\n                        var tempDiff = [];\r\n                        for (var index = 0; index < types.length * (interval + 1); index++) {\r\n                            temp[index] = (types.length > index) ? obj[types[index]] : temp[index - types.length] + (7 * interval);\r\n                        }\r\n                        var tempvalue = temp.sort(function (a, b) { return a - b; });\r\n                        for (var index = 1; index < tempvalue.length; index++) {\r\n                            tempDiff.push(tempvalue[index] - tempvalue[index - 1]);\r\n                        }\r\n                        if ((((endDate.getTime() - startDate.getTime()) / (1000 * 3600)) >= Math.min.apply(Math, tempDiff) * 24)\r\n                            || isNullOrUndefined(interval)) {\r\n                            alertMessage = 'createError';\r\n                        }\r\n                        break;\r\n                    case 'MONTHLY':\r\n                        if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\r\n                            alertMessage = 'createError';\r\n                        }\r\n                        break;\r\n                    case 'YEARLY':\r\n                        if (endDate.getTime() >= new Date(+startDate).setFullYear(startDate.getFullYear() + interval)) {\r\n                            alertMessage = 'createError';\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (endDate.getTime() >= new Date(+startDate).setMonth(startDate.getMonth() + interval)) {\r\n                alertMessage = 'createError';\r\n            }\r\n            if (isNullOrUndefined(alertMessage)) {\r\n                this.parent.quickPopup.quickDialog.hide();\r\n            }\r\n        }\r\n        return alertMessage;\r\n    };\r\n    EventWindow.prototype.getRecurrenceIndex = function (recColl, event) {\r\n        var recIndex;\r\n        for (var index = 0; index < recColl.length; index++) {\r\n            if (event[this.fields.startTime].valueOf() === recColl[index][this.fields.startTime].valueOf()) {\r\n                recIndex = index;\r\n                break;\r\n            }\r\n        }\r\n        return recIndex;\r\n    };\r\n    EventWindow.prototype.trimAllDay = function (data) {\r\n        if (data[this.fields.isAllDay]) {\r\n            var temp = util.addDays(new Date(+data[this.fields.endTime]), -1).getTime();\r\n            data[this.fields.endTime] = (+data[this.fields.startTime] > temp) ? data[this.fields.endTime] : new Date(temp);\r\n        }\r\n    };\r\n    EventWindow.prototype.editOccurrenceValidation = function (eventId, currentData, editData) {\r\n        var _this = this;\r\n        if (editData === void 0) {\r\n            editData = this.eventData;\r\n        }\r\n        var recurColl = this.parent.getOccurrencesByID(eventId);\r\n        var excludedDatas = this.parent.eventsData.filter(function (data) {\r\n            return data[_this.fields.recurrenceID] === eventId;\r\n        });\r\n        excludedDatas.map(function (data) { return recurColl.push(extend({}, data)); });\r\n        currentData = extend({}, currentData);\r\n        this.trimAllDay(currentData);\r\n        for (var _i = 0, recurColl_1 = recurColl; _i < recurColl_1.length; _i++) {\r\n            var data = recurColl_1[_i];\r\n            this.trimAllDay(data);\r\n        }\r\n        this.parent.eventBase.sortByTime(recurColl);\r\n        var index = this.getRecurrenceIndex(recurColl, editData);\r\n        if (isNullOrUndefined(index)) {\r\n            return false;\r\n        }\r\n        if (index === 0) {\r\n            if (!isNullOrUndefined(recurColl[index + 1])) {\r\n                return (!(new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\r\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)));\r\n            }\r\n            return false;\r\n        }\r\n        else {\r\n            if (index === recurColl.length - 1) {\r\n                if (!(new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\r\n                    new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0))) {\r\n                    return true;\r\n                }\r\n            }\r\n            else if (!((new Date(+recurColl[index - 1][this.fields.endTime]).setHours(0, 0, 0, 0) <\r\n                new Date(+currentData[this.fields.startTime]).setHours(0, 0, 0, 0)) &&\r\n                (new Date(+recurColl[index + 1][this.fields.startTime]).setHours(0, 0, 0, 0) >\r\n                    new Date(+currentData[this.fields.endTime]).setHours(0, 0, 0, 0)))) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    EventWindow.prototype.resourceSaveEvent = function (eventObj, action, currentAction) {\r\n        var _this = this;\r\n        var lastResouceData = this.parent.resourceBase.resourceCollection.slice(-1)[0];\r\n        var resourceData = eventObj[lastResouceData.field];\r\n        resourceData = (resourceData instanceof Array) ? resourceData : [resourceData];\r\n        var lastlevel = this.parent.resourceBase.lastResourceLevel;\r\n        var eventList = [];\r\n        var _loop_2 = function (i) {\r\n            var events = extend({}, eventObj, null, true);\r\n            events[this_2.fields.id] = this_2.parent.eventBase.getEventMaxID();\r\n            var temp = [];\r\n            var addValues = function () {\r\n                if (action === 'Save' && i === resourceData.length - 1) {\r\n                    if (temp.length > 0) {\r\n                        temp[0][_this.fields.id] = eventObj[_this.fields.id];\r\n                        for (var k = 1; k < temp.length; k++) {\r\n                            temp[k][_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\r\n                            eventList.push(temp[k]);\r\n                            _this.parent.saveEvent(temp[0], currentAction);\r\n                        }\r\n                    }\r\n                    else {\r\n                        events[_this.fields.id] = eventObj[_this.fields.id];\r\n                        _this.parent.saveEvent(events, currentAction);\r\n                    }\r\n                }\r\n                else {\r\n                    if (temp.length > 0) {\r\n                        for (var j = 0; j < temp.length; j++) {\r\n                            temp[j][_this.fields.id] = _this.parent.eventBase.getEventMaxID(j);\r\n                            eventList.push(temp[j]);\r\n                        }\r\n                    }\r\n                    else {\r\n                        events[_this.fields.id] = _this.parent.eventBase.getEventMaxID(i);\r\n                        eventList.push(events);\r\n                    }\r\n                }\r\n            };\r\n            if (this_2.parent.activeViewOptions.group.byGroupID && (!isNullOrUndefined(lastlevel))) {\r\n                var lastResource = lastResouceData.dataSource;\r\n                var resCol = this_2.parent.resourceCollection;\r\n                var index = void 0;\r\n                if (resCol.length > 1) {\r\n                    index =\r\n                        util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i], events, resCol);\r\n                }\r\n                else {\r\n                    index = util.findIndexInData(lastResource, lastResouceData.idField, resourceData[i]);\r\n                }\r\n                if (index < 0) {\r\n                    return { value: void 0 };\r\n                }\r\n                var groupId_1 = lastResource[index][lastResouceData.groupIDField];\r\n                var filter = lastlevel.filter(function (obj) { return obj.resourceData[lastResouceData.idField] === resourceData[i]; }).\r\n                    filter(function (obj) { return obj.resourceData[lastResouceData.groupIDField] === groupId_1; })[0];\r\n                var groupOrder = filter.groupOrder;\r\n                for (var index_1 = 0; index_1 < this_2.parent.resourceBase.resourceCollection.length; index_1++) {\r\n                    var field = this_2.parent.resourceBase.resourceCollection[index_1].field;\r\n                    events[field] = (groupOrder[index_1] instanceof Array) ? groupOrder[index_1][0] : groupOrder[index_1];\r\n                }\r\n                addValues();\r\n            }\r\n            else {\r\n                for (var index = 0; index < this_2.parent.resourceBase.resourceCollection.length - 1; index++) {\r\n                    var field = this_2.parent.resourceBase.resourceCollection[index].field;\r\n                    if (events[field] instanceof Array && events[field].length > 1) {\r\n                        for (var k = 0; k < events[field].length; k++) {\r\n                            var event_3 = extend({}, events, null, true);\r\n                            event_3[field] = eventObj[field][k];\r\n                            event_3[lastResouceData.field] = resourceData[i];\r\n                            temp.push(event_3);\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (temp.length === 0) {\r\n                            events[field] = (eventObj[field] instanceof Array) ?\r\n                                eventObj[field][0] : eventObj[field];\r\n                            events[lastResouceData.field] = resourceData[i];\r\n                        }\r\n                        else {\r\n                            for (var l = 0; l < temp.length; l++) {\r\n                                temp[l][field] = (eventObj[field] instanceof Array) ?\r\n                                    eventObj[field][0] : eventObj[field];\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                events[lastResouceData.field] = resourceData[i];\r\n                addValues();\r\n            }\r\n        };\r\n        var this_2 = this;\r\n        for (var i = 0; i < resourceData.length; i++) {\r\n            var state_1 = _loop_2(i);\r\n            if (typeof state_1 === \"object\")\r\n                return state_1.value;\r\n        }\r\n        if (eventList.length > 0) {\r\n            for (var _i = 0, eventList_1 = eventList; _i < eventList_1.length; _i++) {\r\n                var event_4 = eventList_1[_i];\r\n                event_4[this.fields.recurrenceException] = null;\r\n                event_4[this.fields.recurrenceID] = null;\r\n            }\r\n            this.parent.addEvent(eventList);\r\n        }\r\n    };\r\n    EventWindow.prototype.getEventIdFromForm = function () {\r\n        return this.element.querySelector('.' + cls.FORM_CLASS).getAttribute('data-id');\r\n    };\r\n    EventWindow.prototype.getFormElements = function (className) {\r\n        var elements = [];\r\n        if (className === cls.EVENT_WINDOW_DIALOG_CLASS) {\r\n            elements = [].slice.call(this.element.querySelectorAll('.' + EVENT_FIELD));\r\n        }\r\n        else {\r\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + className + ' .' + EVENT_FIELD));\r\n        }\r\n        if (!isBlazor()) {\r\n            return elements;\r\n        }\r\n        var validElements = [];\r\n        for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\r\n            var element = elements_1[_i];\r\n            if (element.classList.contains('e-control')) {\r\n                validElements.push(element);\r\n            }\r\n            else if (element.querySelector('.e-control')) {\r\n                validElements.push(element.querySelector('.e-control'));\r\n            }\r\n            else {\r\n                validElements.push(element);\r\n            }\r\n        }\r\n        return validElements;\r\n    };\r\n    EventWindow.prototype.getValueFromElement = function (element) {\r\n        var value;\r\n        if (element.classList.contains('e-datepicker')) {\r\n            value = element.ej2_instances[0].value;\r\n        }\r\n        else if (element.classList.contains('e-datetimepicker')) {\r\n            value = element.ej2_instances[0].value;\r\n        }\r\n        else if (element.classList.contains('e-dropdownlist')) {\r\n            value = element.ej2_instances[0].value;\r\n        }\r\n        else if (element.classList.contains('e-multiselect')) {\r\n            value = element.ej2_instances[0].value;\r\n        }\r\n        else if (element.classList.contains('e-checkbox')) {\r\n            value = element.ej2_instances[0].checked;\r\n        }\r\n        else {\r\n            if (element.type === 'checkbox') {\r\n                value = element.checked;\r\n            }\r\n            else {\r\n                value = SanitizeHtmlHelper.sanitize(element.value);\r\n            }\r\n        }\r\n        return value;\r\n    };\r\n    EventWindow.prototype.setValueToElement = function (element, value) {\r\n        if (element.classList.contains('e-datepicker')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = value;\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-datetimepicker')) {\r\n            var instance = element.ej2_instances[0];\r\n            if (instance.element.classList.contains(cls.EVENT_WINDOW_START_CLASS)) {\r\n                this.eventWindowTime.startTime = new Date('' + value);\r\n            }\r\n            else {\r\n                this.eventWindowTime.endTime = new Date('' + value);\r\n            }\r\n            instance.value = value;\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-dropdownlist')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = value;\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-multiselect')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = [];\r\n            instance.value = ((value instanceof Array) ? value : [value]);\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-checkbox')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.checked = value;\r\n            instance.dataBind();\r\n        }\r\n        else {\r\n            if (element.type !== 'checkbox') {\r\n                element.value = value || '';\r\n            }\r\n            else {\r\n                element.checked = value;\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.setDefaultValueToElement = function (element) {\r\n        if (element.classList.contains('e-datepicker')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = this.parent.getCurrentTime();\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-datetimepicker')) {\r\n            var instance = element.ej2_instances[0];\r\n            var dateValue = this.parent.getCurrentTime();\r\n            this.eventWindowTime = { startTime: dateValue, endTime: dateValue };\r\n            instance.value = dateValue;\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-dropdownlist')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = null;\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-multiselect')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.value = [];\r\n            instance.dataBind();\r\n        }\r\n        else if (element.classList.contains('e-checkbox')) {\r\n            var instance = element.ej2_instances[0];\r\n            instance.checked = false;\r\n            instance.dataBind();\r\n        }\r\n        else {\r\n            if (element.type === 'checkbox') {\r\n                element.checked = false;\r\n            }\r\n            else {\r\n                element.value = '';\r\n            }\r\n        }\r\n    };\r\n    EventWindow.prototype.getInstance = function (className) {\r\n        var element = this.element.querySelector('.' + className);\r\n        return element ? element.ej2_instances[0] : null;\r\n    };\r\n    EventWindow.prototype.eventDelete = function () {\r\n        switch (this.parent.currentAction) {\r\n            case 'EditOccurrence':\r\n                var fields = this.parent.eventFields;\r\n                if (!isNullOrUndefined(this.parent.activeEventData.event[fields.recurrenceRule])) {\r\n                    this.parent.currentAction = 'DeleteOccurrence';\r\n                }\r\n                else {\r\n                    this.parent.currentAction = 'Delete';\r\n                }\r\n                break;\r\n            case 'EditSeries':\r\n                this.parent.currentAction = 'DeleteSeries';\r\n                break;\r\n            case 'Save':\r\n                this.parent.currentAction = 'Delete';\r\n                break;\r\n        }\r\n        this.isCrudAction = false;\r\n        this.dialogObject.hide();\r\n        this.parent.quickPopup.openDeleteAlert();\r\n    };\r\n    EventWindow.prototype.getRecurrenceEditorInstance = function () {\r\n        if (this.parent.isAdaptive && !this.repeatDialogObject) {\r\n            this.renderRepeatDialog();\r\n        }\r\n        return this.recurrenceEditor;\r\n    };\r\n    EventWindow.prototype.destroyComponents = function () {\r\n        var formelement = this.getFormElements(cls.EVENT_WINDOW_DIALOG_CLASS);\r\n        for (var _i = 0, formelement_2 = formelement; _i < formelement_2.length; _i++) {\r\n            var element = formelement_2[_i];\r\n            var instance = void 0;\r\n            if (element.classList.contains('e-datetimepicker')) {\r\n                instance = element.ej2_instances;\r\n            }\r\n            else if (element.classList.contains('e-datepicker')) {\r\n                instance = element.ej2_instances;\r\n            }\r\n            else if (element.classList.contains('e-checkbox')) {\r\n                instance = element.ej2_instances;\r\n            }\r\n            else if (element.classList.contains('e-dropdownlist')) {\r\n                instance = element.ej2_instances;\r\n            }\r\n            else if (element.classList.contains('e-multiselect')) {\r\n                instance = element.ej2_instances;\r\n            }\r\n            if (instance && instance[0]) {\r\n                instance[0].destroy();\r\n            }\r\n        }\r\n        if (this.buttonObj) {\r\n            this.buttonObj.destroy();\r\n        }\r\n    };\r\n    /**\r\n     * To destroy the event window.\r\n     * @return {void}\r\n     * @private\r\n     */\r\n    EventWindow.prototype.destroy = function () {\r\n        if (!this.parent.isDestroyed) {\r\n            this.resetEditorTemplate();\r\n            this.updateEditorTemplate();\r\n            this.parent.resetTemplates(['editorTemplate']);\r\n        }\r\n        if (this.recurrenceEditor) {\r\n            this.recurrenceEditor.destroy();\r\n        }\r\n        this.destroyComponents();\r\n        this.fieldValidator.destroy();\r\n        if (this.repeatDialogObject) {\r\n            this.repeatDialogObject.destroy();\r\n            remove(this.repeatDialogObject.element);\r\n        }\r\n        if (this.dialogObject) {\r\n            this.dialogObject.destroy();\r\n            this.dialogObject = null;\r\n        }\r\n        if (this.element) {\r\n            remove(this.element);\r\n            this.element = null;\r\n        }\r\n    };\r\n    return EventWindow;\r\n}());\r\nexport { EventWindow };\r\n"]},"metadata":{},"sourceType":"module"}