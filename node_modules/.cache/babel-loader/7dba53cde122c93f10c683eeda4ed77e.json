{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, EventHandler, Internationalization, isBlazor } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, L10n } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\nimport { cldrData, getDefaultDateObject, rippleEffect } from '@syncfusion/ej2-base';\nimport { removeClass, detach, closest, addClass, attributes } from '@syncfusion/ej2-base';\nimport { getValue, getUniqueID, extend, Browser } from '@syncfusion/ej2-base';\nimport { Property, Event, isNullOrUndefined, throwError } from '@syncfusion/ej2-base'; //class constant defination.\n\nvar OTHERMONTH = 'e-other-month';\nvar OTHERDECADE = 'e-other-year';\nvar ROOT = 'e-calendar';\nvar DEVICE = 'e-device';\nvar HEADER = 'e-header';\nvar RTL = 'e-rtl';\nvar CONTENT = 'e-content';\nvar YEAR = 'e-year';\nvar MONTH = 'e-month';\nvar DECADE = 'e-decade';\nvar ICON = 'e-icons';\nvar PREVICON = 'e-prev';\nvar NEXTICON = 'e-next';\nvar PREVSPAN = 'e-date-icon-prev';\nvar NEXTSPAN = 'e-date-icon-next ';\nvar ICONCONTAINER = 'e-icon-container';\nvar DISABLED = 'e-disabled';\nvar OVERLAY = 'e-overlay';\nvar WEEKEND = 'e-weekend';\nvar WEEKNUMBER = 'e-week-number';\nvar SELECTED = 'e-selected';\nvar FOCUSEDDATE = 'e-focused-date';\nvar OTHERMONTHROW = 'e-month-hide';\nvar TODAY = 'e-today';\nvar TITLE = 'e-title';\nvar LINK = 'e-day';\nvar CELL = 'e-cell';\nvar WEEKHEADER = 'e-week-header';\nvar ZOOMIN = 'e-zoomin';\nvar FOOTER = 'e-footer-container';\nvar BTN = 'e-btn';\nvar FLAT = 'e-flat';\nvar CSS = 'e-css';\nvar PRIMARY = 'e-primary';\nvar DAYHEADERLONG = 'e-calendar-day-header-lg';\nvar dayMilliSeconds = 86400000;\nvar minutesMilliSeconds = 60000;\n/**\r\n *\r\n * @private\r\n */\n\nvar CalendarBase =\n/** @class */\nfunction (_super) {\n  __extends(CalendarBase, _super);\n  /**\r\n   * Initialized new instance of Calendar Class.\r\n   * Constructor for creating the widget\r\n   * @param  {CalendarModel} options?\r\n   * @param  {string|HTMLElement} element?\r\n   */\n\n\n  function CalendarBase(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.effect = '';\n    _this.isPopupClicked = false;\n    _this.isDateSelected = true;\n    _this.isTodayClicked = false;\n    _this.preventChange = false;\n    _this.isAngular = false;\n    return _this;\n  }\n  /**\r\n   * To Initialize the control rendering.\r\n   * @returns void\r\n   * @private\r\n   */\n\n\n  CalendarBase.prototype.render = function () {\n    this.rangeValidation(this.min, this.max);\n    this.calendarEleCopy = this.element.cloneNode(true);\n\n    if (this.calendarMode === 'Islamic') {\n      if (+this.min.setSeconds(0) === +new Date(1900, 0, 1, 0, 0, 0)) {\n        this.min = new Date(1944, 2, 18);\n      }\n\n      if (+this.max === +new Date(2099, 11, 31)) {\n        this.max = new Date(2069, 10, 16);\n      }\n    }\n\n    this.globalize = new Internationalization(this.locale);\n\n    if (isNullOrUndefined(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n      this.setProperties({\n        firstDayOfWeek: this.globalize.getFirstDayOfWeek()\n      }, true);\n    }\n\n    this.todayDisabled = false;\n    this.todayDate = new Date(new Date().setHours(0, 0, 0, 0));\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.classList.add(ROOT);\n\n      if (this.enableRtl) {\n        this.element.classList.add(RTL);\n      }\n\n      if (Browser.isDevice) {\n        this.element.classList.add(DEVICE);\n      }\n\n      attributes(this.element, {\n        'data-role': 'calendar'\n      });\n      this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\n      this.element.setAttribute('tabindex', this.tabIndex);\n    } else {\n      this.calendarElement = this.createElement('div');\n      this.calendarElement.classList.add(ROOT);\n\n      if (this.enableRtl) {\n        this.calendarElement.classList.add(RTL);\n      }\n\n      if (Browser.isDevice) {\n        this.calendarElement.classList.add(DEVICE);\n      }\n\n      attributes(this.calendarElement, {\n        'role': 'calendar'\n      });\n    }\n\n    this.createHeader();\n    this.createContent();\n    this.wireEvents();\n  };\n\n  CalendarBase.prototype.rangeValidation = function (min, max) {\n    if (isNullOrUndefined(min)) {\n      this.setProperties({\n        min: new Date(1900, 0, 1)\n      }, true);\n    }\n\n    if (isNullOrUndefined(max)) {\n      this.setProperties({\n        max: new Date(2099, 11, 31)\n      }, true);\n    }\n  };\n\n  CalendarBase.prototype.getDefaultKeyConfig = function () {\n    this.defaultKeyConfigs = {\n      controlUp: 'ctrl+38',\n      controlDown: 'ctrl+40',\n      moveDown: 'downarrow',\n      moveUp: 'uparrow',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      select: 'enter',\n      home: 'home',\n      end: 'end',\n      pageUp: 'pageup',\n      pageDown: 'pagedown',\n      shiftPageUp: 'shift+pageup',\n      shiftPageDown: 'shift+pagedown',\n      controlHome: 'ctrl+home',\n      controlEnd: 'ctrl+end',\n      altUpArrow: 'alt+uparrow',\n      spacebar: 'space',\n      altRightArrow: 'alt+rightarrow',\n      altLeftArrow: 'alt+leftarrow'\n    };\n    return this.defaultKeyConfigs;\n  };\n\n  CalendarBase.prototype.validateDate = function (value) {\n    this.setProperties({\n      min: this.checkDateValue(new Date(this.checkValue(this.min)))\n    }, true);\n    this.setProperties({\n      max: this.checkDateValue(new Date(this.checkValue(this.max)))\n    }, true);\n    this.currentDate = this.currentDate ? this.currentDate : new Date(new Date().setHours(0, 0, 0, 0));\n\n    if (!isNullOrUndefined(value) && this.min <= this.max && value >= this.min && value <= this.max) {\n      this.currentDate = new Date(this.checkValue(value));\n    }\n  };\n\n  CalendarBase.prototype.setOverlayIndex = function (popupWrapper, popupElement, modal, isDevice) {\n    if (isDevice && !isNullOrUndefined(popupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {\n      var index = parseInt(popupElement.style.zIndex, 10) ? parseInt(popupElement.style.zIndex, 10) : 1000;\n      modal.style.zIndex = (index - 1).toString();\n      popupWrapper.style.zIndex = index.toString();\n    }\n  };\n\n  CalendarBase.prototype.minMaxUpdate = function (value) {\n    if (!(+this.min <= +this.max)) {\n      this.setProperties({\n        min: this.min\n      }, true);\n      addClass([this.element], OVERLAY);\n    } else {\n      removeClass([this.element], OVERLAY);\n    }\n\n    this.min = isNullOrUndefined(this.min) || !+this.min ? this.min = new Date(1900, 0, 1) : this.min;\n    this.max = isNullOrUndefined(this.max) || !+this.max ? this.max = new Date(2099, 11, 31) : this.max;\n\n    if (+this.min <= +this.max && value && +value <= +this.max && +value >= +this.min) {\n      this.currentDate = new Date(this.checkValue(value));\n    } else {\n      if (+this.min <= +this.max && !value && +this.currentDate > +this.max) {\n        this.currentDate = new Date(this.checkValue(this.max));\n      } else {\n        if (+this.currentDate < +this.min) {\n          this.currentDate = new Date(this.checkValue(this.min));\n        }\n      }\n    }\n  };\n\n  CalendarBase.prototype.createHeader = function () {\n    var ariaPrevAttrs = {\n      'aria-disabled': 'false',\n      'aria-label': 'previous month'\n    };\n    var ariaNextAttrs = {\n      'aria-disabled': 'false',\n      'aria-label': 'next month'\n    };\n    var ariaTitleAttrs = {\n      'aria-atomic': 'true',\n      'aria-live': 'assertive',\n      'aria-label': 'title'\n    };\n    this.headerElement = this.createElement('div', {\n      className: HEADER\n    });\n    var iconContainer = this.createElement('div', {\n      className: ICONCONTAINER\n    });\n    this.previousIcon = this.createElement('button', {\n      className: '' + PREVICON,\n      attrs: {\n        type: 'button'\n      }\n    });\n    rippleEffect(this.previousIcon, {\n      duration: 400,\n      selector: '.e-prev',\n      isCenterRipple: true\n    });\n    attributes(this.previousIcon, ariaPrevAttrs);\n    this.nextIcon = this.createElement('button', {\n      className: '' + NEXTICON,\n      attrs: {\n        type: 'button'\n      }\n    });\n    rippleEffect(this.nextIcon, {\n      selector: '.e-next',\n      duration: 400,\n      isCenterRipple: true\n    });\n    attributes(this.nextIcon, ariaNextAttrs);\n    this.headerTitleElement = this.createElement('div', {\n      className: '' + LINK + ' ' + TITLE\n    });\n    attributes(this.headerTitleElement, ariaTitleAttrs);\n    this.headerElement.appendChild(this.headerTitleElement);\n    this.previousIcon.appendChild(this.createElement('span', {\n      className: '' + PREVSPAN + ' ' + ICON\n    }));\n    this.nextIcon.appendChild(this.createElement('span', {\n      className: '' + NEXTSPAN + ' ' + ICON\n    }));\n    iconContainer.appendChild(this.previousIcon);\n    iconContainer.appendChild(this.nextIcon);\n    this.headerElement.appendChild(iconContainer);\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.appendChild(this.headerElement);\n    } else {\n      this.calendarElement.appendChild(this.headerElement);\n    }\n\n    this.adjustLongHeaderSize();\n  };\n\n  CalendarBase.prototype.createContent = function () {\n    this.contentElement = this.createElement('div', {\n      className: CONTENT\n    });\n    this.table = this.createElement('table', {\n      attrs: {\n        tabIndex: '0',\n        'role': 'grid',\n        'aria-activedescendant': ''\n      }\n    });\n\n    if (this.getModuleName() === 'calendar') {\n      this.element.appendChild(this.contentElement);\n    } else {\n      this.calendarElement.appendChild(this.contentElement);\n    }\n\n    this.contentElement.appendChild(this.table);\n    this.createContentHeader();\n    this.createContentBody();\n\n    if (this.showTodayButton) {\n      this.createContentFooter();\n    }\n  };\n\n  CalendarBase.prototype.getCultureValues = function () {\n    var culShortNames = [];\n    var cldrObj;\n    var dayFormat = (isBlazor() ? 'days.' : 'days.stand-alone.') + this.dayHeaderFormat.toLowerCase();\n\n    if (this.locale === 'en' || this.locale === 'en-US') {\n      cldrObj = getValue(dayFormat, getDefaultDateObject());\n    } else {\n      cldrObj = this.getCultureObjects(cldrData, '' + this.locale);\n    }\n\n    for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\n      var obj = _a[_i];\n      culShortNames.push(getValue(obj, cldrObj));\n    }\n\n    return culShortNames;\n  };\n\n  CalendarBase.prototype.toCapitalize = function (text) {\n    return !isNullOrUndefined(text) && text.length ? text[0].toUpperCase() + text.slice(1) : text;\n  };\n\n  CalendarBase.prototype.createContentHeader = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content .e-week-header')[0])) {\n        detach(this.element.querySelectorAll('.e-content .e-week-header')[0]);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0])) {\n        detach(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0]);\n      }\n    }\n\n    var daysCount = 6;\n    var html = '';\n    var shortNames;\n\n    if (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\n      this.setProperties({\n        firstDayOfWeek: 0\n      }, true);\n    }\n\n    this.tableHeadElement = this.createElement('thead', {\n      className: WEEKHEADER\n    });\n\n    if (this.weekNumber) {\n      html += '<th class=\"e-week-number\"></th>';\n\n      if (this.getModuleName() === 'calendar') {\n        addClass([this.element], '' + WEEKNUMBER);\n      } else {\n        addClass([this.calendarElement], '' + WEEKNUMBER);\n      }\n    }\n\n    shortNames = this.shiftArray(this.getCultureValues().length > 0 && this.getCultureValues(), this.firstDayOfWeek);\n\n    for (var days = 0; days <= daysCount; days++) {\n      html += '<th  class=\"\">' + this.toCapitalize(shortNames[days]) + '</th>';\n    }\n\n    html = '<tr>' + html + '</tr>';\n    this.tableHeadElement.innerHTML = html;\n    this.table.appendChild(this.tableHeadElement);\n  };\n\n  CalendarBase.prototype.createContentBody = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content tbody')[0])) {\n        detach(this.element.querySelectorAll('.e-content tbody')[0]);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content tbody')[0])) {\n        detach(this.calendarElement.querySelectorAll('.e-content tbody')[0]);\n      }\n    }\n\n    switch (this.start) {\n      case 'Year':\n        this.renderYears();\n        break;\n\n      case 'Decade':\n        this.renderDecades();\n        break;\n\n      default:\n        this.renderMonths();\n    }\n  };\n\n  CalendarBase.prototype.updateFooter = function () {\n    this.todayElement.textContent = this.l10.getConstant('today');\n    this.todayElement.setAttribute('aria-label', this.l10.getConstant('today'));\n  };\n\n  CalendarBase.prototype.createContentFooter = function () {\n    if (this.showTodayButton) {\n      var minimum = new Date(+this.min);\n      var maximum = new Date(+this.max);\n      var l10nLocale = {\n        today: 'Today'\n      };\n      this.globalize = new Internationalization(this.locale);\n      this.l10 = new L10n(this.getModuleName(), l10nLocale, this.locale);\n      this.todayElement = this.createElement('button', {\n        attrs: {\n          role: 'button'\n        }\n      });\n      rippleEffect(this.todayElement);\n      this.updateFooter();\n      addClass([this.todayElement], [BTN, TODAY, FLAT, PRIMARY, CSS]);\n\n      if (!(+new Date(minimum.setHours(0, 0, 0, 0)) <= +this.todayDate && +this.todayDate <= +new Date(maximum.setHours(0, 0, 0, 0))) || this.todayDisabled) {\n        addClass([this.todayElement], DISABLED);\n      }\n\n      this.footer = this.createElement('div', {\n        className: FOOTER\n      });\n      this.footer.appendChild(this.todayElement);\n\n      if (this.getModuleName() === 'calendar') {\n        this.element.appendChild(this.footer);\n      }\n\n      if (this.getModuleName() === 'datepicker') {\n        this.calendarElement.appendChild(this.footer);\n      }\n\n      if (this.getModuleName() === 'datetimepicker') {\n        this.calendarElement.appendChild(this.footer);\n      }\n\n      if (!this.todayElement.classList.contains(DISABLED)) {\n        EventHandler.add(this.todayElement, 'click', this.todayButtonClick, this);\n      }\n    }\n  };\n\n  CalendarBase.prototype.wireEvents = function (id, ref, keyConfig, moduleName) {\n    if (!(isBlazor() && ref)) {\n      EventHandler.add(this.headerTitleElement, 'click', this.navigateTitle, this);\n      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);\n    } else {\n      this.element = document.getElementById(id);\n      this.defaultKeyConfigs = this.getDefaultKeyConfig();\n      this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\n      this.blazorRef = ref;\n      this.serverModuleName = moduleName;\n    }\n\n    if (this.getModuleName() === 'calendar') {\n      this.keyboardModule = new KeyboardEvents(this.element, {\n        eventName: 'keydown',\n        keyAction: this.keyActionHandle.bind(this),\n        keyConfigs: this.defaultKeyConfigs\n      });\n    } else {\n      this.keyboardModule = new KeyboardEvents(this.calendarElement, {\n        eventName: 'keydown',\n        keyAction: this.keyActionHandle.bind(this),\n        keyConfigs: this.defaultKeyConfigs\n      });\n    }\n  };\n\n  CalendarBase.prototype.dateWireEvents = function (id, ref, keyConfig, moduleName) {\n    this.defaultKeyConfigs = this.getDefaultKeyConfig();\n    this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\n    this.blazorRef = ref;\n    this.serverModuleName = moduleName;\n  };\n\n  CalendarBase.prototype.todayButtonClick = function (e, value, isCustomDate) {\n    if (this.showTodayButton) {\n      if (this.currentView() === this.depth) {\n        this.effect = '';\n      } else {\n        this.effect = 'e-zoomin';\n      }\n\n      if (this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n        this.navigateTo(this.depth, new Date(this.checkValue(value)), isCustomDate);\n      } else {\n        this.navigateTo('Month', new Date(this.checkValue(value)), isCustomDate);\n      }\n    }\n  };\n\n  CalendarBase.prototype.checkDeviceMode = function (ref) {\n    if (Browser.isDevice && isBlazor() && ref) {\n      // tslint:disable-next-line\n      ref.invokeMethodAsync('OnDevice', true);\n    }\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  CalendarBase.prototype.keyActionHandle = function (e, value, multiSelection) {\n    if (isBlazor() && this.blazorRef) {\n      e.preventDefault();\n\n      if (!this.tableBodyElement) {\n        this.element = closest(e.target, '.' + 'e-calendar');\n        this.tableBodyElement = this.element.querySelector('tbody');\n      }\n\n      multiSelection = false;\n    }\n\n    var focusedDate = this.tableBodyElement.querySelector('tr td.e-focused-date');\n    var selectedDate;\n\n    if (multiSelection) {\n      if (!isNullOrUndefined(focusedDate) && +value === parseInt(focusedDate.getAttribute('id').split('_')[0], 10)) {\n        selectedDate = focusedDate;\n      } else {\n        selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n      }\n    } else {\n      selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\n    }\n\n    if (isBlazor() && this.blazorRef) {\n      this.tableBodyElement.focus();\n      var targetEle = e.target;\n      var args = {\n        Action: e.action,\n        Key: e.key,\n        Events: e,\n        SelectDate: selectedDate ? selectedDate.id : null,\n        FocusedDate: focusedDate ? focusedDate.id : null,\n        classList: selectedDate ? selectedDate.classList.toString() : focusedDate ? focusedDate.classList.toString() : 'e-cell',\n        Id: focusedDate ? focusedDate.id : selectedDate ? selectedDate.id : null,\n        TargetClassList: targetEle.classList.toString()\n      }; // tslint:disable-next-line\n\n      this.blazorRef.invokeMethodAsync('OnCalendarKeyboardEvent', args);\n\n      if (targetEle.classList.contains('e-today')) {\n        targetEle.blur();\n        this.tableBodyElement.focus();\n      }\n\n      if (this.serverModuleName === 'sf.calendars.Calendar') {\n        this.tableBodyElement = null;\n      }\n    } else {\n      var view = this.getViewNumber(this.currentView());\n      var depthValue = this.getViewNumber(this.depth);\n      var levelRestrict = view === depthValue && this.getViewNumber(this.start) >= depthValue;\n      this.effect = '';\n\n      switch (e.action) {\n        case 'moveLeft':\n          this.KeyboardNavigate(-1, view, e, this.max, this.min);\n          e.preventDefault();\n          break;\n\n        case 'moveRight':\n          this.KeyboardNavigate(1, view, e, this.max, this.min);\n          e.preventDefault();\n          break;\n\n        case 'moveUp':\n          if (view === 0) {\n            this.KeyboardNavigate(-7, view, e, this.max, this.min); // move the current date to the previous seven days.\n          } else {\n            this.KeyboardNavigate(-4, view, e, this.max, this.min); // move the current year to the previous four days.\n          }\n\n          e.preventDefault();\n          break;\n\n        case 'moveDown':\n          if (view === 0) {\n            this.KeyboardNavigate(7, view, e, this.max, this.min);\n          } else {\n            this.KeyboardNavigate(4, view, e, this.max, this.min);\n          }\n\n          e.preventDefault();\n          break;\n\n        case 'select':\n          if (e.target === this.todayElement) {\n            this.todayButtonClick(e, value);\n          } else {\n            var element = !isNullOrUndefined(focusedDate) ? focusedDate : selectedDate;\n\n            if (!isNullOrUndefined(element) && !element.classList.contains(DISABLED)) {\n              if (levelRestrict) {\n                var d = new Date(parseInt('' + element.id, 0));\n                this.selectDate(e, d, element);\n              } else {\n                this.contentClick(null, --view, element, value);\n              }\n            }\n          }\n\n          break;\n\n        case 'controlUp':\n          this.title();\n          e.preventDefault();\n          break;\n\n        case 'controlDown':\n          if (!isNullOrUndefined(focusedDate) || !isNullOrUndefined(selectedDate) && !levelRestrict) {\n            this.contentClick(null, --view, focusedDate || selectedDate, value);\n          }\n\n          e.preventDefault();\n          break;\n\n        case 'home':\n          this.currentDate = this.firstDay(this.currentDate);\n          detach(this.tableBodyElement);\n          view === 0 ? this.renderMonths(e) : view === 1 ? this.renderYears(e) : this.renderDecades(e);\n          e.preventDefault();\n          break;\n\n        case 'end':\n          this.currentDate = this.lastDay(this.currentDate, view);\n          detach(this.tableBodyElement);\n          view === 0 ? this.renderMonths(e) : view === 1 ? this.renderYears(e) : this.renderDecades(e);\n          e.preventDefault();\n          break;\n\n        case 'pageUp':\n          this.addMonths(this.currentDate, -1);\n          this.navigateTo('Month', this.currentDate);\n          e.preventDefault();\n          break;\n\n        case 'pageDown':\n          this.addMonths(this.currentDate, 1);\n          this.navigateTo('Month', this.currentDate);\n          e.preventDefault();\n          break;\n\n        case 'shiftPageUp':\n          this.addYears(this.currentDate, -1);\n          this.navigateTo('Month', this.currentDate);\n          e.preventDefault();\n          break;\n\n        case 'shiftPageDown':\n          this.addYears(this.currentDate, 1);\n          this.navigateTo('Month', this.currentDate);\n          e.preventDefault();\n          break;\n\n        case 'controlHome':\n          this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 0, 1));\n          e.preventDefault();\n          break;\n\n        case 'controlEnd':\n          this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 11, 31));\n          e.preventDefault();\n          break;\n      }\n\n      if (this.getModuleName() === 'calendar') {\n        this.table.focus();\n      }\n    }\n  };\n\n  CalendarBase.prototype.KeyboardNavigate = function (number, currentView, e, max, min) {\n    var date = new Date(this.checkValue(this.currentDate));\n\n    switch (currentView) {\n      case 2:\n        this.addYears(this.currentDate, number);\n\n        if (this.isMonthYearRange(this.currentDate)) {\n          detach(this.tableBodyElement);\n          this.renderDecades(e);\n        } else {\n          this.currentDate = date;\n        }\n\n        break;\n\n      case 1:\n        this.addMonths(this.currentDate, number);\n\n        if (this.calendarMode === 'Gregorian') {\n          if (this.isMonthYearRange(this.currentDate)) {\n            detach(this.tableBodyElement);\n            this.renderYears(e);\n          } else {\n            this.currentDate = date;\n          }\n        } else {\n          if (this.isMonthYearRange(this.currentDate)) {\n            detach(this.tableBodyElement);\n            this.renderYears(e);\n          } else {\n            this.currentDate = date;\n          }\n        }\n\n        break;\n\n      case 0:\n        this.addDay(this.currentDate, number, e, max, min);\n\n        if (this.isMinMaxRange(this.currentDate)) {\n          detach(this.tableBodyElement);\n          this.renderMonths(e);\n        } else {\n          this.currentDate = date;\n        }\n\n        break;\n    }\n  };\n  /**\r\n   * Initialize the event handler\r\n   * @private\r\n   */\n\n\n  CalendarBase.prototype.preRender = function (value) {\n    var _this = this;\n\n    this.navigatePreviousHandler = this.navigatePrevious.bind(this);\n    this.navigateNextHandler = this.navigateNext.bind(this);\n    this.defaultKeyConfigs = this.getDefaultKeyConfig();\n\n    this.navigateHandler = function (e) {\n      _this.triggerNavigate(e);\n    };\n  };\n\n  ;\n\n  CalendarBase.prototype.minMaxDate = function (localDate) {\n    var currentDate = new Date(new Date(+localDate).setHours(0, 0, 0, 0));\n    var minDate = new Date(new Date(+this.min).setHours(0, 0, 0, 0));\n    var maxDate = new Date(new Date(+this.max).setHours(0, 0, 0, 0));\n\n    if (+currentDate === +minDate || +currentDate === +maxDate) {\n      if (+localDate < +this.min) {\n        localDate = new Date(+this.min);\n      }\n\n      if (+localDate > +this.max) {\n        localDate = new Date(+this.max);\n      }\n    }\n\n    return localDate;\n  };\n\n  CalendarBase.prototype.renderMonths = function (e, value, isCustomDate) {\n    var numCells = this.weekNumber ? 8 : 7;\n    var tdEles;\n\n    if (this.calendarMode === 'Gregorian') {\n      tdEles = this.renderDays(this.currentDate, value, null, null, isCustomDate);\n    } else {\n      tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n    }\n\n    this.createContentHeader();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.renderTemplate(tdEles, numCells, MONTH, e, value);\n    } else {\n      this.islamicModule.islamicRenderTemplate(tdEles, numCells, MONTH, e, value);\n    }\n  }; // tslint:disable-next-line:max-func-body-length\n\n\n  CalendarBase.prototype.renderDays = function (currentDate, value, multiSelection, values, isTodayDate) {\n    var tdEles = [];\n    var cellsCount = 42;\n    var todayDate = isTodayDate ? new Date(+currentDate) : new Date();\n    var localDate = new Date(this.checkValue(currentDate));\n    var minMaxDate;\n    var numCells = this.weekNumber ? 8 : 7; // 8 and 7 denotes the number of columns to be specified.\n\n    var currentMonth = localDate.getMonth();\n    this.titleUpdate(currentDate, 'days');\n    var d = localDate;\n    localDate = new Date(d.getFullYear(), d.getMonth(), 0, d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds());\n\n    while (localDate.getDay() !== this.firstDayOfWeek) {\n      this.setStartDate(localDate, -1 * dayMilliSeconds);\n    }\n\n    for (var day = 0; day < cellsCount; ++day) {\n      var weekEle = this.createElement('td', {\n        className: CELL\n      });\n      var weekAnchor = this.createElement('span');\n\n      if (day % 7 === 0 && this.weekNumber) {\n        var numberOfDays = void 0; // 6 days are added to get Last day of the week and 3 days are added to get middle day of the week.\n\n        numberOfDays = this.weekRule === 'FirstDay' ? 6 : this.weekRule === 'FirstFourDayWeek' ? 3 : 0;\n        var finalDate = new Date(localDate.getFullYear(), localDate.getMonth(), localDate.getDate() + numberOfDays);\n        weekAnchor.textContent = '' + this.getWeek(finalDate);\n        weekEle.appendChild(weekAnchor);\n        addClass([weekEle], '' + WEEKNUMBER);\n        tdEles.push(weekEle);\n      }\n\n      minMaxDate = new Date(+localDate);\n      localDate = this.minMaxDate(localDate);\n      var dateFormatOptions = {\n        type: 'dateTime',\n        skeleton: isBlazor() ? 'D' : 'full'\n      };\n      var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n      var tdEle = this.dayCell(localDate);\n      var title = this.globalize.formatDate(localDate, {\n        type: 'date',\n        skeleton: isBlazor() ? 'D' : 'full'\n      });\n      var dayLink = this.createElement('span');\n      dayLink.textContent = this.globalize.formatDate(localDate, {\n        format: 'd',\n        type: 'date',\n        skeleton: isBlazor() ? 'd' : 'yMd'\n      });\n      var disabled = this.min > localDate || this.max < localDate;\n\n      if (disabled) {\n        addClass([tdEle], DISABLED);\n        addClass([tdEle], OVERLAY);\n      } else {\n        dayLink.setAttribute('title', '' + title);\n      }\n\n      if (currentMonth !== localDate.getMonth()) {\n        addClass([tdEle], OTHERMONTH);\n      }\n\n      if (localDate.getDay() === 0 || localDate.getDay() === 6) {\n        addClass([tdEle], WEEKEND);\n      }\n\n      tdEle.appendChild(dayLink);\n      this.renderDayCellArgs = {\n        date: localDate,\n        isDisabled: false,\n        element: tdEle,\n        isOutOfRange: disabled\n      };\n      var argument = this.renderDayCellArgs;\n      this.renderDayCellEvent(argument);\n\n      if (argument.isDisabled) {\n        var selectDate = new Date(this.checkValue(value));\n        var argsDate = new Date(this.checkValue(argument.date));\n\n        if (multiSelection) {\n          if (!isNullOrUndefined(values) && values.length > 0) {\n            for (var index = 0; index < values.length; index++) {\n              var localDateString = +new Date(this.globalize.formatDate(argument.date, {\n                type: 'date',\n                skeleton: isBlazor() ? 'd' : 'yMd'\n              }));\n              var tempDateString = +new Date(this.globalize.formatDate(values[index], {\n                type: 'date',\n                skeleton: isBlazor() ? 'd' : 'yMd'\n              }));\n\n              if (localDateString === tempDateString) {\n                values.splice(index, 1);\n                index = -1;\n              }\n            }\n          }\n        } else if (selectDate && +selectDate === +argsDate) {\n          this.setProperties({\n            value: null\n          }, true);\n        }\n      }\n\n      if (this.renderDayCellArgs.isDisabled && !tdEle.classList.contains(SELECTED)) {\n        addClass([tdEle], DISABLED);\n        addClass([tdEle], OVERLAY);\n\n        if (+this.renderDayCellArgs.date === +this.todayDate) {\n          this.todayDisabled = true;\n        }\n      }\n\n      var otherMnthBool = tdEle.classList.contains(OTHERMONTH);\n      var disabledCls = tdEle.classList.contains(DISABLED);\n\n      if (!disabledCls) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      } // to set the value as null while setting the disabled date onProperty change.\n      // if (args.isDisabled && +this.value === +args.date) {\n      //     this.setProperties({ value: null }, true);\n      // }\n\n\n      if (multiSelection && !isNullOrUndefined(values) && !disabledCls) {\n        for (var tempValue = 0; tempValue < values.length; tempValue++) {\n          var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n          var formatOptions = {\n            format: this.getFromatStringValue(),\n            type: 'date',\n            skeleton: 'short',\n            calendar: type\n          };\n          var localDateString = this.globalize.formatDate(localDate, formatOptions);\n          var tempDateString = this.globalize.formatDate(values[tempValue], formatOptions);\n\n          if (localDateString === tempDateString && this.getDateVal(localDate, values[tempValue]) || this.getDateVal(localDate, value)) {\n            addClass([tdEle], SELECTED);\n          } else {\n            this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n          }\n        }\n\n        if (values.length <= 0) {\n          this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n        }\n      } else if (!disabledCls && this.getDateVal(localDate, value)) {\n        addClass([tdEle], SELECTED);\n      } else {\n        this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\n      }\n\n      if (date.getFullYear() === todayDate.getFullYear() && date.getMonth() === todayDate.getMonth() && date.getDate() === todayDate.getDate()) {\n        addClass([tdEle], TODAY);\n      }\n\n      tdEles.push(this.renderDayCellArgs.element);\n      localDate = new Date(+minMaxDate);\n      this.addDay(localDate, 1, null, this.max, this.min);\n    }\n\n    return tdEles;\n  };\n\n  CalendarBase.prototype.updateFocus = function (otherMonth, disabled, localDate, tableElement, currentDate) {\n    if (currentDate.getDate() === localDate.getDate() && !otherMonth && !disabled) {\n      addClass([tableElement], FOCUSEDDATE);\n    } else {\n      if (currentDate >= this.max && parseInt(tableElement.id, 0) === +this.max && !otherMonth && !disabled) {\n        addClass([tableElement], FOCUSEDDATE);\n      }\n\n      if (currentDate <= this.min && parseInt(tableElement.id, 0) === +this.min && !otherMonth && !disabled) {\n        addClass([tableElement], FOCUSEDDATE);\n      }\n    }\n  };\n\n  CalendarBase.prototype.renderYears = function (e, value) {\n    this.removeTableHeadElement();\n    var numCells = 4;\n    var days;\n    var tdEles = [];\n    var valueUtil = isNullOrUndefined(value);\n    var curDate = new Date(this.checkValue(this.currentDate));\n    var mon = curDate.getMonth();\n    var yr = curDate.getFullYear();\n    var localDate = curDate;\n    var curYrs = localDate.getFullYear();\n    var minYr = new Date(this.checkValue(this.min)).getFullYear();\n    var minMonth = new Date(this.checkValue(this.min)).getMonth();\n    var maxYr = new Date(this.checkValue(this.max)).getFullYear();\n    var maxMonth = new Date(this.checkValue(this.max)).getMonth();\n    localDate.setMonth(0);\n    this.titleUpdate(this.currentDate, 'months');\n    var disabled = this.min > localDate || this.max < localDate;\n    localDate.setDate(1);\n\n    for (var month = 0; month < 12; ++month) {\n      var tdEle = this.dayCell(localDate);\n      var dayLink = this.createElement('span');\n      var localMonth = value && value.getMonth() === localDate.getMonth();\n      var select = value && value.getFullYear() === yr && localMonth;\n      dayLink.textContent = this.toCapitalize(this.globalize.formatDate(localDate, {\n        format: isBlazor() ? 'MMM' : null,\n        type: 'dateTime',\n        skeleton: 'MMM'\n      }));\n\n      if (this.min && (curYrs < minYr || month < minMonth && curYrs === minYr) || this.max && (curYrs > maxYr || month > maxMonth && curYrs >= maxYr)) {\n        addClass([tdEle], DISABLED);\n      } else if (!valueUtil && select) {\n        addClass([tdEle], SELECTED);\n      } else {\n        if (localDate.getMonth() === mon && this.currentDate.getMonth() === mon) {\n          addClass([tdEle], FOCUSEDDATE);\n        }\n      }\n\n      localDate.setDate(1);\n      localDate.setMonth(localDate.getMonth() + 1);\n\n      if (!tdEle.classList.contains(DISABLED)) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      }\n\n      tdEle.appendChild(dayLink);\n      tdEles.push(tdEle);\n    }\n\n    this.renderTemplate(tdEles, numCells, YEAR, e, value);\n  };\n\n  CalendarBase.prototype.renderDecades = function (e, value) {\n    this.removeTableHeadElement();\n    var numCells = 4;\n    var yearCell = 12;\n    var tdEles = [];\n    var localDate = new Date(this.checkValue(this.currentDate));\n    localDate.setMonth(0);\n    localDate.setDate(1);\n    var localYr = localDate.getFullYear();\n    var startYr = new Date(localDate.setFullYear(localYr - localYr % 10));\n    var endYr = new Date(localDate.setFullYear(localYr - localYr % 10 + (10 - 1)));\n    var startFullYr = startYr.getFullYear();\n    var endFullYr = endYr.getFullYear();\n    var startHdrYr = this.globalize.formatDate(startYr, {\n      format: isBlazor() ? 'yyyy' : null,\n      type: 'dateTime',\n      skeleton: 'y'\n    });\n    var endHdrYr = this.globalize.formatDate(endYr, {\n      format: isBlazor() ? 'yyyy' : null,\n      type: 'dateTime',\n      skeleton: 'y'\n    });\n    this.headerTitleElement.textContent = startHdrYr + ' - ' + endHdrYr;\n    var start = new Date(localYr - localYr % 10 - 1, 0, 1);\n    var startYear = start.getFullYear();\n\n    for (var rowIterator = 0; rowIterator < yearCell; ++rowIterator) {\n      var year = startYear + rowIterator;\n      localDate.setFullYear(year);\n      var tdEle = this.dayCell(localDate);\n      attributes(tdEle, {\n        'role': 'gridcell'\n      });\n      var dayLink = this.createElement('span');\n      dayLink.textContent = this.globalize.formatDate(localDate, {\n        format: isBlazor() ? 'yyyy' : null,\n        type: 'dateTime',\n        skeleton: 'y'\n      });\n\n      if (year < startFullYr || year > endFullYr) {\n        addClass([tdEle], OTHERDECADE);\n\n        if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {\n          addClass([tdEle], SELECTED);\n        }\n\n        if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {\n          addClass([tdEle], DISABLED);\n        }\n      } else if (year < new Date(this.checkValue(this.min)).getFullYear() || year > new Date(this.checkValue(this.max)).getFullYear()) {\n        addClass([tdEle], DISABLED);\n      } else if (!isNullOrUndefined(value) && localDate.getFullYear() === value.getFullYear()) {\n        addClass([tdEle], SELECTED);\n      } else {\n        if (localDate.getFullYear() === this.currentDate.getFullYear() && !tdEle.classList.contains(DISABLED)) {\n          addClass([tdEle], FOCUSEDDATE);\n        }\n      }\n\n      if (!tdEle.classList.contains(DISABLED)) {\n        EventHandler.add(tdEle, 'click', this.clickHandler, this);\n      }\n\n      tdEle.appendChild(dayLink);\n      tdEles.push(tdEle);\n    }\n\n    this.renderTemplate(tdEles, numCells, 'e-decade', e, value);\n  };\n\n  CalendarBase.prototype.dayCell = function (localDate) {\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var dateFormatOptions = {\n      skeleton: isBlazor() ? 'F' : 'full',\n      type: 'dateTime',\n      calendar: type\n    };\n    var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\n    var value = date.valueOf();\n    var attrs = {\n      className: CELL,\n      attrs: {\n        'id': '' + getUniqueID('' + value),\n        'aria-selected': 'false',\n        'role': 'gridcell'\n      }\n    };\n    return this.createElement('td', attrs);\n  };\n\n  CalendarBase.prototype.firstDay = function (date) {\n    var collection = this.currentView() !== 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '') : this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '');\n\n    if (collection.length) {\n      for (var i = 0; i < collection.length; i++) {\n        if (!collection[i].classList.contains(DISABLED)) {\n          date = new Date(parseInt(collection[i].id, 0));\n          break;\n        }\n      }\n    }\n\n    return date;\n  };\n\n  CalendarBase.prototype.lastDay = function (date, view) {\n    var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\n\n    if (view !== 2) {\n      var timeOffset = Math.abs(lastDate.getTimezoneOffset() - this.firstDay(date).getTimezoneOffset());\n\n      if (timeOffset) {\n        lastDate.setHours(this.firstDay(date).getHours() + timeOffset / 60);\n      }\n\n      return this.findLastDay(lastDate);\n    } else {\n      return this.findLastDay(this.firstDay(lastDate));\n    }\n  };\n\n  ;\n\n  CalendarBase.prototype.checkDateValue = function (value) {\n    return !isNullOrUndefined(value) && value instanceof Date && !isNaN(+value) ? value : null;\n  };\n\n  CalendarBase.prototype.findLastDay = function (date) {\n    var collection = this.currentView() === 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '') : this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '');\n\n    if (collection.length) {\n      for (var i = collection.length - 1; i >= 0; i--) {\n        if (!collection[i].classList.contains(DISABLED)) {\n          date = new Date(parseInt(collection[i].id, 0));\n          break;\n        }\n      }\n    }\n\n    return date;\n  };\n\n  CalendarBase.prototype.removeTableHeadElement = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.element.querySelectorAll('.e-content table thead')[0])) {\n        detach(this.tableHeadElement);\n      }\n    } else {\n      if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content table thead')[0])) {\n        detach(this.tableHeadElement);\n      }\n    }\n  };\n\n  CalendarBase.prototype.renderTemplate = function (elements, count, classNm, e, value) {\n    var view = this.getViewNumber(this.currentView());\n    var trEle;\n    this.tableBodyElement = this.createElement('tbody');\n    this.table.appendChild(this.tableBodyElement);\n    removeClass([this.contentElement, this.headerElement], [MONTH, DECADE, YEAR]);\n    addClass([this.contentElement, this.headerElement], [classNm]);\n    var weekNumCell = 41;\n    var numberCell = 35;\n    var otherMonthCell = 6;\n    var row = count;\n    var rowIterator = 0;\n\n    for (var dayCell = 0; dayCell < elements.length / count; ++dayCell) {\n      trEle = this.createElement('tr', {\n        attrs: {\n          'role': 'row'\n        }\n      });\n\n      for (rowIterator = 0 + rowIterator; rowIterator < row; rowIterator++) {\n        if (!elements[rowIterator].classList.contains('e-week-number') && !isNullOrUndefined(elements[rowIterator].children[0])) {\n          addClass([elements[rowIterator].children[0]], [LINK]);\n          rippleEffect(elements[rowIterator].children[0], {\n            duration: 600,\n            isCenterRipple: true\n          });\n        }\n\n        trEle.appendChild(elements[rowIterator]);\n\n        if (this.weekNumber && rowIterator === otherMonthCell + 1 && elements[otherMonthCell + 1].classList.contains(OTHERMONTH)) {\n          addClass([trEle], OTHERMONTHROW);\n        }\n\n        if (!this.weekNumber && rowIterator === otherMonthCell && elements[otherMonthCell].classList.contains(OTHERMONTH)) {\n          addClass([trEle], OTHERMONTHROW);\n        }\n\n        if (this.weekNumber) {\n          if (rowIterator === weekNumCell && elements[weekNumCell].classList.contains(OTHERMONTH)) {\n            addClass([trEle], OTHERMONTHROW);\n          }\n        } else {\n          if (rowIterator === numberCell && elements[numberCell].classList.contains(OTHERMONTH)) {\n            addClass([trEle], OTHERMONTHROW);\n          }\n        }\n      }\n\n      row = row + count;\n      rowIterator = rowIterator + 0;\n      this.tableBodyElement.appendChild(trEle);\n    }\n\n    this.table.querySelector('tbody').className = this.effect;\n\n    if (this.calendarMode === 'Gregorian') {\n      this.iconHandler();\n    } else {\n      this.islamicModule.islamicIconHandler();\n    }\n\n    if (view !== this.getViewNumber(this.currentView()) || view === 0 && view !== this.getViewNumber(this.currentView())) {\n      this.navigateHandler(e);\n    }\n\n    this.setAriaActiveDescendant();\n  };\n\n  CalendarBase.prototype.clickHandler = function (e, value) {\n    this.clickEventEmitter(e);\n    var eve = e.currentTarget;\n    var view = this.getViewNumber(this.currentView());\n\n    if (eve.classList.contains(OTHERMONTH)) {\n      this.contentClick(e, 0, null, value);\n    } else if (view === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n      this.contentClick(e, 1, null, value);\n    } else if (2 === view) {\n      this.contentClick(e, 1, null, value);\n    } else if (!eve.classList.contains(OTHERMONTH) && view === 0) {\n      this.selectDate(e, this.getIdValue(e, null), null);\n    } else {\n      this.contentClick(e, 0, eve, value);\n    }\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  }; // Content click event handler required for extended components\n\n\n  CalendarBase.prototype.clickEventEmitter = function (e) {\n    e.preventDefault();\n  };\n\n  CalendarBase.prototype.contentClick = function (e, view, element, value) {\n    var currentView = this.getViewNumber(this.currentView());\n    var d = this.getIdValue(e, element);\n\n    switch (view) {\n      case 0:\n        if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n          detach(this.tableBodyElement);\n          this.currentDate = d;\n          this.effect = ZOOMIN;\n          this.renderMonths(e);\n        } else {\n          if (this.calendarMode === 'Gregorian') {\n            this.currentDate.setMonth(d.getMonth());\n\n            if (d.getMonth() > 0 && this.currentDate.getMonth() !== d.getMonth()) {\n              this.currentDate.setDate(0);\n            }\n\n            this.currentDate.setFullYear(d.getFullYear());\n          } else {\n            this.currentDate = d;\n          }\n\n          this.effect = ZOOMIN;\n          detach(this.tableBodyElement);\n          this.renderMonths(e);\n        }\n\n        break;\n\n      case 1:\n        if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\n          this.selectDate(e, d, null);\n        } else {\n          if (this.calendarMode === 'Gregorian') {\n            this.currentDate.setFullYear(d.getFullYear());\n          } else {\n            var islamicDate = this.islamicModule.getIslamicDate(d);\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month, 1);\n          }\n\n          this.effect = ZOOMIN;\n          detach(this.tableBodyElement);\n          this.renderYears(e);\n        }\n\n    }\n  };\n\n  CalendarBase.prototype.switchView = function (view, e, multiSelection, isCustomDate) {\n    switch (view) {\n      case 0:\n        detach(this.tableBodyElement);\n        this.renderMonths(e, null, isCustomDate);\n\n        if (multiSelection && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0])) {\n          this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n        }\n\n        break;\n\n      case 1:\n        detach(this.tableBodyElement);\n        this.renderYears(e);\n        break;\n\n      case 2:\n        detach(this.tableBodyElement);\n        this.renderDecades(e);\n    }\n  };\n  /**\r\n   * To get component name\r\n   * @private\r\n   */\n\n\n  CalendarBase.prototype.getModuleName = function () {\n    return 'calendar';\n  };\n  /**\r\n     */\n\n\n  CalendarBase.prototype.requiredModules = function () {\n    var modules = [];\n\n    if (this) {\n      modules.push({\n        args: [this],\n        member: 'islamic'\n      });\n    }\n\n    return modules;\n  };\n  /**\r\n   * Gets the properties to be maintained upon browser refresh.\r\n   * @returns string\r\n   */\n\n\n  CalendarBase.prototype.getPersistData = function () {\n    var keyEntity = ['value'];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\r\n   * Called internally if any of the property value changed.\r\n   * returns void\r\n   * @private\r\n   */\n\n\n  CalendarBase.prototype.onPropertyChanged = function (newProp, oldProp, multiSelection, values) {\n    this.effect = '';\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'enableRtl':\n          if (newProp.enableRtl) {\n            if (this.getModuleName() === 'calendar') {\n              this.element.classList.add('e-rtl');\n            } else {\n              this.calendarElement.classList.add('e-rtl');\n            }\n          } else {\n            if (this.getModuleName() === 'calendar') {\n              this.element.classList.remove('e-rtl');\n            } else {\n              this.calendarElement.classList.remove('e-rtl');\n            }\n          }\n\n          break;\n\n        case 'dayHeaderFormat':\n          this.getCultureValues();\n          this.createContentHeader();\n          this.adjustLongHeaderSize();\n          break;\n\n        case 'min':\n        case 'max':\n          this.rangeValidation(this.min, this.max);\n          prop === 'min' ? this.setProperties({\n            min: this.checkDateValue(new Date(this.checkValue(newProp.min)))\n          }, true) : this.setProperties({\n            max: this.checkDateValue(new Date(this.checkValue(newProp.max)))\n          }, true);\n          this.setProperties({\n            start: this.currentView()\n          }, true);\n          detach(this.tableBodyElement);\n          this.minMaxUpdate();\n\n          if (multiSelection) {\n            this.validateValues(multiSelection, values);\n          }\n\n          this.createContentBody();\n\n          if ((this.todayDate < this.min || this.max < this.todayDate) && this.footer && this.todayElement) {\n            detach(this.todayElement);\n            detach(this.footer);\n            this.todayElement = this.footer = null;\n            this.createContentFooter();\n          } else {\n            if (this.footer && this.todayElement && this.todayElement.classList.contains('e-disabled')) {\n              removeClass([this.todayElement], DISABLED);\n              detach(this.todayElement);\n              detach(this.footer);\n              this.todayElement = this.footer = null;\n              this.createContentFooter();\n            }\n          }\n\n          break;\n\n        case 'start':\n        case 'depth':\n        case 'weekNumber':\n        case 'firstDayOfWeek':\n        case 'weekRule':\n          this.checkView();\n          this.createContentHeader();\n          this.createContentBody();\n          break;\n\n        case 'locale':\n          this.globalize = new Internationalization(this.locale);\n          this.createContentHeader();\n          this.createContentBody();\n          this.l10.setLocale(this.locale);\n          this.updateFooter();\n          break;\n\n        case 'showTodayButton':\n          if (newProp.showTodayButton) {\n            this.createContentFooter();\n          } else {\n            if (!isNullOrUndefined(this.todayElement) && !isNullOrUndefined(this.footer)) {\n              detach(this.todayElement);\n              detach(this.footer);\n              this.todayElement = this.footer = undefined;\n            }\n          }\n\n          this.setProperties({\n            showTodayButton: newProp.showTodayButton\n          }, true);\n          break;\n      }\n    }\n  };\n  /**\r\n   * values property updated with considered disabled dates of the calendar.\r\n   */\n\n\n  CalendarBase.prototype.validateValues = function (multiSelection, values) {\n    if (multiSelection && !isNullOrUndefined(values) && values.length > 0) {\n      var copyValues = this.copyValues(values);\n\n      for (var skipIndex = 0; skipIndex < copyValues.length; skipIndex++) {\n        var tempValue = copyValues[skipIndex];\n        var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n        var tempValueString = void 0;\n\n        if (this.calendarMode === 'Gregorian') {\n          /* tslint:disable-next-line:max-line-length */\n          tempValueString = this.globalize.formatDate(tempValue, {\n            type: 'date',\n            skeleton: isBlazor() ? 'd' : 'yMd'\n          });\n        } else {\n          /* tslint:disable-next-line:max-line-length */\n          tempValueString = this.globalize.formatDate(tempValue, {\n            type: 'dateTime',\n            skeleton: 'full',\n            calendar: 'islamic'\n          });\n        }\n\n        var minFormatOption = {\n          type: 'date',\n          skeleton: isBlazor() ? 'd' : 'yMd',\n          calendar: type\n        };\n        var minStringValue = this.globalize.formatDate(this.min, minFormatOption);\n        var minString = minStringValue;\n        var maxFormatOption = {\n          type: 'date',\n          skeleton: isBlazor() ? 'd' : 'yMd',\n          calendar: type\n        };\n        var maxStringValue = this.globalize.formatDate(this.max, maxFormatOption);\n        var maxString = maxStringValue;\n\n        if (+new Date(tempValueString) < +new Date(minString) || +new Date(tempValueString) > +new Date(maxString)) {\n          copyValues.splice(skipIndex, 1);\n          skipIndex = -1;\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n    }\n  };\n\n  CalendarBase.prototype.setValueUpdate = function () {\n    if (!isNullOrUndefined(this.tableBodyElement)) {\n      detach(this.tableBodyElement);\n      this.setProperties({\n        start: this.currentView()\n      }, true);\n      this.createContentBody();\n    }\n  };\n\n  CalendarBase.prototype.copyValues = function (values) {\n    var copyValues = [];\n\n    if (!isNullOrUndefined(values) && values.length > 0) {\n      for (var index = 0; index < values.length; index++) {\n        copyValues.push(new Date(+values[index]));\n      }\n    }\n\n    return copyValues;\n  };\n\n  CalendarBase.prototype.titleUpdate = function (date, view) {\n    var globalize = new Internationalization(this.locale);\n    var dayFormatOptions;\n    var monthFormatOptions;\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n\n    if (this.calendarMode === 'Gregorian') {\n      dayFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        skeleton: isBlazor() ? 'y' : 'yMMMM',\n        calendar: type\n      });\n      monthFormatOptions = globalize.formatDate(date, {\n        format: isBlazor() ? 'yyyy' : null,\n        type: 'dateTime',\n        skeleton: 'y',\n        calendar: type\n      });\n    } else {\n      dayFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        format: 'MMMM y',\n        calendar: type\n      });\n      monthFormatOptions = globalize.formatDate(date, {\n        type: 'dateTime',\n        format: 'y',\n        calendar: type\n      });\n    }\n\n    switch (view) {\n      case 'days':\n        this.headerTitleElement.textContent = this.toCapitalize(dayFormatOptions);\n        break;\n\n      case 'months':\n        this.headerTitleElement.textContent = monthFormatOptions;\n    }\n  };\n\n  CalendarBase.prototype.setActiveDescendant = function () {\n    var id;\n    var focusedEle = this.tableBodyElement.querySelector('tr td.e-focused-date');\n    var selectedEle = this.tableBodyElement.querySelector('tr td.e-selected');\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var title;\n    var view = this.currentView();\n\n    if (view === 'Month') {\n      title = this.globalize.formatDate(this.currentDate, {\n        type: 'date',\n        skeleton: isBlazor() ? 'D' : 'full',\n        calendar: type\n      });\n    } else if (view === 'Year') {\n      if (type !== 'islamic') {\n        title = this.globalize.formatDate(this.currentDate, {\n          type: 'date',\n          skeleton: isBlazor() ? 'y' : 'yMMMM',\n          calendar: type\n        });\n      } else {\n        title = this.globalize.formatDate(this.currentDate, {\n          type: 'date',\n          skeleton: 'GyMMM',\n          calendar: type\n        });\n      }\n    } else {\n      title = this.globalize.formatDate(this.currentDate, {\n        format: isBlazor() ? 'yyyy' : null,\n        type: 'date',\n        skeleton: 'y',\n        calendar: type\n      });\n    }\n\n    if (selectedEle || focusedEle) {\n      if (!isNullOrUndefined(selectedEle)) {\n        selectedEle.setAttribute('aria-selected', 'true');\n      }\n\n      (focusedEle || selectedEle).setAttribute('aria-label', title);\n      id = (focusedEle || selectedEle).getAttribute('id');\n    }\n\n    return id;\n  };\n\n  CalendarBase.prototype.iconHandler = function () {\n    new Date(this.checkValue(this.currentDate)).setDate(1);\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n        break;\n\n      case 'Year':\n        this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n        break;\n\n      case 'Decade':\n        this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1);\n        this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1);\n    }\n  };\n  /**\r\n   * Destroys the widget.\r\n   * @returns void\r\n   */\n\n\n  CalendarBase.prototype.destroy = function () {\n    if (this.getModuleName() === 'calendar' && this.element) {\n      removeClass([this.element], [ROOT]);\n    } else {\n      if (this.calendarElement && this.element) {\n        removeClass([this.element], [ROOT]);\n      }\n    }\n\n    if (this.getModuleName() === 'calendar' && this.element) {\n      EventHandler.remove(this.headerTitleElement, 'click', this.navigateTitle);\n\n      if (this.todayElement) {\n        EventHandler.remove(this.todayElement, 'click', this.todayButtonClick);\n      }\n\n      this.previousIconHandler(true);\n      this.nextIconHandler(true);\n      this.keyboardModule.destroy();\n      this.element.removeAttribute('data-role');\n      !isNullOrUndefined(this.calendarEleCopy.getAttribute('tabindex')) ? this.element.setAttribute('tabindex', this.tabIndex) : this.element.removeAttribute('tabindex');\n    }\n\n    if (this.element) {\n      this.element.innerHTML = '';\n    }\n\n    _super.prototype.destroy.call(this);\n  };\n\n  CalendarBase.prototype.title = function (e) {\n    var currentView = this.getViewNumber(this.currentView());\n    this.effect = ZOOMIN;\n    this.switchView(++currentView, e);\n  };\n\n  CalendarBase.prototype.getViewNumber = function (stringVal) {\n    if (stringVal === 'Month') {\n      return 0;\n    } else if (stringVal === 'Year') {\n      return 1;\n    } else {\n      return 2;\n    }\n  };\n\n  CalendarBase.prototype.navigateTitle = function (e) {\n    e.preventDefault();\n    this.title(e);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n\n  CalendarBase.prototype.previous = function () {\n    this.effect = '';\n    var currentView = this.getViewNumber(this.currentView());\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.addMonths(this.currentDate, -1);\n        this.switchView(currentView);\n        break;\n\n      case 'Year':\n        this.addYears(this.currentDate, -1);\n        this.switchView(currentView);\n        break;\n\n      case 'Decade':\n        this.addYears(this.currentDate, -10);\n        this.switchView(currentView);\n        break;\n    }\n  };\n\n  CalendarBase.prototype.navigatePrevious = function (e) {\n    e.preventDefault();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.previous();\n    } else {\n      this.islamicModule.islamicPrevious();\n    }\n\n    this.triggerNavigate(e);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n\n  CalendarBase.prototype.next = function () {\n    this.effect = '';\n    var currentView = this.getViewNumber(this.currentView());\n\n    switch (this.currentView()) {\n      case 'Month':\n        this.addMonths(this.currentDate, 1);\n        this.switchView(currentView);\n        break;\n\n      case 'Year':\n        this.addYears(this.currentDate, 1);\n        this.switchView(currentView);\n        break;\n\n      case 'Decade':\n        this.addYears(this.currentDate, 10);\n        this.switchView(currentView);\n        break;\n    }\n  };\n\n  CalendarBase.prototype.navigateNext = function (eve) {\n    eve.preventDefault();\n\n    if (this.calendarMode === 'Gregorian') {\n      this.next();\n    } else {\n      this.islamicModule.islamicNext();\n    }\n\n    this.triggerNavigate(eve);\n\n    if (this.getModuleName() === 'calendar') {\n      this.table.focus();\n    }\n  };\n  /**\r\n   * This method is used to navigate to the month/year/decade view of the Calendar.\r\n   * @param  {string} view - Specifies the view of the Calendar.\r\n   * @param  {Date} date - Specifies the focused date in a view.\r\n   * @returns void\r\n   */\n\n\n  CalendarBase.prototype.navigateTo = function (view, date, isCustomDate) {\n    if (+date >= +this.min && +date <= +this.max) {\n      this.currentDate = date;\n    }\n\n    if (+date <= +this.min) {\n      this.currentDate = new Date(this.checkValue(this.min));\n    }\n\n    if (+date >= +this.max) {\n      this.currentDate = new Date(this.checkValue(this.max));\n    }\n\n    if (this.getViewNumber(this.depth) >= this.getViewNumber(view)) {\n      if (this.getViewNumber(this.depth) <= this.getViewNumber(this.start) || this.getViewNumber(this.depth) === this.getViewNumber(view)) {\n        view = this.depth;\n      }\n    }\n\n    this.switchView(this.getViewNumber(view), null, null, isCustomDate);\n  };\n  /**\r\n   * Gets the current view of the Calendar.\r\n   * @returns string\r\n   */\n\n\n  CalendarBase.prototype.currentView = function () {\n    if (this.contentElement.classList.contains(YEAR)) {\n      return 'Year';\n    } else if (this.contentElement.classList.contains(DECADE)) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n\n  CalendarBase.prototype.getDateVal = function (date, value) {\n    return !isNullOrUndefined(value) && date.getDate() === value.getDate() && date.getMonth() === value.getMonth() && date.getFullYear() === value.getFullYear();\n  };\n\n  CalendarBase.prototype.getCultureObjects = function (ld, c) {\n    var gregorianFormat = (isBlazor() ? '.dates.days.' : '.dates.calendars.gregorian.days.format.') + this.dayHeaderFormat.toLowerCase();\n    var islamicFormat = (isBlazor() ? '.dates.days.' : '.dates.calendars.islamic.days.format.') + this.dayHeaderFormat.toLowerCase();\n    var mainVal = isBlazor() ? '' : 'main.';\n\n    if (this.calendarMode === 'Gregorian') {\n      return getValue(mainVal + '' + this.locale + gregorianFormat, ld);\n    } else {\n      return getValue('main.' + '' + this.locale + islamicFormat, ld);\n    }\n  };\n\n  ;\n\n  CalendarBase.prototype.getWeek = function (d) {\n    var currentDate = new Date(this.checkValue(d)).valueOf();\n    var date = new Date(d.getFullYear(), 0, 1).valueOf();\n    return Math.ceil((currentDate - date + dayMilliSeconds) / dayMilliSeconds / 7);\n  };\n\n  CalendarBase.prototype.setStartDate = function (date, time) {\n    var tzOffset = date.getTimezoneOffset();\n    var d = new Date(date.getTime() + time);\n    var tzOffsetDiff = d.getTimezoneOffset() - tzOffset;\n    date.setTime(d.getTime() + tzOffsetDiff * minutesMilliSeconds);\n  };\n\n  CalendarBase.prototype.addMonths = function (date, i) {\n    if (this.calendarMode === 'Gregorian') {\n      var day = date.getDate();\n      date.setDate(1);\n      date.setMonth(date.getMonth() + i);\n      date.setDate(Math.min(day, this.getMaxDays(date)));\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month + i, 1);\n    }\n  };\n\n  CalendarBase.prototype.addYears = function (date, i) {\n    if (this.calendarMode === 'Gregorian') {\n      var day = date.getDate();\n      date.setDate(1);\n      date.setFullYear(date.getFullYear() + i);\n      date.setDate(Math.min(day, this.getMaxDays(date)));\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      this.currentDate = this.islamicModule.toGregorian(islamicDate.year + i, islamicDate.month, 1);\n    }\n  };\n\n  CalendarBase.prototype.getIdValue = function (e, element) {\n    var eve;\n\n    if (e) {\n      eve = e.currentTarget;\n    } else {\n      eve = element;\n    }\n\n    var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n    var dateFormatOptions = {\n      type: 'dateTime',\n      skeleton: isBlazor() ? 'F' : 'full',\n      calendar: type\n    };\n    var dateString = this.globalize.formatDate(new Date(parseInt('' + eve.getAttribute('id'), 0)), dateFormatOptions);\n    var date = this.globalize.parseDate(dateString, dateFormatOptions);\n    var value = date.valueOf() - date.valueOf() % 1000;\n    return new Date(value); //return this.globalize.parseDate(dateString, dateFormatOptions);\n  };\n\n  CalendarBase.prototype.adjustLongHeaderSize = function () {\n    removeClass([this.element], DAYHEADERLONG);\n\n    if (this.dayHeaderFormat === 'Wide') {\n      addClass([this.getModuleName() === 'calendar' ? this.element : this.calendarElement], DAYHEADERLONG);\n    }\n  };\n\n  CalendarBase.prototype.selectDate = function (e, date, node, multiSelection, values) {\n    var element = node || e.currentTarget;\n    this.isDateSelected = false;\n\n    if (this.currentView() === 'Decade') {\n      this.setDateDecade(this.currentDate, date.getFullYear());\n    } else if (this.currentView() === 'Year') {\n      this.setDateYear(this.currentDate, date);\n    } else {\n      if (multiSelection && !this.checkPresentDate(date, values)) {\n        var copyValues = this.copyValues(values);\n\n        if (!isNullOrUndefined(values) && copyValues.length > 0) {\n          copyValues.push(new Date(this.checkValue(date)));\n          this.setProperties({\n            values: copyValues\n          }, true);\n          this.setProperties({\n            value: values[values.length - 1]\n          }, true);\n        } else {\n          this.setProperties({\n            values: [new Date(this.checkValue(date))]\n          }, true);\n        }\n      } else {\n        this.setProperties({\n          value: new Date(this.checkValue(date))\n        }, true);\n      }\n\n      this.currentDate = new Date(this.checkValue(date));\n    }\n\n    var tableBodyElement = closest(element, '.' + ROOT);\n\n    if (isNullOrUndefined(tableBodyElement)) {\n      tableBodyElement = this.tableBodyElement;\n    }\n\n    if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + SELECTED))) {\n      removeClass([tableBodyElement.querySelector('.' + SELECTED)], SELECTED);\n    }\n\n    if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + FOCUSEDDATE))) {\n      removeClass([tableBodyElement.querySelector('.' + FOCUSEDDATE)], FOCUSEDDATE);\n    }\n\n    if (multiSelection) {\n      var copyValues = this.copyValues(values);\n      var collection = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll('td'));\n\n      for (var index = 0; index < collection.length; index++) {\n        var tempElement = tableBodyElement.querySelectorAll('td' + '.' + FOCUSEDDATE)[0];\n        var selectedElement = tableBodyElement.querySelectorAll('td' + '.' + SELECTED)[0];\n\n        if (collection[index] === tempElement) {\n          removeClass([collection[index]], FOCUSEDDATE);\n        }\n\n        if (collection[index] === selectedElement && !this.checkPresentDate(new Date(parseInt(selectedElement.getAttribute('id').split('_')[0], 10)), values)) {\n          removeClass([collection[index]], SELECTED);\n        }\n      }\n\n      if (element.classList.contains(SELECTED)) {\n        removeClass([element], SELECTED);\n\n        for (var i = 0; i < copyValues.length; i++) {\n          var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n          var formatOptions = {\n            format: this.getFromatStringValue(),\n            type: 'date',\n            skeleton: 'short',\n            calendar: type\n          };\n          var localDateString = this.globalize.formatDate(date, formatOptions);\n          var tempDateString = this.globalize.formatDate(copyValues[i], formatOptions);\n\n          if (localDateString === tempDateString) {\n            var index = copyValues.indexOf(copyValues[i]);\n            copyValues.splice(index, 1);\n            addClass([element], FOCUSEDDATE);\n          }\n        }\n\n        this.setProperties({\n          values: copyValues\n        }, true);\n      } else {\n        addClass([element], SELECTED);\n      }\n    } else {\n      addClass([element], SELECTED);\n    }\n\n    this.isDateSelected = true;\n  };\n\n  CalendarBase.prototype.getFromatStringValue = function () {\n    return isBlazor() ? // tslint:disable-next-line\n    'M' + getDefaultDateObject().dateSeperator + 'd' + getDefaultDateObject().dateSeperator + 'yy' : null;\n  };\n\n  CalendarBase.prototype.checkPresentDate = function (dates, values) {\n    var previousValue = false;\n\n    if (!isNullOrUndefined(values)) {\n      for (var checkPrevious = 0; checkPrevious < values.length; checkPrevious++) {\n        var type = this.calendarMode === 'Gregorian' ? 'gregorian' : 'islamic';\n        /* tslint:disable-next-line:max-line-length */\n\n        var localDateString = this.globalize.formatDate(dates, {\n          format: this.getFromatStringValue(),\n          type: 'date',\n          skeleton: 'short',\n          calendar: type\n        });\n        /* tslint:disable-next-line:max-line-length */\n\n        var tempDateString = this.globalize.formatDate(values[checkPrevious], {\n          format: this.getFromatStringValue(),\n          type: 'date',\n          skeleton: 'short',\n          calendar: type\n        });\n\n        if (localDateString === tempDateString) {\n          previousValue = true;\n        }\n      }\n    }\n\n    return previousValue;\n  };\n\n  CalendarBase.prototype.setAriaActiveDescendant = function () {\n    attributes(this.table, {\n      'aria-activedescendant': '' + this.setActiveDescendant()\n    });\n  };\n\n  CalendarBase.prototype.previousIconHandler = function (disabled) {\n    if (disabled) {\n      EventHandler.remove(this.previousIcon, 'click', this.navigatePreviousHandler);\n      addClass([this.previousIcon], '' + DISABLED);\n      addClass([this.previousIcon], '' + OVERLAY);\n      this.previousIcon.setAttribute('aria-disabled', 'true');\n    } else {\n      EventHandler.add(this.previousIcon, 'click', this.navigatePreviousHandler);\n      removeClass([this.previousIcon], '' + DISABLED);\n      removeClass([this.previousIcon], '' + OVERLAY);\n      this.previousIcon.setAttribute('aria-disabled', 'false');\n    }\n  };\n\n  CalendarBase.prototype.renderDayCellEvent = function (args) {\n    extend(this.renderDayCellArgs, {\n      name: 'renderDayCell'\n    });\n    this.trigger('renderDayCell', args);\n  };\n\n  CalendarBase.prototype.navigatedEvent = function (eve) {\n    extend(this.navigatedArgs, {\n      name: 'navigated',\n      event: eve\n    });\n    this.trigger('navigated', this.navigatedArgs);\n  };\n\n  CalendarBase.prototype.triggerNavigate = function (event) {\n    this.navigatedArgs = {\n      view: this.currentView(),\n      date: this.currentDate\n    };\n    this.navigatedEvent(event);\n  };\n\n  CalendarBase.prototype.nextIconHandler = function (disabled) {\n    if (disabled) {\n      EventHandler.remove(this.nextIcon, 'click', this.navigateNextHandler);\n      addClass([this.nextIcon], DISABLED);\n      addClass([this.nextIcon], OVERLAY);\n      this.nextIcon.setAttribute('aria-disabled', 'true');\n    } else {\n      EventHandler.add(this.nextIcon, 'click', this.navigateNextHandler);\n      removeClass([this.nextIcon], DISABLED);\n      removeClass([this.nextIcon], OVERLAY);\n      this.nextIcon.setAttribute('aria-disabled', 'false');\n    }\n  };\n\n  CalendarBase.prototype.compare = function (startDate, endDate, modifier) {\n    var start = endDate.getFullYear();\n    var end;\n    var result;\n    end = start;\n    result = 0;\n\n    if (modifier) {\n      start = start - start % modifier;\n      end = start - start % modifier + modifier - 1;\n    }\n\n    if (startDate.getFullYear() > end) {\n      result = 1;\n    } else if (startDate.getFullYear() < start) {\n      result = -1;\n    }\n\n    return result;\n  };\n\n  CalendarBase.prototype.isMinMaxRange = function (date) {\n    return +date >= +this.min && +date <= +this.max;\n  };\n\n  CalendarBase.prototype.isMonthYearRange = function (date) {\n    if (this.calendarMode === 'Gregorian') {\n      return date.getMonth() >= this.min.getMonth() && date.getFullYear() >= this.min.getFullYear() && date.getMonth() <= this.max.getMonth() && date.getFullYear() <= this.max.getFullYear();\n    } else {\n      var islamicDate = this.islamicModule.getIslamicDate(date);\n      return islamicDate.month >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).month && islamicDate.year >= this.islamicModule.getIslamicDate(new Date(1944, 1, 18)).year && islamicDate.month <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).month && islamicDate.year <= this.islamicModule.getIslamicDate(new Date(2069, 1, 16)).year;\n    }\n  };\n\n  CalendarBase.prototype.compareYear = function (start, end) {\n    return this.compare(start, end, 0);\n  };\n\n  CalendarBase.prototype.compareDecade = function (start, end) {\n    return this.compare(start, end, 10);\n  };\n\n  CalendarBase.prototype.shiftArray = function (array, i) {\n    return array.slice(i).concat(array.slice(0, i));\n  };\n\n  CalendarBase.prototype.addDay = function (date, i, e, max, min) {\n    var column = i;\n    var value = new Date(+date);\n\n    if (!isNullOrUndefined(this.tableBodyElement) && !isNullOrUndefined(e)) {\n      while (this.findNextTD(new Date(+date), column, max, min)) {\n        column += i;\n      }\n\n      var rangeValue = new Date(value.setDate(value.getDate() + column));\n      column = +rangeValue > +max || +rangeValue < +min ? column === i ? i - i : i : column;\n    }\n\n    date.setDate(date.getDate() + column);\n  };\n\n  CalendarBase.prototype.findNextTD = function (date, column, max, min) {\n    var value = new Date(date.setDate(date.getDate() + column));\n    var collection = [];\n    var isDisabled = false;\n\n    if ((!isNullOrUndefined(value) && value.getMonth()) === (!isNullOrUndefined(this.currentDate) && this.currentDate.getMonth())) {\n      var tdEles = void 0;\n\n      if (this.calendarMode === 'Gregorian') {\n        tdEles = this.renderDays(value);\n      } else {\n        tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\n      }\n\n      collection = tdEles.filter(function (element) {\n        return element.classList.contains(DISABLED);\n      });\n    } else {\n      collection = this.tableBodyElement.querySelectorAll('td.' + DISABLED);\n    }\n\n    if (+value <= +max && +value >= +min) {\n      if (collection.length) {\n        for (var i = 0; i < collection.length; i++) {\n          isDisabled = +value === +new Date(parseInt(collection[i].id, 0)) ? true : false;\n\n          if (isDisabled) {\n            break;\n          }\n        }\n      }\n    }\n\n    return isDisabled;\n  };\n\n  CalendarBase.prototype.getMaxDays = function (d) {\n    var date;\n    var month;\n    var tmpDate = new Date(this.checkValue(d));\n    date = 28;\n    month = tmpDate.getMonth();\n\n    while (tmpDate.getMonth() === month) {\n      ++date;\n      tmpDate.setDate(date);\n    }\n\n    return date - 1;\n  };\n\n  CalendarBase.prototype.setDateDecade = function (date, year) {\n    date.setFullYear(year);\n    this.setProperties({\n      value: new Date(this.checkValue(date))\n    }, true);\n  };\n\n  ;\n\n  CalendarBase.prototype.setDateYear = function (date, value) {\n    date.setFullYear(value.getFullYear(), value.getMonth(), date.getDate());\n\n    if (value.getMonth() !== date.getMonth()) {\n      date.setDate(0);\n      this.currentDate = new Date(this.checkValue(value));\n    }\n\n    this.setProperties({\n      value: new Date(this.checkValue(date))\n    }, true);\n  };\n\n  CalendarBase.prototype.compareMonth = function (start, end) {\n    var result;\n\n    if (start.getFullYear() > end.getFullYear()) {\n      result = 1;\n    } else if (start.getFullYear() < end.getFullYear()) {\n      result = -1;\n    } else {\n      result = start.getMonth() === end.getMonth() ? 0 : start.getMonth() > end.getMonth() ? 1 : -1;\n    }\n\n    return result;\n  };\n\n  CalendarBase.prototype.checkValue = function (inValue) {\n    if (inValue instanceof Date) {\n      return inValue.toUTCString();\n    } else {\n      return '' + inValue;\n    }\n  };\n\n  CalendarBase.prototype.checkView = function () {\n    if (this.start !== 'Decade' && this.start !== 'Year') {\n      this.setProperties({\n        start: 'Month'\n      }, true);\n    }\n\n    if (this.depth !== 'Decade' && this.depth !== 'Year') {\n      this.setProperties({\n        depth: 'Month'\n      }, true);\n    }\n\n    if (this.getViewNumber(this.depth) > this.getViewNumber(this.start)) {\n      this.setProperties({\n        depth: 'Month'\n      }, true);\n    }\n  };\n\n  __decorate([Property(new Date(1900, 0, 1))], CalendarBase.prototype, \"min\", void 0);\n\n  __decorate([Property(true)], CalendarBase.prototype, \"enabled\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(new Date(2099, 11, 31))], CalendarBase.prototype, \"max\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"firstDayOfWeek\", void 0);\n\n  __decorate([Property('Gregorian')], CalendarBase.prototype, \"calendarMode\", void 0);\n\n  __decorate([Property('Month')], CalendarBase.prototype, \"start\", void 0);\n\n  __decorate([Property('Month')], CalendarBase.prototype, \"depth\", void 0);\n\n  __decorate([Property(false)], CalendarBase.prototype, \"weekNumber\", void 0);\n\n  __decorate([Property('FirstDay')], CalendarBase.prototype, \"weekRule\", void 0);\n\n  __decorate([Property(true)], CalendarBase.prototype, \"showTodayButton\", void 0);\n\n  __decorate([Property('Short')], CalendarBase.prototype, \"dayHeaderFormat\", void 0);\n\n  __decorate([Property(false)], CalendarBase.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"keyConfigs\", void 0);\n\n  __decorate([Property(null)], CalendarBase.prototype, \"serverTimezoneOffset\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"created\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"destroyed\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"navigated\", void 0);\n\n  __decorate([Event()], CalendarBase.prototype, \"renderDayCell\", void 0);\n\n  CalendarBase = __decorate([NotifyPropertyChanges], CalendarBase);\n  return CalendarBase;\n}(Component);\n\nexport { CalendarBase };\n/**\r\n * Represents the Calendar component that allows the user to select a date.\r\n * ```html\r\n * <div id=\"calendar\"/>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var calendarObj = new Calendar({ value: new Date() });\r\n *   calendarObj.appendTo(\"#calendar\");\r\n * </script>\r\n * ```\r\n */\n\nvar Calendar =\n/** @class */\nfunction (_super) {\n  __extends(Calendar, _super);\n  /**\r\n   * Initialized new instance of Calendar Class.\r\n   * Constructor for creating the widget\r\n   * @param  {CalendarModel} options?\r\n   * @param  {string|HTMLElement} element?\r\n   */\n\n\n  function Calendar(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n  /**\r\n   * To Initialize the control rendering.\r\n   * @returns void\r\n   * @private\r\n   */\n\n\n  Calendar.prototype.render = function () {\n    if (this.calendarMode === 'Islamic' && this.islamicModule === undefined) {\n      throwError('Requires the injectable Islamic modules to render Calendar in Islamic mode');\n    }\n\n    if (this.isMultiSelection && typeof this.values === 'object' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      var tempValues = [];\n      var copyValues = [];\n\n      for (var limit = 0; limit < this.values.length; limit++) {\n        if (tempValues.indexOf(+this.values[limit]) === -1) {\n          tempValues.push(+this.values[limit]);\n          copyValues.push(this.values[limit]);\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n\n      for (var index = 0; index < this.values.length; index++) {\n        if (!this.checkDateValue(this.values[index])) {\n          if (typeof this.values[index] === 'string' && this.checkDateValue(new Date(this.checkValue(this.values[index])))) {\n            var copyDate = new Date(this.checkValue(this.values[index]));\n            this.values.splice(index, 1);\n            this.values.splice(index, 0, copyDate);\n          } else {\n            this.values.splice(index, 1);\n          }\n        }\n      }\n\n      this.setProperties({\n        value: this.values[this.values.length - 1]\n      }, true);\n      this.previousValues = this.values.length;\n    }\n\n    this.validateDate();\n    this.minMaxUpdate();\n    this.setEnable(this.enabled);\n\n    if (this.getModuleName() === 'calendar') {\n      this.setClass(this.cssClass);\n    }\n\n    _super.prototype.render.call(this);\n\n    if (this.getModuleName() === 'calendar') {\n      var form = closest(this.element, 'form');\n\n      if (form) {\n        EventHandler.add(form, 'reset', this.formResetHandler.bind(this));\n      }\n\n      this.setTimeZone(this.serverTimezoneOffset);\n    }\n\n    this.renderComplete();\n  };\n\n  Calendar.prototype.setEnable = function (enable) {\n    if (!enable) {\n      addClass([this.element], DISABLED);\n    } else {\n      removeClass([this.element], DISABLED);\n    }\n  };\n\n  Calendar.prototype.setClass = function (newCssClass, oldCssClass) {\n    if (!isNullOrUndefined(oldCssClass)) {\n      oldCssClass = oldCssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(newCssClass)) {\n      newCssClass = newCssClass.replace(/\\s+/g, ' ').trim();\n    }\n\n    if (!isNullOrUndefined(oldCssClass) && oldCssClass !== '') {\n      removeClass([this.element], oldCssClass.split(' '));\n    }\n\n    if (!isNullOrUndefined(newCssClass)) {\n      addClass([this.element], newCssClass.split(' '));\n    }\n  };\n\n  Calendar.prototype.isDayLightSaving = function () {\n    var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();\n    var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();\n    return this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset);\n  };\n\n  Calendar.prototype.setTimeZone = function (offsetValue) {\n    if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {\n      var serverTimezoneDiff = offsetValue;\n      var clientTimeZoneDiff = new Date().getTimezoneOffset() / 60;\n      var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;\n      timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;\n      this.value = new Date(this.value.getTime() + timeZoneDiff * 60 * 60 * 1000);\n    }\n  };\n\n  Calendar.prototype.formResetHandler = function () {\n    this.setProperties({\n      value: null\n    }, true);\n  };\n\n  Calendar.prototype.validateDate = function () {\n    if (typeof this.value === 'string') {\n      this.setProperties({\n        value: this.checkDateValue(new Date(this.checkValue(this.value)))\n      }, true); // persist the value property.\n    }\n\n    _super.prototype.validateDate.call(this, this.value);\n\n    if (!isNullOrUndefined(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max) {\n      this.currentDate = new Date(this.checkValue(this.value));\n    }\n\n    if (isNaN(+this.value)) {\n      this.setProperties({\n        value: null\n      }, true);\n    }\n  };\n\n  Calendar.prototype.minMaxUpdate = function () {\n    if (this.getModuleName() === 'calendar') {\n      if (!isNullOrUndefined(this.value) && this.value <= this.min && this.min <= this.max) {\n        this.setProperties({\n          value: this.min\n        }, true);\n        this.changedArgs = {\n          value: this.value\n        };\n      } else {\n        if (!isNullOrUndefined(this.value) && this.value >= this.max && this.min <= this.max) {\n          this.setProperties({\n            value: this.max\n          }, true);\n          this.changedArgs = {\n            value: this.value\n          };\n        }\n      }\n    }\n\n    if (this.getModuleName() !== 'calendar' && !isNullOrUndefined(this.value)) {\n      if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max) {\n        _super.prototype.minMaxUpdate.call(this, this.min);\n      } else {\n        if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max) {\n          _super.prototype.minMaxUpdate.call(this, this.max);\n        }\n      }\n    } else {\n      _super.prototype.minMaxUpdate.call(this, this.value);\n    }\n  };\n\n  Calendar.prototype.generateTodayVal = function (value) {\n    var tempValue = new Date();\n\n    if (value) {\n      tempValue.setHours(value.getHours());\n      tempValue.setMinutes(value.getMinutes());\n      tempValue.setSeconds(value.getSeconds());\n      tempValue.setMilliseconds(value.getMilliseconds());\n    } else {\n      tempValue = new Date(tempValue.getFullYear(), tempValue.getMonth(), tempValue.getDate(), 0, 0, 0, 0);\n    }\n\n    return tempValue;\n  };\n\n  Calendar.prototype.todayButtonClick = function (e) {\n    if (this.showTodayButton) {\n      var tempValue = this.generateTodayVal(this.value);\n      this.setProperties({\n        value: tempValue\n      }, true);\n      this.isTodayClicked = true;\n      this.todayButtonEvent = e;\n\n      if (this.isMultiSelection) {\n        var copyValues = this.copyValues(this.values);\n\n        if (!_super.prototype.checkPresentDate.call(this, tempValue, this.values)) {\n          copyValues.push(tempValue);\n          this.setProperties({\n            values: copyValues\n          });\n        }\n      }\n\n      _super.prototype.todayButtonClick.call(this, e, new Date(+this.value));\n    }\n  };\n\n  Calendar.prototype.keyActionHandle = function (e) {\n    _super.prototype.keyActionHandle.call(this, e, this.value, this.isMultiSelection);\n  };\n  /**\r\n   * Initialize the event handler\r\n   * @private\r\n   */\n\n\n  Calendar.prototype.preRender = function () {\n    var _this = this;\n\n    this.changeHandler = function (e) {\n      _this.triggerChange(e);\n    };\n\n    this.checkView();\n\n    _super.prototype.preRender.call(this, this.value);\n  };\n\n  ;\n  /**\r\n     */\n\n  Calendar.prototype.createContent = function () {\n    this.previousDate = this.value;\n    this.previousDateTime = this.value;\n\n    _super.prototype.createContent.call(this);\n  };\n\n  Calendar.prototype.minMaxDate = function (localDate) {\n    return _super.prototype.minMaxDate.call(this, localDate);\n  };\n\n  Calendar.prototype.renderMonths = function (e, value, isCustomDate) {\n    _super.prototype.renderMonths.call(this, e, this.value, isCustomDate);\n  };\n\n  Calendar.prototype.renderDays = function (currentDate, value, isMultiSelect, values, isCustomDate) {\n    var tempDays = _super.prototype.renderDays.call(this, currentDate, this.value, this.isMultiSelection, this.values, isCustomDate);\n\n    if (this.isMultiSelection) {\n      _super.prototype.validateValues.call(this, this.isMultiSelection, this.values);\n    }\n\n    return tempDays;\n  };\n\n  Calendar.prototype.renderYears = function (e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderYears.call(this, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderYears(e, this.value);\n    }\n  };\n\n  Calendar.prototype.renderDecades = function (e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderDecades.call(this, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderDecade(e, this.value);\n    }\n  };\n\n  Calendar.prototype.renderTemplate = function (elements, count, classNm, e) {\n    if (this.calendarMode === 'Gregorian') {\n      _super.prototype.renderTemplate.call(this, elements, count, classNm, e, this.value);\n    } else {\n      this.islamicModule.islamicRenderTemplate(elements, count, classNm, e, this.value);\n    }\n\n    this.changedArgs = {\n      value: this.value,\n      values: this.values\n    };\n    this.changeHandler();\n  };\n\n  Calendar.prototype.clickHandler = function (e) {\n    var eve = e.currentTarget;\n    this.isPopupClicked = true;\n\n    if (eve.classList.contains(OTHERMONTH)) {\n      if (this.isMultiSelection) {\n        var copyValues = this.copyValues(this.values);\n        copyValues.push(this.getIdValue(e, null));\n        this.setProperties({\n          values: copyValues\n        }, true);\n        this.setProperties({\n          value: this.values[this.values.length - 1]\n        }, true);\n      } else {\n        this.setProperties({\n          value: this.getIdValue(e, null)\n        }, true);\n      }\n    }\n\n    var storeView = this.currentView();\n\n    _super.prototype.clickHandler.call(this, e, this.value);\n\n    if (this.isMultiSelection && this.currentDate !== this.value && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0]) && storeView === 'Year') {\n      this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\n    }\n  };\n\n  Calendar.prototype.switchView = function (view, e, isMultiSelection, isCustomDate) {\n    _super.prototype.switchView.call(this, view, e, this.isMultiSelection, isCustomDate);\n  };\n  /**\r\n   * To get component name\r\n   * @private\r\n   */\n\n\n  Calendar.prototype.getModuleName = function () {\n    _super.prototype.getModuleName.call(this);\n\n    return 'calendar';\n  };\n  /**\r\n   * Gets the properties to be maintained upon browser refresh.\r\n   * @returns string\r\n   */\n\n\n  Calendar.prototype.getPersistData = function () {\n    _super.prototype.getPersistData.call(this);\n\n    var keyEntity = ['value', 'values'];\n    return this.addOnPersist(keyEntity);\n  };\n  /**\r\n   * Called internally if any of the property value changed.\r\n   * returns void\r\n   * @private\r\n   */\n\n\n  Calendar.prototype.onPropertyChanged = function (newProp, oldProp) {\n    this.effect = '';\n    this.rangeValidation(this.min, this.max);\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'value':\n          if (this.isDateSelected) {\n            if (typeof newProp.value === 'string') {\n              this.setProperties({\n                value: new Date(this.checkValue(newProp.value))\n              }, true);\n            } else {\n              newProp.value = new Date(this.checkValue(newProp.value));\n            }\n\n            if (isNaN(+this.value)) {\n              this.setProperties({\n                value: oldProp.value\n              }, true);\n            }\n\n            this.update();\n          }\n\n          break;\n\n        case 'values':\n          if (this.isDateSelected) {\n            if (typeof newProp.values === 'string' || typeof newProp.values === 'number') {\n              this.setProperties({\n                values: null\n              }, true);\n            } else {\n              var copyValues = this.copyValues(this.values);\n\n              for (var index = 0; index < copyValues.length; index++) {\n                var tempDate = copyValues[index];\n\n                if (this.checkDateValue(tempDate) && !_super.prototype.checkPresentDate.call(this, tempDate, copyValues)) {\n                  copyValues.push(tempDate);\n                }\n              }\n\n              this.setProperties({\n                values: copyValues\n              }, true);\n\n              if (this.values.length > 0) {\n                this.setProperties({\n                  value: newProp.values[newProp.values.length - 1]\n                }, true);\n              }\n            }\n\n            this.validateValues(this.isMultiSelection, this.values);\n            this.update();\n          }\n\n          break;\n\n        case 'isMultiSelection':\n          if (this.isDateSelected) {\n            this.setProperties({\n              isMultiSelection: newProp.isMultiSelection\n            }, true);\n            this.update();\n          }\n\n          break;\n\n        case 'enabled':\n          this.setEnable(this.enabled);\n          break;\n\n        case 'cssClass':\n          if (this.getModuleName() === 'calendar') {\n            this.setClass(newProp.cssClass, oldProp.cssClass);\n          }\n\n          break;\n\n        default:\n          _super.prototype.onPropertyChanged.call(this, newProp, oldProp, this.isMultiSelection, this.values);\n\n      }\n    }\n\n    this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\n  };\n  /**\r\n   * Destroys the widget.\r\n   * @returns void\r\n   */\n\n\n  Calendar.prototype.destroy = function () {\n    _super.prototype.destroy.call(this);\n\n    if (this.getModuleName() === 'calendar') {\n      var form = closest(this.element, 'form');\n\n      if (form) {\n        EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\n      }\n    }\n  };\n  /**\r\n   * This method is used to navigate to the month/year/decade view of the Calendar.\r\n   * @param  {string} view - Specifies the view of the Calendar.\r\n   * @param  {Date} date - Specifies the focused date in a view.\r\n   * @returns void\r\n     */\n\n\n  Calendar.prototype.navigateTo = function (view, date, isCustomDate) {\n    this.minMaxUpdate();\n\n    _super.prototype.navigateTo.call(this, view, date, isCustomDate);\n  };\n  /**\r\n   * Gets the current view of the Calendar.\r\n   * @returns string\r\n     */\n\n\n  Calendar.prototype.currentView = function () {\n    return _super.prototype.currentView.call(this);\n  };\n  /**\r\n   * This method is used to add the single or multiple dates to the values property of the Calendar.\r\n   * @param  {Date || Date[]} dates - Specifies the date or dates to be added to the values property of the Calendar.\r\n   * @returns void\r\n     */\n\n\n  Calendar.prototype.addDate = function (dates) {\n    if (typeof dates !== 'string' && typeof dates !== 'number') {\n      var copyValues = this.copyValues(this.values);\n\n      if (typeof dates === 'object' && dates.length > 0) {\n        var tempDates = dates;\n\n        for (var i = 0; i < tempDates.length; i++) {\n          if (this.checkDateValue(tempDates[i]) && !_super.prototype.checkPresentDate.call(this, tempDates[i], copyValues)) {\n            if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n              copyValues.push(tempDates[i]);\n            } else {\n              copyValues = [new Date(+tempDates[i])];\n            }\n          }\n        }\n      } else {\n        if (this.checkDateValue(dates) && !_super.prototype.checkPresentDate.call(this, dates, copyValues)) {\n          if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\n            copyValues.push(dates);\n          } else {\n            copyValues = [new Date(+dates)];\n          }\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, true);\n\n      if (this.isMultiSelection) {\n        this.setProperties({\n          value: this.values[this.values.length - 1]\n        }, true);\n      }\n\n      this.validateValues(this.isMultiSelection, copyValues);\n      this.update();\n      this.changedArgs = {\n        value: this.value,\n        values: this.values\n      };\n      this.changeHandler();\n    }\n  };\n  /**\r\n   * This method is used to remove the single or multiple dates from the values property of the Calendar.\r\n   * @param  {Date || Date[]} dates - Specifies the date or dates which need to be removed from the values property of the Calendar.\r\n   * @returns void\r\n     */\n\n\n  Calendar.prototype.removeDate = function (dates) {\n    if (typeof dates !== 'string' && typeof dates !== 'number' && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      var copyValues = this.copyValues(this.values);\n\n      if (typeof dates === 'object' && dates.length > 0) {\n        var tempDates = dates;\n\n        for (var index = 0; index < tempDates.length; index++) {\n          for (var i = 0; i < copyValues.length; i++) {\n            if (+copyValues[i] === +tempDates[index]) {\n              copyValues.splice(i, 1);\n            }\n          }\n        }\n      } else {\n        for (var i = 0; i < copyValues.length; i++) {\n          if (+copyValues[i] === +dates) {\n            copyValues.splice(i, 1);\n          }\n        }\n      }\n\n      this.setProperties({\n        values: copyValues\n      }, false);\n      this.update();\n\n      if (this.isMultiSelection) {\n        this.setProperties({\n          value: this.values[this.values.length - 1]\n        }, true);\n      }\n\n      this.changedArgs = {\n        value: this.value,\n        values: this.values\n      };\n      this.changeHandler();\n    }\n  };\n  /**\r\n   * To set custom today date in calendar\r\n   * @private\r\n   */\n\n\n  Calendar.prototype.setTodayDate = function (date) {\n    var todayDate = new Date(+date);\n    this.setProperties({\n      value: todayDate\n    }, true);\n\n    _super.prototype.todayButtonClick.call(this, null, todayDate, true);\n  };\n\n  Calendar.prototype.update = function () {\n    this.validateDate();\n    this.minMaxUpdate();\n\n    _super.prototype.setValueUpdate.call(this);\n  };\n\n  Calendar.prototype.selectDate = function (e, date, element) {\n    _super.prototype.selectDate.call(this, e, date, element, this.isMultiSelection, this.values);\n\n    if (this.isMultiSelection && !isNullOrUndefined(this.values) && this.values.length > 0) {\n      this.setProperties({\n        value: this.values[this.values.length - 1]\n      }, true);\n    }\n\n    this.changedArgs = {\n      value: this.value,\n      values: this.values\n    };\n    this.changeHandler(e);\n  };\n\n  Calendar.prototype.changeEvent = function (e) {\n    if ((this.value && this.value.valueOf()) !== (this.previousDate && +this.previousDate.valueOf()) || this.isMultiSelection) {\n      if (this.isAngular && this.preventChange) {\n        this.preventChange = false;\n      } else {\n        this.trigger('change', this.changedArgs);\n      }\n\n      this.previousDate = new Date(+this.value);\n    }\n  };\n\n  Calendar.prototype.triggerChange = function (e) {\n    if (!isNullOrUndefined(this.todayButtonEvent) && this.isTodayClicked) {\n      e = this.todayButtonEvent;\n      this.isTodayClicked = false;\n    }\n\n    this.changedArgs.event = e || null;\n    this.changedArgs.isInteracted = !isNullOrUndefined(e);\n\n    if (!isNullOrUndefined(this.value)) {\n      this.setProperties({\n        value: this.value\n      }, true);\n    }\n\n    if (!this.isMultiSelection && +this.value !== Number.NaN && (+this.value !== +this.previousDate || this.previousDate == null && !isNaN(+this.value))) {\n      this.changeEvent(e);\n    } else if (!isNullOrUndefined(this.values) && this.previousValues !== this.values.length) {\n      this.changeEvent(e);\n      this.previousValues = this.values.length;\n    }\n  };\n\n  __decorate([Property(null)], Calendar.prototype, \"value\", void 0);\n\n  __decorate([Property(null)], Calendar.prototype, \"values\", void 0);\n\n  __decorate([Property(false)], Calendar.prototype, \"isMultiSelection\", void 0);\n\n  __decorate([Event()], Calendar.prototype, \"change\", void 0);\n\n  Calendar = __decorate([NotifyPropertyChanges], Calendar);\n  return Calendar;\n}(CalendarBase);\n\nexport { Calendar };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-calendars/src/calendar/calendar.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","EventHandler","Internationalization","isBlazor","KeyboardEvents","L10n","NotifyPropertyChanges","cldrData","getDefaultDateObject","rippleEffect","removeClass","detach","closest","addClass","attributes","getValue","getUniqueID","extend","Browser","Property","Event","isNullOrUndefined","throwError","OTHERMONTH","OTHERDECADE","ROOT","DEVICE","HEADER","RTL","CONTENT","YEAR","MONTH","DECADE","ICON","PREVICON","NEXTICON","PREVSPAN","NEXTSPAN","ICONCONTAINER","DISABLED","OVERLAY","WEEKEND","WEEKNUMBER","SELECTED","FOCUSEDDATE","OTHERMONTHROW","TODAY","TITLE","LINK","CELL","WEEKHEADER","ZOOMIN","FOOTER","BTN","FLAT","CSS","PRIMARY","DAYHEADERLONG","dayMilliSeconds","minutesMilliSeconds","CalendarBase","_super","options","element","_this","call","effect","isPopupClicked","isDateSelected","isTodayClicked","preventChange","isAngular","render","rangeValidation","min","max","calendarEleCopy","cloneNode","calendarMode","setSeconds","Date","globalize","locale","firstDayOfWeek","setProperties","getFirstDayOfWeek","todayDisabled","todayDate","setHours","getModuleName","classList","add","enableRtl","isDevice","tabIndex","hasAttribute","getAttribute","setAttribute","calendarElement","createElement","createHeader","createContent","wireEvents","getDefaultKeyConfig","defaultKeyConfigs","controlUp","controlDown","moveDown","moveUp","moveLeft","moveRight","select","home","end","pageUp","pageDown","shiftPageUp","shiftPageDown","controlHome","controlEnd","altUpArrow","spacebar","altRightArrow","altLeftArrow","validateDate","value","checkDateValue","checkValue","currentDate","setOverlayIndex","popupWrapper","popupElement","modal","index","parseInt","style","zIndex","toString","minMaxUpdate","ariaPrevAttrs","ariaNextAttrs","ariaTitleAttrs","headerElement","className","iconContainer","previousIcon","attrs","type","duration","selector","isCenterRipple","nextIcon","headerTitleElement","appendChild","adjustLongHeaderSize","contentElement","table","createContentHeader","createContentBody","showTodayButton","createContentFooter","getCultureValues","culShortNames","cldrObj","dayFormat","dayHeaderFormat","toLowerCase","getCultureObjects","_i","_a","keys","obj","push","toCapitalize","text","toUpperCase","slice","querySelectorAll","daysCount","html","shortNames","tableHeadElement","weekNumber","shiftArray","days","innerHTML","start","renderYears","renderDecades","renderMonths","updateFooter","todayElement","textContent","l10","getConstant","minimum","maximum","l10nLocale","today","role","footer","contains","todayButtonClick","id","ref","keyConfig","moduleName","navigateTitle","keyConfigs","document","getElementById","blazorRef","serverModuleName","keyboardModule","eventName","keyAction","keyActionHandle","bind","dateWireEvents","e","isCustomDate","currentView","depth","getViewNumber","navigateTo","checkDeviceMode","invokeMethodAsync","multiSelection","preventDefault","tableBodyElement","querySelector","focusedDate","selectedDate","split","focus","targetEle","args","Action","action","Key","Events","SelectDate","FocusedDate","Id","TargetClassList","blur","view","depthValue","levelRestrict","KeyboardNavigate","selectDate","contentClick","title","firstDay","lastDay","addMonths","addYears","getFullYear","number","date","isMonthYearRange","addDay","isMinMaxRange","preRender","navigatePreviousHandler","navigatePrevious","navigateNextHandler","navigateNext","navigateHandler","triggerNavigate","minMaxDate","localDate","minDate","maxDate","numCells","tdEles","renderDays","islamicModule","islamicRenderDays","renderTemplate","islamicRenderTemplate","values","isTodayDate","cellsCount","currentMonth","getMonth","titleUpdate","getHours","getMinutes","getSeconds","getMilliseconds","getDay","setStartDate","day","weekEle","weekAnchor","numberOfDays","weekRule","finalDate","getDate","getWeek","dateFormatOptions","skeleton","parseDate","formatDate","tdEle","dayCell","dayLink","format","disabled","renderDayCellArgs","isDisabled","isOutOfRange","argument","renderDayCellEvent","argsDate","localDateString","tempDateString","splice","otherMnthBool","disabledCls","clickHandler","tempValue","formatOptions","getFromatStringValue","calendar","getDateVal","updateFocus","otherMonth","tableElement","removeTableHeadElement","valueUtil","curDate","mon","yr","curYrs","minYr","minMonth","maxYr","maxMonth","setMonth","setDate","month","localMonth","yearCell","localYr","startYr","setFullYear","endYr","startFullYr","endFullYr","startHdrYr","endHdrYr","startYear","rowIterator","year","valueOf","collection","lastDate","timeOffset","Math","abs","getTimezoneOffset","findLastDay","isNaN","elements","count","classNm","trEle","weekNumCell","numberCell","otherMonthCell","row","children","iconHandler","islamicIconHandler","setAriaActiveDescendant","clickEventEmitter","eve","currentTarget","getIdValue","islamicDate","getIslamicDate","toGregorian","switchView","remove","requiredModules","modules","member","getPersistData","keyEntity","addOnPersist","onPropertyChanged","newProp","oldProp","prop","validateValues","checkView","setLocale","undefined","copyValues","skipIndex","tempValueString","minFormatOption","minStringValue","minString","maxFormatOption","maxStringValue","maxString","setValueUpdate","dayFormatOptions","monthFormatOptions","setActiveDescendant","focusedEle","selectedEle","previousIconHandler","compareMonth","nextIconHandler","compareYear","compareDecade","destroy","removeAttribute","stringVal","previous","islamicPrevious","next","islamicNext","ld","gregorianFormat","islamicFormat","mainVal","ceil","time","tzOffset","getTime","tzOffsetDiff","setTime","getMaxDays","dateString","node","setDateDecade","setDateYear","checkPresentDate","tempElement","selectedElement","indexOf","dateSeperator","dates","previousValue","checkPrevious","name","trigger","navigatedEvent","navigatedArgs","event","compare","startDate","endDate","modifier","result","array","concat","column","findNextTD","rangeValue","filter","tmpDate","inValue","toUTCString","Calendar","isMultiSelection","tempValues","limit","copyDate","previousValues","setEnable","enabled","setClass","cssClass","form","formResetHandler","setTimeZone","serverTimezoneOffset","renderComplete","enable","newCssClass","oldCssClass","replace","trim","isDayLightSaving","secondOffset","firstOffset","offsetValue","serverTimezoneDiff","clientTimeZoneDiff","timeZoneDiff","changedArgs","generateTodayVal","setMinutes","setMilliseconds","todayButtonEvent","changeHandler","triggerChange","previousDate","previousDateTime","isMultiSelect","tempDays","islamicRenderYears","islamicRenderDecade","storeView","update","tempDate","addDate","tempDates","removeDate","setTodayDate","changeEvent","isInteracted","Number","NaN"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n};\r\nimport { Component, EventHandler, Internationalization, isBlazor } from '@syncfusion/ej2-base';\r\nimport { KeyboardEvents, L10n } from '@syncfusion/ej2-base';\r\nimport { NotifyPropertyChanges } from '@syncfusion/ej2-base';\r\nimport { cldrData, getDefaultDateObject, rippleEffect } from '@syncfusion/ej2-base';\r\nimport { removeClass, detach, closest, addClass, attributes } from '@syncfusion/ej2-base';\r\nimport { getValue, getUniqueID, extend, Browser } from '@syncfusion/ej2-base';\r\nimport { Property, Event, isNullOrUndefined, throwError } from '@syncfusion/ej2-base';\r\n//class constant defination.\r\nvar OTHERMONTH = 'e-other-month';\r\nvar OTHERDECADE = 'e-other-year';\r\nvar ROOT = 'e-calendar';\r\nvar DEVICE = 'e-device';\r\nvar HEADER = 'e-header';\r\nvar RTL = 'e-rtl';\r\nvar CONTENT = 'e-content';\r\nvar YEAR = 'e-year';\r\nvar MONTH = 'e-month';\r\nvar DECADE = 'e-decade';\r\nvar ICON = 'e-icons';\r\nvar PREVICON = 'e-prev';\r\nvar NEXTICON = 'e-next';\r\nvar PREVSPAN = 'e-date-icon-prev';\r\nvar NEXTSPAN = 'e-date-icon-next ';\r\nvar ICONCONTAINER = 'e-icon-container';\r\nvar DISABLED = 'e-disabled';\r\nvar OVERLAY = 'e-overlay';\r\nvar WEEKEND = 'e-weekend';\r\nvar WEEKNUMBER = 'e-week-number';\r\nvar SELECTED = 'e-selected';\r\nvar FOCUSEDDATE = 'e-focused-date';\r\nvar OTHERMONTHROW = 'e-month-hide';\r\nvar TODAY = 'e-today';\r\nvar TITLE = 'e-title';\r\nvar LINK = 'e-day';\r\nvar CELL = 'e-cell';\r\nvar WEEKHEADER = 'e-week-header';\r\nvar ZOOMIN = 'e-zoomin';\r\nvar FOOTER = 'e-footer-container';\r\nvar BTN = 'e-btn';\r\nvar FLAT = 'e-flat';\r\nvar CSS = 'e-css';\r\nvar PRIMARY = 'e-primary';\r\nvar DAYHEADERLONG = 'e-calendar-day-header-lg';\r\nvar dayMilliSeconds = 86400000;\r\nvar minutesMilliSeconds = 60000;\r\n/**\r\n *\r\n * @private\r\n */\r\nvar CalendarBase = /** @class */ (function (_super) {\r\n    __extends(CalendarBase, _super);\r\n    /**\r\n     * Initialized new instance of Calendar Class.\r\n     * Constructor for creating the widget\r\n     * @param  {CalendarModel} options?\r\n     * @param  {string|HTMLElement} element?\r\n     */\r\n    function CalendarBase(options, element) {\r\n        var _this = _super.call(this, options, element) || this;\r\n        _this.effect = '';\r\n        _this.isPopupClicked = false;\r\n        _this.isDateSelected = true;\r\n        _this.isTodayClicked = false;\r\n        _this.preventChange = false;\r\n        _this.isAngular = false;\r\n        return _this;\r\n    }\r\n    /**\r\n     * To Initialize the control rendering.\r\n     * @returns void\r\n     * @private\r\n     */\r\n    CalendarBase.prototype.render = function () {\r\n        this.rangeValidation(this.min, this.max);\r\n        this.calendarEleCopy = this.element.cloneNode(true);\r\n        if (this.calendarMode === 'Islamic') {\r\n            if (+(this.min.setSeconds(0)) === +new Date(1900, 0, 1, 0, 0, 0)) {\r\n                this.min = new Date(1944, 2, 18);\r\n            }\r\n            if (+this.max === +new Date(2099, 11, 31)) {\r\n                this.max = new Date(2069, 10, 16);\r\n            }\r\n        }\r\n        this.globalize = new Internationalization(this.locale);\r\n        if (isNullOrUndefined(this.firstDayOfWeek) || this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\r\n            this.setProperties({ firstDayOfWeek: this.globalize.getFirstDayOfWeek() }, true);\r\n        }\r\n        this.todayDisabled = false;\r\n        this.todayDate = new Date(new Date().setHours(0, 0, 0, 0));\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.element.classList.add(ROOT);\r\n            if (this.enableRtl) {\r\n                this.element.classList.add(RTL);\r\n            }\r\n            if (Browser.isDevice) {\r\n                this.element.classList.add(DEVICE);\r\n            }\r\n            attributes(this.element, {\r\n                'data-role': 'calendar'\r\n            });\r\n            this.tabIndex = this.element.hasAttribute('tabindex') ? this.element.getAttribute('tabindex') : '0';\r\n            this.element.setAttribute('tabindex', this.tabIndex);\r\n        }\r\n        else {\r\n            this.calendarElement = this.createElement('div');\r\n            this.calendarElement.classList.add(ROOT);\r\n            if (this.enableRtl) {\r\n                this.calendarElement.classList.add(RTL);\r\n            }\r\n            if (Browser.isDevice) {\r\n                this.calendarElement.classList.add(DEVICE);\r\n            }\r\n            attributes(this.calendarElement, {\r\n                'role': 'calendar'\r\n            });\r\n        }\r\n        this.createHeader();\r\n        this.createContent();\r\n        this.wireEvents();\r\n    };\r\n    CalendarBase.prototype.rangeValidation = function (min, max) {\r\n        if (isNullOrUndefined(min)) {\r\n            this.setProperties({ min: new Date(1900, 0, 1) }, true);\r\n        }\r\n        if (isNullOrUndefined(max)) {\r\n            this.setProperties({ max: new Date(2099, 11, 31) }, true);\r\n        }\r\n    };\r\n    CalendarBase.prototype.getDefaultKeyConfig = function () {\r\n        this.defaultKeyConfigs = {\r\n            controlUp: 'ctrl+38',\r\n            controlDown: 'ctrl+40',\r\n            moveDown: 'downarrow',\r\n            moveUp: 'uparrow',\r\n            moveLeft: 'leftarrow',\r\n            moveRight: 'rightarrow',\r\n            select: 'enter',\r\n            home: 'home',\r\n            end: 'end',\r\n            pageUp: 'pageup',\r\n            pageDown: 'pagedown',\r\n            shiftPageUp: 'shift+pageup',\r\n            shiftPageDown: 'shift+pagedown',\r\n            controlHome: 'ctrl+home',\r\n            controlEnd: 'ctrl+end',\r\n            altUpArrow: 'alt+uparrow',\r\n            spacebar: 'space',\r\n            altRightArrow: 'alt+rightarrow',\r\n            altLeftArrow: 'alt+leftarrow'\r\n        };\r\n        return this.defaultKeyConfigs;\r\n    };\r\n    CalendarBase.prototype.validateDate = function (value) {\r\n        this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(this.min))) }, true);\r\n        this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(this.max))) }, true);\r\n        this.currentDate = this.currentDate ? this.currentDate : new Date(new Date().setHours(0, 0, 0, 0));\r\n        if (!isNullOrUndefined(value) && this.min <= this.max && value >= this.min && value <= this.max) {\r\n            this.currentDate = new Date(this.checkValue(value));\r\n        }\r\n    };\r\n    CalendarBase.prototype.setOverlayIndex = function (popupWrapper, popupElement, modal, isDevice) {\r\n        if (isDevice && !isNullOrUndefined(popupElement) && !isNullOrUndefined(modal) && !isNullOrUndefined(popupWrapper)) {\r\n            var index = parseInt(popupElement.style.zIndex, 10) ? parseInt(popupElement.style.zIndex, 10) : 1000;\r\n            modal.style.zIndex = (index - 1).toString();\r\n            popupWrapper.style.zIndex = index.toString();\r\n        }\r\n    };\r\n    CalendarBase.prototype.minMaxUpdate = function (value) {\r\n        if (!(+this.min <= +this.max)) {\r\n            this.setProperties({ min: this.min }, true);\r\n            addClass([this.element], OVERLAY);\r\n        }\r\n        else {\r\n            removeClass([this.element], OVERLAY);\r\n        }\r\n        this.min = isNullOrUndefined(this.min) || !(+this.min) ? this.min = new Date(1900, 0, 1) : this.min;\r\n        this.max = isNullOrUndefined(this.max) || !(+this.max) ? this.max = new Date(2099, 11, 31) : this.max;\r\n        if (+this.min <= +this.max && value && +value <= +this.max && +value >= +this.min) {\r\n            this.currentDate = new Date(this.checkValue(value));\r\n        }\r\n        else {\r\n            if (+this.min <= +this.max && !value && +this.currentDate > +this.max) {\r\n                this.currentDate = new Date(this.checkValue(this.max));\r\n            }\r\n            else {\r\n                if (+this.currentDate < +this.min) {\r\n                    this.currentDate = new Date(this.checkValue(this.min));\r\n                }\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.createHeader = function () {\r\n        var ariaPrevAttrs = {\r\n            'aria-disabled': 'false',\r\n            'aria-label': 'previous month'\r\n        };\r\n        var ariaNextAttrs = {\r\n            'aria-disabled': 'false',\r\n            'aria-label': 'next month'\r\n        };\r\n        var ariaTitleAttrs = {\r\n            'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title'\r\n        };\r\n        this.headerElement = this.createElement('div', { className: HEADER });\r\n        var iconContainer = this.createElement('div', { className: ICONCONTAINER });\r\n        this.previousIcon = this.createElement('button', { className: '' + PREVICON, attrs: { type: 'button' } });\r\n        rippleEffect(this.previousIcon, {\r\n            duration: 400,\r\n            selector: '.e-prev',\r\n            isCenterRipple: true\r\n        });\r\n        attributes(this.previousIcon, ariaPrevAttrs);\r\n        this.nextIcon = this.createElement('button', { className: '' + NEXTICON, attrs: { type: 'button' } });\r\n        rippleEffect(this.nextIcon, {\r\n            selector: '.e-next',\r\n            duration: 400,\r\n            isCenterRipple: true\r\n        });\r\n        attributes(this.nextIcon, ariaNextAttrs);\r\n        this.headerTitleElement = this.createElement('div', { className: '' + LINK + ' ' + TITLE });\r\n        attributes(this.headerTitleElement, ariaTitleAttrs);\r\n        this.headerElement.appendChild(this.headerTitleElement);\r\n        this.previousIcon.appendChild(this.createElement('span', { className: '' + PREVSPAN + ' ' + ICON }));\r\n        this.nextIcon.appendChild(this.createElement('span', { className: '' + NEXTSPAN + ' ' + ICON }));\r\n        iconContainer.appendChild(this.previousIcon);\r\n        iconContainer.appendChild(this.nextIcon);\r\n        this.headerElement.appendChild(iconContainer);\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.element.appendChild(this.headerElement);\r\n        }\r\n        else {\r\n            this.calendarElement.appendChild(this.headerElement);\r\n        }\r\n        this.adjustLongHeaderSize();\r\n    };\r\n    CalendarBase.prototype.createContent = function () {\r\n        this.contentElement = this.createElement('div', { className: CONTENT });\r\n        this.table = this.createElement('table', { attrs: { tabIndex: '0', 'role': 'grid', 'aria-activedescendant': '' } });\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.element.appendChild(this.contentElement);\r\n        }\r\n        else {\r\n            this.calendarElement.appendChild(this.contentElement);\r\n        }\r\n        this.contentElement.appendChild(this.table);\r\n        this.createContentHeader();\r\n        this.createContentBody();\r\n        if (this.showTodayButton) {\r\n            this.createContentFooter();\r\n        }\r\n    };\r\n    CalendarBase.prototype.getCultureValues = function () {\r\n        var culShortNames = [];\r\n        var cldrObj;\r\n        var dayFormat = (isBlazor() ? 'days.' : 'days.stand-alone.') + this.dayHeaderFormat.toLowerCase();\r\n        if (this.locale === 'en' || this.locale === 'en-US') {\r\n            cldrObj = (getValue(dayFormat, getDefaultDateObject()));\r\n        }\r\n        else {\r\n            cldrObj = (this.getCultureObjects(cldrData, '' + this.locale));\r\n        }\r\n        for (var _i = 0, _a = Object.keys(cldrObj); _i < _a.length; _i++) {\r\n            var obj = _a[_i];\r\n            culShortNames.push(getValue(obj, cldrObj));\r\n        }\r\n        return culShortNames;\r\n    };\r\n    CalendarBase.prototype.toCapitalize = function (text) {\r\n        return !isNullOrUndefined(text) && text.length ? text[0].toUpperCase() + text.slice(1) : text;\r\n    };\r\n    CalendarBase.prototype.createContentHeader = function () {\r\n        if (this.getModuleName() === 'calendar') {\r\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content .e-week-header')[0])) {\r\n                detach(this.element.querySelectorAll('.e-content .e-week-header')[0]);\r\n            }\r\n        }\r\n        else {\r\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0])) {\r\n                detach(this.calendarElement.querySelectorAll('.e-content .e-week-header')[0]);\r\n            }\r\n        }\r\n        var daysCount = 6;\r\n        var html = '';\r\n        var shortNames;\r\n        if (this.firstDayOfWeek > 6 || this.firstDayOfWeek < 0) {\r\n            this.setProperties({ firstDayOfWeek: 0 }, true);\r\n        }\r\n        this.tableHeadElement = this.createElement('thead', { className: WEEKHEADER });\r\n        if (this.weekNumber) {\r\n            html += '<th class=\"e-week-number\"></th>';\r\n            if (this.getModuleName() === 'calendar') {\r\n                addClass([this.element], '' + WEEKNUMBER);\r\n            }\r\n            else {\r\n                addClass([this.calendarElement], '' + WEEKNUMBER);\r\n            }\r\n        }\r\n        shortNames = this.shiftArray(((this.getCultureValues().length > 0 && this.getCultureValues())), this.firstDayOfWeek);\r\n        for (var days = 0; days <= daysCount; days++) {\r\n            html += '<th  class=\"\">' + this.toCapitalize(shortNames[days]) + '</th>';\r\n        }\r\n        html = '<tr>' + html + '</tr>';\r\n        this.tableHeadElement.innerHTML = html;\r\n        this.table.appendChild(this.tableHeadElement);\r\n    };\r\n    CalendarBase.prototype.createContentBody = function () {\r\n        if (this.getModuleName() === 'calendar') {\r\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content tbody')[0])) {\r\n                detach(this.element.querySelectorAll('.e-content tbody')[0]);\r\n            }\r\n        }\r\n        else {\r\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content tbody')[0])) {\r\n                detach(this.calendarElement.querySelectorAll('.e-content tbody')[0]);\r\n            }\r\n        }\r\n        switch (this.start) {\r\n            case 'Year':\r\n                this.renderYears();\r\n                break;\r\n            case 'Decade':\r\n                this.renderDecades();\r\n                break;\r\n            default:\r\n                this.renderMonths();\r\n        }\r\n    };\r\n    CalendarBase.prototype.updateFooter = function () {\r\n        this.todayElement.textContent = this.l10.getConstant('today');\r\n        this.todayElement.setAttribute('aria-label', this.l10.getConstant('today'));\r\n    };\r\n    CalendarBase.prototype.createContentFooter = function () {\r\n        if (this.showTodayButton) {\r\n            var minimum = new Date(+this.min);\r\n            var maximum = new Date(+this.max);\r\n            var l10nLocale = { today: 'Today' };\r\n            this.globalize = new Internationalization(this.locale);\r\n            this.l10 = new L10n(this.getModuleName(), l10nLocale, this.locale);\r\n            this.todayElement = this.createElement('button', { attrs: { role: 'button' } });\r\n            rippleEffect(this.todayElement);\r\n            this.updateFooter();\r\n            addClass([this.todayElement], [BTN, TODAY, FLAT, PRIMARY, CSS]);\r\n            if ((!(+new Date(minimum.setHours(0, 0, 0, 0)) <= +this.todayDate &&\r\n                +this.todayDate <= +new Date(maximum.setHours(0, 0, 0, 0)))) || (this.todayDisabled)) {\r\n                addClass([this.todayElement], DISABLED);\r\n            }\r\n            this.footer = this.createElement('div', { className: FOOTER });\r\n            this.footer.appendChild(this.todayElement);\r\n            if (this.getModuleName() === 'calendar') {\r\n                this.element.appendChild(this.footer);\r\n            }\r\n            if (this.getModuleName() === 'datepicker') {\r\n                this.calendarElement.appendChild(this.footer);\r\n            }\r\n            if (this.getModuleName() === 'datetimepicker') {\r\n                this.calendarElement.appendChild(this.footer);\r\n            }\r\n            if (!this.todayElement.classList.contains(DISABLED)) {\r\n                EventHandler.add(this.todayElement, 'click', this.todayButtonClick, this);\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.wireEvents = function (id, ref, keyConfig, moduleName) {\r\n        if (!(isBlazor() && ref)) {\r\n            EventHandler.add(this.headerTitleElement, 'click', this.navigateTitle, this);\r\n            this.defaultKeyConfigs = extend(this.defaultKeyConfigs, this.keyConfigs);\r\n        }\r\n        else {\r\n            this.element = document.getElementById(id);\r\n            this.defaultKeyConfigs = this.getDefaultKeyConfig();\r\n            this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\r\n            this.blazorRef = ref;\r\n            this.serverModuleName = moduleName;\r\n        }\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.keyboardModule = new KeyboardEvents(this.element, {\r\n                eventName: 'keydown',\r\n                keyAction: this.keyActionHandle.bind(this),\r\n                keyConfigs: this.defaultKeyConfigs\r\n            });\r\n        }\r\n        else {\r\n            this.keyboardModule = new KeyboardEvents(this.calendarElement, {\r\n                eventName: 'keydown',\r\n                keyAction: this.keyActionHandle.bind(this),\r\n                keyConfigs: this.defaultKeyConfigs\r\n            });\r\n        }\r\n    };\r\n    CalendarBase.prototype.dateWireEvents = function (id, ref, keyConfig, moduleName) {\r\n        this.defaultKeyConfigs = this.getDefaultKeyConfig();\r\n        this.defaultKeyConfigs = extend(this.defaultKeyConfigs, keyConfig);\r\n        this.blazorRef = ref;\r\n        this.serverModuleName = moduleName;\r\n    };\r\n    CalendarBase.prototype.todayButtonClick = function (e, value, isCustomDate) {\r\n        if (this.showTodayButton) {\r\n            if (this.currentView() === this.depth) {\r\n                this.effect = '';\r\n            }\r\n            else {\r\n                this.effect = 'e-zoomin';\r\n            }\r\n            if (this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\r\n                this.navigateTo(this.depth, new Date(this.checkValue(value)), isCustomDate);\r\n            }\r\n            else {\r\n                this.navigateTo('Month', new Date(this.checkValue(value)), isCustomDate);\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.checkDeviceMode = function (ref) {\r\n        if (Browser.isDevice && isBlazor() && ref) {\r\n            // tslint:disable-next-line\r\n            ref.invokeMethodAsync('OnDevice', true);\r\n        }\r\n    };\r\n    // tslint:disable-next-line:max-func-body-length\r\n    CalendarBase.prototype.keyActionHandle = function (e, value, multiSelection) {\r\n        if (isBlazor() && this.blazorRef) {\r\n            e.preventDefault();\r\n            if (!this.tableBodyElement) {\r\n                this.element = closest(e.target, '.' + 'e-calendar');\r\n                this.tableBodyElement = this.element.querySelector('tbody');\r\n            }\r\n            multiSelection = false;\r\n        }\r\n        var focusedDate = this.tableBodyElement.querySelector('tr td.e-focused-date');\r\n        var selectedDate;\r\n        if (multiSelection) {\r\n            if (!isNullOrUndefined(focusedDate) && +value === parseInt(focusedDate.getAttribute('id').split('_')[0], 10)) {\r\n                selectedDate = focusedDate;\r\n            }\r\n            else {\r\n                selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\r\n            }\r\n        }\r\n        else {\r\n            selectedDate = this.tableBodyElement.querySelector('tr td.e-selected');\r\n        }\r\n        if (isBlazor() && this.blazorRef) {\r\n            this.tableBodyElement.focus();\r\n            var targetEle = e.target;\r\n            var args = {\r\n                Action: e.action, Key: e.key, Events: e,\r\n                SelectDate: selectedDate ? selectedDate.id : null,\r\n                FocusedDate: focusedDate ? focusedDate.id : null,\r\n                classList: selectedDate ? selectedDate.classList.toString() : focusedDate ? focusedDate.classList.toString() : 'e-cell',\r\n                Id: focusedDate ? focusedDate.id : selectedDate ? selectedDate.id : null,\r\n                TargetClassList: targetEle.classList.toString()\r\n            };\r\n            // tslint:disable-next-line\r\n            this.blazorRef.invokeMethodAsync('OnCalendarKeyboardEvent', args);\r\n            if (targetEle.classList.contains('e-today')) {\r\n                targetEle.blur();\r\n                this.tableBodyElement.focus();\r\n            }\r\n            if (this.serverModuleName === 'sf.calendars.Calendar') {\r\n                this.tableBodyElement = null;\r\n            }\r\n        }\r\n        else {\r\n            var view = this.getViewNumber(this.currentView());\r\n            var depthValue = this.getViewNumber(this.depth);\r\n            var levelRestrict = (view === depthValue && this.getViewNumber(this.start) >= depthValue);\r\n            this.effect = '';\r\n            switch (e.action) {\r\n                case 'moveLeft':\r\n                    this.KeyboardNavigate(-1, view, e, this.max, this.min);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'moveRight':\r\n                    this.KeyboardNavigate(1, view, e, this.max, this.min);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'moveUp':\r\n                    if (view === 0) {\r\n                        this.KeyboardNavigate(-7, view, e, this.max, this.min); // move the current date to the previous seven days.\r\n                    }\r\n                    else {\r\n                        this.KeyboardNavigate(-4, view, e, this.max, this.min); // move the current year to the previous four days.\r\n                    }\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'moveDown':\r\n                    if (view === 0) {\r\n                        this.KeyboardNavigate(7, view, e, this.max, this.min);\r\n                    }\r\n                    else {\r\n                        this.KeyboardNavigate(4, view, e, this.max, this.min);\r\n                    }\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'select':\r\n                    if (e.target === this.todayElement) {\r\n                        this.todayButtonClick(e, value);\r\n                    }\r\n                    else {\r\n                        var element = !isNullOrUndefined(focusedDate) ? focusedDate : selectedDate;\r\n                        if (!isNullOrUndefined(element) && !element.classList.contains(DISABLED)) {\r\n                            if (levelRestrict) {\r\n                                var d = new Date(parseInt('' + (element).id, 0));\r\n                                this.selectDate(e, d, (element));\r\n                            }\r\n                            else {\r\n                                this.contentClick(null, --view, (element), value);\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'controlUp':\r\n                    this.title();\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'controlDown':\r\n                    if (!isNullOrUndefined(focusedDate) || !isNullOrUndefined(selectedDate) && !levelRestrict) {\r\n                        this.contentClick(null, --view, (focusedDate || selectedDate), value);\r\n                    }\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'home':\r\n                    this.currentDate = this.firstDay(this.currentDate);\r\n                    detach(this.tableBodyElement);\r\n                    (view === 0) ? this.renderMonths(e) : ((view === 1) ? this.renderYears(e) : this.renderDecades(e));\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'end':\r\n                    this.currentDate = this.lastDay(this.currentDate, view);\r\n                    detach(this.tableBodyElement);\r\n                    (view === 0) ? this.renderMonths(e) : ((view === 1) ? this.renderYears(e) : this.renderDecades(e));\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'pageUp':\r\n                    this.addMonths(this.currentDate, -1);\r\n                    this.navigateTo('Month', this.currentDate);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'pageDown':\r\n                    this.addMonths(this.currentDate, 1);\r\n                    this.navigateTo('Month', this.currentDate);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'shiftPageUp':\r\n                    this.addYears(this.currentDate, -1);\r\n                    this.navigateTo('Month', this.currentDate);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'shiftPageDown':\r\n                    this.addYears(this.currentDate, 1);\r\n                    this.navigateTo('Month', this.currentDate);\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'controlHome':\r\n                    this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 0, 1));\r\n                    e.preventDefault();\r\n                    break;\r\n                case 'controlEnd':\r\n                    this.navigateTo('Month', new Date(this.currentDate.getFullYear(), 11, 31));\r\n                    e.preventDefault();\r\n                    break;\r\n            }\r\n            if (this.getModuleName() === 'calendar') {\r\n                this.table.focus();\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.KeyboardNavigate = function (number, currentView, e, max, min) {\r\n        var date = new Date(this.checkValue(this.currentDate));\r\n        switch (currentView) {\r\n            case 2:\r\n                this.addYears(this.currentDate, number);\r\n                if (this.isMonthYearRange(this.currentDate)) {\r\n                    detach(this.tableBodyElement);\r\n                    this.renderDecades(e);\r\n                }\r\n                else {\r\n                    this.currentDate = date;\r\n                }\r\n                break;\r\n            case 1:\r\n                this.addMonths(this.currentDate, number);\r\n                if (this.calendarMode === 'Gregorian') {\r\n                    if (this.isMonthYearRange(this.currentDate)) {\r\n                        detach(this.tableBodyElement);\r\n                        this.renderYears(e);\r\n                    }\r\n                    else {\r\n                        this.currentDate = date;\r\n                    }\r\n                }\r\n                else {\r\n                    if (this.isMonthYearRange(this.currentDate)) {\r\n                        detach(this.tableBodyElement);\r\n                        this.renderYears(e);\r\n                    }\r\n                    else {\r\n                        this.currentDate = date;\r\n                    }\r\n                }\r\n                break;\r\n            case 0:\r\n                this.addDay(this.currentDate, number, e, max, min);\r\n                if (this.isMinMaxRange(this.currentDate)) {\r\n                    detach(this.tableBodyElement);\r\n                    this.renderMonths(e);\r\n                }\r\n                else {\r\n                    this.currentDate = date;\r\n                }\r\n                break;\r\n        }\r\n    };\r\n    /**\r\n     * Initialize the event handler\r\n     * @private\r\n     */\r\n    CalendarBase.prototype.preRender = function (value) {\r\n        var _this = this;\r\n        this.navigatePreviousHandler = this.navigatePrevious.bind(this);\r\n        this.navigateNextHandler = this.navigateNext.bind(this);\r\n        this.defaultKeyConfigs = this.getDefaultKeyConfig();\r\n        this.navigateHandler = function (e) {\r\n            _this.triggerNavigate(e);\r\n        };\r\n    };\r\n    ;\r\n    CalendarBase.prototype.minMaxDate = function (localDate) {\r\n        var currentDate = new Date(new Date(+localDate).setHours(0, 0, 0, 0));\r\n        var minDate = new Date(new Date(+this.min).setHours(0, 0, 0, 0));\r\n        var maxDate = new Date(new Date(+this.max).setHours(0, 0, 0, 0));\r\n        if (+currentDate === +minDate || +currentDate === +maxDate) {\r\n            if (+localDate < +this.min) {\r\n                localDate = new Date(+this.min);\r\n            }\r\n            if (+localDate > +this.max) {\r\n                localDate = new Date(+this.max);\r\n            }\r\n        }\r\n        return localDate;\r\n    };\r\n    CalendarBase.prototype.renderMonths = function (e, value, isCustomDate) {\r\n        var numCells = this.weekNumber ? 8 : 7;\r\n        var tdEles;\r\n        if (this.calendarMode === 'Gregorian') {\r\n            tdEles = this.renderDays(this.currentDate, value, null, null, isCustomDate);\r\n        }\r\n        else {\r\n            tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\r\n        }\r\n        this.createContentHeader();\r\n        if (this.calendarMode === 'Gregorian') {\r\n            this.renderTemplate(tdEles, numCells, MONTH, e, value);\r\n        }\r\n        else {\r\n            this.islamicModule.islamicRenderTemplate(tdEles, numCells, MONTH, e, value);\r\n        }\r\n    };\r\n    // tslint:disable-next-line:max-func-body-length\r\n    CalendarBase.prototype.renderDays = function (currentDate, value, multiSelection, values, isTodayDate) {\r\n        var tdEles = [];\r\n        var cellsCount = 42;\r\n        var todayDate = isTodayDate ? new Date(+currentDate) : new Date();\r\n        var localDate = new Date(this.checkValue(currentDate));\r\n        var minMaxDate;\r\n        var numCells = this.weekNumber ? 8 : 7;\r\n        // 8 and 7 denotes the number of columns to be specified.\r\n        var currentMonth = localDate.getMonth();\r\n        this.titleUpdate(currentDate, 'days');\r\n        var d = localDate;\r\n        localDate = new Date(d.getFullYear(), d.getMonth(), 0, d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds());\r\n        while (localDate.getDay() !== this.firstDayOfWeek) {\r\n            this.setStartDate(localDate, -1 * dayMilliSeconds);\r\n        }\r\n        for (var day = 0; day < cellsCount; ++day) {\r\n            var weekEle = this.createElement('td', { className: CELL });\r\n            var weekAnchor = this.createElement('span');\r\n            if (day % 7 === 0 && this.weekNumber) {\r\n                var numberOfDays = void 0;\r\n                // 6 days are added to get Last day of the week and 3 days are added to get middle day of the week.\r\n                numberOfDays = this.weekRule === 'FirstDay' ? 6 : (this.weekRule === 'FirstFourDayWeek' ? 3 : 0);\r\n                var finalDate = new Date(localDate.getFullYear(), localDate.getMonth(), (localDate.getDate() + numberOfDays));\r\n                weekAnchor.textContent = '' + this.getWeek(finalDate);\r\n                weekEle.appendChild(weekAnchor);\r\n                addClass([weekEle], '' + WEEKNUMBER);\r\n                tdEles.push(weekEle);\r\n            }\r\n            minMaxDate = new Date(+localDate);\r\n            localDate = this.minMaxDate(localDate);\r\n            var dateFormatOptions = { type: 'dateTime', skeleton: isBlazor() ? 'D' : 'full' };\r\n            var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\r\n            var tdEle = this.dayCell(localDate);\r\n            var title = this.globalize.formatDate(localDate, { type: 'date', skeleton: isBlazor() ? 'D' : 'full' });\r\n            var dayLink = this.createElement('span');\r\n            dayLink.textContent = this.globalize.formatDate(localDate, { format: 'd', type: 'date', skeleton: isBlazor() ? 'd' : 'yMd' });\r\n            var disabled = (this.min > localDate) || (this.max < localDate);\r\n            if (disabled) {\r\n                addClass([tdEle], DISABLED);\r\n                addClass([tdEle], OVERLAY);\r\n            }\r\n            else {\r\n                dayLink.setAttribute('title', '' + title);\r\n            }\r\n            if (currentMonth !== localDate.getMonth()) {\r\n                addClass([tdEle], OTHERMONTH);\r\n            }\r\n            if (localDate.getDay() === 0 || localDate.getDay() === 6) {\r\n                addClass([tdEle], WEEKEND);\r\n            }\r\n            tdEle.appendChild(dayLink);\r\n            this.renderDayCellArgs = {\r\n                date: localDate,\r\n                isDisabled: false,\r\n                element: tdEle,\r\n                isOutOfRange: disabled\r\n            };\r\n            var argument = this.renderDayCellArgs;\r\n            this.renderDayCellEvent(argument);\r\n            if (argument.isDisabled) {\r\n                var selectDate = new Date(this.checkValue(value));\r\n                var argsDate = new Date(this.checkValue(argument.date));\r\n                if (multiSelection) {\r\n                    if (!isNullOrUndefined(values) && values.length > 0) {\r\n                        for (var index = 0; index < values.length; index++) {\r\n                            var localDateString = +new Date(this.globalize.formatDate(argument.date, { type: 'date', skeleton: isBlazor() ? 'd' : 'yMd' }));\r\n                            var tempDateString = +new Date(this.globalize.formatDate(values[index], { type: 'date', skeleton: isBlazor() ? 'd' : 'yMd' }));\r\n                            if (localDateString === tempDateString) {\r\n                                values.splice(index, 1);\r\n                                index = -1;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                else if (selectDate && +selectDate === +argsDate) {\r\n                    this.setProperties({ value: null }, true);\r\n                }\r\n            }\r\n            if (this.renderDayCellArgs.isDisabled && !tdEle.classList.contains(SELECTED)) {\r\n                addClass([tdEle], DISABLED);\r\n                addClass([tdEle], OVERLAY);\r\n                if (+this.renderDayCellArgs.date === +this.todayDate) {\r\n                    this.todayDisabled = true;\r\n                }\r\n            }\r\n            var otherMnthBool = tdEle.classList.contains(OTHERMONTH);\r\n            var disabledCls = tdEle.classList.contains(DISABLED);\r\n            if (!disabledCls) {\r\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\r\n            }\r\n            // to set the value as null while setting the disabled date onProperty change.\r\n            // if (args.isDisabled && +this.value === +args.date) {\r\n            //     this.setProperties({ value: null }, true);\r\n            // }\r\n            if (multiSelection && !isNullOrUndefined(values) && !disabledCls) {\r\n                for (var tempValue = 0; tempValue < values.length; tempValue++) {\r\n                    var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n                    var formatOptions = { format: this.getFromatStringValue(), type: 'date', skeleton: 'short', calendar: type };\r\n                    var localDateString = this.globalize.formatDate(localDate, formatOptions);\r\n                    var tempDateString = this.globalize.formatDate(values[tempValue], formatOptions);\r\n                    if ((localDateString === tempDateString && this.getDateVal(localDate, values[tempValue]))\r\n                        || (this.getDateVal(localDate, value))) {\r\n                        addClass([tdEle], SELECTED);\r\n                    }\r\n                    else {\r\n                        this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\r\n                    }\r\n                }\r\n                if (values.length <= 0) {\r\n                    this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\r\n                }\r\n            }\r\n            else if (!disabledCls && this.getDateVal(localDate, value)) {\r\n                addClass([tdEle], SELECTED);\r\n            }\r\n            else {\r\n                this.updateFocus(otherMnthBool, disabledCls, localDate, tdEle, currentDate);\r\n            }\r\n            if (date.getFullYear() === todayDate.getFullYear() && date.getMonth() === todayDate.getMonth()\r\n                && date.getDate() === todayDate.getDate()) {\r\n                addClass([tdEle], TODAY);\r\n            }\r\n            tdEles.push(this.renderDayCellArgs.element);\r\n            localDate = new Date(+minMaxDate);\r\n            this.addDay(localDate, 1, null, this.max, this.min);\r\n        }\r\n        return tdEles;\r\n    };\r\n    CalendarBase.prototype.updateFocus = function (otherMonth, disabled, localDate, tableElement, currentDate) {\r\n        if (currentDate.getDate() === localDate.getDate() && !otherMonth && !disabled) {\r\n            addClass([tableElement], FOCUSEDDATE);\r\n        }\r\n        else {\r\n            if (currentDate >= this.max && parseInt(tableElement.id, 0) === +this.max && !otherMonth && !disabled) {\r\n                addClass([tableElement], FOCUSEDDATE);\r\n            }\r\n            if (currentDate <= this.min && parseInt(tableElement.id, 0) === +this.min && !otherMonth && !disabled) {\r\n                addClass([tableElement], FOCUSEDDATE);\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.renderYears = function (e, value) {\r\n        this.removeTableHeadElement();\r\n        var numCells = 4;\r\n        var days;\r\n        var tdEles = [];\r\n        var valueUtil = isNullOrUndefined(value);\r\n        var curDate = new Date(this.checkValue(this.currentDate));\r\n        var mon = curDate.getMonth();\r\n        var yr = curDate.getFullYear();\r\n        var localDate = curDate;\r\n        var curYrs = localDate.getFullYear();\r\n        var minYr = new Date(this.checkValue(this.min)).getFullYear();\r\n        var minMonth = new Date(this.checkValue(this.min)).getMonth();\r\n        var maxYr = new Date(this.checkValue(this.max)).getFullYear();\r\n        var maxMonth = new Date(this.checkValue(this.max)).getMonth();\r\n        localDate.setMonth(0);\r\n        this.titleUpdate(this.currentDate, 'months');\r\n        var disabled = (this.min > localDate) || (this.max < localDate);\r\n        localDate.setDate(1);\r\n        for (var month = 0; month < 12; ++month) {\r\n            var tdEle = this.dayCell(localDate);\r\n            var dayLink = this.createElement('span');\r\n            var localMonth = (value && (value).getMonth() === localDate.getMonth());\r\n            var select = (value && (value).getFullYear() === yr && localMonth);\r\n            dayLink.textContent = this.toCapitalize(this.globalize.formatDate(localDate, {\r\n                format: isBlazor() ? 'MMM' : null, type: 'dateTime', skeleton: 'MMM'\r\n            }));\r\n            if ((this.min && (curYrs < minYr || (month < minMonth && curYrs === minYr))) || (this.max && (curYrs > maxYr || (month > maxMonth && curYrs >= maxYr)))) {\r\n                addClass([tdEle], DISABLED);\r\n            }\r\n            else if (!valueUtil && select) {\r\n                addClass([tdEle], SELECTED);\r\n            }\r\n            else {\r\n                if (localDate.getMonth() === mon && this.currentDate.getMonth() === mon) {\r\n                    addClass([tdEle], FOCUSEDDATE);\r\n                }\r\n            }\r\n            localDate.setDate(1);\r\n            localDate.setMonth(localDate.getMonth() + 1);\r\n            if (!tdEle.classList.contains(DISABLED)) {\r\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\r\n            }\r\n            tdEle.appendChild(dayLink);\r\n            tdEles.push(tdEle);\r\n        }\r\n        this.renderTemplate(tdEles, numCells, YEAR, e, value);\r\n    };\r\n    CalendarBase.prototype.renderDecades = function (e, value) {\r\n        this.removeTableHeadElement();\r\n        var numCells = 4;\r\n        var yearCell = 12;\r\n        var tdEles = [];\r\n        var localDate = new Date(this.checkValue(this.currentDate));\r\n        localDate.setMonth(0);\r\n        localDate.setDate(1);\r\n        var localYr = localDate.getFullYear();\r\n        var startYr = new Date(localDate.setFullYear((localYr - localYr % 10)));\r\n        var endYr = new Date(localDate.setFullYear((localYr - localYr % 10 + (10 - 1))));\r\n        var startFullYr = startYr.getFullYear();\r\n        var endFullYr = endYr.getFullYear();\r\n        var startHdrYr = this.globalize.formatDate(startYr, {\r\n            format: isBlazor() ? 'yyyy' : null, type: 'dateTime', skeleton: 'y'\r\n        });\r\n        var endHdrYr = this.globalize.formatDate(endYr, { format: isBlazor() ? 'yyyy' : null, type: 'dateTime', skeleton: 'y' });\r\n        this.headerTitleElement.textContent = startHdrYr + ' - ' + (endHdrYr);\r\n        var start = new Date(localYr - (localYr % 10) - 1, 0, 1);\r\n        var startYear = start.getFullYear();\r\n        for (var rowIterator = 0; rowIterator < yearCell; ++rowIterator) {\r\n            var year = startYear + rowIterator;\r\n            localDate.setFullYear(year);\r\n            var tdEle = this.dayCell(localDate);\r\n            attributes(tdEle, { 'role': 'gridcell' });\r\n            var dayLink = this.createElement('span');\r\n            dayLink.textContent = this.globalize.formatDate(localDate, {\r\n                format: isBlazor() ? 'yyyy' : null, type: 'dateTime', skeleton: 'y'\r\n            });\r\n            if ((year < startFullYr) || (year > endFullYr)) {\r\n                addClass([tdEle], OTHERDECADE);\r\n                if (!isNullOrUndefined(value) && localDate.getFullYear() === (value).getFullYear()) {\r\n                    addClass([tdEle], SELECTED);\r\n                }\r\n                if (year < new Date(this.checkValue(this.min)).getFullYear() ||\r\n                    year > new Date(this.checkValue(this.max)).getFullYear()) {\r\n                    addClass([tdEle], DISABLED);\r\n                }\r\n            }\r\n            else if (year < new Date(this.checkValue(this.min)).getFullYear() ||\r\n                year > new Date(this.checkValue(this.max)).getFullYear()) {\r\n                addClass([tdEle], DISABLED);\r\n            }\r\n            else if (!isNullOrUndefined(value) && localDate.getFullYear() === (value).getFullYear()) {\r\n                addClass([tdEle], SELECTED);\r\n            }\r\n            else {\r\n                if (localDate.getFullYear() === this.currentDate.getFullYear() && !tdEle.classList.contains(DISABLED)) {\r\n                    addClass([tdEle], FOCUSEDDATE);\r\n                }\r\n            }\r\n            if (!tdEle.classList.contains(DISABLED)) {\r\n                EventHandler.add(tdEle, 'click', this.clickHandler, this);\r\n            }\r\n            tdEle.appendChild(dayLink);\r\n            tdEles.push(tdEle);\r\n        }\r\n        this.renderTemplate(tdEles, numCells, 'e-decade', e, value);\r\n    };\r\n    CalendarBase.prototype.dayCell = function (localDate) {\r\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n        var dateFormatOptions = { skeleton: isBlazor() ? 'F' : 'full', type: 'dateTime', calendar: type };\r\n        var date = this.globalize.parseDate(this.globalize.formatDate(localDate, dateFormatOptions), dateFormatOptions);\r\n        var value = date.valueOf();\r\n        var attrs = {\r\n            className: CELL, attrs: { 'id': '' + getUniqueID('' + value), 'aria-selected': 'false', 'role': 'gridcell' }\r\n        };\r\n        return this.createElement('td', attrs);\r\n    };\r\n    CalendarBase.prototype.firstDay = function (date) {\r\n        var collection = this.currentView() !== 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '') :\r\n            this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '');\r\n        if (collection.length) {\r\n            for (var i = 0; i < collection.length; i++) {\r\n                if (!collection[i].classList.contains(DISABLED)) {\r\n                    date = new Date(parseInt(collection[i].id, 0));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return date;\r\n    };\r\n    CalendarBase.prototype.lastDay = function (date, view) {\r\n        var lastDate = new Date(date.getFullYear(), date.getMonth() + 1, 0);\r\n        if (view !== 2) {\r\n            var timeOffset = Math.abs(lastDate.getTimezoneOffset() - this.firstDay(date).getTimezoneOffset());\r\n            if (timeOffset) {\r\n                lastDate.setHours(this.firstDay(date).getHours() + (timeOffset / 60));\r\n            }\r\n            return this.findLastDay(lastDate);\r\n        }\r\n        else {\r\n            return this.findLastDay(this.firstDay(lastDate));\r\n        }\r\n    };\r\n    ;\r\n    CalendarBase.prototype.checkDateValue = function (value) {\r\n        return (!isNullOrUndefined(value) && value instanceof Date && !isNaN(+value)) ? value : null;\r\n    };\r\n    CalendarBase.prototype.findLastDay = function (date) {\r\n        var collection = this.currentView() === 'Decade' ? this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERDECADE + '') :\r\n            this.tableBodyElement.querySelectorAll('td' + ':not(.' + OTHERMONTH + '');\r\n        if (collection.length) {\r\n            for (var i = collection.length - 1; i >= 0; i--) {\r\n                if (!collection[i].classList.contains(DISABLED)) {\r\n                    date = new Date(parseInt(collection[i].id, 0));\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return date;\r\n    };\r\n    CalendarBase.prototype.removeTableHeadElement = function () {\r\n        if (this.getModuleName() === 'calendar') {\r\n            if (!isNullOrUndefined(this.element.querySelectorAll('.e-content table thead')[0])) {\r\n                detach(this.tableHeadElement);\r\n            }\r\n        }\r\n        else {\r\n            if (!isNullOrUndefined(this.calendarElement.querySelectorAll('.e-content table thead')[0])) {\r\n                detach(this.tableHeadElement);\r\n            }\r\n        }\r\n    };\r\n    CalendarBase.prototype.renderTemplate = function (elements, count, classNm, e, value) {\r\n        var view = this.getViewNumber(this.currentView());\r\n        var trEle;\r\n        this.tableBodyElement = this.createElement('tbody');\r\n        this.table.appendChild(this.tableBodyElement);\r\n        removeClass([this.contentElement, this.headerElement], [MONTH, DECADE, YEAR]);\r\n        addClass([this.contentElement, this.headerElement], [classNm]);\r\n        var weekNumCell = 41;\r\n        var numberCell = 35;\r\n        var otherMonthCell = 6;\r\n        var row = count;\r\n        var rowIterator = 0;\r\n        for (var dayCell = 0; dayCell < elements.length / count; ++dayCell) {\r\n            trEle = this.createElement('tr', { attrs: { 'role': 'row' } });\r\n            for (rowIterator = 0 + rowIterator; rowIterator < row; rowIterator++) {\r\n                if (!elements[rowIterator].classList.contains('e-week-number') && !isNullOrUndefined(elements[rowIterator].children[0])) {\r\n                    addClass([elements[rowIterator].children[0]], [LINK]);\r\n                    rippleEffect(elements[rowIterator].children[0], {\r\n                        duration: 600,\r\n                        isCenterRipple: true\r\n                    });\r\n                }\r\n                trEle.appendChild(elements[rowIterator]);\r\n                if (this.weekNumber && rowIterator === otherMonthCell + 1 && elements[otherMonthCell + 1].classList.contains(OTHERMONTH)) {\r\n                    addClass([trEle], OTHERMONTHROW);\r\n                }\r\n                if (!this.weekNumber && rowIterator === otherMonthCell && elements[otherMonthCell].classList.contains(OTHERMONTH)) {\r\n                    addClass([trEle], OTHERMONTHROW);\r\n                }\r\n                if (this.weekNumber) {\r\n                    if (rowIterator === weekNumCell && elements[weekNumCell].classList.contains(OTHERMONTH)) {\r\n                        addClass([trEle], OTHERMONTHROW);\r\n                    }\r\n                }\r\n                else {\r\n                    if (rowIterator === numberCell && elements[numberCell].classList.contains(OTHERMONTH)) {\r\n                        addClass([trEle], OTHERMONTHROW);\r\n                    }\r\n                }\r\n            }\r\n            row = row + count;\r\n            rowIterator = rowIterator + 0;\r\n            this.tableBodyElement.appendChild(trEle);\r\n        }\r\n        this.table.querySelector('tbody').className = this.effect;\r\n        if (this.calendarMode === 'Gregorian') {\r\n            this.iconHandler();\r\n        }\r\n        else {\r\n            this.islamicModule.islamicIconHandler();\r\n        }\r\n        if (view !== this.getViewNumber(this.currentView()) || (view === 0 && view !== this.getViewNumber(this.currentView()))) {\r\n            this.navigateHandler(e);\r\n        }\r\n        this.setAriaActiveDescendant();\r\n    };\r\n    CalendarBase.prototype.clickHandler = function (e, value) {\r\n        this.clickEventEmitter(e);\r\n        var eve = e.currentTarget;\r\n        var view = this.getViewNumber(this.currentView());\r\n        if (eve.classList.contains(OTHERMONTH)) {\r\n            this.contentClick(e, 0, null, value);\r\n        }\r\n        else if (view === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\r\n            this.contentClick(e, 1, null, value);\r\n        }\r\n        else if (2 === view) {\r\n            this.contentClick(e, 1, null, value);\r\n        }\r\n        else if (!eve.classList.contains(OTHERMONTH) && view === 0) {\r\n            this.selectDate(e, this.getIdValue(e, null), null);\r\n        }\r\n        else {\r\n            this.contentClick(e, 0, eve, value);\r\n        }\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.table.focus();\r\n        }\r\n    };\r\n    // Content click event handler required for extended components\r\n    CalendarBase.prototype.clickEventEmitter = function (e) {\r\n        e.preventDefault();\r\n    };\r\n    CalendarBase.prototype.contentClick = function (e, view, element, value) {\r\n        var currentView = this.getViewNumber(this.currentView());\r\n        var d = this.getIdValue(e, element);\r\n        switch (view) {\r\n            case 0:\r\n                if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\r\n                    detach(this.tableBodyElement);\r\n                    this.currentDate = d;\r\n                    this.effect = ZOOMIN;\r\n                    this.renderMonths(e);\r\n                }\r\n                else {\r\n                    if (this.calendarMode === 'Gregorian') {\r\n                        this.currentDate.setMonth(d.getMonth());\r\n                        if (d.getMonth() > 0 && this.currentDate.getMonth() !== d.getMonth()) {\r\n                            this.currentDate.setDate(0);\r\n                        }\r\n                        this.currentDate.setFullYear(d.getFullYear());\r\n                    }\r\n                    else {\r\n                        this.currentDate = d;\r\n                    }\r\n                    this.effect = ZOOMIN;\r\n                    detach(this.tableBodyElement);\r\n                    this.renderMonths(e);\r\n                }\r\n                break;\r\n            case 1:\r\n                if (currentView === this.getViewNumber(this.depth) && this.getViewNumber(this.start) >= this.getViewNumber(this.depth)) {\r\n                    this.selectDate(e, d, null);\r\n                }\r\n                else {\r\n                    if (this.calendarMode === 'Gregorian') {\r\n                        this.currentDate.setFullYear(d.getFullYear());\r\n                    }\r\n                    else {\r\n                        var islamicDate = this.islamicModule.getIslamicDate(d);\r\n                        this.currentDate = this.islamicModule.toGregorian(islamicDate.year, islamicDate.month, 1);\r\n                    }\r\n                    this.effect = ZOOMIN;\r\n                    detach(this.tableBodyElement);\r\n                    this.renderYears(e);\r\n                }\r\n        }\r\n    };\r\n    CalendarBase.prototype.switchView = function (view, e, multiSelection, isCustomDate) {\r\n        switch (view) {\r\n            case 0:\r\n                detach(this.tableBodyElement);\r\n                this.renderMonths(e, null, isCustomDate);\r\n                if (multiSelection && !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0])) {\r\n                    this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\r\n                }\r\n                break;\r\n            case 1:\r\n                detach(this.tableBodyElement);\r\n                this.renderYears(e);\r\n                break;\r\n            case 2:\r\n                detach(this.tableBodyElement);\r\n                this.renderDecades(e);\r\n        }\r\n    };\r\n    /**\r\n     * To get component name\r\n     * @private\r\n     */\r\n    CalendarBase.prototype.getModuleName = function () {\r\n        return 'calendar';\r\n    };\r\n    /**\r\n\r\n     */\r\n    CalendarBase.prototype.requiredModules = function () {\r\n        var modules = [];\r\n        if (this) {\r\n            modules.push({ args: [this], member: 'islamic' });\r\n        }\r\n        return modules;\r\n    };\r\n    /**\r\n     * Gets the properties to be maintained upon browser refresh.\r\n     * @returns string\r\n     */\r\n    CalendarBase.prototype.getPersistData = function () {\r\n        var keyEntity = ['value'];\r\n        return this.addOnPersist(keyEntity);\r\n    };\r\n    /**\r\n     * Called internally if any of the property value changed.\r\n     * returns void\r\n     * @private\r\n     */\r\n    CalendarBase.prototype.onPropertyChanged = function (newProp, oldProp, multiSelection, values) {\r\n        this.effect = '';\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'enableRtl':\r\n                    if (newProp.enableRtl) {\r\n                        if (this.getModuleName() === 'calendar') {\r\n                            this.element.classList.add('e-rtl');\r\n                        }\r\n                        else {\r\n                            this.calendarElement.classList.add('e-rtl');\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (this.getModuleName() === 'calendar') {\r\n                            this.element.classList.remove('e-rtl');\r\n                        }\r\n                        else {\r\n                            this.calendarElement.classList.remove('e-rtl');\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'dayHeaderFormat':\r\n                    this.getCultureValues();\r\n                    this.createContentHeader();\r\n                    this.adjustLongHeaderSize();\r\n                    break;\r\n                case 'min':\r\n                case 'max':\r\n                    this.rangeValidation(this.min, this.max);\r\n                    prop === 'min' ? this.setProperties({ min: this.checkDateValue(new Date(this.checkValue(newProp.min))) }, true) :\r\n                        this.setProperties({ max: this.checkDateValue(new Date(this.checkValue(newProp.max))) }, true);\r\n                    this.setProperties({ start: this.currentView() }, true);\r\n                    detach(this.tableBodyElement);\r\n                    this.minMaxUpdate();\r\n                    if (multiSelection) {\r\n                        this.validateValues(multiSelection, values);\r\n                    }\r\n                    this.createContentBody();\r\n                    if ((this.todayDate < this.min || this.max < this.todayDate) && (this.footer) && (this.todayElement)) {\r\n                        detach(this.todayElement);\r\n                        detach(this.footer);\r\n                        this.todayElement = this.footer = null;\r\n                        this.createContentFooter();\r\n                    }\r\n                    else {\r\n                        if ((this.footer) && (this.todayElement) && this.todayElement.classList.contains('e-disabled')) {\r\n                            removeClass([this.todayElement], DISABLED);\r\n                            detach(this.todayElement);\r\n                            detach(this.footer);\r\n                            this.todayElement = this.footer = null;\r\n                            this.createContentFooter();\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'start':\r\n                case 'depth':\r\n                case 'weekNumber':\r\n                case 'firstDayOfWeek':\r\n                case 'weekRule':\r\n                    this.checkView();\r\n                    this.createContentHeader();\r\n                    this.createContentBody();\r\n                    break;\r\n                case 'locale':\r\n                    this.globalize = new Internationalization(this.locale);\r\n                    this.createContentHeader();\r\n                    this.createContentBody();\r\n                    this.l10.setLocale(this.locale);\r\n                    this.updateFooter();\r\n                    break;\r\n                case 'showTodayButton':\r\n                    if (newProp.showTodayButton) {\r\n                        this.createContentFooter();\r\n                    }\r\n                    else {\r\n                        if (!isNullOrUndefined(this.todayElement) && !isNullOrUndefined(this.footer)) {\r\n                            detach(this.todayElement);\r\n                            detach(this.footer);\r\n                            this.todayElement = this.footer = undefined;\r\n                        }\r\n                    }\r\n                    this.setProperties({ showTodayButton: newProp.showTodayButton }, true);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * values property updated with considered disabled dates of the calendar.\r\n     */\r\n    CalendarBase.prototype.validateValues = function (multiSelection, values) {\r\n        if (multiSelection && !isNullOrUndefined(values) && values.length > 0) {\r\n            var copyValues = this.copyValues(values);\r\n            for (var skipIndex = 0; skipIndex < copyValues.length; skipIndex++) {\r\n                var tempValue = copyValues[skipIndex];\r\n                var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n                var tempValueString = void 0;\r\n                if (this.calendarMode === 'Gregorian') {\r\n                    /* tslint:disable-next-line:max-line-length */\r\n                    tempValueString = this.globalize.formatDate(tempValue, { type: 'date', skeleton: isBlazor() ? 'd' : 'yMd' });\r\n                }\r\n                else {\r\n                    /* tslint:disable-next-line:max-line-length */\r\n                    tempValueString = this.globalize.formatDate(tempValue, { type: 'dateTime', skeleton: 'full', calendar: 'islamic' });\r\n                }\r\n                var minFormatOption = { type: 'date', skeleton: isBlazor() ? 'd' : 'yMd', calendar: type };\r\n                var minStringValue = this.globalize.formatDate(this.min, minFormatOption);\r\n                var minString = minStringValue;\r\n                var maxFormatOption = { type: 'date', skeleton: isBlazor() ? 'd' : 'yMd', calendar: type };\r\n                var maxStringValue = this.globalize.formatDate(this.max, maxFormatOption);\r\n                var maxString = maxStringValue;\r\n                if (+new Date(tempValueString) < +new Date(minString) ||\r\n                    +new Date(tempValueString) > +new Date(maxString)) {\r\n                    copyValues.splice(skipIndex, 1);\r\n                    skipIndex = -1;\r\n                }\r\n            }\r\n            this.setProperties({ values: copyValues }, true);\r\n        }\r\n    };\r\n    CalendarBase.prototype.setValueUpdate = function () {\r\n        if (!isNullOrUndefined(this.tableBodyElement)) {\r\n            detach(this.tableBodyElement);\r\n            this.setProperties({ start: this.currentView() }, true);\r\n            this.createContentBody();\r\n        }\r\n    };\r\n    CalendarBase.prototype.copyValues = function (values) {\r\n        var copyValues = [];\r\n        if (!isNullOrUndefined(values) && values.length > 0) {\r\n            for (var index = 0; index < values.length; index++) {\r\n                copyValues.push(new Date(+values[index]));\r\n            }\r\n        }\r\n        return copyValues;\r\n    };\r\n    CalendarBase.prototype.titleUpdate = function (date, view) {\r\n        var globalize = new Internationalization(this.locale);\r\n        var dayFormatOptions;\r\n        var monthFormatOptions;\r\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n        if (this.calendarMode === 'Gregorian') {\r\n            dayFormatOptions = globalize.formatDate(date, { type: 'dateTime', skeleton: isBlazor() ? 'y' : 'yMMMM', calendar: type });\r\n            monthFormatOptions = globalize.formatDate(date, {\r\n                format: isBlazor() ? 'yyyy' : null, type: 'dateTime', skeleton: 'y', calendar: type\r\n            });\r\n        }\r\n        else {\r\n            dayFormatOptions = globalize.formatDate(date, { type: 'dateTime', format: 'MMMM y', calendar: type });\r\n            monthFormatOptions = globalize.formatDate(date, { type: 'dateTime', format: 'y', calendar: type });\r\n        }\r\n        switch (view) {\r\n            case 'days':\r\n                this.headerTitleElement.textContent = this.toCapitalize(dayFormatOptions);\r\n                break;\r\n            case 'months':\r\n                this.headerTitleElement.textContent = monthFormatOptions;\r\n        }\r\n    };\r\n    CalendarBase.prototype.setActiveDescendant = function () {\r\n        var id;\r\n        var focusedEle = this.tableBodyElement.querySelector('tr td.e-focused-date');\r\n        var selectedEle = this.tableBodyElement.querySelector('tr td.e-selected');\r\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n        var title;\r\n        var view = this.currentView();\r\n        if (view === 'Month') {\r\n            title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: isBlazor() ? 'D' : 'full', calendar: type });\r\n        }\r\n        else if (view === 'Year') {\r\n            if (type !== 'islamic') {\r\n                title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: isBlazor() ? 'y' : 'yMMMM', calendar: type });\r\n            }\r\n            else {\r\n                title = this.globalize.formatDate(this.currentDate, { type: 'date', skeleton: 'GyMMM', calendar: type });\r\n            }\r\n        }\r\n        else {\r\n            title = this.globalize.formatDate(this.currentDate, {\r\n                format: isBlazor() ? 'yyyy' : null, type: 'date', skeleton: 'y', calendar: type\r\n            });\r\n        }\r\n        if (selectedEle || focusedEle) {\r\n            if (!isNullOrUndefined(selectedEle)) {\r\n                selectedEle.setAttribute('aria-selected', 'true');\r\n            }\r\n            (focusedEle || selectedEle).setAttribute('aria-label', title);\r\n            id = (focusedEle || selectedEle).getAttribute('id');\r\n        }\r\n        return id;\r\n    };\r\n    CalendarBase.prototype.iconHandler = function () {\r\n        new Date(this.checkValue(this.currentDate)).setDate(1);\r\n        switch (this.currentView()) {\r\n            case 'Month':\r\n                this.previousIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.min) < 1);\r\n                this.nextIconHandler(this.compareMonth(new Date(this.checkValue(this.currentDate)), this.max) > -1);\r\n                break;\r\n            case 'Year':\r\n                this.previousIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.min) < 1);\r\n                this.nextIconHandler(this.compareYear(new Date(this.checkValue(this.currentDate)), this.max) > -1);\r\n                break;\r\n            case 'Decade':\r\n                this.previousIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.min) < 1);\r\n                this.nextIconHandler(this.compareDecade(new Date(this.checkValue(this.currentDate)), this.max) > -1);\r\n        }\r\n    };\r\n    /**\r\n     * Destroys the widget.\r\n     * @returns void\r\n     */\r\n    CalendarBase.prototype.destroy = function () {\r\n        if (this.getModuleName() === 'calendar' && this.element) {\r\n            removeClass([this.element], [ROOT]);\r\n        }\r\n        else {\r\n            if (this.calendarElement && this.element) {\r\n                removeClass([this.element], [ROOT]);\r\n            }\r\n        }\r\n        if (this.getModuleName() === 'calendar' && this.element) {\r\n            EventHandler.remove(this.headerTitleElement, 'click', this.navigateTitle);\r\n            if (this.todayElement) {\r\n                EventHandler.remove(this.todayElement, 'click', this.todayButtonClick);\r\n            }\r\n            this.previousIconHandler(true);\r\n            this.nextIconHandler(true);\r\n            this.keyboardModule.destroy();\r\n            this.element.removeAttribute('data-role');\r\n            (!isNullOrUndefined(this.calendarEleCopy.getAttribute('tabindex'))) ?\r\n                this.element.setAttribute('tabindex', this.tabIndex) : this.element.removeAttribute('tabindex');\r\n        }\r\n        if (this.element) {\r\n            this.element.innerHTML = '';\r\n        }\r\n        _super.prototype.destroy.call(this);\r\n    };\r\n    CalendarBase.prototype.title = function (e) {\r\n        var currentView = this.getViewNumber(this.currentView());\r\n        this.effect = ZOOMIN;\r\n        this.switchView(++currentView, e);\r\n    };\r\n    CalendarBase.prototype.getViewNumber = function (stringVal) {\r\n        if (stringVal === 'Month') {\r\n            return 0;\r\n        }\r\n        else if (stringVal === 'Year') {\r\n            return 1;\r\n        }\r\n        else {\r\n            return 2;\r\n        }\r\n    };\r\n    CalendarBase.prototype.navigateTitle = function (e) {\r\n        e.preventDefault();\r\n        this.title(e);\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.table.focus();\r\n        }\r\n    };\r\n    CalendarBase.prototype.previous = function () {\r\n        this.effect = '';\r\n        var currentView = this.getViewNumber(this.currentView());\r\n        switch (this.currentView()) {\r\n            case 'Month':\r\n                this.addMonths(this.currentDate, -1);\r\n                this.switchView(currentView);\r\n                break;\r\n            case 'Year':\r\n                this.addYears(this.currentDate, -1);\r\n                this.switchView(currentView);\r\n                break;\r\n            case 'Decade':\r\n                this.addYears(this.currentDate, -10);\r\n                this.switchView(currentView);\r\n                break;\r\n        }\r\n    };\r\n    CalendarBase.prototype.navigatePrevious = function (e) {\r\n        e.preventDefault();\r\n        if (this.calendarMode === 'Gregorian') {\r\n            this.previous();\r\n        }\r\n        else {\r\n            this.islamicModule.islamicPrevious();\r\n        }\r\n        this.triggerNavigate(e);\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.table.focus();\r\n        }\r\n    };\r\n    CalendarBase.prototype.next = function () {\r\n        this.effect = '';\r\n        var currentView = this.getViewNumber(this.currentView());\r\n        switch (this.currentView()) {\r\n            case 'Month':\r\n                this.addMonths(this.currentDate, 1);\r\n                this.switchView(currentView);\r\n                break;\r\n            case 'Year':\r\n                this.addYears(this.currentDate, 1);\r\n                this.switchView(currentView);\r\n                break;\r\n            case 'Decade':\r\n                this.addYears(this.currentDate, 10);\r\n                this.switchView(currentView);\r\n                break;\r\n        }\r\n    };\r\n    CalendarBase.prototype.navigateNext = function (eve) {\r\n        eve.preventDefault();\r\n        if (this.calendarMode === 'Gregorian') {\r\n            this.next();\r\n        }\r\n        else {\r\n            this.islamicModule.islamicNext();\r\n        }\r\n        this.triggerNavigate(eve);\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.table.focus();\r\n        }\r\n    };\r\n    /**\r\n     * This method is used to navigate to the month/year/decade view of the Calendar.\r\n     * @param  {string} view - Specifies the view of the Calendar.\r\n     * @param  {Date} date - Specifies the focused date in a view.\r\n     * @returns void\r\n     */\r\n    CalendarBase.prototype.navigateTo = function (view, date, isCustomDate) {\r\n        if (+date >= +this.min && +date <= +this.max) {\r\n            this.currentDate = date;\r\n        }\r\n        if (+date <= +this.min) {\r\n            this.currentDate = new Date(this.checkValue(this.min));\r\n        }\r\n        if (+date >= +this.max) {\r\n            this.currentDate = new Date(this.checkValue(this.max));\r\n        }\r\n        if ((this.getViewNumber(this.depth) >= this.getViewNumber(view))) {\r\n            if ((this.getViewNumber(this.depth) <= this.getViewNumber(this.start))\r\n                || this.getViewNumber(this.depth) === this.getViewNumber(view)) {\r\n                view = this.depth;\r\n            }\r\n        }\r\n        this.switchView(this.getViewNumber(view), null, null, isCustomDate);\r\n    };\r\n    /**\r\n     * Gets the current view of the Calendar.\r\n     * @returns string\r\n     */\r\n    CalendarBase.prototype.currentView = function () {\r\n        if (this.contentElement.classList.contains(YEAR)) {\r\n            return 'Year';\r\n        }\r\n        else if (this.contentElement.classList.contains(DECADE)) {\r\n            return 'Decade';\r\n        }\r\n        else {\r\n            return 'Month';\r\n        }\r\n    };\r\n    CalendarBase.prototype.getDateVal = function (date, value) {\r\n        return (!isNullOrUndefined(value) && date.getDate() === (value).getDate()\r\n            && date.getMonth() === (value).getMonth() && date.getFullYear() === (value).getFullYear());\r\n    };\r\n    CalendarBase.prototype.getCultureObjects = function (ld, c) {\r\n        var gregorianFormat = (isBlazor() ? '.dates.days.' :\r\n            '.dates.calendars.gregorian.days.format.') + this.dayHeaderFormat.toLowerCase();\r\n        var islamicFormat = (isBlazor() ? '.dates.days.' :\r\n            '.dates.calendars.islamic.days.format.') + this.dayHeaderFormat.toLowerCase();\r\n        var mainVal = isBlazor() ? '' : 'main.';\r\n        if (this.calendarMode === 'Gregorian') {\r\n            return getValue(mainVal + '' + this.locale + gregorianFormat, ld);\r\n        }\r\n        else {\r\n            return getValue('main.' + '' + this.locale + islamicFormat, ld);\r\n        }\r\n    };\r\n    ;\r\n    CalendarBase.prototype.getWeek = function (d) {\r\n        var currentDate = new Date(this.checkValue(d)).valueOf();\r\n        var date = new Date(d.getFullYear(), 0, 1).valueOf();\r\n        return Math.ceil((((currentDate - date) + dayMilliSeconds) / dayMilliSeconds) / 7);\r\n    };\r\n    CalendarBase.prototype.setStartDate = function (date, time) {\r\n        var tzOffset = date.getTimezoneOffset();\r\n        var d = new Date(date.getTime() + time);\r\n        var tzOffsetDiff = d.getTimezoneOffset() - tzOffset;\r\n        date.setTime(d.getTime() + tzOffsetDiff * minutesMilliSeconds);\r\n    };\r\n    CalendarBase.prototype.addMonths = function (date, i) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            var day = date.getDate();\r\n            date.setDate(1);\r\n            date.setMonth(date.getMonth() + i);\r\n            date.setDate(Math.min(day, this.getMaxDays(date)));\r\n        }\r\n        else {\r\n            var islamicDate = this.islamicModule.getIslamicDate(date);\r\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year, (islamicDate.month) + i, 1);\r\n        }\r\n    };\r\n    CalendarBase.prototype.addYears = function (date, i) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            var day = date.getDate();\r\n            date.setDate(1);\r\n            date.setFullYear(date.getFullYear() + i);\r\n            date.setDate(Math.min(day, this.getMaxDays(date)));\r\n        }\r\n        else {\r\n            var islamicDate = this.islamicModule.getIslamicDate(date);\r\n            this.currentDate = this.islamicModule.toGregorian(islamicDate.year + i, (islamicDate.month), 1);\r\n        }\r\n    };\r\n    CalendarBase.prototype.getIdValue = function (e, element) {\r\n        var eve;\r\n        if (e) {\r\n            eve = e.currentTarget;\r\n        }\r\n        else {\r\n            eve = element;\r\n        }\r\n        var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n        var dateFormatOptions = { type: 'dateTime', skeleton: isBlazor() ? 'F' : 'full', calendar: type };\r\n        var dateString = this.globalize.formatDate(new Date(parseInt('' + eve.getAttribute('id'), 0)), dateFormatOptions);\r\n        var date = this.globalize.parseDate(dateString, dateFormatOptions);\r\n        var value = date.valueOf() - date.valueOf() % 1000;\r\n        return new Date(value);\r\n        //return this.globalize.parseDate(dateString, dateFormatOptions);\r\n    };\r\n    CalendarBase.prototype.adjustLongHeaderSize = function () {\r\n        removeClass([this.element], DAYHEADERLONG);\r\n        if (this.dayHeaderFormat === 'Wide') {\r\n            addClass([this.getModuleName() === 'calendar' ? this.element : this.calendarElement], DAYHEADERLONG);\r\n        }\r\n    };\r\n    CalendarBase.prototype.selectDate = function (e, date, node, multiSelection, values) {\r\n        var element = node || e.currentTarget;\r\n        this.isDateSelected = false;\r\n        if (this.currentView() === 'Decade') {\r\n            this.setDateDecade(this.currentDate, date.getFullYear());\r\n        }\r\n        else if (this.currentView() === 'Year') {\r\n            this.setDateYear(this.currentDate, date);\r\n        }\r\n        else {\r\n            if (multiSelection && !this.checkPresentDate(date, values)) {\r\n                var copyValues = this.copyValues(values);\r\n                if (!isNullOrUndefined(values) && copyValues.length > 0) {\r\n                    copyValues.push(new Date(this.checkValue(date)));\r\n                    this.setProperties({ values: copyValues }, true);\r\n                    this.setProperties({ value: values[values.length - 1] }, true);\r\n                }\r\n                else {\r\n                    this.setProperties({ values: [new Date(this.checkValue(date))] }, true);\r\n                }\r\n            }\r\n            else {\r\n                this.setProperties({ value: new Date(this.checkValue(date)) }, true);\r\n            }\r\n            this.currentDate = new Date(this.checkValue(date));\r\n        }\r\n        var tableBodyElement = closest(element, '.' + ROOT);\r\n        if (isNullOrUndefined(tableBodyElement)) {\r\n            tableBodyElement = this.tableBodyElement;\r\n        }\r\n        if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + SELECTED))) {\r\n            removeClass([tableBodyElement.querySelector('.' + SELECTED)], SELECTED);\r\n        }\r\n        if (!multiSelection && !isNullOrUndefined(tableBodyElement.querySelector('.' + FOCUSEDDATE))) {\r\n            removeClass([tableBodyElement.querySelector('.' + FOCUSEDDATE)], FOCUSEDDATE);\r\n        }\r\n        if (multiSelection) {\r\n            var copyValues = this.copyValues(values);\r\n            var collection = Array.prototype.slice.call(this.tableBodyElement.querySelectorAll('td'));\r\n            for (var index = 0; index < collection.length; index++) {\r\n                var tempElement = tableBodyElement.querySelectorAll('td' + '.' + FOCUSEDDATE)[0];\r\n                var selectedElement = tableBodyElement.querySelectorAll('td' + '.' + SELECTED)[0];\r\n                if (collection[index] === tempElement) {\r\n                    removeClass([collection[index]], FOCUSEDDATE);\r\n                }\r\n                if (collection[index] === selectedElement &&\r\n                    !this.checkPresentDate(new Date(parseInt(selectedElement.getAttribute('id').split('_')[0], 10)), values)) {\r\n                    removeClass([collection[index]], SELECTED);\r\n                }\r\n            }\r\n            if (element.classList.contains(SELECTED)) {\r\n                removeClass([element], SELECTED);\r\n                for (var i = 0; i < copyValues.length; i++) {\r\n                    var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n                    var formatOptions = { format: this.getFromatStringValue(), type: 'date', skeleton: 'short', calendar: type };\r\n                    var localDateString = this.globalize.formatDate(date, formatOptions);\r\n                    var tempDateString = this.globalize.formatDate(copyValues[i], formatOptions);\r\n                    if (localDateString === tempDateString) {\r\n                        var index = copyValues.indexOf(copyValues[i]);\r\n                        copyValues.splice(index, 1);\r\n                        addClass([element], FOCUSEDDATE);\r\n                    }\r\n                }\r\n                this.setProperties({ values: copyValues }, true);\r\n            }\r\n            else {\r\n                addClass([element], SELECTED);\r\n            }\r\n        }\r\n        else {\r\n            addClass([element], SELECTED);\r\n        }\r\n        this.isDateSelected = true;\r\n    };\r\n    CalendarBase.prototype.getFromatStringValue = function () {\r\n        return isBlazor() ?\r\n            // tslint:disable-next-line\r\n            'M' + getDefaultDateObject().dateSeperator + 'd' + getDefaultDateObject().dateSeperator + 'yy'\r\n            : null;\r\n    };\r\n    CalendarBase.prototype.checkPresentDate = function (dates, values) {\r\n        var previousValue = false;\r\n        if (!isNullOrUndefined(values)) {\r\n            for (var checkPrevious = 0; checkPrevious < values.length; checkPrevious++) {\r\n                var type = (this.calendarMode === 'Gregorian') ? 'gregorian' : 'islamic';\r\n                /* tslint:disable-next-line:max-line-length */\r\n                var localDateString = this.globalize.formatDate(dates, {\r\n                    format: this.getFromatStringValue(), type: 'date', skeleton: 'short', calendar: type\r\n                });\r\n                /* tslint:disable-next-line:max-line-length */\r\n                var tempDateString = this.globalize.formatDate(values[checkPrevious], {\r\n                    format: this.getFromatStringValue(), type: 'date', skeleton: 'short', calendar: type\r\n                });\r\n                if (localDateString === tempDateString) {\r\n                    previousValue = true;\r\n                }\r\n            }\r\n        }\r\n        return previousValue;\r\n    };\r\n    CalendarBase.prototype.setAriaActiveDescendant = function () {\r\n        attributes(this.table, {\r\n            'aria-activedescendant': '' + this.setActiveDescendant()\r\n        });\r\n    };\r\n    CalendarBase.prototype.previousIconHandler = function (disabled) {\r\n        if (disabled) {\r\n            EventHandler.remove(this.previousIcon, 'click', this.navigatePreviousHandler);\r\n            addClass([this.previousIcon], '' + DISABLED);\r\n            addClass([this.previousIcon], '' + OVERLAY);\r\n            this.previousIcon.setAttribute('aria-disabled', 'true');\r\n        }\r\n        else {\r\n            EventHandler.add(this.previousIcon, 'click', this.navigatePreviousHandler);\r\n            removeClass([this.previousIcon], '' + DISABLED);\r\n            removeClass([this.previousIcon], '' + OVERLAY);\r\n            this.previousIcon.setAttribute('aria-disabled', 'false');\r\n        }\r\n    };\r\n    CalendarBase.prototype.renderDayCellEvent = function (args) {\r\n        extend(this.renderDayCellArgs, { name: 'renderDayCell' });\r\n        this.trigger('renderDayCell', args);\r\n    };\r\n    CalendarBase.prototype.navigatedEvent = function (eve) {\r\n        extend(this.navigatedArgs, { name: 'navigated', event: eve });\r\n        this.trigger('navigated', this.navigatedArgs);\r\n    };\r\n    CalendarBase.prototype.triggerNavigate = function (event) {\r\n        this.navigatedArgs = { view: this.currentView(), date: this.currentDate };\r\n        this.navigatedEvent(event);\r\n    };\r\n    CalendarBase.prototype.nextIconHandler = function (disabled) {\r\n        if (disabled) {\r\n            EventHandler.remove(this.nextIcon, 'click', this.navigateNextHandler);\r\n            addClass([this.nextIcon], DISABLED);\r\n            addClass([this.nextIcon], OVERLAY);\r\n            this.nextIcon.setAttribute('aria-disabled', 'true');\r\n        }\r\n        else {\r\n            EventHandler.add(this.nextIcon, 'click', this.navigateNextHandler);\r\n            removeClass([this.nextIcon], DISABLED);\r\n            removeClass([this.nextIcon], OVERLAY);\r\n            this.nextIcon.setAttribute('aria-disabled', 'false');\r\n        }\r\n    };\r\n    CalendarBase.prototype.compare = function (startDate, endDate, modifier) {\r\n        var start = endDate.getFullYear();\r\n        var end;\r\n        var result;\r\n        end = start;\r\n        result = 0;\r\n        if (modifier) {\r\n            start = start - start % modifier;\r\n            end = start - start % modifier + modifier - 1;\r\n        }\r\n        if (startDate.getFullYear() > end) {\r\n            result = 1;\r\n        }\r\n        else if (startDate.getFullYear() < start) {\r\n            result = -1;\r\n        }\r\n        return result;\r\n    };\r\n    CalendarBase.prototype.isMinMaxRange = function (date) {\r\n        return +date >= +this.min && +date <= +this.max;\r\n    };\r\n    CalendarBase.prototype.isMonthYearRange = function (date) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            return date.getMonth() >= this.min.getMonth()\r\n                && date.getFullYear() >= this.min.getFullYear()\r\n                && date.getMonth() <= this.max.getMonth()\r\n                && date.getFullYear() <= this.max.getFullYear();\r\n        }\r\n        else {\r\n            var islamicDate = this.islamicModule.getIslamicDate(date);\r\n            return islamicDate.month >= (this.islamicModule.getIslamicDate(new Date(1944, 1, 18))).month\r\n                && islamicDate.year >= (this.islamicModule.getIslamicDate(new Date(1944, 1, 18))).year\r\n                && islamicDate.month <= (this.islamicModule.getIslamicDate(new Date(2069, 1, 16))).month\r\n                && islamicDate.year <= (this.islamicModule.getIslamicDate(new Date(2069, 1, 16))).year;\r\n        }\r\n    };\r\n    CalendarBase.prototype.compareYear = function (start, end) {\r\n        return this.compare(start, end, 0);\r\n    };\r\n    CalendarBase.prototype.compareDecade = function (start, end) {\r\n        return this.compare(start, end, 10);\r\n    };\r\n    CalendarBase.prototype.shiftArray = function (array, i) {\r\n        return array.slice(i).concat(array.slice(0, i));\r\n    };\r\n    CalendarBase.prototype.addDay = function (date, i, e, max, min) {\r\n        var column = i;\r\n        var value = new Date(+date);\r\n        if (!isNullOrUndefined(this.tableBodyElement) && !isNullOrUndefined(e)) {\r\n            while (this.findNextTD(new Date(+date), column, max, min)) {\r\n                column += i;\r\n            }\r\n            var rangeValue = new Date(value.setDate(value.getDate() + column));\r\n            column = (+rangeValue > +max || +rangeValue < +min) ? column === i ? i - i : i : column;\r\n        }\r\n        date.setDate(date.getDate() + column);\r\n    };\r\n    CalendarBase.prototype.findNextTD = function (date, column, max, min) {\r\n        var value = new Date(date.setDate(date.getDate() + column));\r\n        var collection = [];\r\n        var isDisabled = false;\r\n        if ((!isNullOrUndefined(value) && value.getMonth()) === (!isNullOrUndefined(this.currentDate) && this.currentDate.getMonth())) {\r\n            var tdEles = void 0;\r\n            if (this.calendarMode === 'Gregorian') {\r\n                tdEles = this.renderDays(value);\r\n            }\r\n            else {\r\n                tdEles = this.islamicModule.islamicRenderDays(this.currentDate, value);\r\n            }\r\n            collection = tdEles.filter(function (element) {\r\n                return element.classList.contains(DISABLED);\r\n            });\r\n        }\r\n        else {\r\n            collection = this.tableBodyElement.querySelectorAll('td.' + DISABLED);\r\n        }\r\n        if (+value <= (+(max)) && +value >= (+(min))) {\r\n            if (collection.length) {\r\n                for (var i = 0; i < collection.length; i++) {\r\n                    isDisabled = (+value === +new Date(parseInt(collection[i].id, 0))) ? true : false;\r\n                    if (isDisabled) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return isDisabled;\r\n    };\r\n    CalendarBase.prototype.getMaxDays = function (d) {\r\n        var date;\r\n        var month;\r\n        var tmpDate = new Date(this.checkValue(d));\r\n        date = 28;\r\n        month = tmpDate.getMonth();\r\n        while (tmpDate.getMonth() === month) {\r\n            ++date;\r\n            tmpDate.setDate(date);\r\n        }\r\n        return date - 1;\r\n    };\r\n    CalendarBase.prototype.setDateDecade = function (date, year) {\r\n        date.setFullYear(year);\r\n        this.setProperties({ value: new Date(this.checkValue(date)) }, true);\r\n    };\r\n    ;\r\n    CalendarBase.prototype.setDateYear = function (date, value) {\r\n        date.setFullYear(value.getFullYear(), value.getMonth(), date.getDate());\r\n        if (value.getMonth() !== date.getMonth()) {\r\n            date.setDate(0);\r\n            this.currentDate = new Date(this.checkValue(value));\r\n        }\r\n        this.setProperties({ value: new Date(this.checkValue(date)) }, true);\r\n    };\r\n    CalendarBase.prototype.compareMonth = function (start, end) {\r\n        var result;\r\n        if (start.getFullYear() > end.getFullYear()) {\r\n            result = 1;\r\n        }\r\n        else if (start.getFullYear() < end.getFullYear()) {\r\n            result = -1;\r\n        }\r\n        else {\r\n            result = start.getMonth() === end.getMonth() ? 0 : start.getMonth() > end.getMonth() ? 1 : -1;\r\n        }\r\n        return result;\r\n    };\r\n    CalendarBase.prototype.checkValue = function (inValue) {\r\n        if (inValue instanceof Date) {\r\n            return (inValue.toUTCString());\r\n        }\r\n        else {\r\n            return ('' + inValue);\r\n        }\r\n    };\r\n    CalendarBase.prototype.checkView = function () {\r\n        if (this.start !== 'Decade' && this.start !== 'Year') {\r\n            this.setProperties({ start: 'Month' }, true);\r\n        }\r\n        if (this.depth !== 'Decade' && this.depth !== 'Year') {\r\n            this.setProperties({ depth: 'Month' }, true);\r\n        }\r\n        if (this.getViewNumber(this.depth) > this.getViewNumber(this.start)) {\r\n            this.setProperties({ depth: 'Month' }, true);\r\n        }\r\n    };\r\n    __decorate([\r\n        Property(new Date(1900, 0, 1))\r\n    ], CalendarBase.prototype, \"min\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], CalendarBase.prototype, \"enabled\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], CalendarBase.prototype, \"cssClass\", void 0);\r\n    __decorate([\r\n        Property(new Date(2099, 11, 31))\r\n    ], CalendarBase.prototype, \"max\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], CalendarBase.prototype, \"firstDayOfWeek\", void 0);\r\n    __decorate([\r\n        Property('Gregorian')\r\n    ], CalendarBase.prototype, \"calendarMode\", void 0);\r\n    __decorate([\r\n        Property('Month')\r\n    ], CalendarBase.prototype, \"start\", void 0);\r\n    __decorate([\r\n        Property('Month')\r\n    ], CalendarBase.prototype, \"depth\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], CalendarBase.prototype, \"weekNumber\", void 0);\r\n    __decorate([\r\n        Property('FirstDay')\r\n    ], CalendarBase.prototype, \"weekRule\", void 0);\r\n    __decorate([\r\n        Property(true)\r\n    ], CalendarBase.prototype, \"showTodayButton\", void 0);\r\n    __decorate([\r\n        Property('Short')\r\n    ], CalendarBase.prototype, \"dayHeaderFormat\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], CalendarBase.prototype, \"enablePersistence\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], CalendarBase.prototype, \"keyConfigs\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], CalendarBase.prototype, \"serverTimezoneOffset\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], CalendarBase.prototype, \"created\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], CalendarBase.prototype, \"destroyed\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], CalendarBase.prototype, \"navigated\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], CalendarBase.prototype, \"renderDayCell\", void 0);\r\n    CalendarBase = __decorate([\r\n        NotifyPropertyChanges\r\n    ], CalendarBase);\r\n    return CalendarBase;\r\n}(Component));\r\nexport { CalendarBase };\r\n/**\r\n * Represents the Calendar component that allows the user to select a date.\r\n * ```html\r\n * <div id=\"calendar\"/>\r\n * ```\r\n * ```typescript\r\n * <script>\r\n *   var calendarObj = new Calendar({ value: new Date() });\r\n *   calendarObj.appendTo(\"#calendar\");\r\n * </script>\r\n * ```\r\n */\r\nvar Calendar = /** @class */ (function (_super) {\r\n    __extends(Calendar, _super);\r\n    /**\r\n     * Initialized new instance of Calendar Class.\r\n     * Constructor for creating the widget\r\n     * @param  {CalendarModel} options?\r\n     * @param  {string|HTMLElement} element?\r\n     */\r\n    function Calendar(options, element) {\r\n        return _super.call(this, options, element) || this;\r\n    }\r\n    /**\r\n     * To Initialize the control rendering.\r\n     * @returns void\r\n     * @private\r\n     */\r\n    Calendar.prototype.render = function () {\r\n        if (this.calendarMode === 'Islamic' && this.islamicModule === undefined) {\r\n            throwError('Requires the injectable Islamic modules to render Calendar in Islamic mode');\r\n        }\r\n        if (this.isMultiSelection && typeof this.values === 'object' && !isNullOrUndefined(this.values) && this.values.length > 0) {\r\n            var tempValues = [];\r\n            var copyValues = [];\r\n            for (var limit = 0; limit < this.values.length; limit++) {\r\n                if (tempValues.indexOf(+this.values[limit]) === -1) {\r\n                    tempValues.push(+this.values[limit]);\r\n                    copyValues.push(this.values[limit]);\r\n                }\r\n            }\r\n            this.setProperties({ values: copyValues }, true);\r\n            for (var index = 0; index < this.values.length; index++) {\r\n                if (!this.checkDateValue(this.values[index])) {\r\n                    if (typeof (this.values[index]) === 'string' && this.checkDateValue(new Date(this.checkValue(this.values[index])))) {\r\n                        var copyDate = new Date(this.checkValue(this.values[index]));\r\n                        this.values.splice(index, 1);\r\n                        this.values.splice(index, 0, copyDate);\r\n                    }\r\n                    else {\r\n                        this.values.splice(index, 1);\r\n                    }\r\n                }\r\n            }\r\n            this.setProperties({ value: this.values[this.values.length - 1] }, true);\r\n            this.previousValues = this.values.length;\r\n        }\r\n        this.validateDate();\r\n        this.minMaxUpdate();\r\n        this.setEnable(this.enabled);\r\n        if (this.getModuleName() === 'calendar') {\r\n            this.setClass(this.cssClass);\r\n        }\r\n        _super.prototype.render.call(this);\r\n        if (this.getModuleName() === 'calendar') {\r\n            var form = closest(this.element, 'form');\r\n            if (form) {\r\n                EventHandler.add(form, 'reset', this.formResetHandler.bind(this));\r\n            }\r\n            this.setTimeZone(this.serverTimezoneOffset);\r\n        }\r\n        this.renderComplete();\r\n    };\r\n    Calendar.prototype.setEnable = function (enable) {\r\n        if (!enable) {\r\n            addClass([this.element], DISABLED);\r\n        }\r\n        else {\r\n            removeClass([this.element], DISABLED);\r\n        }\r\n    };\r\n    Calendar.prototype.setClass = function (newCssClass, oldCssClass) {\r\n        if (!isNullOrUndefined(oldCssClass)) {\r\n            oldCssClass = (oldCssClass.replace(/\\s+/g, ' ')).trim();\r\n        }\r\n        if (!isNullOrUndefined(newCssClass)) {\r\n            newCssClass = (newCssClass.replace(/\\s+/g, ' ')).trim();\r\n        }\r\n        if (!isNullOrUndefined(oldCssClass) && oldCssClass !== '') {\r\n            removeClass([this.element], oldCssClass.split(' '));\r\n        }\r\n        if (!isNullOrUndefined(newCssClass)) {\r\n            addClass([this.element], newCssClass.split(' '));\r\n        }\r\n    };\r\n    Calendar.prototype.isDayLightSaving = function () {\r\n        var secondOffset = new Date(this.value.getFullYear(), 6, 1).getTimezoneOffset();\r\n        var firstOffset = new Date(this.value.getFullYear(), 0, 1).getTimezoneOffset();\r\n        return (this.value.getTimezoneOffset() < Math.max(firstOffset, secondOffset));\r\n    };\r\n    Calendar.prototype.setTimeZone = function (offsetValue) {\r\n        if (!isNullOrUndefined(this.serverTimezoneOffset) && this.value) {\r\n            var serverTimezoneDiff = offsetValue;\r\n            var clientTimeZoneDiff = new Date().getTimezoneOffset() / 60;\r\n            var timeZoneDiff = serverTimezoneDiff + clientTimeZoneDiff;\r\n            timeZoneDiff = this.isDayLightSaving() ? timeZoneDiff-- : timeZoneDiff;\r\n            this.value = new Date(this.value.getTime() + (timeZoneDiff * 60 * 60 * 1000));\r\n        }\r\n    };\r\n    Calendar.prototype.formResetHandler = function () {\r\n        this.setProperties({ value: null }, true);\r\n    };\r\n    Calendar.prototype.validateDate = function () {\r\n        if (typeof this.value === 'string') {\r\n            this.setProperties({ value: this.checkDateValue(new Date(this.checkValue(this.value))) }, true); // persist the value property.\r\n        }\r\n        _super.prototype.validateDate.call(this, this.value);\r\n        if (!isNullOrUndefined(this.value) && this.min <= this.max && this.value >= this.min && this.value <= this.max) {\r\n            this.currentDate = new Date(this.checkValue(this.value));\r\n        }\r\n        if (isNaN(+this.value)) {\r\n            this.setProperties({ value: null }, true);\r\n        }\r\n    };\r\n    Calendar.prototype.minMaxUpdate = function () {\r\n        if (this.getModuleName() === 'calendar') {\r\n            if (!isNullOrUndefined(this.value) && this.value <= this.min && this.min <= this.max) {\r\n                this.setProperties({ value: this.min }, true);\r\n                this.changedArgs = { value: this.value };\r\n            }\r\n            else {\r\n                if (!isNullOrUndefined(this.value) && this.value >= this.max && this.min <= this.max) {\r\n                    this.setProperties({ value: this.max }, true);\r\n                    this.changedArgs = { value: this.value };\r\n                }\r\n            }\r\n        }\r\n        if (this.getModuleName() !== 'calendar' && !isNullOrUndefined(this.value)) {\r\n            if (!isNullOrUndefined(this.value) && this.value < this.min && this.min <= this.max) {\r\n                _super.prototype.minMaxUpdate.call(this, this.min);\r\n            }\r\n            else {\r\n                if (!isNullOrUndefined(this.value) && this.value > this.max && this.min <= this.max) {\r\n                    _super.prototype.minMaxUpdate.call(this, this.max);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            _super.prototype.minMaxUpdate.call(this, this.value);\r\n        }\r\n    };\r\n    Calendar.prototype.generateTodayVal = function (value) {\r\n        var tempValue = new Date();\r\n        if (value) {\r\n            tempValue.setHours(value.getHours());\r\n            tempValue.setMinutes(value.getMinutes());\r\n            tempValue.setSeconds(value.getSeconds());\r\n            tempValue.setMilliseconds(value.getMilliseconds());\r\n        }\r\n        else {\r\n            tempValue = new Date(tempValue.getFullYear(), tempValue.getMonth(), tempValue.getDate(), 0, 0, 0, 0);\r\n        }\r\n        return tempValue;\r\n    };\r\n    Calendar.prototype.todayButtonClick = function (e) {\r\n        if (this.showTodayButton) {\r\n            var tempValue = this.generateTodayVal(this.value);\r\n            this.setProperties({ value: tempValue }, true);\r\n            this.isTodayClicked = true;\r\n            this.todayButtonEvent = e;\r\n            if (this.isMultiSelection) {\r\n                var copyValues = this.copyValues(this.values);\r\n                if (!_super.prototype.checkPresentDate.call(this, tempValue, this.values)) {\r\n                    copyValues.push(tempValue);\r\n                    this.setProperties({ values: copyValues });\r\n                }\r\n            }\r\n            _super.prototype.todayButtonClick.call(this, e, new Date(+this.value));\r\n        }\r\n    };\r\n    Calendar.prototype.keyActionHandle = function (e) {\r\n        _super.prototype.keyActionHandle.call(this, e, this.value, this.isMultiSelection);\r\n    };\r\n    /**\r\n     * Initialize the event handler\r\n     * @private\r\n     */\r\n    Calendar.prototype.preRender = function () {\r\n        var _this = this;\r\n        this.changeHandler = function (e) {\r\n            _this.triggerChange(e);\r\n        };\r\n        this.checkView();\r\n        _super.prototype.preRender.call(this, this.value);\r\n    };\r\n    ;\r\n    /**\r\n\r\n     */\r\n    Calendar.prototype.createContent = function () {\r\n        this.previousDate = this.value;\r\n        this.previousDateTime = this.value;\r\n        _super.prototype.createContent.call(this);\r\n    };\r\n    Calendar.prototype.minMaxDate = function (localDate) {\r\n        return _super.prototype.minMaxDate.call(this, localDate);\r\n    };\r\n    Calendar.prototype.renderMonths = function (e, value, isCustomDate) {\r\n        _super.prototype.renderMonths.call(this, e, this.value, isCustomDate);\r\n    };\r\n    Calendar.prototype.renderDays = function (currentDate, value, isMultiSelect, values, isCustomDate) {\r\n        var tempDays = _super.prototype.renderDays.call(this, currentDate, this.value, this.isMultiSelection, this.values, isCustomDate);\r\n        if (this.isMultiSelection) {\r\n            _super.prototype.validateValues.call(this, this.isMultiSelection, this.values);\r\n        }\r\n        return tempDays;\r\n    };\r\n    Calendar.prototype.renderYears = function (e) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            _super.prototype.renderYears.call(this, e, this.value);\r\n        }\r\n        else {\r\n            this.islamicModule.islamicRenderYears(e, this.value);\r\n        }\r\n    };\r\n    Calendar.prototype.renderDecades = function (e) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            _super.prototype.renderDecades.call(this, e, this.value);\r\n        }\r\n        else {\r\n            this.islamicModule.islamicRenderDecade(e, this.value);\r\n        }\r\n    };\r\n    Calendar.prototype.renderTemplate = function (elements, count, classNm, e) {\r\n        if (this.calendarMode === 'Gregorian') {\r\n            _super.prototype.renderTemplate.call(this, elements, count, classNm, e, this.value);\r\n        }\r\n        else {\r\n            this.islamicModule.islamicRenderTemplate(elements, count, classNm, e, this.value);\r\n        }\r\n        this.changedArgs = { value: this.value, values: this.values };\r\n        this.changeHandler();\r\n    };\r\n    Calendar.prototype.clickHandler = function (e) {\r\n        var eve = e.currentTarget;\r\n        this.isPopupClicked = true;\r\n        if (eve.classList.contains(OTHERMONTH)) {\r\n            if (this.isMultiSelection) {\r\n                var copyValues = this.copyValues(this.values);\r\n                copyValues.push(this.getIdValue(e, null));\r\n                this.setProperties({ values: copyValues }, true);\r\n                this.setProperties({ value: this.values[this.values.length - 1] }, true);\r\n            }\r\n            else {\r\n                this.setProperties({ value: this.getIdValue(e, null) }, true);\r\n            }\r\n        }\r\n        var storeView = this.currentView();\r\n        _super.prototype.clickHandler.call(this, e, this.value);\r\n        if (this.isMultiSelection && this.currentDate !== this.value &&\r\n            !isNullOrUndefined(this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0]) && storeView === 'Year') {\r\n            this.tableBodyElement.querySelectorAll('.' + FOCUSEDDATE)[0].classList.remove(FOCUSEDDATE);\r\n        }\r\n    };\r\n    Calendar.prototype.switchView = function (view, e, isMultiSelection, isCustomDate) {\r\n        _super.prototype.switchView.call(this, view, e, this.isMultiSelection, isCustomDate);\r\n    };\r\n    /**\r\n     * To get component name\r\n     * @private\r\n     */\r\n    Calendar.prototype.getModuleName = function () {\r\n        _super.prototype.getModuleName.call(this);\r\n        return 'calendar';\r\n    };\r\n    /**\r\n     * Gets the properties to be maintained upon browser refresh.\r\n     * @returns string\r\n     */\r\n    Calendar.prototype.getPersistData = function () {\r\n        _super.prototype.getPersistData.call(this);\r\n        var keyEntity = ['value', 'values'];\r\n        return this.addOnPersist(keyEntity);\r\n    };\r\n    /**\r\n     * Called internally if any of the property value changed.\r\n     * returns void\r\n     * @private\r\n     */\r\n    Calendar.prototype.onPropertyChanged = function (newProp, oldProp) {\r\n        this.effect = '';\r\n        this.rangeValidation(this.min, this.max);\r\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\r\n            var prop = _a[_i];\r\n            switch (prop) {\r\n                case 'value':\r\n                    if (this.isDateSelected) {\r\n                        if (typeof newProp.value === 'string') {\r\n                            this.setProperties({ value: new Date(this.checkValue(newProp.value)) }, true);\r\n                        }\r\n                        else {\r\n                            newProp.value = new Date(this.checkValue(newProp.value));\r\n                        }\r\n                        if (isNaN(+this.value)) {\r\n                            this.setProperties({ value: oldProp.value }, true);\r\n                        }\r\n                        this.update();\r\n                    }\r\n                    break;\r\n                case 'values':\r\n                    if (this.isDateSelected) {\r\n                        if (typeof newProp.values === 'string' || typeof newProp.values === 'number') {\r\n                            this.setProperties({ values: null }, true);\r\n                        }\r\n                        else {\r\n                            var copyValues = this.copyValues(this.values);\r\n                            for (var index = 0; index < copyValues.length; index++) {\r\n                                var tempDate = copyValues[index];\r\n                                if (this.checkDateValue(tempDate) && !_super.prototype.checkPresentDate.call(this, tempDate, copyValues)) {\r\n                                    copyValues.push(tempDate);\r\n                                }\r\n                            }\r\n                            this.setProperties({ values: copyValues }, true);\r\n                            if (this.values.length > 0) {\r\n                                this.setProperties({ value: newProp.values[newProp.values.length - 1] }, true);\r\n                            }\r\n                        }\r\n                        this.validateValues(this.isMultiSelection, this.values);\r\n                        this.update();\r\n                    }\r\n                    break;\r\n                case 'isMultiSelection':\r\n                    if (this.isDateSelected) {\r\n                        this.setProperties({ isMultiSelection: newProp.isMultiSelection }, true);\r\n                        this.update();\r\n                    }\r\n                    break;\r\n                case 'enabled':\r\n                    this.setEnable(this.enabled);\r\n                    break;\r\n                case 'cssClass':\r\n                    if (this.getModuleName() === 'calendar') {\r\n                        this.setClass(newProp.cssClass, oldProp.cssClass);\r\n                    }\r\n                    break;\r\n                default:\r\n                    _super.prototype.onPropertyChanged.call(this, newProp, oldProp, this.isMultiSelection, this.values);\r\n            }\r\n        }\r\n        this.preventChange = this.isAngular && this.preventChange ? !this.preventChange : this.preventChange;\r\n    };\r\n    /**\r\n     * Destroys the widget.\r\n     * @returns void\r\n     */\r\n    Calendar.prototype.destroy = function () {\r\n        _super.prototype.destroy.call(this);\r\n        if (this.getModuleName() === 'calendar') {\r\n            var form = closest(this.element, 'form');\r\n            if (form) {\r\n                EventHandler.remove(form, 'reset', this.formResetHandler.bind(this));\r\n            }\r\n        }\r\n    };\r\n    /**\r\n     * This method is used to navigate to the month/year/decade view of the Calendar.\r\n     * @param  {string} view - Specifies the view of the Calendar.\r\n     * @param  {Date} date - Specifies the focused date in a view.\r\n     * @returns void\r\n\r\n     */\r\n    Calendar.prototype.navigateTo = function (view, date, isCustomDate) {\r\n        this.minMaxUpdate();\r\n        _super.prototype.navigateTo.call(this, view, date, isCustomDate);\r\n    };\r\n    /**\r\n     * Gets the current view of the Calendar.\r\n     * @returns string\r\n\r\n     */\r\n    Calendar.prototype.currentView = function () {\r\n        return _super.prototype.currentView.call(this);\r\n    };\r\n    /**\r\n     * This method is used to add the single or multiple dates to the values property of the Calendar.\r\n     * @param  {Date || Date[]} dates - Specifies the date or dates to be added to the values property of the Calendar.\r\n     * @returns void\r\n\r\n     */\r\n    Calendar.prototype.addDate = function (dates) {\r\n        if (typeof dates !== 'string' && typeof dates !== 'number') {\r\n            var copyValues = this.copyValues(this.values);\r\n            if (typeof dates === 'object' && (dates).length > 0) {\r\n                var tempDates = dates;\r\n                for (var i = 0; i < tempDates.length; i++) {\r\n                    if (this.checkDateValue(tempDates[i]) && !_super.prototype.checkPresentDate.call(this, tempDates[i], copyValues)) {\r\n                        if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\r\n                            copyValues.push(tempDates[i]);\r\n                        }\r\n                        else {\r\n                            copyValues = [new Date(+tempDates[i])];\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                if (this.checkDateValue(dates) && !_super.prototype.checkPresentDate.call(this, dates, copyValues)) {\r\n                    if (!isNullOrUndefined(copyValues) && copyValues.length > 0) {\r\n                        copyValues.push((dates));\r\n                    }\r\n                    else {\r\n                        copyValues = [new Date(+dates)];\r\n                    }\r\n                }\r\n            }\r\n            this.setProperties({ values: copyValues }, true);\r\n            if (this.isMultiSelection) {\r\n                this.setProperties({ value: this.values[this.values.length - 1] }, true);\r\n            }\r\n            this.validateValues(this.isMultiSelection, copyValues);\r\n            this.update();\r\n            this.changedArgs = { value: this.value, values: this.values };\r\n            this.changeHandler();\r\n        }\r\n    };\r\n    /**\r\n     * This method is used to remove the single or multiple dates from the values property of the Calendar.\r\n     * @param  {Date || Date[]} dates - Specifies the date or dates which need to be removed from the values property of the Calendar.\r\n     * @returns void\r\n\r\n     */\r\n    Calendar.prototype.removeDate = function (dates) {\r\n        if (typeof dates !== 'string' && typeof dates !== 'number' && !isNullOrUndefined(this.values) && this.values.length > 0) {\r\n            var copyValues = this.copyValues(this.values);\r\n            if (typeof dates === 'object' && ((dates).length > 0)) {\r\n                var tempDates = dates;\r\n                for (var index = 0; index < tempDates.length; index++) {\r\n                    for (var i = 0; i < copyValues.length; i++) {\r\n                        if (+copyValues[i] === +tempDates[index]) {\r\n                            copyValues.splice(i, 1);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                for (var i = 0; i < copyValues.length; i++) {\r\n                    if (+copyValues[i] === +dates) {\r\n                        copyValues.splice(i, 1);\r\n                    }\r\n                }\r\n            }\r\n            this.setProperties({ values: copyValues }, false);\r\n            this.update();\r\n            if (this.isMultiSelection) {\r\n                this.setProperties({ value: this.values[this.values.length - 1] }, true);\r\n            }\r\n            this.changedArgs = { value: this.value, values: this.values };\r\n            this.changeHandler();\r\n        }\r\n    };\r\n    /**\r\n     * To set custom today date in calendar\r\n     * @private\r\n     */\r\n    Calendar.prototype.setTodayDate = function (date) {\r\n        var todayDate = new Date(+date);\r\n        this.setProperties({ value: todayDate }, true);\r\n        _super.prototype.todayButtonClick.call(this, null, todayDate, true);\r\n    };\r\n    Calendar.prototype.update = function () {\r\n        this.validateDate();\r\n        this.minMaxUpdate();\r\n        _super.prototype.setValueUpdate.call(this);\r\n    };\r\n    Calendar.prototype.selectDate = function (e, date, element) {\r\n        _super.prototype.selectDate.call(this, e, date, element, this.isMultiSelection, this.values);\r\n        if (this.isMultiSelection && !isNullOrUndefined(this.values) && this.values.length > 0) {\r\n            this.setProperties({ value: this.values[this.values.length - 1] }, true);\r\n        }\r\n        this.changedArgs = { value: this.value, values: this.values };\r\n        this.changeHandler(e);\r\n    };\r\n    Calendar.prototype.changeEvent = function (e) {\r\n        if ((this.value && this.value.valueOf()) !== (this.previousDate && +this.previousDate.valueOf())\r\n            || this.isMultiSelection) {\r\n            if (this.isAngular && this.preventChange) {\r\n                this.preventChange = false;\r\n            }\r\n            else {\r\n                this.trigger('change', this.changedArgs);\r\n            }\r\n            this.previousDate = new Date(+this.value);\r\n        }\r\n    };\r\n    Calendar.prototype.triggerChange = function (e) {\r\n        if (!isNullOrUndefined(this.todayButtonEvent) && this.isTodayClicked) {\r\n            e = this.todayButtonEvent;\r\n            this.isTodayClicked = false;\r\n        }\r\n        this.changedArgs.event = e || null;\r\n        this.changedArgs.isInteracted = !isNullOrUndefined(e);\r\n        if (!isNullOrUndefined(this.value)) {\r\n            this.setProperties({ value: this.value }, true);\r\n        }\r\n        if (!this.isMultiSelection && +this.value !== Number.NaN && (+this.value !== +this.previousDate || this.previousDate == null\r\n            && !isNaN(+this.value))) {\r\n            this.changeEvent(e);\r\n        }\r\n        else if (!isNullOrUndefined(this.values) && this.previousValues !== this.values.length) {\r\n            this.changeEvent(e);\r\n            this.previousValues = this.values.length;\r\n        }\r\n    };\r\n    __decorate([\r\n        Property(null)\r\n    ], Calendar.prototype, \"value\", void 0);\r\n    __decorate([\r\n        Property(null)\r\n    ], Calendar.prototype, \"values\", void 0);\r\n    __decorate([\r\n        Property(false)\r\n    ], Calendar.prototype, \"isMultiSelection\", void 0);\r\n    __decorate([\r\n        Event()\r\n    ], Calendar.prototype, \"change\", void 0);\r\n    Calendar = __decorate([\r\n        NotifyPropertyChanges\r\n    ], Calendar);\r\n    return Calendar;\r\n}(CalendarBase));\r\nexport { Calendar };\r\n"]},"metadata":{},"sourceType":"module"}