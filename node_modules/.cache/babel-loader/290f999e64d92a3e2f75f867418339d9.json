{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { append, addClass, createElement } from '@syncfusion/ej2-base';\nimport { Year } from './year';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\r\n * timeline year view\r\n */\n\nvar TimelineYear =\n/** @class */\nfunction (_super) {\n  __extends(TimelineYear, _super);\n  /**\r\n   * Constructor for timeline year view\r\n   */\n\n\n  function TimelineYear(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-timeline-year-view';\n    _this.isInverseTableSelect = true;\n    return _this;\n  }\n  /**\r\n   * Get module name.\r\n   */\n\n\n  TimelineYear.prototype.getModuleName = function () {\n    return 'timelineYear';\n  };\n\n  TimelineYear.prototype.renderHeader = function (headerWrapper) {\n    var tr = createElement('tr');\n    headerWrapper.appendChild(tr);\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.renderResourceHeaderIndent(tr);\n    } else {\n      var leftHeaderCells = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      tr.appendChild(leftHeaderCells);\n      leftHeaderCells.appendChild(this.renderResourceHeader(cls.LEFT_INDENT_WRAP_CLASS));\n    }\n\n    var td = createElement('td');\n    tr.appendChild(td);\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    td.appendChild(container);\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      container.appendChild(this.renderResourceHeader(cls.DATE_HEADER_WRAP_CLASS));\n      this.columnCount = this.colLevels.slice(-1)[0].length;\n    } else {\n      var wrapper = createElement('div', {\n        className: cls.DATE_HEADER_WRAP_CLASS\n      });\n      container.appendChild(wrapper);\n      var table = this.createTableLayout();\n      wrapper.appendChild(table);\n      table.appendChild(this.createTableColGroup(this.columnCount));\n      var innerTr = createElement('tr');\n      table.querySelector('tbody').appendChild(innerTr);\n\n      for (var column = 0; column < this.columnCount; column++) {\n        var innerTd = createElement('td', {\n          className: cls.HEADER_CELLS_CLASS\n        });\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\n        } else {\n          var date = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n          innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\n          innerTd.setAttribute('data-date', date.getTime().toString());\n        }\n\n        innerTr.appendChild(innerTd);\n        this.parent.trigger(event.renderCell, {\n          elementType: 'headerCells',\n          element: innerTd\n        });\n      }\n    }\n  };\n\n  TimelineYear.prototype.renderResourceHeader = function (className) {\n    var wrap = createElement('div', {\n      className: className\n    });\n    var tbl = this.createTableLayout();\n    wrap.appendChild(tbl);\n    var trEle = createElement('tr');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      this.colLevels = this.generateColumnLevels();\n    } else {\n      var colData = [{\n        className: [cls.HEADER_CELLS_CLASS],\n        type: 'headerCell'\n      }];\n      this.colLevels = [colData];\n    }\n\n    for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\n      var col = _a[_i];\n      var ntr = trEle.cloneNode();\n      var count = className === cls.DATE_HEADER_WRAP_CLASS ? col : [col[0]];\n\n      for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\n        var c = count_1[_b];\n        var tdEle = createElement('td');\n\n        if (c.className) {\n          addClass([tdEle], c.className);\n        }\n\n        if (className === cls.DATE_HEADER_WRAP_CLASS) {\n          if (c.template) {\n            append(c.template, tdEle);\n          }\n\n          if (c.colSpan) {\n            tdEle.setAttribute('colspan', c.colSpan.toString());\n          }\n\n          this.setResourceHeaderContent(tdEle, c);\n        }\n\n        var args = {\n          elementType: c.type,\n          element: tdEle,\n          date: c.date,\n          groupIndex: c.groupIndex\n        };\n        this.parent.trigger(event.renderCell, args);\n        ntr.appendChild(tdEle);\n      }\n\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n\n    if (className === cls.DATE_HEADER_WRAP_CLASS) {\n      tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\n    }\n\n    return wrap;\n  };\n\n  TimelineYear.prototype.renderContent = function (contentWrapper) {\n    var tr = createElement('tr');\n    contentWrapper.appendChild(tr);\n    var firstTd = createElement('td');\n    var lastTd = createElement('td');\n    var tdCollection = [];\n    var monthTBody;\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      tdCollection.push(firstTd);\n      firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\n      this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\n    } else {\n      tdCollection.push(firstTd);\n      var monthWrapper = createElement('div', {\n        className: cls.MONTH_HEADER_WRAPPER\n      });\n      firstTd.appendChild(monthWrapper);\n      monthWrapper.appendChild(this.createTableLayout());\n      monthTBody = monthWrapper.querySelector('tbody');\n    }\n\n    tdCollection.push(lastTd);\n    append(tdCollection, tr);\n    var content = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    lastTd.appendChild(content);\n    var contentTable = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    content.appendChild(contentTable);\n    var eventWrapper = createElement('div', {\n      className: cls.EVENT_TABLE_CLASS\n    });\n    content.appendChild(eventWrapper);\n    var contentTBody = contentTable.querySelector('tbody');\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      if (this.parent.rowAutoHeight) {\n        addClass([contentTable], cls.AUTO_HEIGHT);\n      }\n\n      var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : 12;\n      contentTable.appendChild(this.createTableColGroup(colCount));\n      this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\n    } else {\n      contentTable.appendChild(this.createTableColGroup(this.columnCount));\n      this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\n    }\n  };\n\n  TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\n    for (var month = 0; month < this.rowCount; month++) {\n      wrapper.appendChild(createElement('div', {\n        className: cls.APPOINTMENT_CONTAINER_CLASS\n      }));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var tr = createElement('tr', {\n        attrs: {\n          'role': 'row'\n        }\n      });\n      var monthTr = tr.cloneNode();\n      monthBody.appendChild(monthTr);\n      var contentTr = tr.cloneNode();\n      contentBody.appendChild(contentTr);\n      var monthTd = createElement('td', {\n        className: cls.MONTH_HEADER_CLASS,\n        attrs: {\n          'role': 'gridcell'\n        }\n      });\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        monthTd.setAttribute('data-date', monthDate.getTime().toString());\n        monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\n      } else {\n        monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\n      }\n\n      monthTr.appendChild(monthTd);\n      this.parent.trigger(event.renderCell, {\n        elementType: 'leftHeaderCells',\n        element: monthTd\n      });\n      var date = new Date(monthStart.getTime());\n\n      for (var column = 0; column < this.columnCount; column++) {\n        var isDateAvail = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          monthDate = new Date(this.parent.selectedDate.getFullYear(), column, 1);\n          monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n          monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n          var dayDate = month - monthStart.getDay() + 1;\n          date = new Date(this.parent.selectedDate.getFullYear(), column, dayDate);\n          isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\n        } else {\n          isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\n        }\n\n        var td = createElement('td', {\n          className: cls.WORK_CELLS_CLASS,\n          attrs: {\n            'role': 'gridcell',\n            'aria-selected': 'false'\n          }\n        });\n        contentTr.appendChild(td);\n        var dateHeader = createElement('div', {\n          className: cls.DATE_HEADER_CLASS + ' ' + cls.NAVIGATE_CLASS,\n          innerHTML: isDateAvail ? date.getDate().toString() : ''\n        });\n        var skeleton = 'full';\n        var annocementText = this.parent.globalize.formatDate(date, {\n          skeleton: skeleton,\n          calendar: this.parent.getCalendarMode()\n        });\n        dateHeader.setAttribute('aria-label', annocementText);\n\n        if (isDateAvail) {\n          var tds = [td];\n          var classList = [];\n\n          if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\n            classList.push(cls.WORKDAY_CLASS);\n          }\n\n          if (this.isCurrentDate(date)) {\n            classList.push(cls.CURRENT_DAY_CLASS);\n\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n              tds.push(this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\n            } else {\n              tds.push(this.element.querySelectorAll('.' + cls.MONTH_HEADER_CLASS).item(month));\n            }\n          }\n\n          if (classList.length > 0) {\n            addClass(tds, classList);\n          }\n        } else {\n          addClass([td], cls.OTHERMONTH_CLASS);\n        }\n\n        td.appendChild(dateHeader);\n\n        if (isDateAvail) {\n          td.setAttribute('data-date', date.getTime().toString());\n          this.wireEvents(td, 'cell');\n        }\n\n        this.renderCellTemplate({\n          date: date,\n          type: 'workCells'\n        }, td);\n        this.parent.trigger(event.renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n\n        if (isDateAvail) {\n          if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n            date = util.addDays(new Date(date.getTime()), 1);\n          }\n        }\n      }\n    }\n  };\n\n  TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\n    for (var row = 0; row < this.rowCount; row++) {\n      wrapper.appendChild(createElement('div', {\n        className: cls.APPOINTMENT_CONTAINER_CLASS\n      }));\n      var tr = createElement('tr', {\n        attrs: {\n          'role': 'row'\n        }\n      });\n      contentBody.appendChild(tr);\n      var resData = void 0;\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        resData = this.parent.resourceBase.lastResourceLevel[row];\n      }\n\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n      var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        var monthTr = tr.cloneNode();\n        monthBody.appendChild(monthTr);\n        var monthTd = createElement('td', {\n          className: cls.MONTH_HEADER_CLASS,\n          innerHTML: \"<span>\" + this.getMonthName(monthDate) + \"</span>\",\n          attrs: {\n            'role': 'gridcell',\n            'data-date': date.getTime().toString()\n          }\n        });\n        monthTr.appendChild(monthTd);\n      }\n\n      for (var month = 0; month < this.columnCount; month++) {\n        var classList = [];\n        var groupIndex = row;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          classList = classList.concat(resData.className);\n\n          if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\n            classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n          } else {\n            classList.push(cls.WORKDAY_CLASS);\n          }\n\n          monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n          date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n        } else {\n          groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\n          classList.push(cls.WORKDAY_CLASS);\n        }\n\n        var td = createElement('td', {\n          className: cls.WORK_CELLS_CLASS,\n          attrs: {\n            'role': 'gridcell',\n            'aria-selected': 'false',\n            'data-date': date.getTime().toString()\n          }\n        });\n        addClass([td], classList);\n        td.setAttribute('data-group-index', groupIndex.toString());\n        this.renderCellTemplate({\n          date: date,\n          type: 'workCells',\n          groupIndex: groupIndex\n        }, td);\n        this.wireEvents(td, 'cell');\n        tr.appendChild(td);\n        this.parent.trigger(event.renderCell, {\n          elementType: 'workCells',\n          element: td,\n          date: date\n        });\n      }\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Vertical') {\n      this.collapseRows(this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS));\n    }\n  };\n\n  TimelineYear.prototype.renderCellTemplate = function (data, td) {\n    if (!this.parent.activeViewOptions.cellTemplate) {\n      return;\n    }\n\n    var dateValue = util.addLocalOffset(data.date);\n    var args = {\n      date: dateValue,\n      type: data.type\n    };\n\n    if (data.groupIndex) {\n      args.groupIndex = data.groupIndex;\n    }\n\n    var scheduleId = this.parent.element.id + '_';\n    var viewName = this.parent.activeViewOptions.cellTemplateName;\n    var templateId = scheduleId + viewName + 'cellTemplate';\n    var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\n    append(cellTemplate, td);\n  };\n\n  TimelineYear.prototype.scrollToDate = function (scrollDate) {\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      var date = +new Date(util.resetTime(scrollDate));\n      var element = this.element.querySelector('[data-date=\"' + date + '\"]');\n\n      if (element) {\n        this.getScrollableElement().scrollLeft = element.offsetLeft;\n        this.getScrollableElement().scrollTop = element.offsetTop;\n      }\n    }\n  };\n\n  TimelineYear.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n\n  return TimelineYear;\n}(Year);\n\nexport { TimelineYear };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/timeline-year.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","append","addClass","createElement","Year","event","cls","util","TimelineYear","_super","parent","_this","call","viewClass","isInverseTableSelect","getModuleName","renderHeader","headerWrapper","tr","appendChild","activeViewOptions","orientation","group","resources","length","uiStateValues","isGroupAdaptive","resourceBase","renderResourceHeaderIndent","leftHeaderCells","className","LEFT_INDENT_CLASS","renderResourceHeader","LEFT_INDENT_WRAP_CLASS","td","container","DATE_HEADER_CONTAINER_CLASS","DATE_HEADER_WRAP_CLASS","columnCount","colLevels","slice","wrapper","table","createTableLayout","createTableColGroup","innerTr","querySelector","column","innerTd","HEADER_CELLS_CLASS","innerHTML","getDayNames","date","Date","selectedDate","getFullYear","getMonthName","setAttribute","getTime","toString","trigger","renderCell","elementType","element","wrap","tbl","trEle","generateColumnLevels","colData","type","_i","_a","col","ntr","cloneNode","count","_b","count_1","c","tdEle","template","colSpan","setResourceHeaderContent","args","groupIndex","renderContent","contentWrapper","firstTd","lastTd","tdCollection","monthTBody","push","createResourceColumn","rowCount","lastResourceLevel","monthWrapper","MONTH_HEADER_WRAPPER","content","CONTENT_WRAP_CLASS","contentTable","CONTENT_TABLE_CLASS","eventWrapper","EVENT_TABLE_CLASS","contentTBody","rowAutoHeight","AUTO_HEIGHT","colCount","renderResourceContent","renderDefaultContent","monthBody","contentBody","month","APPOINTMENT_CONTAINER_CLASS","monthDate","monthStart","calendarUtil","getMonthStartDate","monthEnd","getMonthEndDate","attrs","monthTr","contentTr","monthTd","MONTH_HEADER_CLASS","isDateAvail","dayDate","getDay","WORK_CELLS_CLASS","dateHeader","DATE_HEADER_CLASS","NAVIGATE_CLASS","getDate","skeleton","annocementText","globalize","formatDate","calendar","getCalendarMode","tds","classList","workDays","indexOf","WORKDAY_CLASS","isCurrentDate","CURRENT_DAY_CLASS","querySelectorAll","item","OTHERMONTH_CLASS","wireEvents","renderCellTemplate","addDays","row","resData","concat","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","collapseRows","data","cellTemplate","dateValue","addLocalOffset","scheduleId","id","viewName","cellTemplateName","templateId","getCellTemplate","scrollToDate","scrollDate","resetTime","getScrollableElement","scrollLeft","offsetLeft","scrollTop","offsetTop","isAdaptive","isTimelineView","isServerRenderer","SCROLL_CONTAINER_CLASS","getContentAreaElement"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { append, addClass, createElement } from '@syncfusion/ej2-base';\r\nimport { Year } from './year';\r\nimport * as event from '../base/constant';\r\nimport * as cls from '../base/css-constant';\r\nimport * as util from '../base/util';\r\n/**\r\n * timeline year view\r\n */\r\nvar TimelineYear = /** @class */ (function (_super) {\r\n    __extends(TimelineYear, _super);\r\n    /**\r\n     * Constructor for timeline year view\r\n     */\r\n    function TimelineYear(parent) {\r\n        var _this = _super.call(this, parent) || this;\r\n        _this.viewClass = 'e-timeline-year-view';\r\n        _this.isInverseTableSelect = true;\r\n        return _this;\r\n    }\r\n    /**\r\n     * Get module name.\r\n     */\r\n    TimelineYear.prototype.getModuleName = function () {\r\n        return 'timelineYear';\r\n    };\r\n    TimelineYear.prototype.renderHeader = function (headerWrapper) {\r\n        var tr = createElement('tr');\r\n        headerWrapper.appendChild(tr);\r\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\r\n            !this.parent.uiStateValues.isGroupAdaptive) {\r\n            this.parent.resourceBase.renderResourceHeaderIndent(tr);\r\n        }\r\n        else {\r\n            var leftHeaderCells = createElement('td', { className: cls.LEFT_INDENT_CLASS });\r\n            tr.appendChild(leftHeaderCells);\r\n            leftHeaderCells.appendChild(this.renderResourceHeader(cls.LEFT_INDENT_WRAP_CLASS));\r\n        }\r\n        var td = createElement('td');\r\n        tr.appendChild(td);\r\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\r\n        td.appendChild(container);\r\n        if (this.parent.activeViewOptions.orientation === 'Horizontal' && this.parent.activeViewOptions.group.resources.length > 0 &&\r\n            !this.parent.uiStateValues.isGroupAdaptive) {\r\n            container.appendChild(this.renderResourceHeader(cls.DATE_HEADER_WRAP_CLASS));\r\n            this.columnCount = this.colLevels.slice(-1)[0].length;\r\n        }\r\n        else {\r\n            var wrapper = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\r\n            container.appendChild(wrapper);\r\n            var table = this.createTableLayout();\r\n            wrapper.appendChild(table);\r\n            table.appendChild(this.createTableColGroup(this.columnCount));\r\n            var innerTr = createElement('tr');\r\n            table.querySelector('tbody').appendChild(innerTr);\r\n            for (var column = 0; column < this.columnCount; column++) {\r\n                var innerTd = createElement('td', { className: cls.HEADER_CELLS_CLASS });\r\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                    innerTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[column % 7] + \"</span>\";\r\n                }\r\n                else {\r\n                    var date = new Date(this.parent.selectedDate.getFullYear(), column, 1);\r\n                    innerTd.innerHTML = \"<span>\" + this.getMonthName(date) + \"</span>\";\r\n                    innerTd.setAttribute('data-date', date.getTime().toString());\r\n                }\r\n                innerTr.appendChild(innerTd);\r\n                this.parent.trigger(event.renderCell, { elementType: 'headerCells', element: innerTd });\r\n            }\r\n        }\r\n    };\r\n    TimelineYear.prototype.renderResourceHeader = function (className) {\r\n        var wrap = createElement('div', { className: className });\r\n        var tbl = this.createTableLayout();\r\n        wrap.appendChild(tbl);\r\n        var trEle = createElement('tr');\r\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n            this.colLevels = this.generateColumnLevels();\r\n        }\r\n        else {\r\n            var colData = [{ className: [cls.HEADER_CELLS_CLASS], type: 'headerCell' }];\r\n            this.colLevels = [colData];\r\n        }\r\n        for (var _i = 0, _a = this.colLevels; _i < _a.length; _i++) {\r\n            var col = _a[_i];\r\n            var ntr = trEle.cloneNode();\r\n            var count = className === cls.DATE_HEADER_WRAP_CLASS ? col : [col[0]];\r\n            for (var _b = 0, count_1 = count; _b < count_1.length; _b++) {\r\n                var c = count_1[_b];\r\n                var tdEle = createElement('td');\r\n                if (c.className) {\r\n                    addClass([tdEle], c.className);\r\n                }\r\n                if (className === cls.DATE_HEADER_WRAP_CLASS) {\r\n                    if (c.template) {\r\n                        append(c.template, tdEle);\r\n                    }\r\n                    if (c.colSpan) {\r\n                        tdEle.setAttribute('colspan', c.colSpan.toString());\r\n                    }\r\n                    this.setResourceHeaderContent(tdEle, c);\r\n                }\r\n                var args = { elementType: c.type, element: tdEle, date: c.date, groupIndex: c.groupIndex };\r\n                this.parent.trigger(event.renderCell, args);\r\n                ntr.appendChild(tdEle);\r\n            }\r\n            tbl.querySelector('tbody').appendChild(ntr);\r\n        }\r\n        if (className === cls.DATE_HEADER_WRAP_CLASS) {\r\n            tbl.appendChild(this.createTableColGroup(this.colLevels.slice(-1)[0].length));\r\n        }\r\n        return wrap;\r\n    };\r\n    TimelineYear.prototype.renderContent = function (contentWrapper) {\r\n        var tr = createElement('tr');\r\n        contentWrapper.appendChild(tr);\r\n        var firstTd = createElement('td');\r\n        var lastTd = createElement('td');\r\n        var tdCollection = [];\r\n        var monthTBody;\r\n        if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0 &&\r\n            !this.parent.uiStateValues.isGroupAdaptive) {\r\n            tdCollection.push(firstTd);\r\n            firstTd.appendChild(this.parent.resourceBase.createResourceColumn());\r\n            this.rowCount = this.parent.resourceBase.lastResourceLevel.length;\r\n        }\r\n        else {\r\n            tdCollection.push(firstTd);\r\n            var monthWrapper = createElement('div', { className: cls.MONTH_HEADER_WRAPPER });\r\n            firstTd.appendChild(monthWrapper);\r\n            monthWrapper.appendChild(this.createTableLayout());\r\n            monthTBody = monthWrapper.querySelector('tbody');\r\n        }\r\n        tdCollection.push(lastTd);\r\n        append(tdCollection, tr);\r\n        var content = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\r\n        lastTd.appendChild(content);\r\n        var contentTable = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\r\n        content.appendChild(contentTable);\r\n        var eventWrapper = createElement('div', { className: cls.EVENT_TABLE_CLASS });\r\n        content.appendChild(eventWrapper);\r\n        var contentTBody = contentTable.querySelector('tbody');\r\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\r\n            if (this.parent.rowAutoHeight) {\r\n                addClass([contentTable], cls.AUTO_HEIGHT);\r\n            }\r\n            var colCount = this.parent.activeViewOptions.orientation === 'Horizontal' ? this.colLevels.slice(-1)[0].length : 12;\r\n            contentTable.appendChild(this.createTableColGroup(colCount));\r\n            this.renderResourceContent(eventWrapper, monthTBody, contentTBody);\r\n        }\r\n        else {\r\n            contentTable.appendChild(this.createTableColGroup(this.columnCount));\r\n            this.renderDefaultContent(eventWrapper, monthTBody, contentTBody);\r\n        }\r\n    };\r\n    TimelineYear.prototype.renderDefaultContent = function (wrapper, monthBody, contentBody) {\r\n        for (var month = 0; month < this.rowCount; month++) {\r\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\r\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\r\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\r\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\r\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\r\n            var monthTr = tr.cloneNode();\r\n            monthBody.appendChild(monthTr);\r\n            var contentTr = tr.cloneNode();\r\n            contentBody.appendChild(contentTr);\r\n            var monthTd = createElement('td', { className: cls.MONTH_HEADER_CLASS, attrs: { 'role': 'gridcell' } });\r\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                monthTd.setAttribute('data-date', monthDate.getTime().toString());\r\n                monthTd.innerHTML = \"<span>\" + this.getMonthName(monthDate) + \"</span>\";\r\n            }\r\n            else {\r\n                monthTd.innerHTML = \"<span>\" + this.parent.getDayNames('abbreviated')[month % 7] + \"</span>\";\r\n            }\r\n            monthTr.appendChild(monthTd);\r\n            this.parent.trigger(event.renderCell, { elementType: 'leftHeaderCells', element: monthTd });\r\n            var date = new Date(monthStart.getTime());\r\n            for (var column = 0; column < this.columnCount; column++) {\r\n                var isDateAvail = void 0;\r\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\r\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), column, 1);\r\n                    monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\r\n                    monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\r\n                    var dayDate = (month - monthStart.getDay()) + 1;\r\n                    date = new Date(this.parent.selectedDate.getFullYear(), column, dayDate);\r\n                    isDateAvail = dayDate > 0 && date.getTime() < monthEnd.getTime();\r\n                }\r\n                else {\r\n                    isDateAvail = column >= monthStart.getDay() && date.getTime() < monthEnd.getTime();\r\n                }\r\n                var td = createElement('td', {\r\n                    className: cls.WORK_CELLS_CLASS,\r\n                    attrs: { 'role': 'gridcell', 'aria-selected': 'false' }\r\n                });\r\n                contentTr.appendChild(td);\r\n                var dateHeader = createElement('div', {\r\n                    className: cls.DATE_HEADER_CLASS + ' ' + cls.NAVIGATE_CLASS,\r\n                    innerHTML: (isDateAvail) ? date.getDate().toString() : ''\r\n                });\r\n                var skeleton = 'full';\r\n                var annocementText = this.parent.globalize.formatDate(date, {\r\n                    skeleton: skeleton,\r\n                    calendar: this.parent.getCalendarMode()\r\n                });\r\n                dateHeader.setAttribute('aria-label', annocementText);\r\n                if (isDateAvail) {\r\n                    var tds = [td];\r\n                    var classList = [];\r\n                    if (this.parent.activeViewOptions.workDays.indexOf(date.getDay()) > -1) {\r\n                        classList.push(cls.WORKDAY_CLASS);\r\n                    }\r\n                    if (this.isCurrentDate(date)) {\r\n                        classList.push(cls.CURRENT_DAY_CLASS);\r\n                        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                            tds.push(this.element.querySelector('.' + cls.HEADER_CELLS_CLASS + (\":nth-child(\" + (column + 1) + \")\")));\r\n                        }\r\n                        else {\r\n                            tds.push(this.element.querySelectorAll('.' + cls.MONTH_HEADER_CLASS).item(month));\r\n                        }\r\n                    }\r\n                    if (classList.length > 0) {\r\n                        addClass(tds, classList);\r\n                    }\r\n                }\r\n                else {\r\n                    addClass([td], cls.OTHERMONTH_CLASS);\r\n                }\r\n                td.appendChild(dateHeader);\r\n                if (isDateAvail) {\r\n                    td.setAttribute('data-date', date.getTime().toString());\r\n                    this.wireEvents(td, 'cell');\r\n                }\r\n                this.renderCellTemplate({ date: date, type: 'workCells' }, td);\r\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\r\n                if (isDateAvail) {\r\n                    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                        date = util.addDays(new Date(date.getTime()), 1);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    };\r\n    TimelineYear.prototype.renderResourceContent = function (wrapper, monthBody, contentBody) {\r\n        for (var row = 0; row < this.rowCount; row++) {\r\n            wrapper.appendChild(createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS }));\r\n            var tr = createElement('tr', { attrs: { 'role': 'row' } });\r\n            contentBody.appendChild(tr);\r\n            var resData = void 0;\r\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\r\n                resData = this.parent.resourceBase.lastResourceLevel[row];\r\n            }\r\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), row, 1);\r\n            var date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\r\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                var monthTr = tr.cloneNode();\r\n                monthBody.appendChild(monthTr);\r\n                var monthTd = createElement('td', {\r\n                    className: cls.MONTH_HEADER_CLASS,\r\n                    innerHTML: \"<span>\" + this.getMonthName(monthDate) + \"</span>\",\r\n                    attrs: { 'role': 'gridcell', 'data-date': date.getTime().toString() }\r\n                });\r\n                monthTr.appendChild(monthTd);\r\n            }\r\n            for (var month = 0; month < this.columnCount; month++) {\r\n                var classList = [];\r\n                var groupIndex = row;\r\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\r\n                    classList = classList.concat(resData.className);\r\n                    if (classList.indexOf(cls.RESOURCE_PARENT_CLASS) > -1) {\r\n                        classList.push(cls.RESOURCE_GROUP_CELLS_CLASS);\r\n                    }\r\n                    else {\r\n                        classList.push(cls.WORKDAY_CLASS);\r\n                    }\r\n                    monthDate = new Date(this.parent.selectedDate.getFullYear(), month, 1);\r\n                    date = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\r\n                }\r\n                else {\r\n                    groupIndex = this.colLevels.slice(-1)[0][month].groupIndex;\r\n                    classList.push(cls.WORKDAY_CLASS);\r\n                }\r\n                var td = createElement('td', {\r\n                    className: cls.WORK_CELLS_CLASS,\r\n                    attrs: {\r\n                        'role': 'gridcell', 'aria-selected': 'false',\r\n                        'data-date': date.getTime().toString()\r\n                    }\r\n                });\r\n                addClass([td], classList);\r\n                td.setAttribute('data-group-index', groupIndex.toString());\r\n                this.renderCellTemplate({ date: date, type: 'workCells', groupIndex: groupIndex }, td);\r\n                this.wireEvents(td, 'cell');\r\n                tr.appendChild(td);\r\n                this.parent.trigger(event.renderCell, { elementType: 'workCells', element: td, date: date });\r\n            }\r\n        }\r\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\r\n            this.collapseRows(this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS));\r\n        }\r\n    };\r\n    TimelineYear.prototype.renderCellTemplate = function (data, td) {\r\n        if (!this.parent.activeViewOptions.cellTemplate) {\r\n            return;\r\n        }\r\n        var dateValue = util.addLocalOffset(data.date);\r\n        var args = { date: dateValue, type: data.type };\r\n        if (data.groupIndex) {\r\n            args.groupIndex = data.groupIndex;\r\n        }\r\n        var scheduleId = this.parent.element.id + '_';\r\n        var viewName = this.parent.activeViewOptions.cellTemplateName;\r\n        var templateId = scheduleId + viewName + 'cellTemplate';\r\n        var cellTemplate = [].slice.call(this.parent.getCellTemplate()(args, this.parent, 'cellTemplate', templateId, false));\r\n        append(cellTemplate, td);\r\n    };\r\n    TimelineYear.prototype.scrollToDate = function (scrollDate) {\r\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\r\n            var date = +new Date(util.resetTime(scrollDate));\r\n            var element = this.element.querySelector('[data-date=\"' + date + '\"]');\r\n            if (element) {\r\n                this.getScrollableElement().scrollLeft = element.offsetLeft;\r\n                this.getScrollableElement().scrollTop = element.offsetTop;\r\n            }\r\n        }\r\n    };\r\n    TimelineYear.prototype.getScrollableElement = function () {\r\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\r\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\r\n        }\r\n        else {\r\n            return this.getContentAreaElement();\r\n        }\r\n    };\r\n    return TimelineYear;\r\n}(Year));\r\nexport { TimelineYear };\r\n"]},"metadata":{},"sourceType":"module"}