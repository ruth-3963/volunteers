{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\nimport { TimelineEvent } from './timeline-view';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\nvar EVENT_GAP = 2;\n/**\r\n * Year view events render\r\n */\n\nvar YearEvent =\n/** @class */\nfunction (_super) {\n  __extends(YearEvent, _super);\n  /**\r\n   * Constructor for year events\r\n   */\n\n\n  function YearEvent(parent) {\n    var _this = _super.call(this, parent, 'day') || this;\n\n    _this.isResource = false;\n    return _this;\n  }\n\n  YearEvent.prototype.renderAppointments = function () {\n    this.fields = this.parent.eventFields;\n    var elementSelector = this.parent.currentView === 'Year' ? '.' + cls.APPOINTMENT_CLASS : '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\n    var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\n      var wrapper = eventWrappers_1[_i];\n      remove(wrapper);\n    }\n\n    this.renderedEvents = [];\n\n    if (this.parent.currentView === 'Year') {\n      this.yearViewEvents();\n    } else {\n      this.removeCellHeight();\n\n      if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n        this.isResource = true;\n        this.timelineResourceEvents();\n      } else {\n        this.timelineYearViewEvents();\n      }\n    }\n\n    this.parent.renderTemplates();\n    this.parent.notify(events.contentReady, {});\n  };\n\n  YearEvent.prototype.yearViewEvents = function () {\n    for (var month = 0; month < 12; month++) {\n      var queryString = \".e-month-calendar:nth-child(\" + (month + 1) + \") td.e-work-cells\";\n      var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\n      var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\n      var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\n      var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\n      var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\n\n      for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\n        var start = util.resetTime(new Date(startDate.getTime()));\n        var end = util.addDays(new Date(start.getTime()), 1);\n        var filterEvents = this.parent.eventBase.filterEvents(start, end);\n\n        if (filterEvents.length > 0) {\n          var workCell = workCells[index];\n\n          if (workCell) {\n            workCell.appendChild(createElement('div', {\n              className: cls.APPOINTMENT_CLASS\n            }));\n          }\n        }\n\n        startDate = util.addDays(new Date(startDate.getTime()), 1);\n      }\n    }\n  };\n\n  YearEvent.prototype.timelineYearViewEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n\n    for (var row = 0; row < 12; row++) {\n      var wrapper = wrapperCollection[row];\n      var td = row + 1;\n      var eventWrapper = createElement('div', {\n        className: cls.APPOINTMENT_WRAPPER_CLASS\n      });\n      wrapper.appendChild(eventWrapper);\n      var monthStart = new Date(this.parent.selectedDate.getFullYear(), row, 1);\n      var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\n      var dayIndex = monthStart.getDay();\n      var isSpannedCollection = [];\n\n      if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n        this.renderedEvents = [];\n      }\n\n      while (monthStart.getTime() <= monthEnd.getTime()) {\n        var leftValue = void 0;\n        var rightValue = void 0;\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          var wrapper_1 = wrapperCollection[dayIndex];\n          td = dayIndex + 1;\n          var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\n\n          if (!eventWrapper_1) {\n            eventWrapper_1 = createElement('div', {\n              className: cls.APPOINTMENT_WRAPPER_CLASS\n            });\n            wrapper_1.appendChild(eventWrapper_1);\n          }\n\n          this.parent.enableRtl ? rightValue = row * this.cellWidth : leftValue = row * this.cellWidth;\n        } else {\n          this.parent.enableRtl ? rightValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth : leftValue = (dayIndex + monthStart.getDate() - 1) * this.cellWidth;\n        }\n\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\n        this.cellHeight = rowTd.offsetHeight;\n        var dayStart = util.resetTime(new Date(monthStart.getTime()));\n        var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\n        var resource = void 0;\n\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n          resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        }\n\n        var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\n\n        var _loop_1 = function (index, count) {\n          var eventData = extend({}, dayEvents[index], null, true);\n          this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\n          var overlapIndex = this_1.getIndex(dayStart);\n          eventData.Index = overlapIndex;\n          var availedHeight = this_1.cellHeader + this_1.eventHeight * (index + 1) + EVENT_GAP + this_1.moreIndicatorHeight;\n\n          if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n            var isRendered = this_1.renderedEvents.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n            var isSpanned = isSpannedCollection.filter(function (eventObj) {\n              return eventObj.Guid === eventData.Guid;\n            });\n\n            if (isRendered.length > 0 || isSpanned.length > 0) {\n              return \"continue\";\n            }\n          }\n\n          var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\n\n          if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\n            this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, dayIndex);\n            this_1.updateCellHeight(rowTd, availedHeight);\n            isSpannedCollection.push(eventData);\n          } else {\n            var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\n            this_1.renderMoreIndicatior(eventWrapper, count - index, dayStart, moreIndex, leftValue, rightValue);\n\n            if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\n              for (var a = index; a < dayEvents.length; a++) {\n                var moreData = extend({}, dayEvents[a], {\n                  Index: overlapIndex + a\n                }, true);\n                this_1.renderedEvents.push(moreData);\n                isSpannedCollection.push(eventData);\n              }\n            }\n\n            return \"break\";\n          }\n        };\n\n        var this_1 = this;\n\n        for (var index = 0, count = dayEvents.length; index < count; index++) {\n          var state_1 = _loop_1(index, count);\n\n          if (state_1 === \"break\") break;\n        }\n\n        monthStart = util.addDays(new Date(monthStart.getTime()), 1);\n\n        if (this.parent.activeViewOptions.orientation === 'Vertical') {\n          dayIndex++;\n          this.renderedEvents = [];\n        }\n      }\n    }\n  };\n\n  YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\n    var isLeftRightResize = this.isResource && this.parent.activeViewOptions.orientation === 'Vertical' || !this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal';\n    var data = {\n      isLeft: true,\n      isRight: true,\n      isBottom: true,\n      isTop: true\n    };\n\n    if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\n      if (isLeftRightResize) {\n        data.isLeft = false;\n      } else {\n        data.isTop = false;\n      }\n    }\n\n    if (dayEnd.getTime() >= eventObj[this.fields.endTime].getTime() || isLeftRightResize && !this.isResource && util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth()) {\n      if (isLeftRightResize) {\n        data.isRight = false;\n      } else {\n        data.isBottom = false;\n      }\n    }\n\n    eventObj.data = data;\n  };\n\n  YearEvent.prototype.timelineResourceEvents = function () {\n    var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n    this.cellWidth = workCell.offsetWidth;\n    this.cellHeader = 0;\n    var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\n    this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\n    var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\n    var resources = this.parent.uiStateValues.isGroupAdaptive ? [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      for (var month = 0; month < 12; month++) {\n        for (var i = 0, len = resources.length; i < len; i++) {\n          this.renderedEvents = [];\n          this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n        }\n      }\n    } else {\n      for (var i = 0, len = resources.length; i < len; i++) {\n        this.renderedEvents = [];\n\n        for (var month = 0; month < 12; month++) {\n          this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\n        }\n      }\n    }\n  };\n\n  YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index) {\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_WRAPPER_CLASS\n    });\n    wrapper.appendChild(eventWrapper);\n    var monthStart = util.firstDateOfMonth(new Date(this.parent.selectedDate.getFullYear(), month, 1));\n    var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\n    var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\n    var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\n    var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\n    this.cellHeight = td.offsetHeight;\n\n    for (var a = 0; a < eventDatas.length; a++) {\n      var data = eventDatas[a];\n      var overlapIndex = void 0;\n      var eventData = extend({}, data, null, true);\n\n      if (this.parent.activeViewOptions.group.resources.length > 0) {\n        var eventObj = this.isSpannedEvent(eventData, month);\n        overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      } else {\n        overlapIndex = this.getIndex(eventData[this.fields.startTime]);\n        eventData.Index = overlapIndex;\n      }\n\n      var availedHeight = this.cellHeader + this.eventHeight * (a + 1) + EVENT_GAP + this.moreIndicatorHeight;\n      var leftValue = this.parent.activeViewOptions.orientation === 'Vertical' ? month * this.cellWidth : index * this.cellWidth;\n\n      if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\n        this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, index);\n        this.updateCellHeight(td, availedHeight);\n      } else {\n        var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\n        this.renderMoreIndicatior(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\n\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n          for (var i = index; i < eventDatas.length; i++) {\n            var moreData = extend({}, eventDatas[i], {\n              Index: overlapIndex + i\n            }, true);\n            this.renderedEvents.push(moreData);\n          }\n        }\n\n        break;\n      }\n    }\n  };\n\n  YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, rowIndex) {\n    var _this = this;\n\n    var eventObj = this.isSpannedEvent(eventData, row);\n    var wrap = this.createEventElement(eventObj);\n    var width;\n    var index;\n\n    if (eventObj.isSpanned.count === 1) {\n      var endTime = util.addDays(eventObj[this.fields.endTime], -1);\n      eventObj[this.fields.endTime] = endTime > eventObj[this.fields.startTime] ? endTime : eventObj[this.fields.endTime];\n    }\n\n    if (this.parent.activeViewOptions.orientation === 'Horizontal') {\n      index = row + 1;\n\n      if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\n        eventObj.isSpanned.count = 1;\n      }\n\n      width = eventObj.isSpanned.count * this.cellWidth;\n    } else {\n      index = rowIndex + 1;\n      width = this.cellWidth;\n    }\n\n    var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\n    var top = rowTd.offsetTop + this.cellHeader + this.eventHeight * eventObj.Index + EVENT_GAP;\n    setStyleAttribute(wrap, {\n      'width': width + 'px',\n      'height': this.eventHeight + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n    var args = {\n      data: eventObj,\n      element: wrap,\n      cancel: false,\n      type: 'event'\n    };\n    this.parent.trigger(events.eventRendered, args, function (eventArgs) {\n      if (!eventArgs.cancel) {\n        wrapper.appendChild(wrap);\n\n        _this.wireAppointmentEvents(wrap, eventObj);\n\n        if (_this.parent.activeViewOptions.group.resources.length > 0) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if (!eventObj.isSpanned.isRight) {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        } else if ((eventObj.isSpanned.isRight || eventObj.isSpanned.isLeft) && _this.parent.activeViewOptions.orientation === 'Horizontal') {\n          _this.renderedEvents.push(extend({}, eventObj, null, true));\n        }\n      }\n    });\n  };\n\n  YearEvent.prototype.renderMoreIndicatior = function (wrapper, count, startDate, row, left, right, index) {\n    var endDate;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\n    } else {\n      endDate = util.addDays(new Date(startDate.getTime()), 1);\n    }\n\n    var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\n    var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\n    var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\n    left = Math.floor(left / this.cellWidth) * this.cellWidth;\n    right = Math.floor(right / this.cellWidth) * this.cellWidth;\n    setStyleAttribute(moreIndicator, {\n      'width': this.cellWidth + 'px',\n      'left': left + 'px',\n      'right': right + 'px',\n      'top': top + 'px'\n    });\n\n    if (!isNullOrUndefined(index)) {\n      moreIndicator.setAttribute('data-group-index', index.toString());\n    }\n\n    wrapper.appendChild(moreIndicator);\n    EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\n  };\n\n  YearEvent.prototype.createEventElement = function (record) {\n    var eventSubject = record[this.fields.subject] || this.parent.eventSettings.fields.subject.default;\n    var eventWrapper = createElement('div', {\n      className: cls.APPOINTMENT_CLASS,\n      attrs: {\n        'data-id': 'Appointment_' + record[this.fields.id],\n        'data-guid': record.Guid,\n        'role': 'button',\n        'tabindex': '0',\n        'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record),\n        'aria-selected': 'false',\n        'aria-grabbed': 'true',\n        'aria-label': this.parent.getAnnocementString(record)\n      }\n    });\n\n    if (this.cssClass) {\n      addClass([eventWrapper], this.cssClass);\n    }\n\n    if (record[this.fields.isReadonly]) {\n      addClass([eventWrapper], cls.READ_ONLY);\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resIndex = this.getGroupIndexFromEvent(record);\n      eventWrapper.setAttribute('data-group-index', resIndex.toString());\n    }\n\n    var templateElement = [];\n    var eventObj = extend({}, record, null, true);\n\n    if (this.parent.activeViewOptions.eventTemplate) {\n      var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\n      var templateArgs = util.addLocalOffsetToEvent(eventObj, this.parent.eventFields);\n      templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\n    } else {\n      var locationEle = record[this.fields.location] || this.parent.eventSettings.fields.location.default || '';\n      var subjectEle = createElement('div', {\n        className: cls.SUBJECT_CLASS,\n        innerHTML: eventSubject + (locationEle ? ';&nbsp' + locationEle : '')\n      });\n      var startTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\n      });\n      var endTimeEle = createElement('div', {\n        className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\n        innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\n      });\n      addClass([subjectEle], 'e-text-center');\n\n      if (record[this.fields.isAllDay]) {\n        templateElement = [subjectEle];\n      } else if (!eventObj.isLeft && !eventObj.isRight) {\n        templateElement = [startTimeEle, subjectEle, endTimeEle];\n      } else {\n        if (!eventObj.isLeft) {\n          templateElement.push(startTimeEle);\n        }\n\n        templateElement.push(subjectEle);\n\n        if (!eventObj.isRight) {\n          templateElement.push(endTimeEle);\n        }\n      }\n    }\n\n    var appointmentDetails = createElement('div', {\n      className: cls.APPOINTMENT_DETAILS\n    });\n    append(templateElement, appointmentDetails);\n    eventWrapper.appendChild(appointmentDetails);\n    this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\n    this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\n    return eventWrapper;\n  };\n\n  YearEvent.prototype.isSpannedEvent = function (eventObj, month) {\n    var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\n    var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\n    var eventData = extend({}, eventObj, null, true);\n    var eventStart = eventData[this.fields.startTime];\n    var eventEnd = eventData[this.fields.endTime];\n    var isSpanned = {\n      isLeft: false,\n      isRight: false,\n      count: 1\n    };\n\n    if (this.isResource) {\n      this.updateSpannedEvents(eventObj, monthStart, monthEnd);\n    }\n\n    if (eventStart.getTime() < monthStart.getTime()) {\n      eventData[this.fields.startTime] = monthStart;\n      isSpanned.isLeft = true;\n    }\n\n    if (eventEnd.getTime() > monthEnd.getTime()) {\n      eventData[this.fields.endTime] = monthEnd;\n      isSpanned.isRight = true;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length === 0) {\n      isSpanned.count = Math.ceil((eventData[this.fields.endTime].getTime() - eventData[this.fields.startTime].getTime()) / util.MS_PER_DAY);\n    }\n\n    eventData.isSpanned = isSpanned;\n    return eventData;\n  };\n\n  YearEvent.prototype.getOverlapEvents = function (date, appointments) {\n    var appointmentsList = [];\n    var dateStart;\n    var dateEnd;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\n      var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\n      dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\n      dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\n    } else {\n      if (this.parent.rowAutoHeight) {\n        dateStart = util.resetTime(new Date(date.getTime())).getTime();\n        dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\n      } else {\n        dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\n      }\n    }\n\n    for (var _i = 0, _a = appointments; _i < _a.length; _i++) {\n      var app = _a[_i];\n      var appStart = new Date(app[this.fields.startTime].getTime());\n      var appEnd = new Date(app[this.fields.endTime].getTime());\n\n      if (this.parent.activeViewOptions.orientation === 'Vertical' && this.parent.activeViewOptions.group.resources.length > 0) {\n        if (util.resetTime(appStart).getTime() >= dateStart && util.resetTime(appEnd).getTime() <= dateEnd) {\n          appointmentsList.push(app);\n        }\n      } else {\n        if (this.parent.rowAutoHeight && util.resetTime(appStart).getTime() <= dateStart && util.resetTime(appEnd).getTime() >= dateEnd) {\n          appointmentsList.push(app);\n        }\n\n        if (!this.parent.rowAutoHeight && util.resetTime(appStart).getTime() <= dateStart && util.resetTime(appEnd).getTime() >= dateEnd) {\n          appointmentsList.push(app);\n        }\n      }\n    }\n\n    return appointmentsList;\n  };\n\n  YearEvent.prototype.removeCellHeight = function () {\n    var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\n    var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\n\n    for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\n      var row = rows_1[_i];\n      row.firstElementChild.style.height = '';\n    }\n  };\n\n  return YearEvent;\n}(TimelineEvent);\n\nexport { YearEvent };","map":{"version":3,"sources":["C:/Users/User/volunteers/node_modules/@syncfusion/ej2-schedule/src/schedule/event-renderer/year.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","append","createElement","extend","remove","isNullOrUndefined","setStyleAttribute","EventHandler","TimelineEvent","util","events","cls","EVENT_GAP","YearEvent","_super","parent","_this","call","isResource","renderAppointments","fields","eventFields","elementSelector","currentView","APPOINTMENT_CLASS","APPOINTMENT_WRAPPER_CLASS","MORE_INDICATOR_CLASS","eventWrappers","slice","element","querySelectorAll","_i","eventWrappers_1","length","wrapper","renderedEvents","yearViewEvents","removeCellHeight","activeViewOptions","group","resources","uiStateValues","isGroupAdaptive","timelineResourceEvents","timelineYearViewEvents","renderTemplates","notify","contentReady","month","queryString","workCells","monthDate","Date","selectedDate","getFullYear","getDate","monthStart","calendarUtil","getMonthStartDate","getTime","monthEnd","getMonthEndDate","startDate","getWeekFirstDate","firstDayOfWeek","endDate","addDays","getWeekLastDate","index","start","resetTime","end","filterEvents","eventBase","workCell","appendChild","className","querySelector","WORK_CELLS_CLASS","cellWidth","offsetWidth","cellHeader","getOuterHeight","DATE_HEADER_CLASS","eventTable","EVENT_TABLE_CLASS","eventHeight","getElementHeightFromClass","wrapperCollection","APPOINTMENT_CONTAINER_CLASS","row","td","eventWrapper","getMonth","dayIndex","getDay","isSpannedCollection","orientation","leftValue","rightValue","wrapper_1","eventWrapper_1","enableRtl","rowTd","cellHeight","offsetHeight","dayStart","dayEnd","resource","resourceBase","lastResourceLevel","groupIndex","dayEvents","undefined","_loop_1","count","eventData","this_1","updateSpannedEvents","overlapIndex","getIndex","Index","availedHeight","moreIndicatorHeight","isRendered","filter","eventObj","Guid","isSpanned","isRowAutoHeight","rowAutoHeight","renderEvent","updateCellHeight","push","moreIndex","renderMoreIndicatior","a","moreData","state_1","isLeftRightResize","data","isLeft","isRight","isBottom","isTop","startTime","endTime","i","len","renderResourceEvent","firstDateOfMonth","lastDateOfMonth","eventDatas","rowIndex","isSpannedEvent","left","right","wrap","createEventElement","width","top","offsetTop","args","cancel","type","trigger","eventRendered","eventArgs","wireAppointmentEvents","moreIndicator","getMoreIndicatorElement","rowTr","Math","floor","setAttribute","toString","add","moreIndicatorClick","record","eventSubject","subject","eventSettings","default","attrs","id","getReadonlyAttribute","getAnnocementString","cssClass","isReadonly","READ_ONLY","resIndex","getGroupIndexFromEvent","templateElement","eventTemplate","templateId","eventTemplateName","templateArgs","addLocalOffsetToEvent","getAppointmentTemplate","locationEle","location","subjectEle","SUBJECT_CLASS","innerHTML","startTimeEle","APPOINTMENT_TIME","isAdaptive","DISABLE_CLASS","getTimeString","endTimeEle","isAllDay","appointmentDetails","APPOINTMENT_DETAILS","renderResizeHandler","applyResourceColor","groupOrder","eventStart","eventEnd","ceil","MS_PER_DAY","getOverlapEvents","date","appointments","appointmentsList","dateStart","dateEnd","_a","app","appStart","appEnd","MONTH_HEADER_WRAPPER","RESOURCE_COLUMN_TABLE_CLASS","CONTENT_TABLE_CLASS","rows","rows_1","firstElementChild","style","height"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = function (d, b) {\r\n        extendStatics = Object.setPrototypeOf ||\r\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n        return extendStatics(d, b);\r\n    }\r\n    return function (d, b) {\r\n        extendStatics(d, b);\r\n        function __() { this.constructor = d; }\r\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\nimport { addClass, append, createElement, extend, remove, isNullOrUndefined } from '@syncfusion/ej2-base';\r\nimport { setStyleAttribute, EventHandler } from '@syncfusion/ej2-base';\r\nimport { TimelineEvent } from './timeline-view';\r\nimport * as util from '../base/util';\r\nimport * as events from '../base/constant';\r\nimport * as cls from '../base/css-constant';\r\nvar EVENT_GAP = 2;\r\n/**\r\n * Year view events render\r\n */\r\nvar YearEvent = /** @class */ (function (_super) {\r\n    __extends(YearEvent, _super);\r\n    /**\r\n     * Constructor for year events\r\n     */\r\n    function YearEvent(parent) {\r\n        var _this = _super.call(this, parent, 'day') || this;\r\n        _this.isResource = false;\r\n        return _this;\r\n    }\r\n    YearEvent.prototype.renderAppointments = function () {\r\n        this.fields = this.parent.eventFields;\r\n        var elementSelector = (this.parent.currentView === 'Year') ? '.' + cls.APPOINTMENT_CLASS :\r\n            '.' + cls.APPOINTMENT_WRAPPER_CLASS + ',.' + cls.MORE_INDICATOR_CLASS;\r\n        var eventWrappers = [].slice.call(this.parent.element.querySelectorAll(elementSelector));\r\n        for (var _i = 0, eventWrappers_1 = eventWrappers; _i < eventWrappers_1.length; _i++) {\r\n            var wrapper = eventWrappers_1[_i];\r\n            remove(wrapper);\r\n        }\r\n        this.renderedEvents = [];\r\n        if (this.parent.currentView === 'Year') {\r\n            this.yearViewEvents();\r\n        }\r\n        else {\r\n            this.removeCellHeight();\r\n            if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\r\n                this.isResource = true;\r\n                this.timelineResourceEvents();\r\n            }\r\n            else {\r\n                this.timelineYearViewEvents();\r\n            }\r\n        }\r\n        this.parent.renderTemplates();\r\n        this.parent.notify(events.contentReady, {});\r\n    };\r\n    YearEvent.prototype.yearViewEvents = function () {\r\n        for (var month = 0; month < 12; month++) {\r\n            var queryString = \".e-month-calendar:nth-child(\" + (month + 1) + \") td.e-work-cells\";\r\n            var workCells = [].slice.call(this.parent.element.querySelectorAll(queryString));\r\n            var monthDate = new Date(this.parent.selectedDate.getFullYear(), month, this.parent.selectedDate.getDate());\r\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(monthDate.getTime()));\r\n            var monthEnd = this.parent.calendarUtil.getMonthEndDate(new Date(monthDate.getTime()));\r\n            var startDate = util.getWeekFirstDate(monthStart, this.parent.firstDayOfWeek);\r\n            var endDate = util.addDays(util.getWeekLastDate(monthEnd, this.parent.firstDayOfWeek), 1);\r\n            for (var index = 0; startDate.getTime() < endDate.getTime(); index++) {\r\n                var start = util.resetTime(new Date(startDate.getTime()));\r\n                var end = util.addDays(new Date(start.getTime()), 1);\r\n                var filterEvents = this.parent.eventBase.filterEvents(start, end);\r\n                if (filterEvents.length > 0) {\r\n                    var workCell = workCells[index];\r\n                    if (workCell) {\r\n                        workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_CLASS }));\r\n                    }\r\n                }\r\n                startDate = util.addDays(new Date(startDate.getTime()), 1);\r\n            }\r\n        }\r\n    };\r\n    YearEvent.prototype.timelineYearViewEvents = function () {\r\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\r\n        this.cellWidth = workCell.offsetWidth;\r\n        this.cellHeader = util.getOuterHeight(workCell.querySelector('.' + cls.DATE_HEADER_CLASS));\r\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\r\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\r\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\r\n        for (var row = 0; row < 12; row++) {\r\n            var wrapper = wrapperCollection[row];\r\n            var td = row + 1;\r\n            var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\r\n            wrapper.appendChild(eventWrapper);\r\n            var monthStart = new Date(this.parent.selectedDate.getFullYear(), row, 1);\r\n            var monthEnd = new Date(monthStart.getFullYear(), monthStart.getMonth() + 1, 0);\r\n            var dayIndex = monthStart.getDay();\r\n            var isSpannedCollection = [];\r\n            if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                this.renderedEvents = [];\r\n            }\r\n            while (monthStart.getTime() <= monthEnd.getTime()) {\r\n                var leftValue = void 0;\r\n                var rightValue = void 0;\r\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\r\n                    var wrapper_1 = wrapperCollection[dayIndex];\r\n                    td = dayIndex + 1;\r\n                    var eventWrapper_1 = wrapper_1.querySelector('.' + cls.APPOINTMENT_WRAPPER_CLASS);\r\n                    if (!eventWrapper_1) {\r\n                        eventWrapper_1 = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\r\n                        wrapper_1.appendChild(eventWrapper_1);\r\n                    }\r\n                    this.parent.enableRtl ? (rightValue = row * this.cellWidth) : (leftValue = row * this.cellWidth);\r\n                }\r\n                else {\r\n                    this.parent.enableRtl ? (rightValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth) :\r\n                        (leftValue = ((dayIndex + monthStart.getDate()) - 1) * this.cellWidth);\r\n                }\r\n                var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + td + \") td\");\r\n                this.cellHeight = rowTd.offsetHeight;\r\n                var dayStart = util.resetTime(new Date(monthStart.getTime()));\r\n                var dayEnd = util.addDays(new Date(dayStart.getTime()), 1);\r\n                var resource = void 0;\r\n                if (this.parent.uiStateValues.isGroupAdaptive) {\r\n                    resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\r\n                }\r\n                var dayEvents = this.parent.eventBase.filterEvents(dayStart, dayEnd, undefined, resource);\r\n                var _loop_1 = function (index, count) {\r\n                    var eventData = extend({}, dayEvents[index], null, true);\r\n                    this_1.updateSpannedEvents(eventData, dayStart, dayEnd);\r\n                    var overlapIndex = this_1.getIndex(dayStart);\r\n                    eventData.Index = overlapIndex;\r\n                    var availedHeight = this_1.cellHeader + (this_1.eventHeight * (index + 1)) + EVENT_GAP + this_1.moreIndicatorHeight;\r\n                    if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                        var isRendered = this_1.renderedEvents.filter(function (eventObj) {\r\n                            return eventObj.Guid === eventData.Guid;\r\n                        });\r\n                        var isSpanned = isSpannedCollection.filter(function (eventObj) {\r\n                            return eventObj.Guid === eventData.Guid;\r\n                        });\r\n                        if (isRendered.length > 0 || isSpanned.length > 0) {\r\n                            return \"continue\";\r\n                        }\r\n                    }\r\n                    var isRowAutoHeight = this_1.parent.rowAutoHeight && this_1.parent.activeViewOptions.orientation === 'Horizontal';\r\n                    if (isRowAutoHeight || this_1.cellHeight > availedHeight) {\r\n                        this_1.renderEvent(eventWrapper, eventData, row, leftValue, rightValue, dayIndex);\r\n                        this_1.updateCellHeight(rowTd, availedHeight);\r\n                        isSpannedCollection.push(eventData);\r\n                    }\r\n                    else {\r\n                        var moreIndex = this_1.parent.activeViewOptions.orientation === 'Horizontal' ? row : dayIndex;\r\n                        this_1.renderMoreIndicatior(eventWrapper, count - index, dayStart, moreIndex, leftValue, rightValue);\r\n                        if (this_1.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                            for (var a = index; a < dayEvents.length; a++) {\r\n                                var moreData = extend({}, dayEvents[a], { Index: overlapIndex + a }, true);\r\n                                this_1.renderedEvents.push(moreData);\r\n                                isSpannedCollection.push(eventData);\r\n                            }\r\n                        }\r\n                        return \"break\";\r\n                    }\r\n                };\r\n                var this_1 = this;\r\n                for (var index = 0, count = dayEvents.length; index < count; index++) {\r\n                    var state_1 = _loop_1(index, count);\r\n                    if (state_1 === \"break\")\r\n                        break;\r\n                }\r\n                monthStart = util.addDays(new Date(monthStart.getTime()), 1);\r\n                if (this.parent.activeViewOptions.orientation === 'Vertical') {\r\n                    dayIndex++;\r\n                    this.renderedEvents = [];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    YearEvent.prototype.updateSpannedEvents = function (eventObj, dayStart, dayEnd) {\r\n        var isLeftRightResize = (this.isResource && this.parent.activeViewOptions.orientation === 'Vertical') ||\r\n            (!this.isResource && this.parent.activeViewOptions.orientation === 'Horizontal');\r\n        var data = { isLeft: true, isRight: true, isBottom: true, isTop: true };\r\n        if (dayStart.getTime() <= eventObj[this.fields.startTime].getTime()) {\r\n            if (isLeftRightResize) {\r\n                data.isLeft = false;\r\n            }\r\n            else {\r\n                data.isTop = false;\r\n            }\r\n        }\r\n        if ((dayEnd.getTime() >= eventObj[this.fields.endTime].getTime()) || (isLeftRightResize && !this.isResource &&\r\n            util.addDays(dayEnd, -1).getMonth() === eventObj[this.fields.endTime].getMonth())) {\r\n            if (isLeftRightResize) {\r\n                data.isRight = false;\r\n            }\r\n            else {\r\n                data.isBottom = false;\r\n            }\r\n        }\r\n        eventObj.data = data;\r\n    };\r\n    YearEvent.prototype.timelineResourceEvents = function () {\r\n        var workCell = this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\r\n        this.cellWidth = workCell.offsetWidth;\r\n        this.cellHeader = 0;\r\n        var eventTable = this.parent.element.querySelector('.' + cls.EVENT_TABLE_CLASS);\r\n        this.eventHeight = util.getElementHeightFromClass(eventTable, cls.APPOINTMENT_CLASS);\r\n        var wrapperCollection = [].slice.call(this.parent.element.querySelectorAll('.' + cls.APPOINTMENT_CONTAINER_CLASS));\r\n        var resources = this.parent.uiStateValues.isGroupAdaptive ?\r\n            [this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex]] : this.parent.resourceBase.lastResourceLevel;\r\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n            for (var month = 0; month < 12; month++) {\r\n                for (var i = 0, len = resources.length; i < len; i++) {\r\n                    this.renderedEvents = [];\r\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (var i = 0, len = resources.length; i < len; i++) {\r\n                this.renderedEvents = [];\r\n                for (var month = 0; month < 12; month++) {\r\n                    this.renderResourceEvent(wrapperCollection[i], resources[i], month, i);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    YearEvent.prototype.renderResourceEvent = function (wrapper, resource, month, index) {\r\n        var eventWrapper = createElement('div', { className: cls.APPOINTMENT_WRAPPER_CLASS });\r\n        wrapper.appendChild(eventWrapper);\r\n        var monthStart = util.firstDateOfMonth(new Date(this.parent.selectedDate.getFullYear(), month, 1));\r\n        var monthEnd = util.addDays(util.lastDateOfMonth(new Date(monthStart.getTime())), 1);\r\n        var eventDatas = this.parent.eventBase.filterEvents(monthStart, monthEnd, undefined, resource);\r\n        var rowIndex = this.parent.activeViewOptions.orientation === 'Vertical' ? index : month;\r\n        var td = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (rowIndex + 1) + \") td\");\r\n        this.cellHeight = td.offsetHeight;\r\n        for (var a = 0; a < eventDatas.length; a++) {\r\n            var data = eventDatas[a];\r\n            var overlapIndex = void 0;\r\n            var eventData = extend({}, data, null, true);\r\n            if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n                var eventObj = this.isSpannedEvent(eventData, month);\r\n                overlapIndex = this.getIndex(eventObj[this.fields.startTime]);\r\n                eventData.Index = overlapIndex;\r\n            }\r\n            else {\r\n                overlapIndex = this.getIndex(eventData[this.fields.startTime]);\r\n                eventData.Index = overlapIndex;\r\n            }\r\n            var availedHeight = this.cellHeader + (this.eventHeight * (a + 1)) + EVENT_GAP + this.moreIndicatorHeight;\r\n            var leftValue = (this.parent.activeViewOptions.orientation === 'Vertical') ?\r\n                month * this.cellWidth : index * this.cellWidth;\r\n            if (this.parent.rowAutoHeight || this.cellHeight > availedHeight) {\r\n                this.renderEvent(eventWrapper, eventData, month, leftValue, leftValue, index);\r\n                this.updateCellHeight(td, availedHeight);\r\n            }\r\n            else {\r\n                var moreIndex = this.parent.activeViewOptions.orientation === 'Horizontal' ? month : index;\r\n                this.renderMoreIndicatior(eventWrapper, eventDatas.length - a, monthStart, moreIndex, leftValue, leftValue, index);\r\n                if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                    for (var i = index; i < eventDatas.length; i++) {\r\n                        var moreData = extend({}, eventDatas[i], { Index: overlapIndex + i }, true);\r\n                        this.renderedEvents.push(moreData);\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n    };\r\n    YearEvent.prototype.renderEvent = function (wrapper, eventData, row, left, right, rowIndex) {\r\n        var _this = this;\r\n        var eventObj = this.isSpannedEvent(eventData, row);\r\n        var wrap = this.createEventElement(eventObj);\r\n        var width;\r\n        var index;\r\n        if (eventObj.isSpanned.count === 1) {\r\n            var endTime = util.addDays(eventObj[this.fields.endTime], -1);\r\n            eventObj[this.fields.endTime] = (endTime > eventObj[this.fields.startTime]) ? endTime : eventObj[this.fields.endTime];\r\n        }\r\n        if (this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n            index = row + 1;\r\n            if (eventObj[this.fields.startTime].getTime() === eventObj[this.fields.endTime].getTime()) {\r\n                eventObj.isSpanned.count = 1;\r\n            }\r\n            width = eventObj.isSpanned.count * this.cellWidth;\r\n        }\r\n        else {\r\n            index = rowIndex + 1;\r\n            width = this.cellWidth;\r\n        }\r\n        var rowTd = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + index + \") td\");\r\n        var top = rowTd.offsetTop + this.cellHeader + (this.eventHeight * eventObj.Index) + EVENT_GAP;\r\n        setStyleAttribute(wrap, {\r\n            'width': width + 'px', 'height': this.eventHeight + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px'\r\n        });\r\n        var args = { data: eventObj, element: wrap, cancel: false, type: 'event' };\r\n        this.parent.trigger(events.eventRendered, args, function (eventArgs) {\r\n            if (!eventArgs.cancel) {\r\n                wrapper.appendChild(wrap);\r\n                _this.wireAppointmentEvents(wrap, eventObj);\r\n                if (_this.parent.activeViewOptions.group.resources.length > 0) {\r\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\r\n                }\r\n                else if (!eventObj.isSpanned.isRight) {\r\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\r\n                }\r\n                else if ((eventObj.isSpanned.isRight\r\n                    || eventObj.isSpanned.isLeft)\r\n                    && _this.parent.activeViewOptions.orientation === 'Horizontal') {\r\n                    _this.renderedEvents.push(extend({}, eventObj, null, true));\r\n                }\r\n            }\r\n        });\r\n    };\r\n    YearEvent.prototype.renderMoreIndicatior = function (wrapper, count, startDate, row, left, right, index) {\r\n        var endDate;\r\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n            endDate = util.addDays(util.lastDateOfMonth(new Date(startDate.getTime())), 1);\r\n        }\r\n        else {\r\n            endDate = util.addDays(new Date(startDate.getTime()), 1);\r\n        }\r\n        var moreIndicator = this.getMoreIndicatorElement(count, startDate, endDate);\r\n        var rowTr = this.parent.element.querySelector(\".e-content-wrap tr:nth-child(\" + (row + 1) + \")\");\r\n        var top = rowTr.offsetTop + (this.cellHeight - this.moreIndicatorHeight);\r\n        left = (Math.floor(left / this.cellWidth) * this.cellWidth);\r\n        right = (Math.floor(right / this.cellWidth) * this.cellWidth);\r\n        setStyleAttribute(moreIndicator, { 'width': this.cellWidth + 'px', 'left': left + 'px', 'right': right + 'px', 'top': top + 'px' });\r\n        if (!isNullOrUndefined(index)) {\r\n            moreIndicator.setAttribute('data-group-index', index.toString());\r\n        }\r\n        wrapper.appendChild(moreIndicator);\r\n        EventHandler.add(moreIndicator, 'click', this.moreIndicatorClick, this);\r\n    };\r\n    YearEvent.prototype.createEventElement = function (record) {\r\n        var eventSubject = (record[this.fields.subject] || this.parent.eventSettings.fields.subject.default);\r\n        var eventWrapper = createElement('div', {\r\n            className: cls.APPOINTMENT_CLASS,\r\n            attrs: {\r\n                'data-id': 'Appointment_' + record[this.fields.id],\r\n                'data-guid': record.Guid,\r\n                'role': 'button', 'tabindex': '0',\r\n                'aria-readonly': this.parent.eventBase.getReadonlyAttribute(record), 'aria-selected': 'false', 'aria-grabbed': 'true',\r\n                'aria-label': this.parent.getAnnocementString(record)\r\n            }\r\n        });\r\n        if (this.cssClass) {\r\n            addClass([eventWrapper], this.cssClass);\r\n        }\r\n        if (record[this.fields.isReadonly]) {\r\n            addClass([eventWrapper], cls.READ_ONLY);\r\n        }\r\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n            var resIndex = this.getGroupIndexFromEvent(record);\r\n            eventWrapper.setAttribute('data-group-index', resIndex.toString());\r\n        }\r\n        var templateElement = [];\r\n        var eventObj = extend({}, record, null, true);\r\n        if (this.parent.activeViewOptions.eventTemplate) {\r\n            var templateId = this.parent.element.id + '_' + this.parent.activeViewOptions.eventTemplateName + 'eventTemplate';\r\n            var templateArgs = util.addLocalOffsetToEvent(eventObj, this.parent.eventFields);\r\n            templateElement = this.parent.getAppointmentTemplate()(templateArgs, this.parent, 'eventTemplate', templateId, false);\r\n        }\r\n        else {\r\n            var locationEle = (record[this.fields.location] || this.parent.eventSettings.fields.location.default || '');\r\n            var subjectEle = createElement('div', {\r\n                className: cls.SUBJECT_CLASS,\r\n                innerHTML: (eventSubject + (locationEle ? ';&nbsp' + locationEle : ''))\r\n            });\r\n            var startTimeEle = createElement('div', {\r\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\r\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.startTime])\r\n            });\r\n            var endTimeEle = createElement('div', {\r\n                className: cls.APPOINTMENT_TIME + (this.parent.isAdaptive ? ' ' + cls.DISABLE_CLASS : ''),\r\n                innerHTML: this.parent.getTimeString(eventObj[this.fields.endTime])\r\n            });\r\n            addClass([subjectEle], 'e-text-center');\r\n            if (record[this.fields.isAllDay]) {\r\n                templateElement = [subjectEle];\r\n            }\r\n            else if (!eventObj.isLeft && !eventObj.isRight) {\r\n                templateElement = [startTimeEle, subjectEle, endTimeEle];\r\n            }\r\n            else {\r\n                if (!eventObj.isLeft) {\r\n                    templateElement.push(startTimeEle);\r\n                }\r\n                templateElement.push(subjectEle);\r\n                if (!eventObj.isRight) {\r\n                    templateElement.push(endTimeEle);\r\n                }\r\n            }\r\n        }\r\n        var appointmentDetails = createElement('div', { className: cls.APPOINTMENT_DETAILS });\r\n        append(templateElement, appointmentDetails);\r\n        eventWrapper.appendChild(appointmentDetails);\r\n        this.renderResizeHandler(eventWrapper, record.data, record[this.fields.isReadonly]);\r\n        this.applyResourceColor(eventWrapper, eventObj, 'backgroundColor', this.groupOrder);\r\n        return eventWrapper;\r\n    };\r\n    YearEvent.prototype.isSpannedEvent = function (eventObj, month) {\r\n        var monthStart = new Date(this.parent.selectedDate.getFullYear(), month, 1);\r\n        var monthEnd = util.addDays(new Date(this.parent.selectedDate.getFullYear(), month + 1, 0), 1);\r\n        var eventData = extend({}, eventObj, null, true);\r\n        var eventStart = eventData[this.fields.startTime];\r\n        var eventEnd = eventData[this.fields.endTime];\r\n        var isSpanned = { isLeft: false, isRight: false, count: 1 };\r\n        if (this.isResource) {\r\n            this.updateSpannedEvents(eventObj, monthStart, monthEnd);\r\n        }\r\n        if (eventStart.getTime() < monthStart.getTime()) {\r\n            eventData[this.fields.startTime] = monthStart;\r\n            isSpanned.isLeft = true;\r\n        }\r\n        if (eventEnd.getTime() > monthEnd.getTime()) {\r\n            eventData[this.fields.endTime] = monthEnd;\r\n            isSpanned.isRight = true;\r\n        }\r\n        if (this.parent.activeViewOptions.group.resources.length === 0) {\r\n            isSpanned.count = Math.ceil((eventData[this.fields.endTime].getTime() -\r\n                eventData[this.fields.startTime].getTime()) / util.MS_PER_DAY);\r\n        }\r\n        eventData.isSpanned = isSpanned;\r\n        return eventData;\r\n    };\r\n    YearEvent.prototype.getOverlapEvents = function (date, appointments) {\r\n        var appointmentsList = [];\r\n        var dateStart;\r\n        var dateEnd;\r\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\r\n            var monthStart = this.parent.calendarUtil.getMonthStartDate(new Date(date.getTime()));\r\n            var monthEnd = util.addDays(this.parent.calendarUtil.getMonthEndDate(new Date(date.getTime())), -1);\r\n            dateStart = util.resetTime(new Date(monthStart.getTime())).getTime();\r\n            dateEnd = util.resetTime(new Date(monthEnd.getTime())).getTime();\r\n        }\r\n        else {\r\n            if (this.parent.rowAutoHeight) {\r\n                dateStart = util.resetTime(new Date(date.getTime())).getTime();\r\n                dateEnd = util.addDays(util.resetTime(new Date(date.getTime())), 1).getTime();\r\n            }\r\n            else {\r\n                dateStart = dateEnd = util.resetTime(new Date(date.getTime())).getTime();\r\n            }\r\n        }\r\n        for (var _i = 0, _a = appointments; _i < _a.length; _i++) {\r\n            var app = _a[_i];\r\n            var appStart = new Date(app[this.fields.startTime].getTime());\r\n            var appEnd = new Date(app[this.fields.endTime].getTime());\r\n            if (this.parent.activeViewOptions.orientation === 'Vertical' &&\r\n                this.parent.activeViewOptions.group.resources.length > 0) {\r\n                if ((util.resetTime(appStart).getTime() >= dateStart)\r\n                    && (util.resetTime(appEnd).getTime() <= dateEnd)) {\r\n                    appointmentsList.push(app);\r\n                }\r\n            }\r\n            else {\r\n                if (this.parent.rowAutoHeight && (util.resetTime(appStart).getTime() <= dateStart)\r\n                    && (util.resetTime(appEnd).getTime() >= dateEnd)) {\r\n                    appointmentsList.push(app);\r\n                }\r\n                if (!this.parent.rowAutoHeight && (util.resetTime(appStart).getTime() <= dateStart)\r\n                    && (util.resetTime(appEnd).getTime() >= dateEnd)) {\r\n                    appointmentsList.push(app);\r\n                }\r\n            }\r\n        }\r\n        return appointmentsList;\r\n    };\r\n    YearEvent.prototype.removeCellHeight = function () {\r\n        var elementSelector = \".\" + cls.MONTH_HEADER_WRAPPER + \" tbody tr,.\" + cls.RESOURCE_COLUMN_TABLE_CLASS + \" tbody tr,.\" + cls.CONTENT_TABLE_CLASS + \" tbody tr\";\r\n        var rows = [].slice.call(this.element.querySelectorAll(elementSelector));\r\n        for (var _i = 0, rows_1 = rows; _i < rows_1.length; _i++) {\r\n            var row = rows_1[_i];\r\n            row.firstElementChild.style.height = '';\r\n        }\r\n    };\r\n    return YearEvent;\r\n}(TimelineEvent));\r\nexport { YearEvent };\r\n"]},"metadata":{},"sourceType":"module"}